function dffer_day(n,t){var e=n.substring(5,n.lastIndexOf("-")),o=n.substring(n.length,n.lastIndexOf("-")+1),s=n.substring(0,n.indexOf("-")),f=t.substring(5,t.lastIndexOf("-")),i=t.substring(t.length,t.lastIndexOf("-")+1),r=t.substring(0,t.indexOf("-"));return(Date.parse(e+"/"+o+"/"+s)-Date.parse(f+"/"+i+"/"+r))/864e5}function string_to_date(n){var i=Date.parse(n);return new Date(i)}function getEmailHost(n){var i=n.split("@")[1],t=hash[i];return t||(t="http://mail."+i),t}function EnCryptJsonParams(n,t){var i,u,r,f;return(t=t==undefined&&_justOneKey!=undefined?_justOneKey:"12345^&*()?><QAZ",i=obj2jsonString(n),u=i.length>1e4?1:0,u?(i=i.replaceAll("万","w~").replaceAll("千","q~").replaceAll("百","b~").replaceAll("十","s~").replaceAll("个","g~"),f=new JSZip,f.file("betcontent.txt",i),r=f.generate({compression:"DEFLATE"})):r=JsEncryptHelper.Encrypt(t,i),gl!=undefined&&gl.isDebug)?{info:r,hasZip:u,copyParam:i}:{info:r,hasZip:u}}function ShowDialog(n,t,i,r){var e,f,u;if(i||(i=800),r||(r=600),e=(window.screen.height-r)/2,f=(window.screen.width-i)/2,!t&&ctx.isIE())u=document.getElementById("kefuA"),u.href=n,u.click();else try{window.showModelessDialog(n,window,"dialogHeight: "+r+"px; dialogWidth: "+i+"px;dialogTop: "+e+"; dialogLeft: "+f+"; resizable: yes; status: yes;scroll:no")}catch(o){window.open(n,"_blank","height="+r+", width="+i+", scrollbars=yes,resizable=1,modal=false,alwaysRaised=yes")}}function CalcRemainder(n,t){for(var r=1,i=t;parseInt(i)!=i;)r*=10,i=t*r;return n*r%i/r}function GetCountDownSum(n){for(var i=0,t=1;t<=n;t++)i+=t;return i}function ComputeCombinationsVariations(n,t){var i=0,r;if(t==6){if(n<3)return 0;for(r=1;r<=n-2;r++)i+=GetCountDownSum(r);return i*6}return t==3?n<2?0:(i=GetCountDownSum(n-1),i*6):t==2?n<2?0:(i=GetCountDownSum(n-1),i*2):0}function copy_to_clipboard(n){var i,t,u;if(window.clipboardData)window.clipboardData.clearData(),window.clipboardData.setData("Text",n);else if(navigator.userAgent.indexOf("Opera")!=-1)window.location=n;else if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(e){return alert("被浏览器拒绝！n请在浏览器地址栏输入' '并回车n然后将'signed.applets.codebase_principal_support'设置为'true'"),!1}if(i=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard),!i)return;if(t=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable),!t)return;t.addDataFlavor("text/unicode");var f={},o={},f=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString),r=n;if(f.data=r,t.setTransferData("text/unicode",f,r.length*2),u=Components.interfaces.nsIClipboard,!i)return!1;i.setData(t,null,u.kGlobalClipboard)}else return alert("复制失败，请手动抄写号码。"),!1;alert("复制成功!")}function GetFormJson(n){var t={},i=n.serializeArray();return $.each(i,function(){t[this.name]!==undefined?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t}function EmailCheck(n){if(n=n.trim(),n.length>128||n.length<6)return alert("邮箱地址{0}不正确".replaceFormat([n])),!1;var t=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return(flag=t.test(n),!flag)?(alert("邮箱地址{0}不正确".replaceFormat([n])),!1):!0}function GetInfoFromTimeStamp(n,t){var e="",f=Math.floor(n/864e5),o,u,s,r,h,i;return f=f<10?"0"+f:f,o=n%864e5,u=Math.floor(o/36e5),u=u<10?"0"+u:u,s=o%36e5,r=Math.floor(s/6e4),r=r<10?"0"+r:r,h=s%6e4,i=Math.round(h/1e3),i=i<10?"0"+i:i,e=f=="00"?u=="00"?t?r+" : "+i:r+"分"+i+"秒":t?u+" : "+r+" : "+i:u+"时"+r+"分"+i+"秒":t?f+"天"+u+" : "+r+" : "+i:f+"天"+u+"时"+r+"分"+i+"秒"}function FormatNumber(n,r){var f,u,e;for(n=n*1,f=n>=0?"":"-",n=Math.abs(n),r=r>=0&&r<=20?r:2,n=parseFloat((n+"").replace(/[^\d\.-]/g,"")).toFixed(r)+"",u=n.split(".")[0].split("").reverse(),e=n.split(".")[1],t="",i=0;i<u.length;i++)t+=u[i]+((i+1)%3==0&&i+1!=u.length?",":"");return r==0?f+t.split("").reverse().join(""):f+t.split("").reverse().join("")+"."+e}function FormatNumberForKc(n,t){var i=FormatNumber(n,4);return t||(i=i.replaceAll(",","")),i=i.substr(0,i.length-2),i.endWith(".00")?i=i.substr(0,i.length-3):i.endWith("0")&&(i=i.substr(0,i.length-1)),i}function GetReadInfoMinSeconds(n,t){var i=n?n.length:0,r;return i<11?2e3:i<18?3e3:i<26?4e3:i<35?5e3:(r=Math.ceil(i/8)*1e3,t&&r>t)?t:r}function NetToJsDateTime(str,format){var dt=eval("new "+eval(str).source);return format?dt.Format(format):dt.Format("yyyy-MM-dd HH:mm:ss")}function TowLenNum(n){return n<10?"0"+n:""+n}function ComStopBubble(){$.browser.msie?window.event.cancelBubble=!0:$.browser.mozilla?arguments.callee.caller.arguments[0].stopPropagation():event.stopPropagation()}function isNumber(n){return typeof n=="number"&&isFinite(n)}function isInt(n){var t=/^[-\+]?\d+$/;return t.test(n)}function isNumber(n){if(isInt(n))return!0;var t=/^[-\+]?\d+\.\d+$/;return t.test(n)}function GetIntRandomNum(n,t,i){var e,f,r,u,s,o;for(i||(i=[]),e=[],f=n;f<=t;f++)e.push(f);return(r=e.dive(i),u=r.length-1,u<0)?n-1:u==0?r[0]:(s=Math.random(),o=Math.round(Math.round(s*u)),r[o])}function deep_clone_obj(n){var i,t;if(typeof n!="object"||n==null)return n;i={};for(t in n)i[t]=clone_obj(n[t]);return i}function obj2jsonString(n){var i=[],t;if(typeof n=="string")return'"'+n.replace(/([\'\"\\])/g,"\\$1").replace(/(\n)/g,"\\n").replace(/(\r)/g,"\\r").replace(/(\t)/g,"\\t")+'"';if(typeof n=="undefined")return"";if(typeof n=="object"){if(n===null)return"null";if(n.sort){for(t=0;t<n.length;t++)i.push(obj2jsonString(n[t]));i="["+i.join()+"]"}else{for(t in n)i.push('"'+t+'":'+obj2jsonString(n[t]));i="{"+i.join()+"}"}return i}return n.toString()}function show_by_screen_height_center(n,t){var u=$(window).scrollTop();if(u!=0||!t){var r=$(window).height(),f=n.height(),i=0;r>=f&&(i=parseInt((r-f)/2)),i>r/5&&(i=parseInt(r/5)),i+=u,n.css({top:i}),n.show()}}function substr_en_chi(n,t,i){var u=/[^\x00-\xff]/g,f,r;if(n.replace(u,"mm").length>t)for(f=Math.floor(t/2),r=f;r<n.length;r++)if(n.substr(0,r).replace(u,"mm").length>=t)return i?n.substr(0,r):n.substr(0,r)+"...";return n}function arg2arr(n,t){return Array.prototype.slice.call(n,t||0)}function htmlEncode(n){return String(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function htmlUnEncode(n){return String(n).replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">")}function DivDrop(){$(".sign_up").mousedown(function(n){$(this).css("cursor","move");var t=$(this).offset(),r=n.pageX-t.left,i=n.pageY-t.top;$(document).bind("mousemove",function(n){$(".sign_up").stop();var u=n.pageX-r,t=n.pageY-i;$(".sign_up").animate({left:u+"px",top:t+"px"},10)})}),$(document).mouseup(function(){$(".sign_up").css("cursor","default"),$(this).unbind("mousemove")})}function unloadEveryTimeObjs(){jQuery.each(jQuery.timer.global,function(n,t){jQuery.timer.remove(t)})}function AddMessage(n,t){var r="/Images/icons/icon120.png",i;t&&(r="ticket-icon t-s-48 ti-"+gl.getKeyForLotteryCode(t)),i=[6,7,13].indexOf(n.MessageType)>-1,serverNotifyBase._add({image:r,title:n.Title,notify:n.Content,timeout:3e5,myData:{date:new Date},buttons:{"查看":function(t,r){$.appAlert({title:n.Title,message:n.Content},"success"),r.$row.trigger("_remove"),i&&MemberUserNews.DecUnReadMsgNum()},"已读":function(n,t){t.$row.trigger("_remove"),i&&MemberUserNews.DecUnReadMsgNum()}}}),i&&MemberUserNews.AddUnReadMsgNum()}function GetRandomNum(n,t){var r=t-n,i=Math.random();return n+Math.round(i*r)}function initSocket(){function t(){i=!0,$.connection.hub.stop()}var n=$.connection.mainHub,i=!1;$.connection.hub.url=SignalrServerUrl+"signalr",$.connection.hub.qs={userName:$("#ServerUserName").val(),userType:$("#ServerUserType").val(),userId:$("#ServerUserId").val(),HostName:HostName},n.client.getMessage=function(n){var t,r,i;n.MessageType==3?typeof ctx.receiveSocketLottery=="function"&&ctx.receiveSocketLottery(n.Title,n.Content):n.MessageType==4?typeof ctx.receiveSocketAward=="function"&&ctx.receiveSocketAward(n.Title,n.Content):n.MessageType==1?n.Title=="派奖"?(t=n.Content.split("|"),t.length>=3&&(r=t[0],i=t[2],refreshGamePoint(),AddMessage({Title:n.Title,Content:i,MessageType:n.MessageType},r))):setTimeout(function(){AddMessage(n),n.Title=="中奖后停止追号"&&refreshGamePoint()},GetRandomNum(1,100)*100):n.MessageType==5||n.MessageType==9||n.MessageType==13?AddMessage(n):n.MessageType==6||n.MessageType==7?(refreshGamePoint(),AddMessage(n)):n.MessageType==12&&typeof ctx.trendReadyNotice=="function"&&ctx.trendReadyNotice(n.Content)},n.client.OffLine=function(n){$.connection.hub.id==n&&$.connection.hub.stop()},n.client.KickUser=function(){$.connection.hub.stop()},$.connection.hub.start({jsonp:!0,transport:["webSockets","longPolling"]}).done(),window.onbeforeunload=t}function alertTip(n,t,i,r){t||(t="KC提醒"),i||(i="warning"),gl.notify._add({title:t,notify:n,speed:10,status:i,timeout:GetReadInfoMinSeconds(n,7e3)}),r&&console.log(n)}function CreateZeroClipboard(n,t,i){var r=ZeroClipboard.clients[n];r&&r.destroyById(),r=new ZeroClipboard.Client(undefined,n),r.setHandCursor(!0),r.addEventListener("load",function(){}),r.addEventListener("mouseOver",function(){var i=document.getElementById(n);r.setText(i.innerHTML)}),r.addEventListener("complete",function(){alertTip("复制成功!","","success")}),r.glue(t,i)}function InitLotteryType(n){gl.isShiShiCai=[1,2,5,6,9,11,13,14,20,29,31].indexOf(n)>-1,gl.isK3=[3,4,12,15,16,17,18,19,27,32].indexOf(n)>-1,gl.is11Xuan5=[10,21,22,23,24,28,30].indexOf(n)>-1}function home_hash_changed(n){var u,e,s,h,r;n||(n="hall"),n=n.toLowerCase();var t="home",f=n,o=$("#window-option");o.show().next().removeClass("ub-index"),$("#content").css({width:"980px"});switch(n){case"hall":o.hide().next().addClass("ub-index");break;case"fail":t="Regist";break;case"success":t="Regist";break;case"lotterys":t="Lottery";break;case"award":t="Award";break;case"activity":t="Activity";break;case"trend":t="trend"}u=null,n.startWith("regist")&&(t="regist"),n.startWith("awarddetail/")&&(t="Award",f="award"),e=!1,n.startWith("member")?(e=!0,t="member"):n.startWith("helper")&&(t="helper"),s=["cqc","tjc","pl3","fc3d","sd11x5","klpk","pk10","jlk3","jsk3","wfc","kck3","kcjs3d","ggc","xjssc","gxk3","ahk3","hubk3","hebk3","shk3","yfc","gd11x5","jx11x5","sh11x5","hlj11x5","bjk3","js11x5","hgffc","heb11x5","yfcnew","yfk3"],_.contains(s,n)&&(t="bet",f="lotterys"),n.indexOf("trend-")!=-1&&(t="trend",f="trend",u=n.replace("trend-",""),n="Detail"),h={partial:1},SetHeaderMenu(f);var i=$("body"),l=$("#loading-page"),c=t=="bet"||t=="trend";c&&gl.loadingPage.show(),r="/{0}/{1}".replaceFormat([t,n]),u&&(r=r+"/"+u),n=n.split("?")[0],ctx.ajax({type:"GET",url:r,async:!1,data:h,beforeSend:function(){i.css("cursor","wait").attr("title","系统正为你奋力加载中..."),t=="member"&&i.tpuiLoading("_show")},complete:function(){i.css("cursor","default").attr("title",""),_.delay(function(){t=="member"&&i.tpuiLoading("_hide"),gl.loadingPage.hide()},500)},success:function(r){var f,l,u,h,a,c,s,o;if(r=="ajax_login")_alert("您的登录已失效，请重新登录！登录失效的原因可能有：1.在其他地方登录;2.当前IP改变; 3.网络不稳定."),location.href="/";else{if(gl.$noticeList&&gl.$noticeList.tpuiMarquee("_destroy"),$("#tmpDialogWrap").empty(),unloadEveryTimeObjs(),f=$("#memberSideBarId"),l=$("#memberSideBarContainer"),unbindGlobalEvents(),e){f.is(":visible")?f.find(".mainbody").html(r):($("#subContainerId").html("").append('<div class="main" id="content"></div>'),f.appendTo("#content").show().find(".mainbody").html(r),delete r),u=n,_.contains(["memberagentbetrecord","memberagentagbetrecord","memberagentfunddetail","memberagentrechargerecord","memberagentwithdrawrecord"],n)?u="memberagentusermanager":_.contains(["MemberAgentApplyOpenAccount".toLowerCase(),"MemberAgentApplyLinkManage".toLowerCase()],n)&&(u="memberagentapplylink"),u.startWith("membertraceorderdetail")||(h=$("#user-menu ul>li ul>li"),h.removeClass("active"),a=h.filter("."+u),a.addClass("active")),c=$("#user-menu"),s=c.find("a[href='#"+u+"']").closest("li.tp-ui-menu-sub-group"),c.find("li.tp-ui-menu-sub-group.tp-ui-active").removeClass("tp-ui-active").find("div.tp-ui-menu-submenu").hide(),s.hasClass("tp-ui-active")||s.addClass("tp-ui-active").find("div.tp-ui-menu-submenu").show();$(".tpui-text.kc-calendar").on("keydown",function(){return!1})}else l.find("#memberSideBarId").length<=0&&(f.find(".mainbody").html(""),f.hide().appendTo(l)),r=t=="bet"?r:'<div class="main" id="content">'+r+"</div>",$("#subContainerId").html(r),delete r;o=$("#nav-toggle-handle"),n=="ggc"?i.attr("class","userbg-ggc"):i.attr("class",""),t=="bet"?o.show():(o.hide(),o.hasClass("active")&&o.click()),t=="bet"?(gl.isDebug?$("title").html("(测试) "+gl.lotteryName+" - K彩"):$("title").html(gl.lotteryName+" - K彩"),n=="ggc"?($("#footer >div").hide(),$("#backtop").show().next().show()):$("#footer >div").show()):gl.title&&(gl.lotteryId=0,gl.title.indexOf("K彩")==-1&&(gl.title+=" - K彩"),gl.isDebug?$("title").html("(测试) "+gl.title):$("title").html(gl.title)),(t=="bet"||n=="memberrecharge"||n=="memberwithdraw")&&gl.hadConect==0&&setTimeout(function(){initSocket(),gl.hadConect=1},1e3)}},error:function(n){n.status==500||n.status==403,window.location.href="/"}})}function unbindGlobalEvents(){$(window).off("resize.cutdownFixedInt").off("scroll.cutdownFixedCheck")}function initMemberBaseControl(){var t=$(".data-table-option"),r=$(".table"),u=$(".tab-base"),n=$(".forms-table"),i=$(".kc-calendar");n.find(".tpui-text").tpuiText(),n.find(".tpui-radio").tpuiRadio(),n.find(".tpui-select").tpuiSelect(),n.find(".tpui-button").tpuiButton(),t.find(".tpui-text").tpuiText(),t.find(".tpui-button").tpuiButton(),t.find(".tpui-select").tpuiSelect(),r.find(".tpui-checkbox").tpuiCheckbox(),u.tpuiTab(),i.cxCalendar({type:"YYYY-MM-DD"});$(".icon-kc-calendar").on("click",function(){var n=$(this).prev().find("input.kc-calendar:first"),t=n.val();n.focus().val(t).cxCalendar(function(n){n.show()})})}function GetPartHtml(n,t,i){var r=EnCryptJsonParams(t);i||(i=$("#memberSideBarId .mainbody")),ctx.ajax({type:"GET",url:n,data:r,beforeSend:function(){$("body").attr("title","系统正为你奋力加载中..."),$("body").tpuiLoading("_show")},complete:function(){$("body").attr("title",""),$("body").tpuiLoading("_hide")},success:function(n){i.html(n)},error:function(n){n.status==500||n.status==403,i.html(n.responseText)}})}function SetHeaderMenu(n){var i=$("div#nav"),t=i.find("a[href='#"+n+"']");t&&(i.find("li.current").removeClass("current"),t.parent().addClass("current"))}function CheckNumInput(){$("input[type=text]").live("change",function(){var n=$(this),i=n.val(),t;(n.hasClass("myNumClass0")||n.hasClass("trace-text")||n.hasClass("tpui-number")||n.hasClass("betting-multiple"))&&(t=i.replace("-",""),isNumber(i)?isInt(i)||(t=parseInt(t*1)):n.val(1),t*1==0&&(t=1),i!=t&&n.val(t),n.trigger("changekc"))})}function refreshGamePoint(n,t){if(gl.isLogined){var i=$("#userGamePointId");n==undefined?ctx.postToken("/Home/GetUserGamePointData",{},function(r){n=r.GamePoint.toFixedNum(3),i.attr("data",n),i.text()!="已隐藏"&&i.text(n),t||alertTip("游戏分数已刷新！")}):(i.attr("data",n),i.text()!="已隐藏"&&i.text(n))}}function RefreshUserAgPoint(){if(hasSubmit)return!1;$("#sum-refresh").css("cursor","wait"),hasSubmit=!0,ctx.postTokenEx({url:"/member/RefreshAGandGamePoint",data:{},success:function(n){refreshGamePoint(n.GamePoint),$("#userAgPoint").html(n.AgPoint),hasSubmit=!1,$("#sum-refresh").css("cursor","pointer")}})}function OpenGamePointTranform(){var n=$("#sum-parse-inner");n.tpuiDialog({scrollLock:!0,width:520,maskClose:!1}),n.tpuiDialog("_open"),$("#transformGamePoint").val("100"),$("#gamePoint").html($("#userGamePointId").attr("data")),$("#agPoint").html($("#userAgPoint").html())}function openagwin(n){n||(n="/ag/openaggame");var i=Math.round((window.screen.width-1024)/2),t=Math.round((window.screen.height-596)/2);window.open(n,"newwindow","height=596, width=1024, top="+t+",left="+i+",toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no")}function init_betAssit(n,t){var r,i;gl.betAssist=null,gl.betAssist={},gl.betAssist.headerToggle=new HeaderToggle,gl.betAssist.headerToggle.init(),gl.betAssist.lotteryStickie=new LotteryStickie,gl.betAssist.lotteryStickie.init(),gl.betAssist.newBonus=new NewBonus,gl.betAssist.newBonus.init(),gl.betAssist.numStat=new BonusNumStatInfo(n),gl.betAssist.numStat.init(),gl.betAssist.userFav=new UserBetFav(n,t),gl.betAssist.userFav.init(),ctx.trendReadyNotice={},r=function(n){gl.lotteryId==n&&gl.betAssist.numStat.reloadData(function(){var n=gl.betAssist.numStat.k3SumStatData;gl.isK3&&gl.betAssist.newBonus.renderK3SumStat(n)})},gl.lotteryId!=EnumLotteryType.ggc&&(i=gl.lotteryId+";"+gl.betAssist.numStat.packChartTypes(),ctx.postTokenEx({url:"/Bet/GetBetAssistData/"+i,data:{},success:function(n){n.Ok==1?($.extend(gl.betAssistData,n.Data),gl.betAssist.numStat.loadData(),gl.betAssist.userFav.loadData(),gl.betAssist.newBonus.renderK3SumStat(gl.betAssistData.k3SumStat)):n.Ok==0?alert(n.Tip):alert("加载遗漏及收藏数据失败！"),ctx.trendReadyNotice=r}}))}function GetBetPriceValue(n){var t=0;return t=n&&n.priceMode!=undefined?n.priceMode:gl.priceMode,t==0?1:t==1?.1:t==2?.01:.001}function GetBetPriceMode(n){return n=="元"?0:n=="角"?1:n=="分"?2:3}function GetBetPriceModeHtml(n){var t=0;return t=n&&n.priceMode!=undefined?n.priceMode:gl.priceMode,'<i pricevalue="{0}">{1}</i>'.replaceFormat([GetBetPriceValue(n),t==0?"元":t==1?"角":t==2?"分":"厘"])}function checkDistinct(n,t){var u=t.parent().find(".active"),r=u.attr("distinct"),i;return r&&r!="0"?(i=n.replaceAll(" ",",").split(","),i=_.uniq(i),i.length>=parseInt(r)):!0}function isRenXuanTypeId(n){return n==109||n==209||n==909||n==1409||n==1109||n==2009||n==2909||n==3109}function isWuXingTypeId(n){return n==101||n==201||n==901||n==1401||n==1101||n==2001||n==2901||n==3101}function init_betComm(n){function o(){return $totalAmount.text().replaceAll(",","")*1}function si(n){return gl.isShiShiCai&&(n=="五星直选"||n=="五星单式"||n=="组选120"||n=="组选60"||n=="组选30"||n=="组选20"||n=="组选10"||n=="组选5"||n=="任四直选"||n=="任四单式")}function f(){gl.needTrace&&$(".trace-checkbox.checked").each(function(){var n=$(this).closest("tr"),t=n.find(".traceTimes");t.attr("disabled","disabled"),t.parent().parent().addClass("tp-ui-form-disabled"),$(this).removeClass("checked").removeAttr("checked"),n.find("td>div.tp-ui-checkbox.tp-ui-active").removeClass("tp-ui-active"),t.val(1),n.find(".traceUnitPrice").html("0.00"),n.find(".jiLeiAmount").html("--"),n.find(".jiLeiProfit").html("--"),n.find(".jiLeiProfitPercent").html("--"),d.text("0.00")})}function ii(t){function et(){var n,t,i;u!="stop"&&(n=+new Date,t=Math.abs(n-w),gl.testLog&&console.log("cTime:"+String(n)+" lotteryGetTime:"+String(new Date(w).Format("mm:ss"))+" passTime:"+String(t)+" countUpTime:"+String(s)+" passTime - countUpTime:"+String(t-s)),i=!0,ft&&(e!=0&&(gl.testLog&&console.log("lastcTime:"+String(e)+" ："+String(n)+" :"+String(n-e)),n-e>1800&&n-e<2200&&(i=!1)),e=n),i&&t-s>2e3&&(gl.testLog&&console.log("----------getIssueNumberAndTimeInfo----------"),c()))}function it(n){return}function c(){var t="/bet/GetScheduleAndIssueNumber/"+n+"?r="+Math.random();ctx.postTokenEx({url:t,beforeSend:function(){u=undefined,i=undefined,r=undefined,l(0)},success:function(n){n.stop_schedule==1?location.href="/":(a=!1,d=0,u=n.issue_number,i=n.differ*1e3,r=n.advance*1e3,ht=i+r,w=+new Date,b=n.preIssueNumber,k=n.nextIssueNumber,h=n.oneIssueTime*1e3,y.html(u),rt.html(b),gl.betAssist.newBonus.waitingBonus({preBonusNumber:"-",preIssueNumber:b}),s=0,i<0?r=i+r:it(0),l(0),g||(g=$("body").everyTime(1e3,"cqc_bet_countdown_interval",function(){s+=1e3,et(),l(1e3)})))}})}function v(n){for(var u="",o="",r=Math.floor(n/36e5),e,r=r<10?"0"+r:r,s=n%36e5,i=Math.floor(s/6e4),i=i<10?"0"+i:i,h=s%6e4,t=Math.round(h/1e3),t=t<10?"0"+t:t,u=r=="00"?i+":"+t:r+":"+i+":"+t,f=0;f<u.length;f++)e=u[f],o+=e==":"?'<li class="cb-dot"><span>:</span></li>':'<li class="cb-'+e+'"><span>'+e+"</span></li>";ut.html(o),ot.html(u)}function l(n){if(u=="stop"){d++,d==60&&c();return}if(u==undefined){y.html("正在获取奖期..."),rt.html("正在获取奖期..."),p.html("正在获取奖期...");return}if(i!=undefined&&(i=i-n,st.html(u),i<0?(i=undefined,o.css("color","red"),v(0)):(o.html("剩余投注时间"),p.html(GetInfoFromTimeStamp(i+r,1)),i<1e4?o.css("color","red"):o.css("color","#999"),v(i)),((gl.lotteryId==EnumLotteryType.yfc||gl.lotteryId==EnumLotteryType.yfcnew||gl.lotteryId==EnumLotteryType.yfk3)&&i>=5e3&&i<6e3||gl.lotteryId!=EnumLotteryType.yfc&&i>=8e3&&i<9e3)&&t(u,i,k)),i==undefined&&r!=undefined)if(r=r-n,r<0)r=undefined,gl.betAssist.newBonus.waitingBonus({preBonusNumber:""}),c(1);else{y.html(k),h=h-n,v(h),o.css("color","#999");var e=GetInfoFromTimeStamp(r,1);p.html(e),a||(it(1),gl.needTrace&&(nt.find("tr[IssueNumber="+u+"]").remove(),gl.bet.betMode!=0&&alertTip("当前期投注时间结束，请追号到下一期!","追号提醒"),f()),a=!0)}}var g,w,s,r,u,i,ht,b,ct,k,h,d=0,e=0,ft=window.navigator.userAgent.indexOf("Chrome")!==-1,p=$("#allTimeContainerId"),y=$("#curIssueNumberId"),rt=$("#preIssueNumberId"),ut=$("#timeContainerId"),ot=$("#leftTimeContainerId"),o=$(".remainTitleClass"),tt=$("#drawing-locker"),st=$("#curBonusIssueId"),a=!1;c()}function ri(n,t){var i=t.split("|");if(i.length>=3){var r=i[0],f=i[1],u=i[2];r==gl.lotteryId&&gl.betAssist.newBonus.refleshLotteryHistory(i)}}function ti(n,t){var i,r;return}function dt(){var u,t,f=!1,n=0,i=0,r="";$(".betTypeClass").each(function(){if(u=$(this).attr("bettype"),u&&(t=ni(gl.rules,u),t&&t.length>0)){f=!1,n=0;for(var e=0;e<t.length;e++)i=t[e].UserOdds*1+t[e].UserPlusOdds*1,n==0?n=i:n<i&&(f=!0,n=i);n=n*gl.price,n=n.toFixedNum(2),r=f?"最高奖金<br>￥"+n:"奖金<br>￥"+n,$(this).find("em").html(r)}})}function ni(n,t){for(var u=n.length,i=[],r=0;r<u;r++)t==parseInt(n[r].SubTypeId/100)&&(i[i.length]=n[r]);return i.length==0&&(i=null),i}var e,tt,y,kt,p,lt,yt,pt,v,vt,at,i,ot,g;$betPanel=$(".betting-checker-panel"),$selectNumsContainer=$("#selectNumsContainerId"),$selectNumsBody=$("#bof-table-base div.body"),$singleNumberInput=$("#singleNumberInput"),$submitBtn=$("#bettingBtn"),$betMode=$('#trace-number .head input[name="order-config"]'),$totalBets=$("#totalBetsId"),$totalTimesInput=$("#totalTimesInput"),$totalTimesSpan=$("#totalTimesSpan"),$totalAmount=$("#totalAmountId"),$priceMode=$("#priceModeId>li"),$limoshiId=$("#limoshiId"),InitLotteryType(n),gl.needTrace=[5,6].indexOf(n)<0,gl.needTrace=gl.needTrace&&n!=EnumLotteryType.ggc,gl.bet={betMode:0},gl.priceMode=0,$priceMode.bind("click",function(){var n=$(this).attr("pricemode");n!=$priceMode.filter(".active").attr("pricemode")&&($priceMode.removeClass("active"),$(this).addClass("active"),gl.priceMode=n,BetNumberAndProfitLossHelper.Compute())}),$.bettingBase(),$("#clearBetItemsId").bind("click",function(){$selectNumsContainer.html(""),e(1),f()}),e=function(n){var i=0,r=0,t;$selectNumsContainer.find(".bof-tb-total-price>em>i").each(function(){i+=$(this).text()*1}),n&&($selectNumsContainer.find(".bof-tb-count>em").each(function(){r+=$(this).text()*1}),$totalBets.html(r)),t=$totalTimesInput.val(),(!isInt(t)||t<=0)&&(t=1),i*=t*1,$totalAmount.html(i.toFixedNum(3)),gl.bet.betMode!=0&&(a(1),i==0&&f())},init_betAssit(n,e);var r=$(".betTypeClass"),ft=$(".bcp-type-base"),c=$(".betRuleClass"),ut=$("#betRuleTip"),rt=$("#betRuleTipExample"),k=$(".bc-sub"),gt=$(".numBallClass"),it=$(".bcp-base"),w=$(".bcp-clipboard"),ci=w.find("dd"),b=$("#betting-type-nav>ul"),l=$(".betTypeClass[isfun=0]"),s=$(".betTypeClass[isfun=1]"),u=$(".bc-config");if(b.find("li>a").die("click").live("click",function(){var n;$(this).text()=="趣味"?(b.html('<li><a href="javascript:void(0);">常规</a></li><li><span>趣味</span></li>'),l.hide(),n="b-column b-column-"+s.length,s.show().parent().attr("class",n),gl.isShiShiCai?s.eq(s.length-1).trigger("click"):gl.lotteryId==8?s.eq(1).trigger("click"):s.eq(0).trigger("click")):(b.html('<li><span>常规</span></li><li><a href="javascript:void(0);">趣味</a></li>'),s.hide(),n="b-column b-column-"+l.length,l.show().parent().attr("class",n),gl.isShiShiCai?l.eq(1).trigger("click"):l.eq(0).trigger("click"))}),r.click(function(){var i=$(this),t,n;r.removeClass("active"),i.addClass("active"),t=i.attr("bettype"),c.hide(),n=c.filter("[bettype="+t+"]"),n.show().eq(0).trigger("click"),n.length==1?(n.hide(),ft.hide()):ft.show(),isRenXuanTypeId(t)?u.show():u.hide(),BetNumberAndProfitLossHelper.Clear()}),c.click(function(){var e=$(this),l,t,s,f,r,i,o;if(c.removeClass("active"),e.addClass("active"),gt.removeClass("active"),l=e.attr("isfun")=="1",l)w.hide(),it.show(),r=e.attr("betsubtype"),gl.betAssist.ruleId=r,i=gl.tipDict[r],k.hide(),k.filter("[panelindex="+r+"]").show().find(".showStatisticsClass").show(),ut.html(i[0]),rt.html(i[1]);else{var h=e.attr("betrule"),r=parseInt(h/100),i=gl.tipDict[r];if(gl.betAssist.ruleId=h,t=GetDataDetailById(h,gl.rules,"RuleId"),si(t.RuleName)||$limoshiId.hide(),t.RuleName=="组选60"||t.RuleName=="组选30"?($(".bc-sub").filter("[panelindex=6]").find(".title>span").html("二同号"),$(".bc-sub").filter("[panelindex=7]").find(".title>span").html("单号")):t.RuleName=="组选20"?($(".bc-sub").filter("[panelindex=6]").find(".title>span").html("三同号"),$(".bc-sub").filter("[panelindex=7]").find(".title>span").html("单号")):t.RuleName=="组选10"?($(".bc-sub").filter("[panelindex=6]").find(".title>span").html("三同号"),$(".bc-sub").filter("[panelindex=7]").find(".title>span").html("二同号")):t.RuleName=="组选5"&&($(".bc-sub").filter("[panelindex=6]").find(".title>span").html("四同号"),$(".bc-sub").filter("[panelindex=7]").find(".title>span").html("单号")),k.hide(),t.NumPanel=="100")it.hide(),w.show(),ci.html(i[1]),$(".bcp-option>.statistic").hide();else{for(w.hide(),it.show(),ut.html(i[0]),rt.html(i[1]),s=t.NumPanel.split(","),f=0;f<s.length;f++)$(".bc-sub[panelindex="+s[f]+"]").show().find(".showStatisticsClass").show();$(".bcp-option>.statistic").show()}}gl.isShiShiCai?(o=u.find(".tp-ui-active"),o.find("input").removeAttr("checked"),o.removeClass("tp-ui-active")):(gl.isK3||n==8)&&rt.css("min-width",210),gl.betAssist.numStat.displayStatPanel(gl.betAssist.ruleId).showStatInfo(gl.betAssist.ruleId,gl.betAssist.statConf),gl.lotteryId==EnumLotteryType.ggc&&($(".numBallClass.active").removeClass("active"),$("#totalTimesInput").val(5),$("#totalAmountId").html("0.00"),$("#betting-history>.cont-head").hide()),$singleNumberInput.val(""),BetNumberAndProfitLossHelper.Clear()}),tt=0,gl.isShiShiCai&&(u.find("input[name=checker-config]").tpuiCheckbox(),u.find("li input").bind("change",function(){BetNumberAndProfitLossHelper.Compute()}),tt=1),y=gl.cookie.lastLotteryBetType[gl.lotteryId],y?(kt=r.filter("[bettype="+y+"]"),kt.is(":visible")||b.find("li>a").trigger("click"),r.filter("[bettype="+y+"]").trigger("click")):r.eq(tt).trigger("click"),p=$("#voice-toggle a"),gl.cookie.closeVoice==1?p.addClass("active"):p.removeClass("active"),p.click(function(){$(this).toggleClass("active"),$(this).hasClass("active")?gl.cookie.set("closeVoice",1):gl.cookie.set("closeVoice",0),gl.media.closeVoice()}),$(".numBallClass").click(function(){var n=$(this),o=n.find("span").html(),s=c.filter(".active").attr("betrule"),v=n.closest("ul"),h=r.filter(".active"),l=h.attr("single"),u=h.attr("norepeat"),a=u=="1"||u=="2"&&s.substr(s.length-4)!="0101",t,i,f,e;if(a&&(t=!1,k.find("li.active").find("span").each(function(){if($(this).html()==o&&!$(this).closest("li").is(n)){n.removeClass("active"),t=!0;return}}),t)){alertTip("不能选择重复号码:["+o+"]","选号提醒");return}l=="1"?(i=v.find(".numBallClass.active"),i.removeClass("active"),i.is(n)||n.addClass("active")):(gl.isK3&&(f=$(this).attr("ethindex"),e=$(this).hasClass("active"),$("[ethindex='"+f+"']").removeClass("active"),e&&n.addClass("active")),n.toggleClass("active")),BetNumberAndProfitLossHelper.Compute()}),$(".bc-sub .option>ul>li").click(function(){var r=$(this),i=r.closest(".bc-sub").find(".numBallClass"),u=r.attr("otype"),t,n;if(u=="clear")i.removeClass("active");else for(i.removeClass("active"),t=0;t<i.length;t++){n=i.eq(t);switch(u){case"all":n.hasClass("active")||n.trigger("click");break;case"big":t>4&&(n.hasClass("active")||n.trigger("click"));break;case"small":t<=4&&(n.hasClass("active")||n.trigger("click"));break;case"single":gl.lotteryId==8||gl.is11Xuan5?t%2==0&&(n.hasClass("active")||n.trigger("click")):t%2==1&&(n.hasClass("active")||n.trigger("click"));break;case"double":gl.lotteryId==8||gl.is11Xuan5?t%2==1&&(n.hasClass("active")||n.trigger("click")):t%2==0&&(n.hasClass("active")||n.trigger("click"))}}BetNumberAndProfitLossHelper.Compute()}),$selectNumsContainer.find(".betting-multiple").die("changekc").live("changekc",function(){var n=$(this).closest("li"),r=n.find(".betting-multiple").val(),u=n.find(".bof-tb-method>i").attr("pricevalue"),t=gl.price,i=n.find(".bof-tb-count>em").text();n.find(".bof-tb-total-price i").html((r*t*i*u*1).toFixedNum(3)),e()}),$totalTimesInput.bind("changekc",function(){e()}),$selectNumsContainer.find(".bof-tb-option").die("click").live("click",function(){$(this).closest("li").remove(),e(1)}),lt=[113,213,913,1113,1413,2013,2913,505,506,507,508,605,606,607,608,1305,1306,1307,1308,811,813,1015,2115,2215,2315,2415,2815,3015,3113],yt=[3,4,7,12,15,16,17,18,19,27,32],$("#addBettingNumberId").click(function(){var curSelNums,tmpInput,len,nums,newInput,arr,chars,strs,i,fLen,allowMaxLen,allSelNums,hasAlert,tmp,mTempAllNums,prefix,renXuanCount,ruleSubName,checks,item,$allSels,parseSelNum,k,ruleObj,tmpHtml,subSelectedRegex,betNum,html,betItemCount;if(gl.bet.betMode!=0&&$selectNumsContainer.find("li").length>=1)return alert("一次追号只允许一条投注项！"),!1;var $curRule=$(".betRuleClass.active"),$curBetType=r.filter(".active"),curBetTypeId=$curBetType.attr("bettype"),isFun=$curRule.attr("isfun")=="1",ruleId,selList=[];if(!isFun||isFun&&$(".betRuleClass:visible").length==0&&yt.indexOf(n)==-1&&lt.indexOf(curBetTypeId)==-1){isFun?isFun&&$(".betRuleClass:visible").length==0&&(ruleId=$curRule.attr("betsubtype")+"01"):ruleId=$curRule.attr("betrule");var typeId=parseInt(ruleId/1e4),ruleObj=GetDataDetailById(ruleId,gl.rules,"RuleId"),selectedRegex="/"+ruleObj.SelectedRegex+"/";if(ruleObj.MatchType.indexOf("单式")!=-1){if(curSelNums=$singleNumberInput.val().replaceAll("；",";").replaceAll("，",",").replaceAll(" "," ").replaceAll("\t"," ").trim(),gl.isShiShiCai){for(curSelNums=curSelNums.replaceAll(",",""),tmpInput="",len=curSelNums.length,i=0;i<len;i++)tmpInput+=isInt(curSelNums[i])&&i+1<len&&isInt(curSelNums[i+1])?curSelNums[i]+",":curSelNums[i];curSelNums=tmpInput}else{for(curSelNums=curSelNums.replaceAll(" ",","),nums=curSelNums.split(/[*;\n]+/),newInput=[],i=0;i<nums.length;i++)arr=[],chars=nums[i].split(","),_.each(chars,function(n){var t=$.trim(n);t.length==1?arr.push("0"+t):arr.push(t)}),newInput.push(arr.join(","));curSelNums=newInput.join(";")}if(curSelNums.length==0)return alert("号码输入不能为空 -_-!!"),!1;if(strs=curSelNums.split(/[ *;\n]+/),strs.length>1e4)return alertTip("单式最多支持10000注，你目前投了"+strs.length+"注"),!1;var numInfoIndex=0,allSingleNums="",singleBetCount=0,singleStr="",mRenXuanWeiBeiShu=-1,mRenXuanPrefix="";for(isRenXuanTypeId(typeId)&&(u.find(".tp-ui-active").each(function(){mRenXuanPrefix+=$(this).parent().find("h4").text().substr(0,1)}),mRenXuanWeiBeiShu=ComputeBetTotalNumber.ComputeNumber_SSC_RenXuanWeiBeiShu(ruleObj,mRenXuanPrefix),mRenXuanPrefix="("+mRenXuanPrefix+")"),i=0;i<strs.length;i++)if(tmp=strs[i],tmp!=""){if(numInfoIndex++,tmpHtml=tmp,isRenXuanTypeId(typeId)){if(!eval(selectedRegex).test((mRenXuanPrefix+tmpHtml).replace("(","<").replace(")",">")))return alertTip("第{0}个号码[{1}]输入格式错误了或者任选位数选择错误，请参考玩法提示!".replaceFormat([numInfoIndex,tmp])),!1}else if(!eval(selectedRegex).test(tmpHtml))return alertTip("第{0}个号码[{1}]输入格式错误了，请参考玩法提示!".replaceFormat([numInfoIndex,tmp])),!1;allSingleNums+="|"+tmpHtml,singleStr=tmpHtml,mRenXuanWeiBeiShu>-1?singleBetCount+=mRenXuanWeiBeiShu:singleBetCount++}if(allSingleNums=allSingleNums.substr(1),!isRenXuanTypeId(typeId)&&gl.isShiShiCai&&ruleObj.RuleName.indexOf("混选")!=-1&&(allSingleNums="|"+allSingleNums,allSingleNums=allSingleNums.replace(/\|0,0,0/g,""),allSingleNums=allSingleNums.replace(/\|1,1,1/g,""),allSingleNums=allSingleNums.replace(/\|2,2,2/g,""),allSingleNums=allSingleNums.replace(/\|3,3,3/g,""),allSingleNums=allSingleNums.replace(/\|4,4,4/g,""),allSingleNums=allSingleNums.replace(/\|5,5,5/g,""),allSingleNums=allSingleNums.replace(/\|6,6,6/g,""),allSingleNums=allSingleNums.replace(/\|7,7,7/g,""),allSingleNums=allSingleNums.replace(/\|8,8,8/g,""),allSingleNums=allSingleNums.replace(/\|9,9,9/g,""),allSingleNums=allSingleNums.substr(1),singleBetCount=allSingleNums.split("|").length,!allSingleNums||singleBetCount==0))return alert("智能过滤豹子号后，输入的号码为空 -_-!!"),!1;if(fLen=mRenXuanPrefix.length+allSingleNums.length,allowMaxLen=Math.pow(10,ruleObj.Length)*.8,mRenXuanWeiBeiShu>-1&&allowMaxLen<singleBetCount/mRenXuanWeiBeiShu||mRenXuanWeiBeiShu==-1&&allowMaxLen<singleBetCount)return alertTip("当前单式最多可投"+allowMaxLen+"注，你目前投了"+singleBetCount+"注"),!1;if(singleBetCount>1e4)return alertTip("单式最多支持10000注，你目前投了"+singleBetCount+"注"),!1;if(fLen>21e3){var fNumsAttr=allSingleNums.split(/[|]/),fOneCount=parseInt((21e3-mRenXuanPrefix.length*3)/(singleStr.length+1)),fTimes=parseInt(singleBetCount/fOneCount),fLastCount=singleBetCount-fOneCount*fTimes,fSelNums,fItem;for(k=0;k<fTimes;k++)fSelNums=mRenXuanWeiBeiShu>-1?mRenXuanPrefix+fNumsAttr.slice(k*fOneCount,(k+1)*fOneCount).join("|"):fNumsAttr.slice(k*fOneCount,(k+1)*fOneCount).join("|"),fItem={ruleId:ruleId,ruleName:ruleObj.DisplayName,selNums:fSelNums,subSelNums:fSelNums.maxShow(12),price:gl.price,betNum:fOneCount,jsOdds:ruleObj.UserOdds*1+ruleObj.UserPlusOdds*1,itemTimes:1},selList.push(fItem);fLastCount>0&&(fSelNums=mRenXuanWeiBeiShu>-1?mRenXuanPrefix+fNumsAttr.slice(singleBetCount-fLastCount).join("|"):fNumsAttr.slice(singleBetCount-fLastCount).join("|"),fItem={ruleId:ruleId,ruleName:ruleObj.DisplayName,selNums:fSelNums,subSelNums:fSelNums.maxShow(12),price:gl.price,betNum:fLastCount,jsOdds:ruleObj.UserOdds*1+ruleObj.UserPlusOdds*1,itemTimes:1},selList.push(fItem))}else allSingleNums=mRenXuanPrefix+allSingleNums,item={ruleId:ruleId,ruleName:ruleObj.DisplayName,selNums:allSingleNums,subSelNums:allSingleNums.maxShow(12),price:gl.price,betNum:singleBetCount,jsOdds:ruleObj.UserOdds*1+ruleObj.UserPlusOdds*1,itemTimes:1},selList.push(item);$singleNumberInput.val("")}else{if($allSels=$betPanel.find(".numBallClass.active"),$allSels.length<=0)return alert("请先选择号码 -_-!!"),!1;if(allSelNums="",hasAlert=!1,$betPanel.find(".bc-sub:visible").each(function(){var i=$(this).find(".numBallClass.active"),t,n;if(i.length<=0&&ruleObj.MatchType!="定位胆"&&ruleObj.RuleName!="自由双面")return t=$(this).find("div.title>span").text(),alert("[{0}]号码未选择!".replaceFormat([t.substr(0,t.length-1)])),hasAlert=!0,!1;n="",i.each(function(){n+=" "+$(this).find("span:eq(0)").text()}),n=n.substr(1),allSelNums+=","+n}),allSelNums=allSelNums.substr(1),hasAlert)return!1;if(!checkDistinct(allSelNums,r))return alertTip("请选择正确的号码进行投注！"),!1;if(tmp=allSelNums,betNum=0,gl.isShiShiCai?(tmp=allSelNums.replaceAll(" ",""),isRenXuanTypeId(typeId)?(prefix="",u.find(".tp-ui-active").each(function(){prefix+=$(this).parent().find("h4").text().substr(0,1)}),mTempAllNums="("+prefix+")"+allSelNums,betNum=ComputeBetTotalNumber.ComputeNumber(ruleObj,mTempAllNums)):betNum=ComputeBetTotalNumber.ComputeNumber(ruleObj,allSelNums)):betNum=ComputeBetTotalNumber.ComputeNumber(ruleObj,allSelNums),tmpHtml=tmp,isRenXuanTypeId(typeId)&&(prefix="",renXuanCount=0,u.find(".tp-ui-active").each(function(){renXuanCount++,prefix+=$(this).parent().find("h4").text().substr(0,1)}),tmpHtml="("+prefix+")"+tmpHtml,ruleSubName=ruleObj.RuleName.substr(0,2),checks=2,ruleSubName=="任三"?checks=3:ruleSubName=="任四"&&(checks=4),renXuanCount<checks))return alertTip(ruleSubName+"至少需选择"+checks+"位位数!"),!1;if(!eval(selectedRegex).test(tmpHtml.replace("(","<").replace(")",">")))return alertTip("选号有误哦，请参考玩法提示!"),!1;item={ruleId:ruleId,ruleName:ruleObj.DisplayName,selNums:tmpHtml,subSelNums:tmpHtml.maxShow(12),price:gl.price,betNum:betNum,jsOdds:ruleObj.UserOdds*1+ruleObj.UserPlusOdds*1,itemTimes:1},selList.push(item)}}else{if(($allSels=$betPanel.find(".numBallClass.active"),$allSels.length<=0)||(parseSelNum=function(n,t){for(var t=t||n.attr("ruleid"),u=n.find("span:eq(0)").text(),r,f,i=0;i<selList.length;i++)selList[i].ruleId==t&&(u=selList[i].selNums+" "+u,selList.pop(selList[i]));r=GetDataDetailById(t,gl.rules,"RuleId"),f={ruleId:t,ruleName:r.DisplayName,selNums:u,subSelNums:u.maxShow(12),price:gl.price,betNum:1,jsOdds:r.UserOdds*1+r.UserPlusOdds*1,itemTimes:1},selList.push(f)},curBetTypeId=="813"?$("#n2n-panel").find("li.active").each(function(){var n=$(this).attr("ruleid");$allSels.each(function(){var t=$(this);t.hasClass("notSelNum")||parseSelNum(t,n)})}):$allSels.each(function(){var n=$(this);parseSelNum(n)}),selList.length<=0))return alert("请先选择号码 -_-!!"),!1;for(k=0;k<selList.length;k++){if(ruleObj=GetDataDetailById(selList[k].ruleId,gl.rules,"RuleId"),ruleObj.RuleName=="二同号单选"&&(tmpHtml=selList[k].selNums,selList[k].selNums=(tmpHtml.substring(0,tmpHtml.indexOf("s")-1)+","+tmpHtml.substring(tmpHtml.indexOf("s"),tmpHtml.length)).replaceAll("s",""),selList[k].subSelNums=selList[k].selNums.maxShow(12)),subSelectedRegex="/"+ruleObj.SelectedRegex+"/",!eval(subSelectedRegex).test(selList[k].selNums))return alertTip("选号有误哦，请参考玩法提示!"),!1;betNum=ComputeBetTotalNumber.ComputeNumber(ruleObj,selList[k].selNums),selList[k].betNum=betNum}}html=_selectNumsTmpl({data:selList}),$selectNumsContainer.append(html),$("input.betting-multiple").tpuiNumber({type:"depart"}),$selectNumsBody.scrollTop(100),e(1),gl.lotteryId==EnumLotteryType.ggc?(gl.bet.ggcBonusMode=="now"&&(BetNumberAndProfitLossHelper.Clear(),betItemCount=$selectNumsContainer.find("li").length,betItemCount>1),gl.ggc.reFillTopScratch(),$submitBtn.click()):BetNumberAndProfitLossHelper.Clear(),gl.lotteryId==EnumLotteryType.ggc&&gl.bet.ggcBonusMode=="later"||$allSels&&$allSels.removeClass("active")}),pt=$("#randomSelNumInput"),v=$("#randomSelBtn"),v.bind("click",function(){if(gl.bet.betMode!=0&&$selectNumsContainer.find("li").length>=1)return alertTip("一次追号只允许一条投注项！"),!1;gl.lotteryId==EnumLotteryType.ggc&&$selectNumsContainer.empty(),BetPauseHelper.doPause(pt.val()),e(1),gl.lotteryId==EnumLotteryType.ggc&&(gl.bet.ggcBonusMode="later",gl.ggc.reFillTopScratch(),$submitBtn.click())}),vt=$("#hadCheckedWeiTuoId"),at=function(){function t(n){var i=/^[0-9]{0,6}$/,t;return n===""||!i.exec(n)||parseFloat(n)==0?t="倍数最多6位正整数!":""}$submitBtn.bind({click:function(){var w,v,k,h,b,c,e,y,i;if(!vt[0].checked)return alert("未同意《投注协议》!"),!1;if(w=parseFloat($.trim($("#userGamePointId").html())),w<=0)return alert("游戏分数已用完，请先充值！"),!1;if(v=!1,k=$(this).hasClass("locked"),k)return gl.userInfo.ReturnPoint>.128?alert("只有1956以下的玩家才可以投注！"):alert("本期投注已经结束，请稍后投注到下一期中！"),!1;var l=[],nt=$selectNumsContainer.find("li"),a="",s="";for(h=0;h<nt.length;h++){var u=$(nt[h]),g=u.find(".betting-multiple").val(),tt=t(g);if(tt!="")return u.find(".betting-multiple").focus(),alert(tt),!1;a+=" "+u.find(".bof-tb-mode").text();var it=u.find(".bof-tb-method>i"),ut=it.attr("pricevalue"),rt=$.trim(it.html()),p={ruleId:u.attr("ruleid"),betNum:u.find(".bof-tb-count>em").text(),itemTimes:g*ut,selNums:u.find(".bof-tb-number").attr("allnums"),jsOdds:u.attr("jsodds"),priceMode:GetBetPriceMode(rt)};l.push(p),gl.isK3||(b=GetDataDetailById(p.ruleId,gl.rules,"RuleId"),p.betNum*100/b.Modulus<=2&&(s+=","+(h+1)))}if(l.length<=0)return alert("没有可提交的投注项!"),!1;if(s!=""&&(s=s.substr(1),_alert("注意:第"+s+" 项投注项属于单挑限红模式。若中奖，平台最高赔付3万人民币，超过部分平台将手动扣除，如有疑问请咨询在线客服！")),c=$("#curIssueNumberId").text(),c=="正在获取奖期...")return alert("正在获取奖期，请稍后再试!"),!1;if(e=[n,c,$totalTimesInput.val(),l,gl.bet.betMode,1,"",""],gl.lotteryId==EnumLotteryType.ggc&&(e[7]=gl.bet.ggcBonusMode),gl.bet.betMode>0){if(y=[],$(".trace-checkbox.checked").each(function(){var n=$(this).closest("tr"),t={issueNumber:n.attr("issuenumber"),times:n.find(".traceTimes").val()};y.push(t)}),y.length<=0)return alert("您还没有选择当前追号购买方式的追号项!"),!1;e[5]=fi[0].checked?1:0,e[6]=y}i='<div class="module order-base table ta-center">',i+="<table>",gl.lotteryId!=EnumLotteryType.ggc&&(i+="<tr>",i+="<td><span>购买方式：</span></td>",i+='<td><span class="fc-red">{5}</span></td>',i+="<td><span>期号：</span></td>",i+="<td><span>{6}</span></td>",i+="</tr>"),i+="<tr>",i+="<td><span>彩种：</span></td>",i+='<td><span class="fc-blue">{0}</span></td>',i+="<td><span>玩法：</span></td>",i+='<td><span title="{1}">{2}</span></td>',i+="</tr>",i+="<tr>",i+="<td><span>投注项：</span></td>",i+='<td><span class="fc-green">{3} 项</span></td>',i+="<td><span>投注项金额：</span></td>",i+='<td><span class="fc-orgen">{4} 元</span></td>',i+="</tr>",gl.bet.betMode>0&&(i+="<tr>",i+="<td><span>追号期数：</span></td>",i+='<td><span class="fc-green">{7} 期</span></td>',i+="<td><span>追号总金额：</span></td>",i+='<td><span class="fc-orgen">{8} 元</span></td>',i+="</tr>"),i+="</table>",i+="</div>",i=gl.bet.betMode>0?i.replaceFormat([gl.lotteryName,a,a.maxShow(7),l.length,o(),gl.bet.betMode==1?"倍数追号":"高级追号",c,e[6].length,d.text()]):i.replaceFormat([gl.lotteryName,a,a.maxShow(7),l.length,o(),"普通投注",c]),$("<div>").attr({title:"订单确认","data-icon":"order"}).append(i).tpuiDialog({pushTo:"#tmpDialogWrap",autoOpen:!0,onClose:function(){},buttons:{"取消":function(n){n._close(!0)},"提交订单":function(n){if(v)return alert("由于网络延迟，上一次投注还没提交完成。建议继续等待，或者刷新页面从最近投注记录里确认是否已经提交投注！"),!1;ctx.postTokenEx({url:"/Bet/CqcSubmit",data:EnCryptJsonParams(e),beforeSend:function(){if(v=!0,n._close(!0),gl.lotteryId==EnumLotteryType.ggc&&gl.bet.ggcBonusMode=="now"?gl.ggc.waitingBouns():$("body").tpuiLoading("_show"),!gl.isLogined){var r={lotteryId:gl.lotteryId,totalTimes:$("#totalTimesInput").val(),betObjList:e[3]};gl.betAssist.userFav.saveTempFav(JSON.stringify(r))}},complete:function(){v=!1,$("body").tpuiLoading("_hide")},success:function(n){var i,u,t;n.Ok==1?(gl.cookie.lastLotteryBetType[gl.lotteryId]=r.filter(".active").attr("bettype"),gl.cookie.set("lastLotteryBetType",gl.cookie.lastLotteryBetType),refreshGamePoint(n.gamePoint.toFixedNum(3)),$selectNumsContainer.html(""),$totalBets.html("0"),$totalAmount.html("0.00"),i="您的订单已经提交成功，请注意系统通知，祝您游戏愉快！",u="订单提交成功",gl.lotteryId==EnumLotteryType.ggc?(i="您的订单已经提交成功,祝您游戏愉快！",gl.bet.ggcBonusMode=="now"?gl.ggc.topOpenBonus(n.BonusNum,n.BonusTotalNumber,n.BonusAmount,n.BetAmount):alertTip(i,u),gl.renderRecentBetOrderList(n.Orders)):(f(),$.appAlert({useTitle:"投注结果",title:u,message:i},"success"),_recentData=BetOrderDataToArray(n.Orders),t=_recentTmpl({data:_recentData}),$("#recentContainerId").html(t),gl.bet.betMode>0&&(t=_traceListTmpl({data:n.rightTraces}),$("#rightTraceListId").html(t),$("#rightTraceListNoData").hide()))):(gl.lotteryId==EnumLotteryType.ggc&&(gl.ggc.topOpenBonus("",-1,0,2),$selectNumsContainer.html("")),n.Tip.indexOf("游戏分数不够")>-1?$.appConfirm({useTitle:"投注提示",title:"您的游戏分数不够本次投注,是否现在充值?"},function(n){n&&(location.href="#memberrecharge")}):_.delay(function(){$.appAlert({useTitle:"投注结果",title:"订单提交失败",message:n.Tip},"warning")},1e3))}})}}})}})},at(),gl.needTrace){var bt=$("#timesTraceOptionId"),wt=$(".advanceTraceOption"),nt=$("#traceListTableId"),hi=$(".trace-number-table"),h=$("#traceContainerId"),d=$("#traceMoneyId"),fi=$("#traceStopWhenBonusInput"),ei=$(".trace-number-confirm>button"),oi=$("#traceInitInput"),yi=$("#traceSepInput"),pi=$("#traceTimesInput"),wi=$("#traceIssuesInput"),ct=$("#traceAdvanceInitInput"),li=$("#traceLimitRateInput"),ai=$("#traceLimitAmountInput"),vi=$("#myTraceTotalAmountInput"),ui=$("#traceAdvanceIssueInput"),et=$("input[name=trace-radio-a]");h.find(".trace-text").tpuiText(),h.find(".trace-select").tpuiSelect(),h.find(".trace-checkbox").tpuiCheckbox(),h.find(".trace-switch").tpuiSwitch(),i=!1;function a(n,t){var u=0,s=0,a=0,p=o(),f,i,c;if(gl.bet.betMode==2){var e="",v=0,r="",y=0,l=$selectNumsContainer.find("li"),h=l.length;for(gl.bet.difSelItem=0,f=0;f<h;f++)if(i=$(l[f]),e=="")e=i.attr("ruleid"),v=i.attr("jsodds"),r=i.find(".betting-multiple").val(),y=i.find(".bof-tb-method>i").attr("pricevalue");else if(e!=i.attr("ruleid")){gl.bet.difSelItem=1;break}else if(r!=i.find(".betting-multiple").val()){gl.bet.difSelItem=2;break}t||(gl.bet.difSelItem==1?alertTip("您选择的投注项多种玩法，盈利和盈利率将以--显示!","选号提醒"):gl.bet.difSelItem==2&&alertTip("您选择的投注项的倍数不一致，盈利和盈利率将以--显示!","选号提醒")),c=1,r=r*gl.price*h*y}$(".trace-checkbox.checked").each(function(){var t=$(this).closest("tr"),f=t.find(".traceUnitPrice"),i=t.find(".traceTimes").val();n&&f.text((1*p*i).toFixedNum(3)),u+=f.text()*1,gl.bet.betMode==2&&(t.find(".jiLeiAmount").html(u.toFixedNum(3)),gl.bet.difSelItem?(t.find(".jiLeiProfit").html("--"),t.find(".jiLeiProfitPercent").html("--")):(s=c*v*r*i-u,t.find(".jiLeiProfit").html(s.toFixedNum(3)),a=s*100/u,t.find(".jiLeiProfitPercent").html(a.toFixedNum(3)+"%")))}),d.text(u.toFixedNum(3))}et.bind("change",function(){et.closest("label").removeClass("active"),$(this).closest("label").addClass("active")}),$(".trace-checkbox").die("change").live("change",function(){var t=$(this).closest("tr"),n=t.find(".traceTimes"),r;$(this)[0].checked?(t.find(".traceTimes").removeAttr("disabled"),n.parent().parent().removeClass("tp-ui-form-disabled"),$(this).addClass("checked"),r=o(),n.val()=="0"&&n.val(1),t.find(".traceUnitPrice").html((n.val()*r*1).toFixedNum(3))):(n.attr("disabled","disabled"),n.parent().parent().addClass("tp-ui-form-disabled"),$(this).removeClass("checked"),n.val(1),t.find(".traceUnitPrice").html("0.00"),t.find(".jiLeiAmount").html("--"),t.find(".jiLeiProfit").html("--"),t.find(".jiLeiProfitPercent").html("--")),i||a(0,1)}),$(".traceTimes").die("change").live("change",function(){var n=o();$(this).closest("tr").find(".traceUnitPrice").html(($(this).val()*n*1).toFixedNum(3)),a()});function st(n){var t=_traceOrderTmpl({data:n});nt.html(t),$(".trace-text").tpuiText(),$(".trace-checkbox").tpuiCheckbox(),gl.bet.betMode==1?($(".advanceTraceClass").hide(),$(".timesTraceClass").show()):($(".timesTraceClass").hide(),$(".advanceTraceClass").show())}ot=function(){$betMode.on({change:function(){if(gl.bet.betMode=$betMode.filter(":checked").val(),gl.bet.betMode!=0){nt.find("tr").length<20&&ctx.postToken("/Bet/GetTraceList/"+gl.lotteryId,EnCryptJsonParams({total:60}),function(n){st(n)}),$totalTimesInput.val(1),$totalTimesInput.trigger("changekc"),f(),$totalTimesSpan.hide(),h.stop(!0,!0).slideDown(),gl.bet.betMode==1?(wt.hide(),bt.show(),$(".advanceTraceClass").hide(),$(".timesTraceClass").show()):(bt.hide(),wt.show(),$(".timesTraceClass").hide(),$(".advanceTraceClass").show());var n=$selectNumsContainer.find("li");n.length<=0?$.appConfirm({useTitle:"追号提示",title:"你还未选择号码，是否机选1注试试运气？"},function(n){n&&v.trigger("click")}):n.length>1&&alert("您当前有"+n.length+"条投注项！一次追号只允许一条投注项，请删除多余投注项！")}else h.stop(!0,!0).slideUp(),f(),$totalTimesSpan.show()}})},ot();function ht(){function v(t){for(var c=0,k,h,w,b,d=$selectNumsContainer.find("li"),s,l,o,v,e=0;e<d.length;e++)s=$(d[e]),h=s.find(".betting-multiple").val(),b=s.find(".bof-tb-method>i").attr("pricevalue"),h*=b,w=s.attr("jsodds"),c<h*w&&(c=h*w,k=e+1);for(f(),c*=gl.price,l=0,o=r,i=!0,e=0;e<n;e++){if(u*c*o>gl.maxBonus){alert("第"+k+"条投注项的追号可能中奖金额超过30万，已中止!");return}v=t.eq(e),v.find(".traceTimes").val(o),v.find(".trace-checkbox").trigger("click"),l++,l>=p&&(o=o*y,l=0)}i=!1,a()}function l(s){for(var ut="",w="",d=0,lt=0,st=$selectNumsContainer.find("li"),ht=st.length,g,et,p,nt,l,ft,at,k,it,rt,tt,ot,y,b,v=0;v<ht;v++)if(g=$(st[v]),ut=="")ut=g.attr("ruleid"),w=g.find(".betting-multiple").val(),lt=g.find(".bof-tb-method>i").attr("pricevalue"),w*=lt,d=g.attr("jsodds");else{if(ut!=g.attr("ruleid")){alert("您选择了多种玩法，暂不支持生成高级追号方案，请选择单玩法投注项，或者手动编辑追号内容!");return}if(w!=g.find(".betting-multiple").val()){alert("您选择的投注项的倍数不一致，暂不支持生成高级追号方案，请选择一致的投注项倍数，或者手动编辑追号内容!");return}}if(f(),et=$("#trace-profit>label.active").attr("avalue"),w=w*gl.price*ht,p=t,nt=d*w,nt-p<=0&&alert("当前下注方式有可能没有盈利!"),l=r,ft=gl.maxBonus/nt,et==0){for(e=li.val()*1,e=e/100,l=(e+1)/(nt/p),l<r?l=r:parseInt(l)<l&&(l=parseInt(l)+1),p=t*l,i=!0,v=0;v<n;v++){if(u*d*w*l>gl.maxBonus){alert("单注追号可中奖金额超过30万，已中止!");break}for(b=s.eq(v),b.find(".traceTimes").val(l),b.find(".trace-checkbox").trigger("click"),k=-1,y=l;y<ft;y++)if(it=u*d*w*y/(p+t*y)-1,it>=e){k=y;break}if(k==-1&&v<n-1){alert("追号可中奖金额有可能超过30万，追号方案已中止!");break}l=k,p=p+t*l}i=!1}else if(et==1){for(c=ai.val()*1,at=nt-p,l=c/at,l<r?l=r:parseInt(l)<l&&(l=parseInt(l)+1),p=t*l,i=!0,v=0;v<n;v++){if(u*d*w*l>gl.maxBonus){alert("单注追号可中奖金额超过30万，已中止!");return}for(b=s.eq(v),b.find(".traceTimes").val(l),b.find(".trace-checkbox").trigger("click"),k=-1,y=l;y<ft;y++)if(it=u*d*w*y-(p+t*y),it>=c){k=y;break}if(k==-1&&v<n-1){alert("追号可中奖金额有可能超过30万，追号方案已中止!");break}l=k,p=p+t*l}i=!1}else{if(rt=o(),h=vi.val()*1,h<t){alert("全程金额小于单倍投注金额:{0} !".replaceFormat([t,1]));return}for(tt=0,ot=0,y=0;y<n;y++)ot=Math.pow(2,y),tt+=ot;if(l=parseInt(h/(tt*rt)),l<=0){alert("全程金额不够追{0}期，最低金额需要{1}元!".replaceFormat([n,tt*rt]));return}for(ct.val(l),i=!0,v=0;v<n;v++){if(u*d*w*l>gl.maxBonus){alert("单注追号可中奖金额超过30万，已中止!");break}b=s.eq(v),b.find(".traceTimes").val(l),b.find(".trace-checkbox").trigger("click"),l=l*2}i=!1}a()}var r,p,y,e,c,h,n,t,u,s;if(gl.bet.betMode==1?(r=oi.val()*1,p=yi.val()*1,n=wi.val()*1,y=pi.val()*1):(r=ct.val()*1,n=ui.val()*1),n>120)return alert("追号期数不能超过120期!"),!1;u=1,t=o(),s=$("#traceListTableId>tr"),s.length<n?ctx.postToken("/Bet/GetTraceList/"+gl.lotteryId,EnCryptJsonParams({total:n<60?60:n}),function(n){st(n),gl.bet.betMode==1?v($("#traceListTableId>tr")):l($("#traceListTableId>tr"))}):gl.bet.betMode==1?v(s):l(s),hi.scrollTop(0)}ei.click(function(){var n=$selectNumsContainer.find("li");n.length<=0?$.appConfirm({useTitle:"追号提示",title:"你还未选择号码，是否机选1注试试运气？"},function(n){n&&v.trigger("click"),ht()}):n.length>1?alert("一次追号只允许一条投注项，请删除多余投注项！"):ht()})}gl.lotteryId!=EnumLotteryType.ggc&&ii(function(n,t,i){t=parseInt(t/1e3)+1,gl.doLoop({loopInt:t,backFunc:function(){$("#banIssueId").html('第 <label style="color:red;">{0}</label> 期已截止,</br>当前期为 <label style="color:red;">{1}</label> 期。</br>投注时请注意期号!'.replaceFormat([n,i])),gl.baseBettingBanTips._show()}})}),g=function(t){t=gl.isLogined?t:0,ctx.postToken("/Bet/RefreshHistoryData",EnCryptJsonParams({lotteryId:n,needRecent:t}),function(n){$("#rank-topic .tp-ui-marquee-content-list").css({height:"860px"}),n.recentData!="no_need"&&n.recentData&&n.recentData.length>0&&(_recentData=BetOrderDataToArray(n.recentData),html=_recentTmpl({data:_recentData}),$("#recentContainerId").html(html),gl.lotteryId==EnumLotteryType.ggc&&gl.ggc.initHistoryScratch()),initOrderDetailClick()})},gl.refreshHistoryData=g,gl.isLogined&&g(1),ctx.receiveSocketLottery=ri,ctx.receiveSocketAward=ti,dt(),$("#ticket-base-info>.title>h4>span").html(gl.lotteryDescription[gl.lotteryId]),$("#refreshRightTraceId").click(function(){if(!gl.isLogined)return alertTip("你尚未登录!"),!1;ctx.postToken("/Bet/GetRightTraceList",{info:"ax"},function(n){if(n.length>0){var t=_traceListTmpl({data:n});$("#rightTraceListId").html(t),$("#rightTraceListNoData").hide()}alertTip("刷新完成!")})}),gl.isLogined?$("#refreshBettingHistory").bind("click",function(){ctx.postToken("/Bet/GetRecentBetOrderRecord/"+gl.lotteryId,{info:"ax"},function(n){_recentData=BetOrderDataToArray(n);var t=_recentTmpl({data:_recentData});$("#recentContainerId").html(t),alertTip("刷新完成!")})}):$("#rightTraceListH4").html("您尚未登陆！")}function GetDataDetailById(n,t,i,r){var f,u;if(t)if(f=t.length,i){for(u=0;u<f;u++)if(n==t[u][i])return t[u]}else for(r==undefined&&(r=0),u=0;u<f;u++)if(n==t[u][r])return t[u];return null}function BetOrderDataToArray(n){for(var c=[],y=n.length,u,e,s,r=0;r<y;r++){var t=n[r],a=t.Odds*1+t.PlusOdds*1,f=t.TotalAmount*1,l=t.TotalBet*1,v=(f/(l*gl.price)).toFixedNum(3),h=t.BonusTotalNumber*1,o=(t.BonusAmount*1).toFixedNum(3),i="未开奖";t.OrderStatus==10?i="已撤单":h!=-1&&(u=((o-f)*1).toFixedNum(3),i=u>0?"盈":u<0?"亏":"平局",i=u+"("+i+")"),e=gl.lotteryId==EnumLotteryType.ggc?t.BoNums:t.BonusNumber?t.BonusNumber:"",s=[t.EncodeId,t.LotteryName,t.RuleName,a*2+" / "+a,t.IssueNumber,t.BetContent,f,o,t.Mark,t.InsertDate,h,v,l,i,t.LoginName,e,t.BetContent.maxShow(50),t.LotteryCode,t.OrderStatus,t.BatchNo,t.ClassName,t.Id,e.maxShow(25),i=="未开奖"?"--":i],c.push(s)}return c}function Top10BetOrderDataToArray(n){var u=[],r,t,i;if(n)for(r=null,t=0;t<n.length;t++)if(n[t]){for(i=0;i<n[t].length;i++)r=GetDataDetailById(n[t][i].BetRuleId,gl.rules,"RuleId"),r&&(n[t][i].RuleName=r.DisplayName?r.DisplayName:r.RuleName,n[t][i].LotteryName=gl.lotteryName,n[t][i].LoginName="匿名",n[t][i].InsertDate=NetToJsDateTime(n[t][i].CreateTime),n[t][i].ClassName=i==0?"wr-a":i==1?"wr-b":i==2?"wr-c":"");u[t]=BetOrderDataToArray(n[t])}return u}function initOrderDetailClick(){$("#recentContainerId .bl-order-id, .top10OrderDetail,.ggc-ta-betting[t=0]").die("click").live("click",function(){var r=$(this).hasClass("top10OrderDetail"),t="",n="",i;r?(t=$(this).attr("EnOrderID"),n=GetDataDetailById(t,_top10Data[0]),n||(n=GetDataDetailById(t,_top10Data[1]))):(t=$.trim($(this).closest("tr").find(".bl-order-id").text()),n=GetDataDetailById(t,_recentData));try{i=!r&&n[10]==-1&&n[18]!="10",gl.lotteryId==EnumLotteryType.ggc&&$(this).hasClass("ggc-ta-betting")?cancelOrder(n,null,$(this).closest("tr").attr("orderid")):i?GameRecordGetOrderData(n[0]):ShowBetOrderDetail(n)}catch(u){}})}function cancelOrder(n,t){var r='确定撤销当前订单编号为<label style="color:red">{0}</label>的订单？'.replaceFormat([n[0]]);gl.lotteryId==EnumLotteryType.ggc&&(r='确定撤销期号为<label style="color:red">{0}</label>的所有订单吗？'.replaceFormat([n[4]])),$.appConfirm({useTitle:"撤单",title:"撤销投注订单",titleSub:r},function(i){i?ctx.postTokenEx({url:"/Bet/CancelOrder",data:EnCryptJsonParams({orderId:n[0],issueNumber:n[4],lotteryId:n[17]}),beforeSend:function(){$("body").tpuiLoading("_show"),t&&t._close(!0)},complete:function(){$("body").tpuiLoading("_hide")},success:function(n){n.result=="OK"?(refreshGamePoint(),setTimeout(function(){alert("撤单成功!")},500),gl.lotteryId==EnumLotteryType.ggc?gl.renderRecentBetOrderList(n.orders):$("#refreshBettingHistory").length>0&&$("#refreshBettingHistory").trigger("click")):alert("撤单失败，原因:"+n)}}):t&&t._close(!0)})}function ShowBetOrderDetail(n,t){var i,u;if(n[1]=="快乐扑克"){var s=n[15],h=BonusNumHelper.pkSuitFilter(s).split(","),f=BonusNumHelper.pkNumGetOnlyNum(s).split(","),r='<label style="font-size: 18px;font-weight: bold;">';for(i=0;i<h.length;i++)switch(h[i]){case"1":r+="<span  style='color:black;'>♠"+f[i]+"</span>";break;case"2":r+="<span  style='color:red;'>♥"+f[i]+"</span>";break;case"3":r+="<span  style='color:black;'>♣"+f[i]+"</span>";break;case"4":r+="<span  style='color:red;'>♦"+f[i]+"</span>"}r=r+"</label>",n[22]=r,n[15]=""}u=_betOrderDetailHtml.replaceFormat(n),t&&(u=u.replace("###",n[19]).replace('style="display:none;"',""));var e={pushTo:"#tmpDialogWrap",autoOpen:!0,width:480,head:!1,onClose:function(n){n._close(!0)}},c=n[17]==5||n[17]==6,o=$("<div>").addClass("module order-info-inner").attr({title:"订单详情","data-icon":"order-info"}).append(u).appendTo($("body"));c||n[10]!=-1||n[18]=="10"||gl.lotteryId==EnumLotteryType.ggc||(e.buttons={"撤单":function(t){o.tpuiDialog("_close"),cancelOrder(n,t)}}),o.tpuiDialog(e)}function GameRecordGetOrderData(n,t){t==undefined&&(t=""),ctx.postToken("/Bet/GetBetOrderDetail",EnCryptJsonParams({orderId:n,batchNo:t}),function(n){var i=BetOrderDataToArray(n.rows),r;i.length>=1?(r=t!=""&&i.length>1,ShowBetOrderDetail(i[0],r)):alert("没有符合的数据，系统不支持查询过早的订单详情!")})}function init_betCqc(n){init_betComm(n)}function init_regist(){var t=$(".form-table"),n;t.find(".signin-form-text").tpuiText(),t.find(".signin-form-radio").tpuiRadio(),$(".signin-form-submit, .signin-form-button").tpuiButton(),t.find(".signin-form-submit").tpuiButton(),$(".signin-form-switch").tpuiSwitch(),$("#UserPassword").tpuiPasswordStrength({title:"密码安全性：",score:null}),$(".tp-ui-password-strength-progress").appendTo($("#UserPassword").parent().parent().parent()),$("#TheIntr").val()!=""&&$("#TheIntr").attr("readonly","readonly"),$("div[class='tp-ui-item tp-ui-forminput tp-ui-switch']")&&$("div[class='tp-ui-item tp-ui-forminput tp-ui-switch']").addClass("tp-ui-active");$('#subContainerId .form-table input[type="text"], .form-table input[type="password"]').on({focus:function(){if($(this).attr("id")!="TheIntr"){var n=$(this).attr("placeholder");n&&$(this).tpuiFormTipsy("_default",{message:n,gravity:"se",icon:!0})}},blur:function(){if($(this).attr("id")=="TheIntr"&&isNaN($(this).val()))return $(this).tpuiFormTipsy("_warning",{message:"请填写正确的介绍人ID",gravity:"se",icon:!0}),!1;if($(this).attr("id")=="LoginName"&&$(this).val().length>0){if($(this).val().length<4||$(this).val().length>16)return $(this).tpuiFormTipsy("_warning",{message:"用户名长度应为4-16位",gravity:"se",icon:!0}),!1}else if(($(this).attr("id")=="ReUserPassword"||$(this).attr("id")=="UserPassword")&&$(this).val().length>0){if($(this).val().length<6||$(this).val().length>12)return $(this).tpuiFormTipsy("_warning",{message:"密码长度应为6-12位",gravity:"se",icon:!0}),!1;if($(this).attr("id")=="ReUserPassword"&&$("#UserPassword").val()!=""&&$(this).val()!=$("#UserPassword").val())return $(this).tpuiFormTipsy("_warning",{message:"密码不一致",gravity:"se",icon:!0}),!1}$(this).tpuiFormTipsy("_hide")}});n=!1,$("#submitRegist").click(function(){var u,r;if(n)return alertTip("正在处理中，请稍等..."),!1;n=!0,$("#submitRegist").css("cursor","wait");var t=!0,o=$("#TheIntr").val(),f=$("#LoginName").val(),i=$("#UserPassword").val(),s=$("#ReUserPassword").val(),e=/^[A-Za-z][A-Za-z0-9_]{3,15}$/;if(isNaN(o)&&($("#TheIntr").tpuiFormTipsy("_warning",{message:"请填写正确的介绍人ID",gravity:"se",icon:!0}),t=!1),u=f.match(e),u==null&&($("#LoginName").tpuiFormTipsy("_warning",{message:"用户名长度应为4-16位数字，字母，下划线且必须为字母开头",gravity:"se",icon:!0}),t=!1),i==""&&($("#UserPassword").tpuiFormTipsy("_warning",{message:"密码长度应为6-12位小写字母数字符号组合",gravity:"se",icon:!0}),t=!1),i.length<6&&($("#UserPassword").tpuiFormTipsy("_warning",{message:"密码长度应为6-12位小写字母数字符号组合",gravity:"se",icon:!0}),t=!1),i!=s&&($("#ReUserPassword").tpuiFormTipsy("_warning",{message:"密码不一致",gravity:"se",icon:!0}),t=!1),r=new RegExp("^[0-9]*$"),r.test(i)&&($("#UserPassword").tpuiFormTipsy("_warning",{message:"您的密码为纯数字，安全系数太低，请更换",gravity:"se",icon:!0}),t=!1),r=new RegExp("^[a-z]*$"),r.test(i)&&($("#UserPassword").tpuiFormTipsy("_warning",{message:"您的密码为纯小写字母，安全系数太低，请更换",gravity:"se",icon:!0}),t=!1),t==!1)return n=!1,$("#submitRegist").css("cursor","pointer"),!1;if(!$("div[class='tp-ui-item tp-ui-forminput tp-ui-switch tp-ui-active']").html())return n=!1,$("#submitRegist").css("cursor","pointer"),alert("未同意《K彩娱乐用户服务协议》！"),!1;ctx.postTokenEx({url:"/Regist/SubmitRegiest",data:EnCryptJsonParams([$("#vercode").val(),$("#LoginName").val(),$("#UserPassword").val(),$("input[name='type-mode']:checked").val(),$("#TheIntr").val(),$("#EncodeLinkId").val()]),beforeSend:function(){n=!0},success:function(n){$("#submitRegist").css("cursor","pointer"),n.Success==!0?window.location="/Regist//Success":n.Message=="用户名已存在"?$("#LoginName").tpuiFormTipsy("_danger",{message:n.Message,gravity:"se",icon:!0}):n.Message=="注册失败"?window.location="/Regist/Fail":alert(n.Message)},complete:function(){n=!1}})})}function dealHallLotteryIssue(n){function r(){if(gl.hallLotteryId==EnumLotteryType.ggc)e.html("<h4><span>即刮即中，快乐无穷</span></h4>"),i.attr("href","#"+gl.hallLotteryHash);else{var n="/bet/GetScheduleAndIssueNumber/"+gl.hallLotteryId+"?r="+Math.random();ctx.postTokenEx({url:n,beforeSend:function(){},success:function(n){var e,t,r;if(n.stop_schedule==1)u.html("停止销售"),t="<li><span>{0}</span></li><li><span>{1}</span></li><li><span>:</span></li><li><span>{2}</span></li><li><span>{3}</span></li>".replaceFormat([0,0,0,0]),f.html(t);else{for(u.html("第 "+n.issue_number+" 期"),e=n.lottery_time.substr(11),t="",r=0;r<e.length;r++)t+="<li><span>"+e[r]+"</span></li>";f.html("<ul>"+t+"</ul>"),i.attr("href","#"+gl.hallLotteryHash)}}})}}var t=$("#ld-topic");gl.hallLotteryId=t.find("ul>li:first").attr("code"),gl.hallLotteryHash=t.find("ul>li:first").attr("data-name");var u=$("#hallIssueId"),f=$("#hallIssueTimeId"),i=t.find(".betting-btn>a"),e=t.find("ul>li>.cutdown");r(),n&&$("body").everyTime(3e4,"hall_lottery_interval",function(){r()})}function Hall(){var n=this;n.lotterySelector=$("#lottery-selector"),n.notiPageIndex=0,n.notiPageSize=8,n.init=function(){var r,t,i;$("#slideshow").slideshowLite(),$.lotteryTopic_Dev(n),r=$("#notice .notice-list:first ul"),t=r.children("li"),$.each(t,function(n,t){$(this).on("mouseenter",function(){$(this).tpuiAnimation("animated bounceIn")});$(t).find("a:first").on("click",function(){var t=$(this),u=t.closest("li").attr("text"),r=t.attr("title"),f=t.attr("time"),n='<div class="module notice-inner">',i;return n+='<div class="article-head">',n+="<h2>"+r+"</h2>",n+="<ul>",n+="<li><span>日期：</span><span>"+f+"</span></li>",n+="</ul>",n+="</div>",n+='<div class="article-detial"><p style="text-indent: 8mm;">'+u+"</p></div>",n+="</div>",i=$(n).attr({title:"公告详情"}).appendTo($("body")).tpuiDialog({pushTo:"#tmpDialogWrap",autoOpen:!0,width:480,onClose:function(n){n._close(!0),i=null}}),!1})}),i=parseInt(t.length/n.notiPageSize)+(t%n.notiPageSize==0?0:1);$("#notice-more").on("click","a",function(){var r;t.hide();var f=(n.notiPageIndex+1)%i,u=f*n.notiPageSize,e=u+n.notiPageSize;for(r=u;r<e;r++)t.eq(r).show();n.notiPageIndex+=1});n.bindEvent(),dealHallLotteryIssue(1)},n.bindEvent=function(){},n.addToTop=function(t){var i=t.closest("li").attr("code");ctx.postToken("/Home/StickLottery/"+i,{},function(t){if(t.success){var r=n.lotterySelector,f=r.find("li[code="+i+"]"),u=r.find("li:first");f.is(u)||(f.attr("sticked",1).insertBefore(u).show(),r.find("li").eq(5).hide())}else alert(t.msg)})},n.saveLotterySort=function(t,i){var r=t.find("li:first").attr("code"),u=i.find("li").slice(0,8);_.each(u,function(n){r+=","+$(n).attr("code")}),ctx.postToken("/Home/StickLottery/"+r,{},function(t){var u,f,i;if(t.success)for(u=n.lotterySelector,f=r.split(",").reverse(),i=0;i<f.length;i++){var s=f[i],e=u.find("li[code="+s+"]"),o=u.find("li:first");e.is(o)||(e.attr("sticked",1).insertBefore(o).show(),u.find("li").eq(5).hide())}else alert(t.msg)})}}function init_memberProfitDetailRecord(){initMemberBaseControl(),$(".GetDataByPageIndex").bind("click",function(){var i=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change")),r=$(".startDateClass").val(),n=$(".endDateClass").val(),t=[i,r,n];GetPartHtml("/member/MemberProfitDetailRecord",t)})}function init_memberBetRecord(n){initMemberBaseControl();var t;$(".GetDataByPageIndex").bind("click",function(){var t=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change"));if(t<=0)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;var f=$(".startDateClass").val(),e=$(".endDateClass").val(),u=$(".lotteryCodeClass").val(),i=$(".batchNoClass").val(),r=[t,f,e,u,i];GetPartHtml("/member/memberbetrecord",r)}),gl.memberBetRecordData.length>0&&(t=BetOrderDataToArray(gl.memberBetRecordData[0].Table),$(".betOrderClass").bind("click",function(){var r=$(this).text(),n=GetDataDetailById(r,t),i=n[10]==-1&&n[18]!="10";i?GameRecordGetOrderData(n[0]):ShowBetOrderDetail(n)}))}function init_memberTraceBetRecord(n){initMemberBaseControl(),$(".GetDataByPageIndex").bind("click",function(){var t=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change"));if(t<=0)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;var u=$(".startDateClass").val(),f=$(".endDateClass").val(),i=$(".lotteryCodeClass").val(),r=[t,u,f,i];GetPartHtml("/member/membertraceorder",r)}),$(".traceOrderClass").bind("click",function(){var n=$(this).text();location.href="#membertraceorderdetail/"+n})}function init_memberTraceBetRecordDetail(){function r(t){t?(n=!0,u.text(o[1]),i.stop(!0,!0).animate({height:24})):(n=!1,u.text(o[0]),i.stop(!0,!0).animate({height:s}))}var e,t;initMemberBaseControl(),e=$("#tracr-viewer"),e.find(".tpui-button").tpuiButton(),$(".checkBoxClass").bind("change",function(){$(this)[0].checked?$(this).closest("tr").addClass("Checked"):$(this).closest("tr").removeClass("Checked")}),$("#traceCheckAllId").bind("change",function(){$(this)[0].checked?$(".checkBoxClass").each(function(){$(this)[0].checked||($(this).trigger("click"),$(this).closest("tr").addClass("Checked"))}):$(".checkBoxClass").each(function(){$(this)[0].checked&&($(this).trigger("click"),$(this).closest("tr").removeClass("Checked"))})}),$(".traceDetailQueryClass").bind("click",function(){var n=$(this).attr("data-id");GameRecordGetOrderData("",n)}),$("#refreshTraceDetail").click(function(){refreshGamePoint(undefined,1),$(window).trigger("hashchange"),alertTip("刷新完成")}),t=!1,$("#stopTraceBtn").click(function(){var n="";if($("tr.Checked").each(function(){n+=",'"+$(this).attr("data-id")+"'"}),n=="")return alert("没有选中取消的奖期!"),!1;confirm("确认取消以下选中奖期？注意:已生成订单的奖期会被忽略!",function(i){if(i){n=n.substr(1);var r=[n,gl.memberTraceOrderDetail.curTraceOrderId];if(t)return alert("由于网络延迟，上一次操作还没提交完成。建议继续等待，或者刷新页面重新确认！"),!1;t=!0,ctx.postTokenEx({url:"/Member/StopTrace",data:EnCryptJsonParams(r),beforeSend:function(){$("body").tpuiLoading("_show")},complete:function(){t=!1,$("body").tpuiLoading("_hide")},success:function(n){$("body").tpuiLoading("_hide"),n!="OK"?alert(n):(alertTip("操作成功!"),refreshGamePoint(undefined,1),$(window).trigger("hashchange"))}})}})}),$("#returnBackBtn").click(function(){location.href="#MemberTraceOrder"});var f=$("#trace-number-toggle"),u=f.children("dt:first").find("a:first"),i=f.children("dd:first"),s=i.get(0)?$.tpUI._dimensions(i).height:0,o=["收起全部","展开全部"],n=!0;r(n);u.on({click:function(t){t.preventDefault(),n?r(!1):r(!0)}})}function init_memberRechargeLog(n,t,i){initMemberBaseControl();var r=$("#recentDateRange>a"),u=$("button.GetDataByPageIndex");r.bind("click",function(){r.removeClass("active"),$(this).addClass("active"),u.trigger("click")}),r.removeClass("active"),r.filter("[days="+t+"]").addClass("active"),$(".GetDataByPageIndex").bind("click",function(){var t=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change"));if(t<=0)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;var e=r.filter(".active").attr("days"),f=$(".rechargeOrderNoClass").val(),u=[t,e,f];GetPartHtml("/member/"+i,u)}),i=="memberrechargeerrorlog"&&$(".needCheckThird").bind("click",function(){var n=$(this),t=n.attr("orderNo");t&&ctx.postToken("/Recharge/ThirdQueryCheck/"+t,{},function(t){alert(t.msg),t.msg=="充值成功!"&&(n.closest("tr").find(".thirdOldStatus").html("已充值!"),n.removeClass("fc-red").removeClass("needCheckThird").addClass("fc-green").attr("orderNo","").html("已到帐!").css("cursor","").attr("title",""))})})}function init_memeberRecharge(){var n,t=undefined;$.fundsOptionEx=function(){function y(){var t=s.find(".active input[type=radio]").val(),n="",i;$("#tpui-funds-sum").val(110),gl.curRechargeMode==1?(n="工行",n="单笔最低充值10元！<br />以上{0}帐号限本次存款用，帐号不定时更新！<br />每次存款前请依照本页所显示的银行帐号入款。<br />只有{0}充值到{0}，才能立即到账喔！".replaceFormat([n]),t=="cft"?(n="财付通",n="单笔充值10-20000！<br />以上{0}帐号限本次存款用，帐号不定时更新！<br />每次存款前请依照本页所显示的银行帐号入款。<br />只有{0}充值到{0}，才能立即到账喔！".replaceFormat([n])):t=="zfb"?n="单笔充值10-50000！<br />支付宝充值开启时间:凌晨01:00--晚上23:00<br />支付宝转账到银行卡默认充值到账时间为2小时，但正常10分钟内会到账！<br />充值后，五分钟未到账，请提供转账截图给客服处理。<br />若由于支付宝系统到账时间问题，导致客户无法及时投注，<br />造成的损失由客户自行承担！".replaceFormat([n]):t=="wx"?(n="微信",n="单笔充值100-5000！<br />以上申请的{0}二维码为30分钟一个支付限期，过三十分钟后需重新获取！！<br />每次存款前请依照本页所显示的{微信}二维码入款！<br />只有通过{0}支付扫一扫，扫码支付才能立即到账喔！".replaceFormat([n])):t=="zfbyhk"?n='单笔充值50-50000！<br /><div style="color:red;">*此充值通道为支付宝账户转账到银行账户，非立即到账，一般情况下五分钟内能处理到账！</div>充值后，五分钟未到账，请提供转账截图给客服处理。<br />若由于支付宝系统到账时间问题，导致客户无法及时投注，<br />造成的损失由客户自行承担！'.replaceFormat([n]):t=="zfbqy"?($("#tpui-funds-sum").val(3001),n="支付宝",n="单笔充值3001-20000！<br />以上{0}帐号限本次存款用，帐号不定时更新！<br />每次存款前请依照本页所显示的银行帐号入款。<br />只有{0}充值到{0}，才能立即到账喔！".replaceFormat([n])):t=="qcode"&&(n="1：此充值通道为扫码支付通道（支持微信、支付宝、QQ钱包、百度钱包、京东钱包）<br />2：单笔充值金额范围：101-10000，手续费由平台承担：<br />3：此二维码不定时更新，每次存款前请依序提交充值；<br />4：此充值通道非立即到账，若3分钟未到账，请联系客服提供转账单据进行处理！".replaceFormat([n]))):(i=t>50,n=t==54||t==56||t==57?"单笔充值金额范围：50-5000元，手续费由平台承担.<br />":t==4?"单笔充值金额范围:10-20000元，手续费由平台承担.<br />":t==7?"单笔充值金额范围:10-50000元，手续费由平台承担.<br />":t==9?"单笔充值金额范围:10-20000元，手续费由平台承担.<br />":t==203?"单笔充值金额范围:10-5000元，手续费由平台承担.<br />":t==50?"单笔充值金额范围:10-50000元，手续费由平台承担.<br />":t==60?"单笔充值金额范围:10-5000元，手续费由平台承担.<br />":t==205?"单笔充值金额范围:10-10000元，手续费由平台承担.<br />":t==11?"单笔充值金额范围:10-100000元，手续费由平台承担.<br />":t==13||t==63||t==403||t==404?"单笔充值金额范围:50-3000元，手续费由平台承担.<br />":t==209||t==61?"单笔充值金额范围:50-5000元，手续费由平台承担.<br />":t==12?"单笔充值金额范围:100-100000元，手续费由平台承担.<br />":t==62||t==211?"单笔充值金额范围:100-3000元，手续费由平台承担.<br />":t==401?"单笔充值金额范围:100-5000元，手续费由平台承担.<br />":t==402?"单笔充值金额范围:100-999元，手续费由平台承担.<br />":i?t==59?"单笔充值金额范围:10-3000元，手续费由平台承担.<br />":"单笔充值金额范围：50-3000元，手续费由平台承担.<br />":"单笔充值金额范围:10-100000元，手续费由平台承担.<br />"),g.html(n)}function b(i,r){if((e.html("30分00秒"),n=1801,t!=undefined&&window.clearTimeout(t),t=window.setInterval(function(){if(n==0){e.html("超时，请重新充值");return}n=n-1;var i="{0}分{1}秒",u=Math.floor(n/60),r=n%60;i=i.replaceFormat([TowLenNum(u),TowLenNum(r)]),e.html(i)},1e3),r!=1)&&(f.sum.text(i.sum),i.bankName=="支付宝-银行卡"?f.bankname.text(i.ZfbToBankName):f.bankname.text(i.ZfbToBankName),f.username.text(i.username),f.useraccount.text(i.useraccount),f.orderid.text(i.orderId),$("#hidRCUserAccount").val(i.useraccount),$("#hidRCSum").val(i.sum),$("#hidRCOrderId").val(i.orderId),h.val("100"),i)){p.text(i.bankName).on({"click.bankPop":function(n){n.preventDefault(),window.open(i.bankUrl)}});w.on({"click.referDemoOpen":function(n){n.preventDefault(),$("#rd-"+i.type).tpuiDialog("_open")}})}}function d(i){e.html("30分00秒"),n=1801,t!=undefined&&window.clearTimeout(t),t=window.setInterval(function(){if(n==0){e.html("超时，请重新充值");return}n=n-1;var i="{0}分{1}秒",u=Math.floor(n/60),r=n%60;i=i.replaceFormat([TowLenNum(u),TowLenNum(r)]),e.html(i)},1e3),$("#qcode-bankname").text(i.bankname),$("#qcode-sum").text(i.sum),$("#qcode-orderid").text(i.orderid),u.tpuiDialog("_close"),$("#normalTBodyId").hide(),$("#wxTBodyId").hide(),$("#qCodeTBodyId").show();p.text(i.bankname).on({"click.bankPop":function(n){n.preventDefault(),window.open(i.bankurl)}});w.hide(),r.tpuiDialog("_open")}var h=$("#tpui-funds-sum"),k=$("#recharge-model"),l=$(".recharge-demo"),u=$("#recharge-order"),a=$("#recharge-order-submit"),r=$("#recharge-order-refer"),p=$("#recharge-order-prop"),w=$("#recharge-order-demo"),nt=$("#recharge-order-back"),it=$("#recharge-order-close"),s=$("#recharge-account-checker"),e=$("#rt-cutdown"),g=$("#rechargeBanktips"),tt=$("#rechargeOrderCancelBtn"),rt=$("#rt-reload"),i={},f={},v={gsyh:{name:"中国工商银行",site:"https://mybank.icbc.com.cn/icbc/perbank/index.jsp"},cft:{name:"腾讯财付通",site:"https://www.tenpay.com/v2/"},zfb:{name:"中国民生银行",site:"https://www.alipay.com/"},zfbyhk:{name:"支付宝-银行卡",site:"https://www.alipay.com/"},zfbqy:{name:"支付宝",site:"https://www.alipay.com/"},qcode:{name:"扫码支付",site:""}},c,o;f={sum:$("#rc-sum"),bankname:$("#rc-bankname"),username:$("#rc-username"),useraccount:$("#rc-useraccount"),orderid:$("#rc-orderid")},c=$(".forms-table"),c.find(".tpui-text").tpuiText(),c.find(".tpui-radio").tpuiRadio(),c.find(".tpui-button").tpuiButton(),c.find(".tpui-select").tpuiSelect(),$(".tp-ui-select-value").find("a").css("width","120px"),h.tpuiNumber(),h.tpuiNumber(),r.find(".button-group button").tpuiButton(),u.tpuiDialog({pushTo:"#tmpDialogWrap",scrollLock:!0,width:680,maskClose:!1}),l.tpuiDialog({pushTo:"#tmpDialogWrap",scrollLock:!0,mask:!1,maskClose:!1,width:575}),l.closest(".tp-ui-dialog-base").css("z-index","9990"),s.find("input").each(function(){$(this).is(":checked")&&$(this).parents("label:first").addClass("active");$(this).on({change:function(){s.find("label.active").removeClass("active"),$(this).is(":checked")&&$(this).parents("label:first").addClass("active"),y()}})}),r.tpuiDialog({pushTo:"#tmpDialogWrap",scrollLock:!0,width:520,onOpen:function(){$("#normalTBodyId").is(":visible")&&setTimeout(function(){CreateZeroClipboard("rc-username","CopyBankName","rechargeInfoId"),CreateZeroClipboard("rc-useraccount","CopyBankAccount","rechargeInfoId"),CreateZeroClipboard("rc-sum","CopyBankAmount","rechargeInfoId"),CreateZeroClipboard("rc-orderid","CopyBankOrder","rechargeInfoId")},500)},onClose:function(){l.tpuiDialog("_close"),t!=undefined&&window.clearTimeout(t)}}),k.find("a").die("click").live("click",function(n){if(n.preventDefault(),gl.userInfo.ReturnPoint>=.129)return alert("只有1956以下的玩家才可以充值！"),!1;gl.curRechargeMode=$(this).attr("id")!="rm-more"?1:0;var t=s.find(".active input[type=radio]").val();if(gl.curRechargeMode==1)$(".normalRechargeTrMo").hide(),$(".normalRechargeTr").show(),$("#normalRechargeTr2").show(),$("#recharge-order").closest(".tp-ui-dialog-inner").find("div.tp-ui-dialog-title>span").text("普通充值");else{if($(".normalRechargeTrMo").length<=0)return alertTip("当前平台尚未配置有效第三方商户，请使用其他充值方式!"),!1;$(".normalRechargeTr").hide(),$("#normalRechargeTr2").hide(),$(".normalRechargeTrMo").show(),$("#recharge-order").closest(".tp-ui-dialog-inner").find("div.tp-ui-dialog-title>span").text("第三方充值")}y(),u.tpuiDialog("_open")}),o=!1;a.on({click:function(n){var c,t,l,p,y;if(n.preventDefault(),o)return!1;if(c=h.val(),t=s.find(".active input[type=radio]").val(),gl.curRechargeMode==1){if(l=0,t=="cft")l=1002;else if(t=="gsyh")l=1e3;else if(t=="zfb"){if(l=1001,c>5e4)return alertTip("支付宝最高充值限额为50000!"),!1}else if(t=="wx")l=1021;else if(t=="zfbyhk"){if(c>5e4)return alertTip("支付宝转账到银行卡最高充值限额为50000!"),!1;if(c<50)return alertTip("支付宝转账到银行卡最低充值限额为50!"),!1;l=1031}else if(t=="zfbqy"){if(c>2e4)return alertTip("支付宝最高充值限额为20000!"),!1;if(c<3001)return alertTip("支付宝最低充值限额为3001!"),!1;l=1032}else if(t=="qcode"){if(c>1e4)return alertTip("扫码支付最高充值限额为10000!"),!1;if(c<101)return alertTip("扫码支付最低充值限额为101!"),!1;l=1033}if(l==0)return alertTip("请选择帐户类型!"),!1;p=[c,l,""],p=EnCryptJsonParams(p),o=!0,a.css("cursor","wait"),ctx.postTokenEx({url:"/Recharge/RechargeSubmit",data:p,complete:function(){o=!1,a.css("cursor","pointer")},success:function(n){if(n.Ok==1)if(l==1021)$("#wxPayImgId").attr("src","/Recharge/GetWxImg?data="+n.Url),u.tpuiDialog("_close"),b(null,1),$("#normalTBodyId").hide(),$("#wxTBodyId").show(),$("#qCodeTBodyId").hide(),$("#recharge-order-back").show(),$(".btnsClass").hide(),r.tpuiDialog("_open");else if(l==1033){var f=[];f.bankname=v[t].name,f.orderid=n.OrderNo,f.sum=c,f.bankurl=n.AccNo,d(f)}else i.orderId=n.OrderNo,i.ZfbToBankName=n.ZfbToBankName,i.type=t,i.bankName=v[t].name,i.bankUrl=v[t].site,i.username=n.AccName,i.useraccount=n.AccNo,i.sum=c,u.tpuiDialog("_close"),b(i),$("#normalTBodyId").show(),$("#wxTBodyId").hide(),$("#qCodeTBodyId").hide(),$(".btnsClass").show(),r.tpuiDialog("_open");else alertTip(n.Tip,"充值提醒")}})}else{var f=0,e=0,w=t>50;if(t==4?(e=10,f=2e4):t==7?(e=10,f=5e4):t==9?(e=10,f=2e4):t==50?(e=10,f=5e4):t==60?(e=10,f=5e3):t==205?(e=10,f=1e4):t==61||t==209?(e=10,f=5e3):t==11?(e=10,f=1e5):t==203?(e=10,f=5e3):w?(e=50,f=3e3,(t=="54"||t=="56"||t=="57")&&(f=5e3),t=="59"&&(e=10,f=3e3)):t==12?(e=100,f=1e5):t==13||t==63||t==212||t==403||t==404?(e=50,f=3e3):t==62||t==211?(e=100,f=3e3):t==401?(e=100,f=5e3):t==402?(e=100,f=999):w?(e=50,f=5e3,(t=="54"||t=="56"||t=="57")&&(f=5e3)):(e=10,f=1e5),c<e||c>f)return alert("该充值通道充值范围为："+e+"-"+f+" 元！"),h.focus(),!1;if(!t&&t!="0")return alertTip("请选择帐户类型!"),!1;if(o=!0,y="",t==11){if($("#bankCode").val()=="")return alertTip("请选择银行类型!"),!1;y="/Recharge/ThirdRecharge?amount={0}&t={1}&bankCode={2}".replaceFormat([c,t,$("#bankCode").val()])}else y="/Recharge/ThirdRecharge?amount={0}&t={1}".replaceFormat([c,t]);if(t==60||t==205){location.href=y;return}w||t=="4"||t=="6"||t=="9"||t=="10"?(o=!1,window.open(y)):location.href=y}}});tt.on({click:function(){u.tpuiDialog("_close")}});rt.on({click:function(n){n.preventDefault(),r.tpuiDialog("_close"),u.tpuiDialog("_open")}});nt.on({click:function(n){n.preventDefault(),r.tpuiDialog("_close"),u.tpuiDialog("_open")}});it.on({click:function(n){n.preventDefault(),r.tpuiDialog("_close")}})},$.fundsOptionEx()}function init_bindcard(){$("#Text_Password").tpuiPasswordStrength({title:"密码安全性：",score:null}),$("#Select_BankType option[value='1002']").remove(),$("#Select_BankType option[value='1020']").remove(),initMemberBaseControl();var n=!1;$('.form-table input[type="text"],.form-table input[type="password"]').on({focus:function(){var n=$(this).attr("placeholder");n&&$(this).tpuiFormTipsy("_default",{message:n,gravity:"se",icon:!0})},blur:function(){if(($(this).attr("id")=="Text_Password"||$(this).attr("id")=="Text_Password_Confrim")&&$(this).val().length>0){if($(this).val().length<6||$(this).val().length>12)return $(this).tpuiFormTipsy("_warning",{message:"密码长度应为6-12位",gravity:"se",icon:!0}),!1;if($(this).attr("id")=="Text_Password_Confrim"&&$(this).val()=="")return $(this).tpuiFormTipsy("_warning",{message:"确认资金密码不能为空！",gravity:"se",icon:!0}),!1;if($(this).attr("id")=="Text_Password"&&$("#Text_Password_Confrim").val()!=""&&$(this).val()!=$("#Text_Password_Confrim").val())return $(this).tpuiFormTipsy("_warning",{message:"密码不一致",gravity:"se",icon:!0}),!1}$(this).tpuiFormTipsy("_hide")}});$("#bind_card_submit").click(function(){if($("#Select_BankType").find("option:selected").val()=="请选择绑定的账户类型"){$("#Select_BankType").focus(),$("#Select_BankType").tpuiFormTipsy("_warning",{message:"请选择绑定的账户类型",gravity:"se",icon:!0});return}if($("#Select_BankType").tpuiFormTipsy("_hide"),$("#Text_BankAccount_Confrim").val()!=$("#Text_BankAccount").val()){$("#Text_BankAccount_Confrim").focus(),$("#Text_BankAccount_Confrim").tpuiFormTipsy("_warning",{message:"两次输入的号码不一致!",gravity:"se",icon:!0});return}if($("#Select_BankType").find("option:selected").val()!=1002){if($("#Text_BankAccount").val().trimAll().length<16||$("#Text_BankAccount").val().trimAll().length>19){$("#Text_BankAccount").focus(),$("#Text_BankAccount").tpuiFormTipsy("_warning",{message:"银行卡号不符合规则，请检查!",gravity:"se",icon:!0});return}}else if($("#Text_BankAccount").val().trimAll().length==0)return $("#Text_BankAccount").tpuiFormTipsy("_warning",{message:"号码不能为空!",gravity:"se",icon:!0}),!1;if(!$("#Text_Password").val().IsPassStrong()){$("#Text_Password").focus(),$("#Text_Password").tpuiFormTipsy("_warning",{message:"密码必须包含字母数字或是特殊符号!",gravity:"se",icon:!0});return}if($("#Text_Password_Confrim").val().trimAll().length==0)return $("#Text_Password_Confrim").tpuiFormTipsy("_warning",{message:"确认资金密码不能为空!",gravity:"se",icon:!0}),!1;if(n)return!1;$("#bind_card_submit").css("cursor","wait"),n=!0;var t="/Member/BindUserCard";ctx.postTokenEx({url:t,data:EnCryptJsonParams([$("#Select_BankType").find("option:selected").val(),$("#Text_BankName").val(),$("#Text_BankAccount").val(),$("#Text_BankAccount_Confrim").val(),$("#Text_Password").val(),$("#Text_Password_Confrim").val()]),success:function(t){$('.form-table input[type="text"],.form-table input[type="password"]').tpuiFormTipsy("_hide"),$("#bind_card_submit").css("cursor","pointer"),n=!1,t=="恭喜，银行卡绑定成功！"?setTimeout(function(){location.href="#MemberBindSuc"},3e3):alert(t)}})}),$("#Text_BankAccount,#Text_BankAccount_Confrim").keydown(function(n){return $.browser.msie?event.keyCode>47&&event.keyCode<58||event.keyCode>95&&event.keyCode<106||event.keyCode==8?!0:!1:n.which>47&&n.which<58||event.keyCode>95&&event.keyCode<106||n.which==8||event.keyCode==17?!0:!1}).focus(function(){})}function init_showCardDetail(){initMemberBaseControl()}function init_memberWithdraw(){initMemberBaseControl(),$("#WithDraw_Money").tpuiNumber(),$(document).ready(function(){$("#withdraw_account_Title").html(withdraw_WithDrawTitle+"账号："),$("#withdraw_name_Title").html(withdraw_WithDrawTitle+"账号名："),$("#withdraw_account").html("<span class='fw-text'>{0}</span>".replaceFormat([withdraw_AccoutNo])),$("#withdraw_name").html("<span class='fw-text'>{0}</span>".replaceFormat([withdraw_AccoutName])),$("#withdraw_AvailablePoint").html("<span class='fw-text'>{0}</span>".replaceFormat([withdraw_AvailablePoint])),$("#withdrawMinAmount_tip").html("<span>最小提现金额{0}元。</span>".replaceFormat([withdraw_MinWithdrawAmount])),$("#withdraw_tips").html(" <p><dl><dt><span>  您<em class='light_yellow'>今日还可提现{0}次</em>，单次提现金额<em class='light_yellow'>最低{1}元，最高{2}元</em>。</span></dt></dl></p>".replaceFormat([withdraw_RemainWithdrawCount,withdraw_MinWithdrawAmount,withdraw_MaxWithdrawAmount])),$("#withdraw_tips").html("<h2>今日还可提现{0}次</h2><h4>单次提现金额最低{1}元，最高{2}元</h4>".replaceFormat([withdraw_RemainWithdrawCount,withdraw_MinWithdrawAmount,withdraw_MaxWithdrawAmount])),$("#WithDraw_Money").val(""),$("#WithDraw_FundPassword").val(""),$("#WithDraw_SNVerCode").val("")});var n=!1;$("#withdraw_submit").bind({click:function(){var i,t;if(n)return!1;if($("#withdraw_submit").css("cursor","wait"),n=!0,i=$("#withdrawal_form"),$("#WithDraw_Money").val()==""){alert("请输入正确的金额！"),$("#WithDraw_Money").focus(),n=!1,$("#withdraw_submit").css("cursor","pointer");return}if(!isNumber($("#WithDraw_Money").val())){alert("请输入正确的金额！"),$("#WithDraw_Money").focus(),n=!1,$("#withdraw_submit").css("cursor","pointer");return}if($("#WithDraw_FundPassword").val().length<6){alert("提现密码不能为空且不能少于6位！"),$("#WithDraw_FundPassword").focus(),n=!1,$("#withdraw_submit").css("cursor","pointer");return}if(withdraw_hasSerialNumber=="true"&&!$("#WithDraw_SNVerCode").val()){alert("请先输入手机安全中心验证码！"),$("#WithDraw_SNVerCode").focus(),n=!1,$("#withdraw_submit").css("cursor","pointer");return}t="/Member/WithdrawalSubmit",ctx.postTokenEx({url:t,data:EnCryptJsonParams([$("#WithDraw_Money").val(),$("#WithDraw_FundPassword").val(),$("#WithDraw_SNVerCode").val()]),success:function(t){t=="申请成功,请等待管理员审批!"?(refreshGamePoint(),alert(t),setTimeout(function(){n=!1,$("#withdraw_submit").css("cursor","pointer"),$("#WithDraw_Money").val(""),$("#WithDraw_FundPassword").val(""),$("#WithDraw_SNVerCode").val("");var t=$("#userGamePointId").text();$("#withdraw_AvailablePoint").html("<span class='fw-text'>{0}</span>".replaceFormat([t])),$("#withdraw_tips").html("<h2>今日还可提现{0}次</h2><h4>单次提现金额最低{1}元，最高{2}元</h4>".replaceFormat([withdraw_RemainWithdrawCount-1,withdraw_MinWithdrawAmount,withdraw_MaxWithdrawAmount]))},2e3)):(setTimeout(function(){n=!1,$("#withdraw_submit").css("cursor","pointer"),$("#WithDraw_Money").val(""),$("#WithDraw_FundPassword").val(""),$("#WithDraw_SNVerCode").val("")},2e3),alert(t))}})}})}function init_memberWithdrawList(){initMemberBaseControl(),$(".GetDataByPageIndex").bind("click",function(){var n=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change"));n<=0?n=1:n>TotalPages&&(n=TotalPages==0?1:TotalPages);var r=$(".startDateClass").val(),i=$(".endDateClass").val(),t=[n,r,i];GetPartHtml("/member/memberwithdrawlist",t)})}function init_memberIntegralRecord(){initMemberBaseControl(),$(".GetDataByPageIndex").bind("click",function(){var t=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change")),n=[t,$("#BeginDate").val(),$("#EndDate").val(),$("#QIntegralType").val()];GetPartHtml("/member/MemberIntegralRecords",n)})}function init_memberInfo(){initMemberBaseControl(),$("#TheLoginName").attr("readonly","readonly"),$("#submitMemberInfoButton").click(function(){submitMemberInfo(0)}),$("#applyMemberInfoButton").click(function(){submitMemberInfo(1)}),$("#Birthday").change(function(){var n=$(this).val().split("-");$(this).val()==""||n.length<3||(parseInt(n[1])<10&&(n[1]="0"+parseInt(n[1])),parseInt(n[2])<10&&(n[2]="0"+parseInt(n[2])),$(this).val(n[0]+"-"+n[1]+"-"+n[2]))});$(".forms-table input").on({focus:function(){if($(this).attr("id")!="RealName"&&$(this).attr("id")!="TeleNum"&&$(this).attr("id")!="Address")return!0;var n=$(this).attr("placeholder");n&&$(this).tpuiFormTipsy("_default",{message:n,gravity:"w",icon:!0})},blur:function(){if($(this).attr("id")!="RealName"&&$(this).attr("id")!="TeleNum"&&$(this).attr("id")!="Address")return!0;$(this).tpuiFormTipsy("_hide")}});$.avatarChecker();$("#avatar-checker").on("click","a.close",function(){var n=$("#current-avatar").attr("src");ctx.postTokenEx({url:"/Member/UpdateAvatar",data:{avatar:n},success:function(t){t==1&&$("img[name='user-avatar']").attr("src",n)}})})}function submitMemberInfo(n){var t,r,i;if(hasSubmit)return!1;if($("#submitMemberInfoButton,#applyMemberInfoButton").css("cursor","wait"),hasSubmit=!0,t=0,n==1){if(t=$("#UpgradeUserApplyId").val(),r=$("#RealName").val(),i=$("#TeleNum").val(),r=="")return $("#RealName").tpuiFormTipsy("_danger",{message:"请完善该项",gravity:"w",icon:!0}),$("#submitMemberInfoButton,#applyMemberInfoButton").css("cursor","pointer"),hasSubmit=!1,!1;if(i=="")return $("#TeleNum").tpuiFormTipsy("_danger",{message:"请完善该项",gravity:"w",icon:!0}),$("#submitMemberInfoButton,#applyMemberInfoButton").css("cursor","pointer"),hasSubmit=!1,!1}ctx.postTokenEx({url:"/Member/MemberUpdateInfo",data:{Id:$("#UserId").val(),RealName:$("#RealName").val(),Birthday:$("#Birthday").val(),Sex:$("input[name='Sex'][checked]").val(),Address:$("#Address").val(),TeleNum:$("#TeleNum").val(),QQ:$("#QQ").val(),UpgradeUserApplyId:t},success:function(t){if(t.Success==!1)$.appAlert(t.Message,"danger");else if(n==1){$.appAlert("您已成功升级为“"+t.Message+"”","success");var r=document.getElementById("UpgradeUserApplyDiv"),i=document.getElementById("applyMemberInfoButton");r.parentNode.removeChild(r),i.parentNode.removeChild(i),$("#userCurLevel").html(t.Message)}else $.appAlert(t.Message,"success");$("#submitMemberInfoButton,#applyMemberInfoButton").css("cursor","pointer"),hasSubmit=!1}})}function init_TransferGamePoint(){initMemberBaseControl();var n=!1;$("#submitTransferGamePoint").on("click",function(){if(n)return!1;$("#submitTransferGamePoint").css("cursor","wait"),n=!0;var t=$("#transformGamePoint").val();if(t==""||isNaN(t))return alertTip("金额必须为数字！"),n=!1,$("#submitTransferGamePoint").css("cursor","pointer"),!1;if(parseInt(t)!=t)return alertTip("金额必须为整数！"),n=!1,$("#submitTransferGamePoint").css("cursor","pointer"),!1;ctx.postTokenEx({url:"/ag/TranferGamePoint",data:{gamePoint:t,tranferType:$("input[name='tranformType'][checked]").val()},success:function(t){t=="转账成功!"?(alert(t),setTimeout(function(){n=!1,$("#submitTransferGamePoint").css("cursor","pointer")},2e3),ctx.postTokenEx({url:"/member/RefreshAGandGamePoint",data:{},success:function(n){refreshGamePoint(n.GamePoint),$("#GamePoint").html(n.GamePoint),$("#AgPoint").html(n.AgPoint)}})):(t=="system maintenance, AGIN platform closed!"?alert("AG平台维护中"):alert(t),setTimeout(function(){n=!1,$("#submitTransferGamePoint").css("cursor","pointer")},2e3))}})})}function init_memberProfitRecord(){initMemberBaseControl(),$(".GetDataByPageIndex").bind("click",function(){var t=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change"))+1,n=[t,$("#BeginDate").val(),$("#EndDate").val()];GetPartHtml("/member/MemberUserProfit",n)})}function init_memberFunDetail(n){initMemberBaseControl(),$(".GetDataByPageIndex").bind("click",function(){var i=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change")),t;if(n=="0"&&$(this).text().trim().indexOf("最后页")>=0)return alertTip("当前已经是最后一页!"),!1;if(i<1&&$(this).text().trim().indexOf("查询")==-1)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;t=[i,$("#BeginDate").val(),$("#fundType").val()],GetPartHtml("/member/MemberFunDetail",t)})}function init_memberAgentFunDetail(n){initMemberBaseControl(),$(".GetDataByPageIndex").bind("click",function(){var i=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change")),t;if(n=="0"&&$(this).text().trim().indexOf("最后页")>=0)return alertTip("当前已经是最后一页!"),!1;if(i<1&&$(this).text().trim().indexOf("查询")==-1)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;t=[i,$("#BeginDate").val(),$("#fundType").val(),$("#userName").val()],GetPartHtml("/member/MemberAgentFundDetail",t)})}function init_memberAgBetRecord(n){initMemberBaseControl(),$(".GetDataByPageIndex").bind("click",function(){var i=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change"))+1,t;if(n=="0"&&$(this).text().trim().indexOf("最后页")>=0)return alertTip("当前已经是最后一页!"),!1;if(i<=1&&$(this).text().trim().indexOf("查询")==-1)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;t=[i,$("#billNo").val(),$("#gameType").val(),$("#begin").val(),$("#end").val()],GetPartHtml("/member/memberAgBetRecord",t)})}function init_awardDetail(n){$(".xingtai").each(function(){var n=$(this).attr("bonusnum");$(this).html(BonusNumHelper.pattern(n,gl.lotteryId))}),$(".totalnumber").each(function(){var n=$(this).attr("bonusnum");$(this).html(BonusNumHelper.sum(n,gl.lotteryId))}),initAwardControl();var t=$(".AwardDiff"),r=(new Date).Format("YYYY-MM-DD"),i=dffer_day(n,r);t.filter("[daydiff="+i+"]").addClass("active"),$("#lotterySelect,#dateSelect").bind("change",function(){awardSearch()}),t.bind("click",function(){var t=parseInt($(this).attr("dayDiff")),n=(new Date).DateAdd("day",t).Format("YYYY-MM-DD");awardSearch(n)})}function awardSearch(n){var t=$("#lotterySelect").val();n||(n=$("#dateSelect").val()),location.href="#AwardDetail/"+t+"?date="+n}function initAwardControl(){var n=$(".drawing-head"),t=$(".kc-calendar");n.find(".tpui-select").tpuiSelect(),n.find(".tpui-text").tpuiText(),t.cxCalendar({type:"YYYY-MM-DD"});$(".icon-kc-calendar").on("click",function(){var n=$(this).prev().find("input.kc-calendar:first"),t=n.val();n.focus().val(t).cxCalendar(function(n){n.show()})})}function init_memberBonusWinDetail(){initMemberBaseControl(),$(".GetDataByPageIndex").bind("click",function(){var t=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change")),n=[t,$("#BeginDate").val(),$("#EndDate").val(),$("#QStatus").val()];GetPartHtml("/member/MemberBonusWinDetail",n)})}function init_HelperComm(){var n=$("#menu-base");n.children("ul:first").tpuiMenu({targetIndex:"active",autoToggle:!0})}var ZeroClipboard,JsEncryptHelper,hash,ctx,serverNotifyBase,gl,EnumLotteryType,_alert,_confirm,BonusNumHelper,ComputeBetTotalNumber,$betPanel,$selectNumsContainer,$selectNumsBody,$singleNumberInput,$submitBtn,$betMode,$totalBets,$totalTimesInput,$totalTimesSpan,$totalAmount,$priceMode,$limoshiId,_recentData,_top10Data,_betOrderDetailHtml,renderRecentBetOrderList,GgcClient,BetPauseHelper,BetNumberAndProfitLossHelper,_justOneKey,TrendClient,MemberUserNews,FeedBack,MemberSecurity,hasSubmit,Agent,AgentApply,MemberTransfer;(function(n,t){function pu(n){var t=at[n]={};return i.each(n.split(h),function(n,i){t[i]=!0}),t}function su(n,r,u){if(u===t&&n.nodeType===1){var f="data-"+r.replace(fu,"-$1").toLowerCase();if(u=n.getAttribute(f),typeof u=="string"){try{u=u==="true"?!0:u==="false"?!1:u==="null"?null:+u+""===u?+u:cu.test(u)?i.parseJSON(u):u}catch(e){}i.data(n,r,u)}else u=t}return u}function vt(n){var t;for(t in n)if((t!=="data"||!i.isEmptyObject(n[t]))&&t!=="toJSON")return!1;return!0}function p(){return!1}function ft(){return!0}function b(n){return!n||!n.parentNode||n.parentNode.nodeType===11}function vu(n,t){do n=n[t];while(n&&n.nodeType!==1);return n}function eu(n,t,r){if(t=t||0,i.isFunction(t))return i.grep(n,function(n,i){var u=!!t.call(n,i,n);return u===r});if(t.nodeType)return i.grep(n,function(n){return n===t===r});if(typeof t=="string"){var u=i.grep(n,function(n){return n.nodeType===1});if(fe.test(t))return i.filter(t,u,!r);t=i.filter(t,u)}return i.grep(n,function(n){return i.inArray(n,t)>=0===r})}function ou(n){var i=ur.split("|"),t=n.createDocumentFragment();if(t.createElement)while(i.length)t.createElement(i.pop());return t}function hf(n,t){return n.getElementsByTagName(t)[0]||n.appendChild(n.ownerDocument.createElement(t))}function yu(n,t){if(t.nodeType===1&&i.hasData(n)){var e,f,o,s=i._data(n),r=i._data(t,s),u=s.events;if(u){delete r.handle,r.events={};for(e in u)for(f=0,o=u[e].length;f<o;f++)i.event.add(t,e,u[e][f])}r.data&&(r.data=i.extend({},r.data))}}function lu(n,t){var r;t.nodeType===1&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(n),r=t.nodeName.toLowerCase(),r==="object"?(t.parentNode&&(t.outerHTML=n.outerHTML),i.support.html5Clone&&n.innerHTML&&!i.trim(t.innerHTML)&&(t.innerHTML=n.innerHTML)):r==="input"&&li.test(n.type)?(t.defaultChecked=t.checked=n.checked,t.value!==n.value&&(t.value=n.value)):r==="option"?t.selected=n.defaultSelected:r==="input"||r==="textarea"?t.defaultValue=n.defaultValue:r==="script"&&t.text!==n.text&&(t.text=n.text),t.removeAttribute(i.expando))}function ht(n){return typeof n.getElementsByTagName!="undefined"?n.getElementsByTagName("*"):typeof n.querySelectorAll!="undefined"?n.querySelectorAll("*"):[]}function au(n){li.test(n.type)&&(n.defaultChecked=n.checked)}function uu(n,t){if(t in n)return t;for(var r=t.charAt(0).toUpperCase()+t.slice(1),u=t,i=pi.length;i--;)if(t=pi[i]+r,t in n)return t;return u}function st(n,t){return n=t||n,i.css(n,"display")==="none"||!i.contains(n.ownerDocument,n)}function vr(n,t){for(var r,o,e=[],f=0,s=n.length;f<s;f++)(r=n[f],r.style)&&(e[f]=i._data(r,"olddisplay"),t?(!e[f]&&r.style.display==="none"&&(r.style.display=""),r.style.display===""&&st(r)&&(e[f]=i._data(r,"olddisplay",sr(r.nodeName)))):(o=u(r,"display"),!e[f]&&o!=="none"&&i._data(r,"olddisplay",o)));for(f=0;f<s;f++)(r=n[f],r.style)&&(t&&r.style.display!=="none"&&r.style.display!==""||(r.style.display=t?e[f]||"":"none"));return n}function ar(n,t,i){var r=uo.exec(t);return r?Math.max(0,r[1]-(i||0))+(r[2]||"px"):t}function yr(n,t,r,f){for(var e=r===(f?"border":"content")?4:t==="width"?1:0,o=0;e<4;e+=2)r==="margin"&&(o+=i.css(n,r+c[e],!0)),f?(r==="content"&&(o-=parseFloat(u(n,"padding"+c[e]))||0),r!=="margin"&&(o-=parseFloat(u(n,"border"+c[e]+"Width"))||0)):(o+=parseFloat(u(n,"padding"+c[e]))||0,r!=="padding"&&(o+=parseFloat(u(n,"border"+c[e]+"Width"))||0));return o}function hr(n,t,r){var f=t==="width"?n.offsetWidth:n.offsetHeight,o=!0,e=i.support.boxSizing&&i.css(n,"boxSizing")==="border-box";if(f<=0){if(f=u(n,t),(f<0||f==null)&&(f=n.style[t]),g.test(f))return f;o=e&&(i.support.boxSizingReliable||f===n.style[t]),f=parseFloat(f)||0}return f+yr(n,t,r||(e?"border":"content"),o)+"px"}function sr(n){if(ti[n])return ti[n];var f=i("<"+n+">").appendTo(r.body),t=f.css("display");return f.remove(),(t==="none"||t==="")&&(v=r.body.appendChild(v||i.extend(r.createElement("iframe"),{frameBorder:0,width:0,height:0})),y&&v.createElement||(y=(v.contentWindow||v.contentDocument).document,y.write("<!doctype html><html><body>"),y.close()),f=y.body.appendChild(y.createElement(n)),t=u(f,"display"),r.body.removeChild(v)),ti[n]=t,t}function ii(n,t,r,u){var f;if(i.isArray(t))i.each(t,function(t,i){r||rf.test(n)?u(n,i):ii(n+"["+(typeof i=="object"?t:"")+"]",i,r,u)});else if(r||i.type(t)!=="object")u(n,t);else for(f in t)ii(n+"["+f+"]",t[f],r,u)}function tu(n){return function(t,r){typeof t!="string"&&(r=t,t="*");var u,s,f,o=t.toLowerCase().split(h),e=0,c=o.length;if(i.isFunction(r))for(;e<c;e++)u=o[e],f=/^\+/.test(u),f&&(u=u.substr(1)||"*"),s=n[u]=n[u]||[],s[f?"unshift":"push"](r)}}function lt(n,i,r,u,f,e){f=f||i.dataTypes[0],e=e||{},e[f]=!0;for(var o,c=n[f],h=0,l=c?c.length:0,s=n===ni;h<l&&(s||!o);h++)o=c[h](i,r,u),typeof o=="string"&&(!s||e[o]?o=t:(i.dataTypes.unshift(o),o=lt(n,i,r,u,o,e)));return(s||!o)&&!e["*"]&&(o=lt(n,i,r,u,"*",e)),o}function iu(n,r){var u,f,e=i.ajaxSettings.flatOptions||{};for(u in r)r[u]!==t&&((e[u]?n:f||(f={}))[u]=r[u]);f&&i.extend(!0,n,f)}function uf(n,i,r){var o,u,e,h,s=n.contents,f=n.dataTypes,c=n.responseFields;for(u in c)u in r&&(i[c[u]]=r[u]);while(f[0]==="*")f.shift(),o===t&&(o=n.mimeType||i.getResponseHeader("content-type"));if(o)for(u in s)if(s[u]&&s[u].test(o)){f.unshift(u);break}if(f[0]in r)e=f[0];else{for(u in r){if(!f[0]||n.converters[u+" "+f[0]]){e=u;break}h||(h=u)}e=e||h}if(e)return e!==f[0]&&f.unshift(e),r[e]}function tf(n,t){var i,o,r,e,s=n.dataTypes.slice(),f=s[0],u={},h=0;if(n.dataFilter&&(t=n.dataFilter(t,n.dataType)),s[1])for(i in n.converters)u[i.toLowerCase()]=n.converters[i];for(;r=s[++h];)if(r!=="*"){if(f!=="*"&&f!==r){if(i=u[f+" "+r]||u["* "+r],!i)for(o in u)if(e=o.split(" "),e[1]===r&&(i=u[f+" "+e[0]]||u["* "+e[0]],i)){i===!0?i=u[o]:u[o]!==!0&&(r=e[0],s.splice(h--,0,r));break}if(i!==!0)if(i&&n.throws)t=i(t);else try{t=i(t)}catch(c){return{state:"parsererror",error:i?c:"No conversion from "+f+" to "+r}}}f=r}return{state:"success",data:t}}function gr(){try{return new n.XMLHttpRequest}catch(t){}}function wu(){try{return new n.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function lr(){return setTimeout(function(){ct=t},0),ct=i.now()}function io(n,t){i.each(t,function(t,i){for(var u=(k[t]||[]).concat(k["*"]),r=0,f=u.length;r<f;r++)if(u[r].call(n,t,i))return})}function dr(n,t,r){var o,s=0,l=0,c=ut.length,f=i.Deferred().always(function(){delete h.elem}),h=function(){for(var o=ct||lr(),i=Math.max(0,u.startTime+u.duration-o),r=1-(i/u.duration||0),t=0,e=u.tweens.length;t<e;t++)u.tweens[t].run(r);return f.notifyWith(n,[u,r,i]),r<1&&e?i:(f.resolveWith(n,[u]),!1)},u=f.promise({elem:n,props:i.extend({},t),opts:i.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:ct||lr(),duration:r.duration,tweens:[],createTween:function(t,r){var e=i.Tween(n,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(e),e},stop:function(t){for(var i=0,r=t?u.tweens.length:0;i<r;i++)u.tweens[i].run(1);return t?f.resolveWith(n,[u,t]):f.rejectWith(n,[u,t]),this}}),e=u.props;for(ro(e,u.opts.specialEasing);s<c;s++)if(o=ut[s].call(u,n,e,u.opts),o)return o;return io(u,e),i.isFunction(u.opts.start)&&u.opts.start.call(n,u),i.fx.timer(i.extend(h,{anim:u,queue:u.opts.queue,elem:n})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function ro(n,t){var r,f,o,u,e;for(r in n)if(f=i.camelCase(r),o=t[f],u=n[r],i.isArray(u)&&(o=u[1],u=n[r]=u[0]),r!==f&&(n[f]=u,delete n[r]),e=i.cssHooks[f],e&&"expand"in e){u=e.expand(u),delete n[f];for(r in u)r in n||(n[r]=u[r],t[r]=o)}else t[f]=o}function be(n,t,r){var o,u,v,p,c,h,e,w,s=this,f=n.style,y={},a=[],l=n.nodeType&&st(n);r.queue||(e=i._queueHooks(n,"fx"),e.unqueued==null&&(e.unqueued=0,w=e.empty.fire,e.empty.fire=function(){e.unqueued||w()}),e.unqueued++,s.always(function(){s.always(function(){e.unqueued--,i.queue(n,"fx").length||e.empty.fire()})})),n.nodeType===1&&("height"in t||"width"in t)&&(r.overflow=[f.overflow,f.overflowX,f.overflowY],i.css(n,"display")==="inline"&&i.css(n,"float")==="none"&&(!i.support.inlineBlockNeedsLayout||sr(n.nodeName)==="inline"?f.display="inline-block":f.zoom=1)),r.overflow&&(f.overflow="hidden",i.support.shrinkWrapBlocks||s.done(function(){f.overflow=r.overflow[0],f.overflowX=r.overflow[1],f.overflowY=r.overflow[2]}));for(o in t)if(v=t[o],cf.exec(v)){if(delete t[o],v===(l?"hide":"show"))continue;a.push(o)}if(p=a.length,p)for(c=i._data(n,"fxshow")||i._data(n,"fxshow",{}),l?i(n).show():s.done(function(){i(n).hide()}),s.done(function(){var t;i.removeData(n,"fxshow",!0);for(t in y)i.style(n,t,y[t])}),o=0;o<p;o++)u=a[o],h=s.createTween(u,l?c[u]:0),y[u]=c[u]||i.style(n,u),u in c||(c[u]=h.start,l&&(h.end=h.start,h.start=u==="width"||u==="height"?1:0))}function f(n,t,i,r,u){return new f.prototype.init(n,t,i,r,u)}function it(n,t){for(var u,i={height:n},r=0;r<4;r+=2-t)u=c[r],i["margin"+u]=i["padding"+u]=n;return t&&(i.opacity=i.width=n),i}function br(n){return i.isWindow(n)?n:n.nodeType===9?n.defaultView||n.parentWindow:!1}var kr,nt,r=n.document,ge=n.location,de=n.navigator,fo=n.jQuery,ao=n.$,ru=Array.prototype.push,s=Array.prototype.slice,nu=Array.prototype.indexOf,vo=Object.prototype.toString,yt=Object.prototype.hasOwnProperty,wr=String.prototype.trim,i=function(n,t){return new i.fn.init(n,t,kr)},d=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,cr=/\S/,h=/\s+/,so=cr.test(" ")?/^[\s\xA0]+|[\s\xA0]+$/g:/^\s+|\s+$/g,re=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,pr=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,df=/^[\],:{}\s]*$/,kf=/(?:^|:|,)(?:\s*\[)+/g,ve=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ae=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,pe=/^-ms-/,ye=/-([\da-z])/gi,he=function(n,t){return(t+"").toUpperCase()},tt=function(){r.addEventListener?(r.removeEventListener("DOMContentLoaded",tt,!1),i.ready()):r.readyState==="complete"&&(r.detachEvent("onreadystatechange",tt),i.ready())},hu={},at,cu,fu,w,ot,ir,kt;i.fn=i.prototype={constructor:i,init:function(n,u,f){var e,o,h,s;if(!n)return this;if(n.nodeType)return this.context=this[0]=n,this.length=1,this;if(typeof n=="string"){if(e=n.charAt(0)==="<"&&n.charAt(n.length-1)===">"&&n.length>=3?[null,n,null]:re.exec(n),e&&(e[1]||!u)){if(e[1])return u=u instanceof i?u[0]:u,s=u&&u.nodeType?u.ownerDocument||u:r,n=i.parseHTML(e[1],s,!0),pr.test(e[1])&&i.isPlainObject(u)&&this.attr.call(n,u,!0),i.merge(this,n);if(o=r.getElementById(e[2]),o&&o.parentNode){if(o.id!==e[2])return f.find(n);this.length=1,this[0]=o}return this.context=r,this.selector=n,this}return!u||u.jquery?(u||f).find(n):this.constructor(u).find(n)}return i.isFunction(n)?f.ready(n):(n.selector!==t&&(this.selector=n.selector,this.context=n.context),i.makeArray(n,this))},selector:"",jquery:"1.8.0",length:0,size:function(){return this.length},toArray:function(){return s.call(this)},get:function(n){return n==null?this.toArray():n<0?this[this.length+n]:this[n]},pushStack:function(n,t,r){var u=i.merge(this.constructor(),n);return u.prevObject=this,u.context=this.context,t==="find"?u.selector=this.selector+(this.selector?" ":"")+r:t&&(u.selector=this.selector+"."+t+"("+r+")"),u},each:function(n,t){return i.each(this,n,t)},ready:function(n){return i.ready.promise().done(n),this},eq:function(n){return n=+n,n===-1?this.slice(n):this.slice(n,n+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(s.apply(this,arguments),"slice",s.call(arguments).join(","))},map:function(n){return this.pushStack(i.map(this,function(t,i){return n.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:ru,sort:[].sort,splice:[].splice},i.fn.init.prototype=i.fn,i.extend=i.fn.extend=function(){var s,e,u,r,h,c,n=arguments[0]||{},f=1,l=arguments.length,o=!1;for(typeof n=="boolean"&&(o=n,n=arguments[1]||{},f=2),typeof n!="object"&&!i.isFunction(n)&&(n={}),l===f&&(n=this,--f);f<l;f++)if((s=arguments[f])!=null)for(e in s)(u=n[e],r=s[e],n!==r)&&(o&&r&&(i.isPlainObject(r)||(h=i.isArray(r)))?(h?(h=!1,c=u&&i.isArray(u)?u:[]):c=u&&i.isPlainObject(u)?u:{},n[e]=i.extend(o,c,r)):r!==t&&(n[e]=r));return n},i.extend({noConflict:function(t){return n.$===i&&(n.$=ao),t&&n.jQuery===i&&(n.jQuery=fo),i},isReady:!1,readyWait:1,holdReady:function(n){n?i.readyWait++:i.ready(!0)},ready:function(n){if(n===!0?!--i.readyWait:!i.isReady){if(!r.body)return setTimeout(i.ready,1);(i.isReady=!0,n!==!0&&--i.readyWait>0)||(nt.resolveWith(r,[i]),i.fn.trigger&&i(r).trigger("ready").off("ready"))}},isFunction:function(n){return i.type(n)==="function"},isArray:Array.isArray||function(n){return i.type(n)==="array"},isWindow:function(n){return n!=null&&n==n.window},isNumeric:function(n){return!isNaN(parseFloat(n))&&isFinite(n)},type:function(n){return n==null?String(n):hu[vo.call(n)]||"object"},isPlainObject:function(n){if(!n||i.type(n)!=="object"||n.nodeType||i.isWindow(n))return!1;try{if(n.constructor&&!yt.call(n,"constructor")&&!yt.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch(u){return!1}var r;for(r in n);return r===t||yt.call(n,r)},isEmptyObject:function(n){var t;for(t in n)return!1;return!0},error:function(n){throw new Error(n);},parseHTML:function(n,t,u){var f;return!n||typeof n!="string"?null:(typeof t=="boolean"&&(u=t,t=0),t=t||r,(f=pr.exec(n))?[t.createElement(f[1])]:(f=i.buildFragment([n],t,u?null:[]),i.merge([],(f.cacheable?i.clone(f.fragment):f.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;if(t=i.trim(t),n.JSON&&n.JSON.parse)return n.JSON.parse(t);if(df.test(t.replace(ve,"@").replace(ae,"]").replace(kf,"")))return new Function("return "+t)();i.error("Invalid JSON: "+t)},parseXML:function(r){var u,f;if(!r||typeof r!="string")return null;try{n.DOMParser?(f=new DOMParser,u=f.parseFromString(r,"text/xml")):(u=new ActiveXObject("Microsoft.XMLDOM"),u.async="false",u.loadXML(r))}catch(e){u=t}return(!u||!u.documentElement||u.getElementsByTagName("parsererror").length)&&i.error("Invalid XML: "+r),u},noop:function(){},globalEval:function(t){t&&cr.test(t)&&(n.execScript||function(t){n.eval.call(n,t)})(t)},camelCase:function(n){return n.replace(pe,"ms-").replace(ye,he)},nodeName:function(n,t){return n.nodeName&&n.nodeName.toUpperCase()===t.toUpperCase()},each:function(n,r,u){var e,f=0,o=n.length,s=o===t||i.isFunction(n);if(u){if(s){for(e in n)if(r.apply(n[e],u)===!1)break}else for(;f<o;)if(r.apply(n[f++],u)===!1)break}else if(s){for(e in n)if(r.call(n[e],e,n[e])===!1)break}else for(;f<o;)if(r.call(n[f],f,n[f++])===!1)break;return n},trim:wr?function(n){return n==null?"":wr.call(n)}:function(n){return n==null?"":n.toString().replace(so,"")},makeArray:function(n,t){var r,u=t||[];return n!=null&&(r=i.type(n),n.length==null||r==="string"||r==="function"||r==="regexp"||i.isWindow(n)?ru.call(u,n):i.merge(u,n)),u},inArray:function(n,t,i){var r;if(t){if(nu)return nu.call(t,n,i);for(r=t.length,i=i?i<0?Math.max(0,r+i):i:0;i<r;i++)if(i in t&&t[i]===n)return i}return-1},merge:function(n,i){var f=i.length,u=n.length,r=0;if(typeof f=="number")for(;r<f;r++)n[u++]=i[r];else while(i[r]!==t)n[u++]=i[r++];return n.length=u,n},grep:function(n,t,i){var f,u=[],r=0,e=n.length;for(i=!!i;r<e;r++)f=!!t(n[r],r),i!==f&&u.push(n[r]);return u},map:function(n,r,u){var o,h,f=[],s=0,e=n.length,c=n instanceof i||e!==t&&typeof e=="number"&&(e>0&&n[0]&&n[e-1]||e===0||i.isArray(n));if(c)for(;s<e;s++)o=r(n[s],s,u),o!=null&&(f[f.length]=o);else for(h in n)o=r(n[h],h,u),o!=null&&(f[f.length]=o);return f.concat.apply([],f)},guid:1,proxy:function(n,r){var f,e,u;return typeof r=="string"&&(f=n[r],r=n,n=f),i.isFunction(n)?(e=s.call(arguments,2),u=function(){return n.apply(r,e.concat(s.call(arguments)))},u.guid=n.guid=n.guid||u.guid||i.guid++,u):t},access:function(n,r,u,f,e,o,s){var c,a=u==null,h=0,l=n.length;if(u&&typeof u=="object"){for(h in u)i.access(n,r,h,u[h],1,o,f);e=1}else if(f!==t){if(c=s===t&&i.isFunction(f),a&&(c?(c=r,r=function(n,t,r){return c.call(i(n),r)}):(r.call(n,f),r=null)),r)for(;h<l;h++)r(n[h],u,c?f.call(n[h],h,r(n[h],u)):f,s);e=1}return e?n:a?r.call(n):l?r(n[0],u):o},now:function(){return+new Date}}),i.ready.promise=function(t){if(!nt)if(nt=i.Deferred(),r.readyState==="complete"||r.readyState!=="loading"&&r.addEventListener)setTimeout(i.ready,1);else if(r.addEventListener)r.addEventListener("DOMContentLoaded",tt,!1),n.addEventListener("load",i.ready,!1);else{r.attachEvent("onreadystatechange",tt),n.attachEvent("onload",i.ready);var u=!1;try{u=n.frameElement==null&&r.documentElement}catch(e){}u&&u.doScroll&&function f(){if(!i.isReady){try{u.doScroll("left")}catch(n){return setTimeout(f,50)}i.ready()}}()}return nt.promise(t)},i.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(n,t){hu["[object "+t+"]"]=t.toLowerCase()}),kr=i(r),at={},i.Callbacks=function(n){n=typeof n=="string"?at[n]||pu(n):i.extend({},n);var f,c,s,a,h,e,r=[],u=!n.once&&[],l=function(t){for(f=n.memory&&t,c=!0,e=a||0,a=0,h=r.length,s=!0;r&&e<h;e++)if(r[e].apply(t[0],t[1])===!1&&n.stopOnFalse){f=!1;break}s=!1,r&&(u?u.length&&l(u.shift()):f?r=[]:o.disable())},o={add:function(){if(r){var u=r.length;(function t(u){i.each(u,function(u,f){i.isFunction(f)&&(!n.unique||!o.has(f))?r.push(f):f&&f.length&&t(f)})})(arguments),s?h=r.length:f&&(a=u,l(f))}return this},remove:function(){return r&&i.each(arguments,function(n,t){for(var u;(u=i.inArray(t,r,u))>-1;)r.splice(u,1),s&&(u<=h&&h--,u<=e&&e--)}),this},has:function(n){return i.inArray(n,r)>-1},empty:function(){return r=[],this},disable:function(){return r=u=f=t,this},disabled:function(){return!r},lock:function(){return u=t,f||o.disable(),this},locked:function(){return!u},fireWith:function(n,t){return t=t||[],t=[n,t.slice?t.slice():t],r&&(!c||u)&&(s?u.push(t):l(t)),this},fire:function(){return o.fireWith(this,arguments),this},fired:function(){return!!c}};return o},i.extend({Deferred:function(n){var u=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],f="pending",r={state:function(){return f},always:function(){return t.done(arguments).fail(arguments),this},then:function(){var n=arguments;return i.Deferred(function(r){i.each(u,function(u,f){var o=f[0],e=n[u];t[f[1]](i.isFunction(e)?function(){var n=e.apply(this,arguments);n&&i.isFunction(n.promise)?n.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[o+"With"](this===t?r:this,[n])}:r[o])}),n=null}).promise()},promise:function(n){return typeof n=="object"?i.extend(n,r):r}},t={};return r.pipe=r.then,i.each(u,function(n,i){var e=i[2],o=i[3];r[i[1]]=e.add,o&&e.add(function(){f=o},u[n^1][2].disable,u[2][2].lock),t[i[0]]=e.fire,t[i[0]+"With"]=e.fireWith}),r.promise(t),n&&n.call(t,t),t},when:function(n){var r=0,u=s.call(arguments),t=u.length,e=t!==1||n&&i.isFunction(n.promise)?t:0,f=e===1?n:i.Deferred(),c=function(n,t,i){return function(r){t[n]=this,i[n]=arguments.length>1?s.call(arguments):r,i===h?f.notifyWith(t,i):--e||f.resolveWith(t,i)}},h,l,o;if(t>1)for(h=new Array(t),l=new Array(t),o=new Array(t);r<t;r++)u[r]&&i.isFunction(u[r].promise)?u[r].promise().done(c(r,o,u)).fail(f.reject).progress(c(r,l,h)):--e;return e||f.resolveWith(o,u),f.promise()}}),i.support=function(){var u,h,e,l,c,f,o,a,v,s,y,t=r.createElement("div");if(t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",h=t.getElementsByTagName("*"),e=t.getElementsByTagName("a")[0],e.style.cssText="top:1px;float:left;opacity:.5",!h||!h.length||!e)return{};l=r.createElement("select"),c=l.appendChild(r.createElement("option")),f=t.getElementsByTagName("input")[0],u={leadingWhitespace:t.firstChild.nodeType===3,tbody:!t.getElementsByTagName("tbody").length,htmlSerialize:!!t.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.5/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:f.value==="on",optSelected:c.selected,getSetAttribute:t.className!=="t",enctype:!!r.createElement("form").enctype,html5Clone:r.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:r.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},f.checked=!0,u.noCloneChecked=f.cloneNode(!0).checked,l.disabled=!0,u.optDisabled=!c.disabled;try{delete t.test}catch(p){u.deleteExpando=!1}if(!t.addEventListener&&t.attachEvent&&t.fireEvent&&(t.attachEvent("onclick",y=function(){u.noCloneEvent=!1}),t.cloneNode(!0).fireEvent("onclick"),t.detachEvent("onclick",y)),f=r.createElement("input"),f.value="t",f.setAttribute("type","radio"),u.radioValue=f.value==="t",f.setAttribute("checked","checked"),f.setAttribute("name","t"),t.appendChild(f),o=r.createDocumentFragment(),o.appendChild(t.lastChild),u.checkClone=o.cloneNode(!0).cloneNode(!0).lastChild.checked,u.appendChecked=f.checked,o.removeChild(f),o.appendChild(t),t.attachEvent)for(v in{submit:!0,change:!0,focusin:!0})a="on"+v,s=a in t,s||(t.setAttribute(a,"return;"),s=typeof t[a]=="function"),u[v+"Bubbles"]=s;return i(function(){var e,t,f,i,h="padding:0;margin:0;border:0;display:block;overflow:hidden;",o=r.getElementsByTagName("body")[0];o&&(e=r.createElement("div"),e.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",o.insertBefore(e,o.firstChild),t=r.createElement("div"),e.appendChild(t),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",f=t.getElementsByTagName("td"),f[0].style.cssText="padding:0;margin:0;border:0;display:none",s=f[0].offsetHeight===0,f[0].style.display="",f[1].style.display="none",u.reliableHiddenOffsets=s&&f[0].offsetHeight===0,t.innerHTML="",t.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",u.boxSizing=t.offsetWidth===4,u.doesNotIncludeMarginInBodyOffset=o.offsetTop!==1,n.getComputedStyle&&(u.pixelPosition=(n.getComputedStyle(t,null)||{}).top!=="1%",u.boxSizingReliable=(n.getComputedStyle(t,null)||{width:"4px"}).width==="4px",i=r.createElement("div"),i.style.cssText=t.style.cssText=h,i.style.marginRight=i.style.width="0",t.style.width="1px",t.appendChild(i),u.reliableMarginRight=!parseFloat((n.getComputedStyle(i,null)||{}).marginRight)),typeof t.style.zoom!="undefined"&&(t.innerHTML="",t.style.cssText=h+"width:1px;padding:1px;display:inline;zoom:1",u.inlineBlockNeedsLayout=t.offsetWidth===3,t.style.display="block",t.style.overflow="visible",t.innerHTML="<div></div>",t.firstChild.style.width="5px",u.shrinkWrapBlocks=t.offsetWidth!==3,e.style.zoom=1),o.removeChild(e),e=t=f=i=null)}),o.removeChild(t),h=e=l=c=f=o=t=null,u}(),cu=/^(?:\{.*\}|\[.*\])$/,fu=/([A-Z])/g,i.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(i.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(n){return n=n.nodeType?i.cache[n[i.expando]]:n[i.expando],!!n&&!vt(n)},data:function(n,r,u,f){if(i.acceptData(n)){var s,h,c=i.expando,a=typeof r=="string",l=n.nodeType,o=l?i.cache:n,e=l?n[c]:n[c]&&c;if(e&&o[e]&&(f||o[e].data)||!a||u!==t)return e||(l?n[c]=e=i.deletedIds.pop()||++i.uuid:e=c),o[e]||(o[e]={},l||(o[e].toJSON=i.noop)),(typeof r=="object"||typeof r=="function")&&(f?o[e]=i.extend(o[e],r):o[e].data=i.extend(o[e].data,r)),s=o[e],f||(s.data||(s.data={}),s=s.data),u!==t&&(s[i.camelCase(r)]=u),a?(h=s[r],h==null&&(h=s[i.camelCase(r)])):h=s,h}},removeData:function(n,t,r){if(i.acceptData(n)){var e,o,h,s=n.nodeType,u=s?i.cache:n,f=s?n[i.expando]:i.expando;if(u[f]){if(t&&(e=r?u[f]:u[f].data,e)){for(i.isArray(t)||(t in e?t=[t]:(t=i.camelCase(t),t=t in e?[t]:t.split(" "))),o=0,h=t.length;o<h;o++)delete e[t[o]];if(!(r?vt:i.isEmptyObject)(e))return}(r||(delete u[f].data,vt(u[f])))&&(s?i.cleanData([n],!0):i.support.deleteExpando||u!=u.window?delete u[f]:u[f]=null)}}},_data:function(n,t,r){return i.data(n,t,r,!0)},acceptData:function(n){var t=n.nodeName&&i.noData[n.nodeName.toLowerCase()];return!t||t!==!0&&n.getAttribute("classid")===t}}),i.fn.extend({data:function(n,r){var u,s,c,o,l,e=this[0],h=0,f=null;if(n===t){if(this.length&&(f=i.data(e),e.nodeType===1&&!i._data(e,"parsedAttrs"))){for(c=e.attributes,l=c.length;h<l;h++)o=c[h].name,o.indexOf("data-")===0&&(o=i.camelCase(o.substring(5)),su(e,o,f[o]));i._data(e,"parsedAttrs",!0)}return f}return typeof n=="object"?this.each(function(){i.data(this,n)}):(u=n.split(".",2),u[1]=u[1]?"."+u[1]:"",s=u[1]+"!",i.access(this,function(r){if(r===t)return f=this.triggerHandler("getData"+s,[u[0]]),f===t&&e&&(f=i.data(e,n),f=su(e,n,f)),f===t&&u[1]?this.data(u[0]):f;u[1]=r,this.each(function(){var t=i(this);t.triggerHandler("setData"+s,u),i.data(this,n,r),t.triggerHandler("changeData"+s,u)})},null,r,arguments.length>1,null,!1))},removeData:function(n){return this.each(function(){i.removeData(this,n)})}}),i.extend({queue:function(n,t,r){var u;if(n)return t=(t||"fx")+"queue",u=i._data(n,t),r&&(!u||i.isArray(r)?u=i._data(n,t,i.makeArray(r)):u.push(r)),u||[]},dequeue:function(n,t){t=t||"fx";var f=i.queue(n,t),u=f.shift(),r=i._queueHooks(n,t),e=function(){i.dequeue(n,t)};u==="inprogress"&&(u=f.shift()),u&&(t==="fx"&&f.unshift("inprogress"),delete r.stop,u.call(n,e,r)),!f.length&&r&&r.empty.fire()},_queueHooks:function(n,t){var r=t+"queueHooks";return i._data(n,r)||i._data(n,r,{empty:i.Callbacks("once memory").add(function(){i.removeData(n,t+"queue",!0),i.removeData(n,r,!0)})})}}),i.fn.extend({queue:function(n,r){var u=2;return typeof n!="string"&&(r=n,n="fx",u--),arguments.length<u?i.queue(this[0],n):r===t?this:this.each(function(){var t=i.queue(this,n,r);i._queueHooks(this,n),n==="fx"&&t[0]!=="inprogress"&&i.dequeue(this,n)})},dequeue:function(n){return this.each(function(){i.dequeue(this,n)})},delay:function(n,t){return n=i.fx?i.fx.speeds[n]||n:n,t=t||"fx",this.queue(t,function(t,i){var r=setTimeout(t,n);i.stop=function(){clearTimeout(r)}})},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,r){var f,s=1,h=i.Deferred(),u=this,o=this.length,e=function(){--s||h.resolveWith(u,[u])};for(typeof n!="string"&&(r=n,n=t),n=n||"fx";o--;)(f=i._data(u[o],n+"queueHooks"))&&f.empty&&(s++,f.empty.add(e));return e(),h.promise(r)}});var o,ci,ai,yi=/[\t\r\n]/g,ce=/\r/g,oe=/^(?:button|input)$/i,se=/^(?:button|input|object|select|textarea)$/i,le=/^a(?:rea|)$/i,vi=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,si=i.support.getSetAttribute;i.fn.extend({attr:function(n,t){return i.access(this,i.attr,n,t,arguments.length>1)},removeAttr:function(n){return this.each(function(){i.removeAttr(this,n)})},prop:function(n,t){return i.access(this,i.prop,n,t,arguments.length>1)},removeProp:function(n){return n=i.propFix[n]||n,this.each(function(){try{this[n]=t,delete this[n]}catch(i){}})},addClass:function(n){var u,e,s,t,f,r,o;if(i.isFunction(n))return this.each(function(t){i(this).addClass(n.call(this,t,this.className))});if(n&&typeof n=="string")for(u=n.split(h),e=0,s=this.length;e<s;e++)if(t=this[e],t.nodeType===1)if(t.className||u.length!==1){for(f=" "+t.className+" ",r=0,o=u.length;r<o;r++)~f.indexOf(" "+u[r]+" ")||(f+=u[r]+" ");t.className=i.trim(f)}else t.className=n;return this},removeClass:function(n){var o,f,r,u,c,e,s;if(i.isFunction(n))return this.each(function(t){i(this).removeClass(n.call(this,t,this.className))});if(n&&typeof n=="string"||n===t)for(o=(n||"").split(h),e=0,s=this.length;e<s;e++)if(r=this[e],r.nodeType===1&&r.className){for(f=(" "+r.className+" ").replace(yi," "),u=0,c=o.length;u<c;u++)while(f.indexOf(" "+o[u]+" ")>-1)f=f.replace(" "+o[u]+" "," ");r.className=n?i.trim(f):""}return this},toggleClass:function(n,t){var r=typeof n,u=typeof t=="boolean";return i.isFunction(n)?this.each(function(r){i(this).toggleClass(n.call(this,r,this.className,t),t)}):this.each(function(){if(r==="string")for(var e,c=0,o=i(this),f=t,s=n.split(h);e=s[c++];)f=u?f:!o.hasClass(e),o[f?"addClass":"removeClass"](e);else(r==="undefined"||r==="boolean")&&(this.className&&i._data(this,"__className__",this.className),this.className=this.className||n===!1?"":i._data(this,"__className__")||"")})},hasClass:function(n){for(var r=" "+n+" ",t=0,i=this.length;t<i;t++)if(this[t].nodeType===1&&(" "+this[t].className+" ").replace(yi," ").indexOf(r)>-1)return!0;return!1},val:function(n){var r,u,e,f=this[0];return arguments.length?(e=i.isFunction(n),this.each(function(u){var f,o=i(this);this.nodeType===1&&(f=e?n.call(this,u,o.val()):n,f==null?f="":typeof f=="number"?f+="":i.isArray(f)&&(f=i.map(f,function(n){return n==null?"":n+""})),r=i.valHooks[this.type]||i.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,f,"value")!==t||(this.value=f))})):f?(r=i.valHooks[f.type]||i.valHooks[f.nodeName.toLowerCase()],r&&"get"in r&&(u=r.get(f,"value"))!==t?u:(u=f.value,typeof u=="string"?u.replace(ce,""):u==null?"":u)):void 0}}),i.extend({valHooks:{option:{get:function(n){var t=n.attributes.value;return!t||t.specified?n.value:n.text}},select:{get:function(n){var o,e,h,t,r=n.selectedIndex,s=[],u=n.options,f=n.type==="select-one";if(r<0)return null;for(e=f?r:0,h=f?r+1:u.length;e<h;e++)if(t=u[e],t.selected&&(i.support.optDisabled?!t.disabled:t.getAttribute("disabled")===null)&&(!t.parentNode.disabled||!i.nodeName(t.parentNode,"optgroup"))){if(o=i(t).val(),f)return o;s.push(o)}return f&&!s.length&&u.length?i(u[r]).val():s},set:function(n,t){var r=i.makeArray(t);return i(n).find("option").each(function(){this.selected=i.inArray(i(this).val(),r)>=0}),r.length||(n.selectedIndex=-1),r}}},attrFn:{},attr:function(n,r,u,f){var s,e,c,h=n.nodeType;if(n&&h!==3&&h!==8&&h!==2){if(f&&i.isFunction(i.fn[r]))return i(n)[r](u);if(typeof n.getAttribute=="undefined")return i.prop(n,r,u);if(c=h!==1||!i.isXMLDoc(n),c&&(r=r.toLowerCase(),e=i.attrHooks[r]||(vi.test(r)?ci:o)),u!==t){if(u===null){i.removeAttr(n,r);return}return e&&"set"in e&&c&&(s=e.set(n,u,r))!==t?s:(n.setAttribute(r,""+u),u)}return e&&"get"in e&&c&&(s=e.get(n,r))!==null?s:(s=n.getAttribute(r),s===null?t:s)}},removeAttr:function(n,t){var u,o,r,e,f=0;if(t&&n.nodeType===1)for(o=t.split(h);f<o.length;f++)r=o[f],r&&(u=i.propFix[r]||r,e=vi.test(r),e||i.attr(n,r,""),n.removeAttribute(si?r:u),e&&u in n&&(n[u]=!1))},attrHooks:{type:{set:function(n,t){if(oe.test(n.nodeName)&&n.parentNode)i.error("type property can't be changed");else if(!i.support.radioValue&&t==="radio"&&i.nodeName(n,"input")){var r=n.value;return n.setAttribute("type",t),r&&(n.value=r),t}}},value:{get:function(n,t){return o&&i.nodeName(n,"button")?o.get(n,t):t in n?n.value:null},set:function(n,t,r){if(o&&i.nodeName(n,"button"))return o.set(n,t,r);n.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(n,r,u){var o,f,s,e=n.nodeType;if(n&&e!==3&&e!==8&&e!==2)return s=e!==1||!i.isXMLDoc(n),s&&(r=i.propFix[r]||r,f=i.propHooks[r]),u!==t?f&&"set"in f&&(o=f.set(n,u,r))!==t?o:n[r]=u:f&&"get"in f&&(o=f.get(n,r))!==null?o:n[r]},propHooks:{tabIndex:{get:function(n){var i=n.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):se.test(n.nodeName)||le.test(n.nodeName)&&n.href?0:t}}}}),ci={get:function(n,r){var f,u=i.prop(n,r);return u===!0||typeof u!="boolean"&&(f=n.getAttributeNode(r))&&f.nodeValue!==!1?r.toLowerCase():t},set:function(n,t,r){var u;return t===!1?i.removeAttr(n,r):(u=i.propFix[r]||r,u in n&&(n[u]=!0),n.setAttribute(r,r.toLowerCase())),r}},si||(ai={name:!0,id:!0,coords:!0},o=i.valHooks.button={get:function(n,i){var r;return r=n.getAttributeNode(i),r&&(ai[i]?r.value!=="":r.specified)?r.value:t},set:function(n,t,i){var u=n.getAttributeNode(i);return u||(u=r.createAttribute(i),n.setAttributeNode(u)),u.value=t+""}},i.each(["width","height"],function(n,t){i.attrHooks[t]=i.extend(i.attrHooks[t],{set:function(n,i){if(i==="")return n.setAttribute(t,"auto"),i}})}),i.attrHooks.contenteditable={get:o.get,set:function(n,t,i){t===""&&(t="false"),o.set(n,t,i)}}),i.support.hrefNormalized||i.each(["href","src","width","height"],function(n,r){i.attrHooks[r]=i.extend(i.attrHooks[r],{get:function(n){var i=n.getAttribute(r,2);return i===null?t:i}})}),i.support.style||(i.attrHooks.style={get:function(n){return n.style.cssText.toLowerCase()||t},set:function(n,t){return n.style.cssText=""+t}}),i.support.optSelected||(i.propHooks.selected=i.extend(i.propHooks.selected,{get:function(n){var t=n.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),i.support.enctype||(i.propFix.enctype="encoding"),i.support.checkOn||i.each(["radio","checkbox"],function(){i.valHooks[this]={get:function(n){return n.getAttribute("value")===null?"on":n.value}}}),i.each(["radio","checkbox"],function(){i.valHooks[this]=i.extend(i.valHooks[this],{set:function(n,t){if(i.isArray(t))return n.checked=i.inArray(i(n).val(),t)>=0}})});var wt=/^(?:textarea|input|select)$/i,ei=/^([^\.]*|)(?:\.(.+)|)$/,ee=/(?:^|\s)hover(\.\S+|)\b/,gf=/^key/,ne=/^(?:mouse|contextmenu)|click/,oi=/^(?:focusinfocus|focusoutblur)$/,ui=function(n){return i.event.special.hover?n:n.replace(ee,"mouseenter$1 mouseleave$1")};i.event={add:function(n,r,u,f,e){var v,h,a,y,w,o,b,l,p,c,s;if(n.nodeType!==3&&n.nodeType!==8&&r&&u&&(v=i._data(n))){for(u.handler&&(p=u,u=p.handler,e=p.selector),u.guid||(u.guid=i.guid++),a=v.events,a||(v.events=a={}),h=v.handle,h||(v.handle=h=function(n){return typeof i!="undefined"&&(!n||i.event.triggered!==n.type)?i.event.dispatch.apply(h.elem,arguments):t},h.elem=n),r=i.trim(ui(r)).split(" "),y=0;y<r.length;y++)w=ei.exec(r[y])||[],o=w[1],b=(w[2]||"").split(".").sort(),s=i.event.special[o]||{},o=(e?s.delegateType:s.bindType)||o,s=i.event.special[o]||{},l=i.extend({type:o,origType:w[1],data:f,handler:u,guid:u.guid,selector:e,namespace:b.join(".")},p),c=a[o],c||(c=a[o]=[],c.delegateCount=0,s.setup&&s.setup.call(n,f,b,h)!==!1||(n.addEventListener?n.addEventListener(o,h,!1):n.attachEvent&&n.attachEvent("on"+o,h))),s.add&&(s.add.call(n,l),l.handler.guid||(l.handler.guid=u.guid)),e?c.splice(c.delegateCount++,0,l):c.push(l),i.event.global[o]=!0;n=null}},global:{},remove:function(n,t,r,u,f){var v,p,e,w,h,b,a,l,c,o,s,y=i.hasData(n)&&i._data(n);if(y&&(l=y.events)){for(t=i.trim(ui(t||"")).split(" "),v=0;v<t.length;v++){if(p=ei.exec(t[v])||[],e=w=p[1],h=p[2],!e){for(e in l)i.event.remove(n,e+t[v],r,u,!0);continue}for(c=i.event.special[e]||{},e=(u?c.delegateType:c.bindType)||e,o=l[e]||[],b=o.length,h=h?new RegExp("(^|\\.)"+h.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a=0;a<o.length;a++)s=o[a],(f||w===s.origType)&&(!r||r.guid===s.guid)&&(!h||h.test(s.namespace))&&(!u||u===s.selector||u==="**"&&s.selector)&&(o.splice(a--,1),s.selector&&o.delegateCount--,c.remove&&c.remove.call(n,s));o.length===0&&b!==o.length&&((!c.teardown||c.teardown.call(n,h,y.handle)===!1)&&i.removeEvent(n,e,y.handle),delete l[e])}i.isEmptyObject(l)&&(delete y.handle,i.removeData(n,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(u,f,e,o){if(!e||e.nodeType!==3&&e.nodeType!==8){var w,d,l,h,c,v,a,p,y,k,s=u.type||u,b=[];if(oi.test(s+i.event.triggered))return;if(s.indexOf("!")>=0&&(s=s.slice(0,-1),d=!0),s.indexOf(".")>=0&&(b=s.split("."),s=b.shift(),b.sort()),(!e||i.event.customEvent[s])&&!i.event.global[s])return;if(u=typeof u=="object"?u[i.expando]?u:new i.Event(s,u):new i.Event(s),u.type=s,u.isTrigger=!0,u.exclusive=d,u.namespace=b.join("."),u.namespace_re=u.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,v=s.indexOf(":")<0?"on"+s:"",!e){w=i.cache;for(l in w)w[l].events&&w[l].events[s]&&i.event.trigger(u,f,w[l].handle.elem,!0);return}if(u.result=t,u.target||(u.target=e),f=f!=null?i.makeArray(f):[],f.unshift(u),a=i.event.special[s]||{},a.trigger&&a.trigger.apply(e,f)===!1)return;if(y=[[e,a.bindType||s]],!o&&!a.noBubble&&!i.isWindow(e)){for(k=a.delegateType||s,h=oi.test(k+s)?e:e.parentNode,c=e;h;h=h.parentNode)y.push([h,k]),c=h;c===(e.ownerDocument||r)&&y.push([c.defaultView||c.parentWindow||n,k])}for(l=0;l<y.length&&!u.isPropagationStopped();l++)h=y[l][0],u.type=y[l][1],p=(i._data(h,"events")||{})[u.type]&&i._data(h,"handle"),p&&p.apply(h,f),p=v&&h[v],p&&i.acceptData(h)&&p.apply(h,f)===!1&&u.preventDefault();return u.type=s,!o&&!u.isDefaultPrevented()&&(!a._default||a._default.apply(e.ownerDocument,f)===!1)&&(s!=="click"||!i.nodeName(e,"a"))&&i.acceptData(e)&&v&&e[s]&&(s!=="focus"&&s!=="blur"||u.target.offsetWidth!==0)&&!i.isWindow(e)&&(c=e[v],c&&(e[v]=null),i.event.triggered=s,e[s](),i.event.triggered=t,c&&(e[v]=c)),u.result}return},dispatch:function(r){r=i.event.fix(r||n.event);var f,p,e,y,v,b,s,w,u,o,g,a=(i._data(this,"events")||{})[r.type]||[],l=a.delegateCount,k=[].slice.call(arguments),d=!r.exclusive&&!r.namespace,h=i.event.special[r.type]||{},c=[];if(k[0]=r,r.delegateTarget=this,!h.preDispatch||h.preDispatch.call(this,r)!==!1){if(l&&(!r.button||r.type!=="click"))for(y=i(this),y.context=this,e=r.target;e!=this;e=e.parentNode||this)if(e.disabled!==!0||r.type!=="click"){for(b={},w=[],y[0]=e,f=0;f<l;f++)u=a[f],o=u.selector,b[o]===t&&(b[o]=y.is(o)),b[o]&&w.push(u);w.length&&c.push({elem:e,matches:w})}for(a.length>l&&c.push({elem:this,matches:a.slice(l)}),f=0;f<c.length&&!r.isPropagationStopped();f++)for(s=c[f],r.currentTarget=s.elem,p=0;p<s.matches.length&&!r.isImmediatePropagationStopped();p++)u=s.matches[p],(d||!r.namespace&&!u.namespace||r.namespace_re&&r.namespace_re.test(u.namespace))&&(r.data=u.data,r.handleObj=u,v=((i.event.special[u.origType]||{}).handle||u.handler).apply(s.elem,k),v!==t&&(r.result=v,v===!1&&(r.preventDefault(),r.stopPropagation())));return h.postDispatch&&h.postDispatch.call(this,r),r.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(n,t){return n.which==null&&(n.which=t.charCode!=null?t.charCode:t.keyCode),n}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(n,i){var s,f,u,e=i.button,o=i.fromElement;return n.pageX==null&&i.clientX!=null&&(s=n.target.ownerDocument||r,f=s.documentElement,u=s.body,n.pageX=i.clientX+(f&&f.scrollLeft||u&&u.scrollLeft||0)-(f&&f.clientLeft||u&&u.clientLeft||0),n.pageY=i.clientY+(f&&f.scrollTop||u&&u.scrollTop||0)-(f&&f.clientTop||u&&u.clientTop||0)),!n.relatedTarget&&o&&(n.relatedTarget=o===n.target?i.toElement:o),!n.which&&e!==t&&(n.which=e&1?1:e&2?3:e&4?2:0),n}},fix:function(n){if(n[i.expando])return n;var f,e,t=n,u=i.event.fixHooks[n.type]||{},o=u.props?this.props.concat(u.props):this.props;for(n=i.Event(t),f=o.length;f;)e=o[--f],n[e]=t[e];return n.target||(n.target=t.srcElement||r),n.target.nodeType===3&&(n.target=n.target.parentNode),n.metaKey=!!n.metaKey,u.filter?u.filter(n,t):n},special:{ready:{setup:i.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(n,t,r){i.isWindow(this)&&(this.onbeforeunload=r)},teardown:function(n,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(n,t,r,u){var f=i.extend(new i.Event,r,{type:n,isSimulated:!0,originalEvent:{}});u?i.event.trigger(f,null,t):i.event.dispatch.call(t,f),f.isDefaultPrevented()&&r.preventDefault()}},i.event.handle=i.event.dispatch,i.removeEvent=r.removeEventListener?function(n,t,i){n.removeEventListener&&n.removeEventListener(t,i,!1)}:function(n,t,i){var r="on"+t;n.detachEvent&&(typeof n[r]=="undefined"&&(n[r]=null),n.detachEvent(r,i))},i.Event=function(n,t){if(this instanceof i.Event)n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||n.returnValue===!1||n.getPreventDefault&&n.getPreventDefault()?ft:p):this.type=n,t&&i.extend(this,t),this.timeStamp=n&&n.timeStamp||i.now(),this[i.expando]=!0;else return new i.Event(n,t)},i.Event.prototype={preventDefault:function(){this.isDefaultPrevented=ft;var n=this.originalEvent;n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=ft;var n=this.originalEvent;n&&(n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ft,this.stopPropagation()},isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p},i.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(n,t){i.event.special[n]={delegateType:t,bindType:t,handle:function(n){var f,e=this,r=n.relatedTarget,u=n.handleObj,o=u.selector;return r&&(r===e||i.contains(e,r))||(n.type=u.origType,f=u.handler.apply(this,arguments),n.type=t),f}}}),i.support.submitBubbles||(i.event.special.submit={setup:function(){if(i.nodeName(this,"form"))return!1;i.event.add(this,"click._submit keypress._submit",function(n){var u=n.target,r=i.nodeName(u,"input")||i.nodeName(u,"button")?u.form:t;r&&!i._data(r,"_submit_attached")&&(i.event.add(r,"submit._submit",function(n){n._submit_bubble=!0}),i._data(r,"_submit_attached",!0))})},postDispatch:function(n){n._submit_bubble&&(delete n._submit_bubble,this.parentNode&&!n.isTrigger&&i.event.simulate("submit",this.parentNode,n,!0))},teardown:function(){if(i.nodeName(this,"form"))return!1;i.event.remove(this,"._submit")}}),i.support.changeBubbles||(i.event.special.change={setup:function(){if(wt.test(this.nodeName))return(this.type==="checkbox"||this.type==="radio")&&(i.event.add(this,"propertychange._change",function(n){n.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),i.event.add(this,"click._change",function(n){this._just_changed&&!n.isTrigger&&(this._just_changed=!1),i.event.simulate("change",this,n,!0)})),!1;i.event.add(this,"beforeactivate._change",function(n){var t=n.target;wt.test(t.nodeName)&&!i._data(t,"_change_attached")&&(i.event.add(t,"change._change",function(n){this.parentNode&&!n.isSimulated&&!n.isTrigger&&i.event.simulate("change",this.parentNode,n,!0)}),i._data(t,"_change_attached",!0))})},handle:function(n){var t=n.target;if(this!==t||n.isSimulated||n.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return n.handleObj.handler.apply(this,arguments)},teardown:function(){return i.event.remove(this,"._change"),wt.test(this.nodeName)}}),i.support.focusinBubbles||i.each({focus:"focusin",blur:"focusout"},function(n,t){var f=0,u=function(n){i.event.simulate(t,n.target,i.event.fix(n),!0)};i.event.special[t]={setup:function(){f++==0&&r.addEventListener(n,u,!0)},teardown:function(){--f==0&&r.removeEventListener(n,u,!0)}}}),i.fn.extend({on:function(n,r,u,f,e){var o,s;if(typeof n=="object"){typeof r!="string"&&(u=u||r,r=t);for(s in n)this.on(s,r,u,n[s],e);return this}if(u==null&&f==null?(f=r,u=r=t):f==null&&(typeof r=="string"?(f=u,u=t):(f=u,u=r,r=t)),f===!1)f=p;else if(!f)return this;return e===1&&(o=f,f=function(n){return i().off(n),o.apply(this,arguments)},f.guid=o.guid||(o.guid=i.guid++)),this.each(function(){i.event.add(this,n,f,u,r)})},one:function(n,t,i,r){return this.on(n,t,i,r,1)},off:function(n,r,u){var f,e;if(n&&n.preventDefault&&n.handleObj)return f=n.handleObj,i(n.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),this;if(typeof n=="object"){for(e in n)this.off(e,r,n[e]);return this}return(r===!1||typeof r=="function")&&(u=r,r=t),u===!1&&(u=p),this.each(function(){i.event.remove(this,n,u,r)})},bind:function(n,t,i){return this.on(n,null,t,i)},unbind:function(n,t){return this.off(n,null,t)},live:function(n,t,r){return i(this.context).on(n,this.selector,t,r),this},die:function(n,t){return i(this.context).off(n,this.selector||"**",t),this},delegate:function(n,t,i,r){return this.on(t,n,i,r)},undelegate:function(n,t,i){return arguments.length==1?this.off(n,"**"):this.off(t,n||"**",i)},trigger:function(n,t){return this.each(function(){i.event.trigger(n,t,this)})},triggerHandler:function(n,t){if(this[0])return i.event.trigger(n,t,this[0],!0)},toggle:function(n){var r=arguments,f=n.guid||i.guid++,t=0,u=function(u){var f=(i._data(this,"lastToggle"+n.guid)||0)%t;return i._data(this,"lastToggle"+n.guid,f+1),u.preventDefault(),r[f].apply(this,arguments)||!1};for(u.guid=f;t<r.length;)r[t++].guid=f;return this.click(u)},hover:function(n,t){return this.mouseenter(n).mouseleave(t||n)}}),i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(n,t){i.fn[t]=function(n,i){return i==null&&(i=n,n=null),arguments.length>0?this.on(t,null,n,i):this.trigger(t)},gf.test(t)&&(i.event.fixHooks[t]=i.event.keyHooks),ne.test(t)&&(i.event.fixHooks[t]=i.event.mouseHooks)}),function(n,t){function kt(n,t,i,u){for(var f=0,e=t.length;f<e;f++)r(n,t[f],i,u)}function hi(n,t,i,f,e,o){var s,h=u.setFilters[t.toLowerCase()];return h||r.error(t),(n||!(s=e))&&kt(n||"*",f,s=[],e),s.length>0?h(s,i,o):[]}function si(n,i,u,e,o){for(var c,d,v,a,h,k,s,b,w=0,g=o.length,y=l.POS,it=new RegExp("^"+y.source+"(?!"+f+")","i"),tt=function(){for(var n=1,i=arguments.length-2;n<i;n++)arguments[n]===t&&(c[n]=t)};w<g;w++){for(y.exec(""),n=o[w],a=[],v=0,h=e;c=y.exec(n);)b=y.lastIndex=c.index+c[0].length,b>v&&(s=n.slice(v,c.index),v=b,k=[i],nt.test(s)&&(h&&(k=h),h=e),(d=pi.test(s))&&(s=s.slice(0,-5).replace(nt,"$&*")),c.length>1&&c[0].replace(it,tt),h=hi(s,c[1],c[2],k,h,d));h?(a=a.concat(h),(s=n.slice(v))&&s!==")"?nt.test(s)?kt(s,a,u,e):r(s,i,u,e?e.concat(h):h):p.apply(u,a)):r(n,i,u,e)}return g===1?u:r.uniqueSort(u)}function ai(n,t,i){for(var c,e,h,v=[],y=0,f=ii.exec(n),o=!f.pop()&&!f.pop(),b=o&&n.match(rt)||[""],a=u.preFilter,w=u.filter,p=!i&&t!==s;(e=b[y])!=null&&o;y++)for(v.push(c=[]),p&&(e=" "+e);e;){o=!1,(f=nt.exec(e))&&(e=e.slice(f[0].length),o=c.push({part:f.pop().replace(ut," "),captures:f}));for(h in w)(f=l[h].exec(e))&&(!a[h]||(f=a[h](f,t,i)))&&(e=e.slice(f.shift().length),o=c.push({part:h,captures:f}));if(!o)break}return o||r.error(n),v}function li(n,t,i){var r=t.dir,u=pt++;return n||(n=function(n){return n===i}),t.first?function(t,i){while(t=t[r])if(t.nodeType===1)return n(t,i)&&t}:function(t,i){for(var f,s=u+"."+yt,e=s+"."+dt;t=t[r];)if(t.nodeType===1){if((f=t[o])===e)return t.sizset;if(typeof f=="string"&&f.indexOf(s)===0){if(t.sizset)return t}else{if(t[o]=e,n(t,i))return t.sizset=!0,t;t.sizset=!1}}}}function oi(n,t){return n?function(i,r){var u=t(i,r);return u&&n(u===!0?i:u,r)}:t}function di(n,t,i){for(var r,f,e=0;r=n[e];e++)u.relative[r.part]?f=li(f,u.relative[r.part],t):(r.captures.push(t,i),f=oi(f,u.filter[r.part].apply(null,r.captures)));return f}function nr(n){return function(t,i){for(var u,r=0;u=n[r];r++)if(u(t,i))return!0;return!1}}var dt,yt,d,b,vt,s=n.document,e=s.documentElement,h="undefined",k=!1,wt=!0,pt=0,c=[].slice,p=[].push,o=("sizcache"+Math.random()).replace(".",""),f="[\\x20\\t\\r\\n\\f]",v="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",yi=v.replace("w","w#"),wi="([*^$|!~]?=)",ti="\\["+f+"*("+v+")"+f+"*(?:"+wi+f+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+yi+")|)|)"+f+"*\\]",ri=":("+v+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|((?:[^,]|\\\\,|(?:,(?=[^\\[]*\\]))|(?:,(?=[^\\(]*\\))))*))\\)|)",ni=":(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\)|)(?=[^-]|$)",ui=f+"*([\\x20\\t\\r\\n\\f>+~])"+f+"*",at="(?=[^\\x20\\t\\r\\n\\f])(?:\\\\.|"+ti+"|"+ri.replace(2,7)+"|[^\\\\(),])+",ut=new RegExp("^"+f+"+|((?:^|[^\\\\])(?:\\\\.)*)"+f+"+$","g"),nt=new RegExp("^"+ui),rt=new RegExp(at+"?(?="+f+"*,|$)","g"),ii=new RegExp("^(?:(?!,)(?:(?:^|,)"+f+"*"+at+")*?|"+f+"*(.*?))(\\)|$)"),ir=new RegExp(at.slice(19,-6)+"\\x20\\t\\r\\n\\f>+~])+|"+ui,"g"),tr=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,it=/[\x20\t\r\n\f]*[+~]/,pi=/:not\($/,bi=/h\d/i,ki=/input|select|textarea|button/i,y=/\\(?!\\)/g,l={ID:new RegExp("^#("+v+")"),CLASS:new RegExp("^\\.("+v+")"),NAME:new RegExp("^\\[name=['\"]?("+v+")['\"]?\\]"),TAG:new RegExp("^("+v.replace("[-","[-\\*")+")"),ATTR:new RegExp("^"+ti),PSEUDO:new RegExp("^"+ri),CHILD:new RegExp("^:(only|nth|last|first)-child(?:\\("+f+"*(even|odd|(([+-]|)(\\d*)n|)"+f+"*(?:([+-]|)"+f+"*(\\d+)|))"+f+"*\\)|)","i"),POS:new RegExp(ni,"ig"),needsContext:new RegExp("^"+f+"*[>+~]|"+ni,"i")},ct={},lt=[],et={},ot=[],g=function(n){return n.sizzleFilter=!0,n},w=function(n){return function(t){return t.nodeName.toLowerCase()==="input"&&t.type===n}},gt=function(n){return function(t){var i=t.nodeName.toLowerCase();return(i==="input"||i==="button")&&t.type===n}},a=function(n){var i=!1,t=s.createElement("div");try{i=n(t)}catch(r){}return t=null,i},gi=a(function(n){n.innerHTML="<select></select>";var t=typeof n.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),vi=a(function(n){n.id=o+0,n.innerHTML="<a name='"+o+"'></a><div name='"+o+"'></div>",e.insertBefore(n,e.firstChild);var t=s.getElementsByName&&s.getElementsByName(o).length===2+s.getElementsByName(o+0).length;return vt=!s.getElementById(o),e.removeChild(n),t}),ei=a(function(n){return n.appendChild(s.createComment("")),n.getElementsByTagName("*").length===0}),fi=a(function(n){return n.innerHTML="<a href='#'></a>",n.firstChild&&typeof n.firstChild.getAttribute!==h&&n.firstChild.getAttribute("href")==="#"}),bt=a(function(n){return n.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!n.getElementsByClassName||n.getElementsByClassName("e").length===0?!1:(n.lastChild.className="e",n.getElementsByClassName("e").length!==1)}),r=function(n,t,i,r){i=i||[],t=t||s;var e,u,h,f,o=t.nodeType;if(o!==1&&o!==9)return[];if(!n||typeof n!="string")return i;if(h=ft(t),!h&&!r&&(e=tr.exec(n)))if(f=e[1]){if(o===9){if(u=t.getElementById(f),!u||!u.parentNode)return i;if(u.id===f)return i.push(u),i}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&ci(t,u)&&u.id===f)return i.push(u),i}else{if(e[2])return p.apply(i,c.call(t.getElementsByTagName(n),0)),i;if((f=e[3])&&bt&&t.getElementsByClassName)return p.apply(i,c.call(t.getElementsByClassName(f),0)),i}return tt(n,t,i,r,h)},u=r.selectors={cacheLength:50,match:l,order:["ID","TAG"],attrHandle:{},createPseudo:g,find:{ID:vt?function(n,t,i){if(typeof t.getElementById!==h&&!i){var r=t.getElementById(n);return r&&r.parentNode?[r]:[]}}:function(n,i,r){if(typeof i.getElementById!==h&&!r){var u=i.getElementById(n);return u?u.id===n||typeof u.getAttributeNode!==h&&u.getAttributeNode("id").value===n?[u]:t:[]}},TAG:ei?function(n,t){if(typeof t.getElementsByTagName!==h)return t.getElementsByTagName(n)}:function(n,t){var f=t.getElementsByTagName(n),r,i,u;if(n==="*"){for(i=[],u=0;r=f[u];u++)r.nodeType===1&&i.push(r);return i}return f}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(y,""),n[3]=(n[4]||n[5]||"").replace(y,""),n[2]==="~="&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),n[1]==="nth"?(n[2]||r.error(n[0]),n[3]=+(n[3]?n[4]+(n[5]||1):2*(n[2]==="even"||n[2]==="odd")),n[4]=+(n[6]+n[7]||n[2]==="odd")):n[2]&&r.error(n[0]),n},PSEUDO:function(n){var i,t=n[4];return l.CHILD.test(n[0])?null:(t&&(i=ii.exec(t))&&i.pop()&&(n[0]=n[0].slice(0,i[0].length-t.length-1),t=i[0].slice(0,-1)),n.splice(2,3,t||n[3]),n)}},filter:{ID:vt?function(n){return n=n.replace(y,""),function(t){return t.getAttribute("id")===n}}:function(n){return n=n.replace(y,""),function(t){var i=typeof t.getAttributeNode!==h&&t.getAttributeNode("id");return i&&i.value===n}},TAG:function(n){return n==="*"?function(){return!0}:(n=n.replace(y,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===n})},CLASS:function(n){var t=ct[n];return t||(t=ct[n]=new RegExp("(^|"+f+")"+n+"("+f+"|$)"),lt.push(n),lt.length>u.cacheLength&&delete ct[lt.shift()]),function(n){return t.test(n.className||typeof n.getAttribute!==h&&n.getAttribute("class")||"")}},ATTR:function(n,t,i){return t?function(u){var e=r.attr(u,n),f=e+"";if(e==null)return t==="!=";switch(t){case"=":return f===i;case"!=":return f!==i;case"^=":return i&&f.indexOf(i)===0;case"*=":return i&&f.indexOf(i)>-1;case"$=":return i&&f.substr(f.length-i.length)===i;case"~=":return(" "+f+" ").indexOf(i)>-1;case"|=":return f===i||f.substr(0,i.length+1)===i+"-"}}:function(t){return r.attr(t,n)!=null}},CHILD:function(n,t,i,r){if(n==="nth"){var u=pt++;return function(n){var f,e,s=0,t=n;if(i===1&&r===0)return!0;if(f=n.parentNode,f&&(f[o]!==u||!n.sizset)){for(t=f.firstChild;t;t=t.nextSibling)if(t.nodeType===1&&(t.sizset=++s,t===n))break;f[o]=u}return e=n.sizset-r,i===0?e===0:e%i==0&&e/i>=0}}return function(t){var i=t;switch(n){case"only":case"first":while(i=i.previousSibling)if(i.nodeType===1)return!1;if(n==="first")return!0;i=t;case"last":while(i=i.nextSibling)if(i.nodeType===1)return!1;return!0}}},PSEUDO:function(n,t,i,f){var e=u.pseudos[n]||u.pseudos[n.toLowerCase()];return e||r.error("unsupported pseudo: "+n),e.sizzleFilter?e(t,i,f):e}},pseudos:{not:g(function(n,t,i){var r=ht(n.replace(ut,"$1"),t,i);return function(n){return!r(n)}}),enabled:function(n){return n.disabled===!1},disabled:function(n){return n.disabled===!0},checked:function(n){var t=n.nodeName.toLowerCase();return t==="input"&&!!n.checked||t==="option"&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,n.selected===!0},parent:function(n){return!u.pseudos.empty(n)},empty:function(n){var t;for(n=n.firstChild;n;){if(n.nodeName>"@"||(t=n.nodeType)===3||t===4)return!1;n=n.nextSibling}return!0},contains:g(function(n){return function(t){return(t.textContent||t.innerText||st(t)).indexOf(n)>-1}}),has:g(function(n){return function(t){return r(n,t).length>0}}),header:function(n){return bi.test(n.nodeName)},text:function(n){var i,t;return n.nodeName.toLowerCase()==="input"&&(i=n.type)==="text"&&((t=n.getAttribute("type"))==null||t.toLowerCase()===i)},radio:w("radio"),checkbox:w("checkbox"),file:w("file"),password:w("password"),image:w("image"),submit:gt("submit"),reset:gt("reset"),button:function(n){var t=n.nodeName.toLowerCase();return t==="input"&&n.type==="button"||t==="button"},input:function(n){return ki.test(n.nodeName)},focus:function(n){var t=n.ownerDocument;return n===t.activeElement&&(!t.hasFocus||t.hasFocus())&&(!!n.type||!!n.href)},active:function(n){return n===n.ownerDocument.activeElement}},setFilters:{first:function(n,t,i){return i?n.slice(1):[n[0]]},last:function(n,t,i){var r=n.pop();return i?n:[r]},even:function(n,t,i){for(var u=[],r=i?1:0,f=n.length;r<f;r=r+2)u.push(n[r]);return u},odd:function(n,t,i){for(var u=[],r=i?0:1,f=n.length;r<f;r=r+2)u.push(n[r]);return u},lt:function(n,t,i){return i?n.slice(+t):n.slice(0,+t)},gt:function(n,t,i){return i?n.slice(0,+t+1):n.slice(+t+1)},eq:function(n,t,i){var r=n.splice(+t,1);return i?n:r}}},ht,tt;u.setFilters.nth=u.setFilters.eq,u.filters=u.pseudos,fi||(u.attrHandle={href:function(n){return n.getAttribute("href",2)},type:function(n){return n.getAttribute("type")}}),vi&&(u.order.push("NAME"),u.find.NAME=function(n,t){if(typeof t.getElementsByName!==h)return t.getElementsByName(n)}),bt&&(u.order.splice(1,0,"CLASS"),u.find.CLASS=function(n,t,i){if(typeof t.getElementsByClassName!==h&&!i)return t.getElementsByClassName(n)});try{c.call(e.childNodes,0)[0].nodeType}catch(rr){c=function(n){for(var i,t=[];i=this[n];n++)t.push(i);return t}}var ft=r.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return t?t.nodeName!=="HTML":!1},ci=r.contains=e.compareDocumentPosition?function(n,t){return!!(n.compareDocumentPosition(t)&16)}:e.contains?function(n,t){var r=n.nodeType===9?n.documentElement:n,i=t.parentNode;return n===i||!!(i&&i.nodeType===1&&r.contains&&r.contains(i))}:function(n,t){while(t=t.parentNode)if(t===n)return!0;return!1},st=r.getText=function(n){var r,i="",u=0,t=n.nodeType;if(t){if(t===1||t===9||t===11){if(typeof n.textContent=="string")return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)i+=st(n)}else if(t===3||t===4)return n.nodeValue}else for(;r=n[u];u++)i+=st(r);return i};r.attr=function(n,t){var i,r=ft(n);return r||(t=t.toLowerCase()),u.attrHandle[t]?u.attrHandle[t](n):gi||r?n.getAttribute(t):(i=n.getAttributeNode(t),i?typeof n[t]=="boolean"?n[t]?t:null:i.specified?i.value:null:null)},r.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n);},[0,0].sort(function(){return wt=0}),e.compareDocumentPosition?d=function(n,t){return n===t?(k=!0,0):(!n.compareDocumentPosition||!t.compareDocumentPosition?n.compareDocumentPosition:n.compareDocumentPosition(t)&4)?-1:1}:(d=function(n,t){var i;if(n===t)return k=!0,0;if(n.sourceIndex&&t.sourceIndex)return n.sourceIndex-t.sourceIndex;var o,h,f=[],u=[],s=n.parentNode,e=t.parentNode,r=s;if(s===e)return b(n,t);if(!s)return-1;if(!e)return 1;while(r)f.unshift(r),r=r.parentNode;for(r=e;r;)u.unshift(r),r=r.parentNode;for(o=f.length,h=u.length,i=0;i<o&&i<h;i++)if(f[i]!==u[i])return b(f[i],u[i]);return i===o?b(n,u[i],-1):b(f[i],t,1)},b=function(n,t,i){if(n===t)return i;for(var r=n.nextSibling;r;){if(r===t)return-1;r=r.nextSibling}return 1}),r.uniqueSort=function(n){var i,t=1;if(d&&(k=wt,n.sort(d),k))for(;i=n[t];t++)i===n[t-1]&&n.splice(t--,1);return n},ht=r.compile=function(n,t,i){var o,e,f,r=et[n];if(r&&r.context===t)return r;for(e=ai(n,t,i),f=0;o=e[f];f++)e[f]=di(o,t,i);return r=et[n]=nr(e),r.context=t,r.runs=r.dirruns=0,ot.push(n),ot.length>u.cacheLength&&delete et[ot.shift()],r},r.matches=function(n,t){return r(n,null,null,t)},r.matchesSelector=function(n,t){return r(t,null,null,[n]).length>0},tt=function(n,t,i,r,f){n=n.replace(ut,"$1");var s,w,o,d,k,b,a,g,v,e=n.match(rt),h=n.match(ir),nt=t.nodeType;if(l.POS.test(n))return si(n,t,i,r,e);if(r)s=c.call(r,0);else if(e&&e.length===1){if(h.length>1&&nt===9&&!f&&(e=l.ID.exec(h[0]))){if(t=u.find.ID(e[1],t,f)[0],!t)return i;n=n.slice(h.shift().length)}for(g=(e=it.exec(h[0]))&&!e.index&&t.parentNode||t,v=h.pop(),b=v.split(":not")[0],o=0,d=u.order.length;o<d;o++)if(a=u.order[o],e=l[a].exec(b)){if(s=u.find[a]((e[1]||"").replace(y,""),g,f),s==null)continue;b===v&&(n=n.slice(0,n.length-v.length)+b.replace(l[a],""),n||p.apply(i,c.call(s,0)));break}}if(n)for(w=ht(n,t,f),yt=w.dirruns++,s==null&&(s=u.find.TAG("*",it.test(n)&&t.parentNode||t)),o=0;k=s[o];o++)dt=w.runs++,w(k,t)&&i.push(k);return i},s.querySelectorAll&&function(){var s,l=tt,v=/'|\\/g,h=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,n=[],i=[":active"],t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||e.msMatchesSelector;a(function(t){t.innerHTML="<select><option selected></option></select>",t.querySelectorAll("[selected]").length||n.push("\\["+f+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),t.querySelectorAll(":checked").length||n.push(":checked")}),a(function(t){t.innerHTML="<p test=''></p>",t.querySelectorAll("[test^='']").length&&n.push("[*^$]="+f+"*(?:\"\"|'')"),t.innerHTML="<input type='hidden'>",t.querySelectorAll(":enabled").length||n.push(":enabled",":disabled")}),n=n.length&&new RegExp(n.join("|")),tt=function(t,i,r,u,f){if(!u&&!f&&(!n||!n.test(t)))if(i.nodeType===9)try{return p.apply(r,c.call(i.querySelectorAll(t),0)),r}catch(a){}else if(i.nodeType===1&&i.nodeName.toLowerCase()!=="object"){var s=i.getAttribute("id"),e=s||o,h=it.test(t)&&i.parentNode||i;s?e=e.replace(v,"\\$&"):i.setAttribute("id",e);try{return p.apply(r,c.call(h.querySelectorAll(t.replace(rt,"[id='"+e+"'] $&")),0)),r}catch(a){}finally{s||i.removeAttribute("id")}}return l(t,i,r,u,f)},t&&(a(function(n){s=t.call(n,"div");try{t.call(n,"[test!='']:sizzle"),i.push(u.match.PSEUDO)}catch(r){}}),i=new RegExp(i.join("|")),r.matchesSelector=function(u,f){if(f=f.replace(h,"='$1']"),!ft(u)&&!i.test(f)&&(!n||!n.test(f)))try{var e=t.call(u,f);if(e||s||u.document&&u.document.nodeType!==11)return e}catch(o){}return r(f,null,null,[u]).length>0})}(),r.attr=i.attr,i.find=r,i.expr=r.selectors,i.expr[":"]=i.expr.pseudos,i.unique=r.uniqueSort,i.text=r.getText,i.isXMLDoc=r.isXML,i.contains=r.contains}(n);var te=/Until$/,ue=/^(?:parents|prev(?:Until|All))/,fe=/^.[^:#\[\.,]*$/,fi=i.expr.match.needsContext,ie={children:!0,contents:!0,next:!0,prev:!0};i.fn.extend({find:function(n){var t,e,o,u,f,r,s=this;if(typeof n!="string")return i(n).filter(function(){for(t=0,e=s.length;t<e;t++)if(i.contains(s[t],this))return!0});for(r=this.pushStack("","find",n),t=0,e=this.length;t<e;t++)if(o=r.length,i.find(n,this[t],r),t>0)for(u=o;u<r.length;u++)for(f=0;f<o;f++)if(r[f]===r[u]){r.splice(u--,1);break}return r},has:function(n){var t,r=i(n,this),u=r.length;return this.filter(function(){for(t=0;t<u;t++)if(i.contains(this,r[t]))return!0})},not:function(n){return this.pushStack(eu(this,n,!1),"not",n)},filter:function(n){return this.pushStack(eu(this,n,!0),"filter",n)},is:function(n){return!!n&&(typeof n=="string"?fi.test(n)?i(n,this.context).index(this[0])>=0:i.filter(n,this).length>0:this.filter(n).length>0)},closest:function(n,t){for(var r,f=0,o=this.length,u=[],e=fi.test(n)||typeof n!="string"?i(n,t||this.context):0;f<o;f++)for(r=this[f];r&&r.ownerDocument&&r!==t&&r.nodeType!==11;){if(e?e.index(r)>-1:i.find.matchesSelector(r,n)){u.push(r);break}r=r.parentNode}return u=u.length>1?i.unique(u):u,this.pushStack(u,"closest",n)},index:function(n){return n?typeof n=="string"?i.inArray(this[0],i(n)):i.inArray(n.jquery?n[0]:n,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(n,t){var u=typeof n=="string"?i(n,t):i.makeArray(n&&n.nodeType?[n]:n),r=i.merge(this.get(),u);return this.pushStack(b(u[0])||b(r[0])?r:i.unique(r))},addBack:function(n){return this.add(n==null?this.prevObject:this.prevObject.filter(n))}}),i.fn.andSelf=i.fn.addBack,i.each({parent:function(n){var t=n.parentNode;return t&&t.nodeType!==11?t:null},parents:function(n){return i.dir(n,"parentNode")},parentsUntil:function(n,t,r){return i.dir(n,"parentNode",r)},next:function(n){return vu(n,"nextSibling")},prev:function(n){return vu(n,"previousSibling")},nextAll:function(n){return i.dir(n,"nextSibling")},prevAll:function(n){return i.dir(n,"previousSibling")},nextUntil:function(n,t,r){return i.dir(n,"nextSibling",r)},prevUntil:function(n,t,r){return i.dir(n,"previousSibling",r)},siblings:function(n){return i.sibling((n.parentNode||{}).firstChild,n)},children:function(n){return i.sibling(n.firstChild)},contents:function(n){return i.nodeName(n,"iframe")?n.contentDocument||n.contentWindow.document:i.merge([],n.childNodes)}},function(n,t){i.fn[n]=function(r,u){var f=i.map(this,t,r);return te.test(n)||(u=r),u&&typeof u=="string"&&(f=i.filter(u,f)),f=this.length>1&&!ie[n]?i.unique(f):f,this.length>1&&ue.test(n)&&(f=f.reverse()),this.pushStack(f,n,s.call(arguments).join(","))}}),i.extend({filter:function(n,t,r){return r&&(n=":not("+n+")"),t.length===1?i.find.matchesSelector(t[0],n)?[t[0]]:[]:i.find.matches(n,t)},dir:function(n,r,u){for(var e=[],f=n[r];f&&f.nodeType!==9&&(u===t||f.nodeType!==1||!i(f).is(u));)f.nodeType===1&&e.push(f),f=f[r];return e},sibling:function(n,t){for(var i=[];n;n=n.nextSibling)n.nodeType===1&&n!==t&&i.push(n);return i}});var ur="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",we=/ jQuery\d+="(?:null|\d+)"/g,bt=/^\s+/,or=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,er=/<([\w:]+)/,ho=/<tbody/i,eo=/<|&#?\w+;/,oo=/<(?:script|style|link)/i,co=/<(?:script|object|embed|option|style)/i,gt=new RegExp("<(?:"+ur+")[\\s/>]","i"),li=/^(?:checkbox|radio)$/,bi=/checked\s*(?:[^=]|=\s*.checked.)/i,yo=/\/(java|ecma)script/i,lo=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,e={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},nr=ou(r),pt=nr.appendChild(r.createElement("div"));e.optgroup=e.option,e.tbody=e.tfoot=e.colgroup=e.caption=e.thead,e.th=e.td,i.support.htmlSerialize||(e._default=[1,"X<div>","</div>"]),i.fn.extend({text:function(n){return i.access(this,function(n){return n===t?i.text(this):this.empty().append((this[0]&&this[0].ownerDocument||r).createTextNode(n))},null,n,arguments.length)},wrapAll:function(n){if(i.isFunction(n))return this.each(function(t){i(this).wrapAll(n.call(this,t))});if(this[0]){var t=i(n,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var n=this;n.firstChild&&n.firstChild.nodeType===1;)n=n.firstChild;return n}).append(this)}return this},wrapInner:function(n){return i.isFunction(n)?this.each(function(t){i(this).wrapInner(n.call(this,t))}):this.each(function(){var r=i(this),t=r.contents();t.length?t.wrapAll(n):r.append(n)})},wrap:function(n){var t=i.isFunction(n);return this.each(function(r){i(this).wrapAll(t?n.call(this,r):n)})},unwrap:function(){return this.parent().each(function(){i.nodeName(this,"body")||i(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(n){(this.nodeType===1||this.nodeType===11)&&this.appendChild(n)})},prepend:function(){return this.domManip(arguments,!0,function(n){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(n,this.firstChild)})},before:function(){if(!b(this[0]))return this.domManip(arguments,!1,function(n){this.parentNode.insertBefore(n,this)});if(arguments.length){var n=i.clean(arguments);return this.pushStack(i.merge(n,this),"before",this.selector)}},after:function(){if(!b(this[0]))return this.domManip(arguments,!1,function(n){this.parentNode.insertBefore(n,this.nextSibling)});if(arguments.length){var n=i.clean(arguments);return this.pushStack(i.merge(this,n),"after",this.selector)}},remove:function(n,t){for(var r,u=0;(r=this[u])!=null;u++)(!n||i.filter(n,[r]).length)&&(!t&&r.nodeType===1&&(i.cleanData(r.getElementsByTagName("*")),i.cleanData([r])),r.parentNode&&r.parentNode.removeChild(r));return this},empty:function(){for(var n,t=0;(n=this[t])!=null;t++)for(n.nodeType===1&&i.cleanData(n.getElementsByTagName("*"));n.firstChild;)n.removeChild(n.firstChild);return this},clone:function(n,t){return n=n==null?!1:n,t=t==null?n:t,this.map(function(){return i.clone(this,n,t)})},html:function(n){return i.access(this,function(n){var r=this[0]||{},u=0,f=this.length;if(n===t)return r.nodeType===1?r.innerHTML.replace(we,""):t;if(typeof n=="string"&&!oo.test(n)&&(i.support.htmlSerialize||!gt.test(n))&&(i.support.leadingWhitespace||!bt.test(n))&&!e[(er.exec(n)||["",""])[1].toLowerCase()]){n=n.replace(or,"<$1></$2>");try{for(;u<f;u++)r=this[u]||{},r.nodeType===1&&(i.cleanData(r.getElementsByTagName("*")),r.innerHTML=n);r=0}catch(o){}}r&&this.empty().append(n)},null,n,arguments.length)},replaceWith:function(n){return b(this[0])?this.length?this.pushStack(i(i.isFunction(n)?n():n),"replaceWith",n):this:i.isFunction(n)?this.each(function(t){var r=i(this),u=r.html();r.replaceWith(n.call(this,t,u))}):(typeof n!="string"&&(n=i(n).detach()),this.each(function(){var t=this.nextSibling,r=this.parentNode;i(this).remove(),t?i(t).before(n):i(r).append(n)}))},detach:function(n){return this.remove(n,!0)},domManip:function(n,r,u){n=[].concat.apply([],n);var l,o,f,a,e=0,s=n[0],h=[],c=this.length;if(!i.support.checkClone&&c>1&&typeof s=="string"&&bi.test(s))return this.each(function(){i(this).domManip(n,r,u)});if(i.isFunction(s))return this.each(function(f){var e=i(this);n[0]=s.call(this,f,r?e.html():t),e.domManip(n,r,u)});if(this[0]){if(l=i.buildFragment(n,this,h),f=l.fragment,o=f.firstChild,f.childNodes.length===1&&(f=o),o)for(r=r&&i.nodeName(o,"tr"),a=l.cacheable||c-1;e<c;e++)u.call(r&&i.nodeName(this[e],"table")?hf(this[e],"tbody"):this[e],e===a?f:i.clone(f,!0,!0));f=o=null,h.length&&i.each(h,function(n,t){t.src?i.ajax?i.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,throws:!0}):i.error("no ajax"):i.globalEval((t.text||t.textContent||t.innerHTML||"").replace(lo,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),i.buildFragment=function(n,u,f){var o,s,h,e=n[0];return u=u||r,u=(u[0]||u).ownerDocument||u[0]||u,typeof u.createDocumentFragment=="undefined"&&(u=r),n.length===1&&typeof e=="string"&&e.length<512&&u===r&&e.charAt(0)==="<"&&!co.test(e)&&(i.support.checkClone||!bi.test(e))&&(i.support.html5Clone||!gt.test(e))&&(s=!0,o=i.fragments[e],h=o!==t),o||(o=u.createDocumentFragment(),i.clean(n,u,o,f),s&&(i.fragments[e]=h&&o)),{fragment:o,cacheable:s}},i.fragments={},i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,t){i.fn[n]=function(r){var s,e=0,o=[],f=i(r),h=f.length,u=this.length===1&&this[0].parentNode;if((u==null||u&&u.nodeType===11&&u.childNodes.length===1)&&h===1)return f[t](this[0]),this;for(;e<h;e++)s=(e>0?this.clone(!0):this).get(),i(f[e])[t](s),o=o.concat(s);return this.pushStack(o,n,f.selector)}}),i.extend({clone:function(n,t,r){var e,o,u,f;if(i.support.html5Clone||i.isXMLDoc(n)||!gt.test("<"+n.nodeName+">")?f=n.cloneNode(!0):(pt.innerHTML=n.outerHTML,pt.removeChild(f=pt.firstChild)),(!i.support.noCloneEvent||!i.support.noCloneChecked)&&(n.nodeType===1||n.nodeType===11)&&!i.isXMLDoc(n))for(lu(n,f),e=ht(n),o=ht(f),u=0;e[u];++u)o[u]&&lu(e[u],o[u]);if(t&&(yu(n,f),r))for(e=ht(n),o=ht(f),u=0;e[u];++u)yu(e[u],o[u]);return e=o=null,f},clean:function(n,t,u,f){var a,l,o,w,y,d,s,k,v,g,b,p,h=0,c=[];for(t&&typeof t.createDocumentFragment!="undefined"||(t=r),l=t===r&&nr;(o=n[h])!=null;h++)if(typeof o=="number"&&(o+=""),o){if(typeof o=="string")if(eo.test(o)){for(l=l||ou(t),s=s||l.appendChild(t.createElement("div")),o=o.replace(or,"<$1></$2>"),w=(er.exec(o)||["",""])[1].toLowerCase(),y=e[w]||e._default,d=y[0],s.innerHTML=y[1]+o+y[2];d--;)s=s.lastChild;if(!i.support.tbody)for(k=ho.test(o),v=w==="table"&&!k?s.firstChild&&s.firstChild.childNodes:y[1]==="<table>"&&!k?s.childNodes:[],a=v.length-1;a>=0;--a)i.nodeName(v[a],"tbody")&&!v[a].childNodes.length&&v[a].parentNode.removeChild(v[a]);!i.support.leadingWhitespace&&bt.test(o)&&s.insertBefore(t.createTextNode(bt.exec(o)[0]),s.firstChild),o=s.childNodes,s=l.lastChild}else o=t.createTextNode(o);o.nodeType?c.push(o):c=i.merge(c,o)}if(s&&(l.removeChild(s),o=s=l=null),!i.support.appendChecked)for(h=0;(o=c[h])!=null;h++)i.nodeName(o,"input")?au(o):typeof o.getElementsByTagName!="undefined"&&i.grep(o.getElementsByTagName("input"),au);if(u)for(b=function(n){if(!n.type||yo.test(n.type))return f?f.push(n.parentNode?n.parentNode.removeChild(n):n):u.appendChild(n)},h=0;(o=c[h])!=null;h++)i.nodeName(o,"script")&&b(o)||(u.appendChild(o),typeof o.getElementsByTagName!="undefined"&&(p=i.grep(i.merge([],o.getElementsByTagName("script")),b),c.splice.apply(c,[h+1,0].concat(p)),h+=p.length));return c},cleanData:function(n,t){for(var f,u,r,o,h=0,e=i.expando,s=i.cache,l=i.support.deleteExpando,c=i.event.special;(r=n[h])!=null;h++)if((t||i.acceptData(r))&&(u=r[e],f=u&&s[u],f)){if(f.events)for(o in f.events)c[o]?i.event.remove(r,o):i.removeEvent(r,o,f.handle);s[u]&&(delete s[u],l?delete r[e]:r.removeAttribute?r.removeAttribute(e):r[e]=null,i.deletedIds.push(u))}}}),function(){var t,n;i.uaMatch=function(n){n=n.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[];return{browser:t[1]||"",version:t[2]||"0"}},t=i.uaMatch(de.userAgent),n={},t.browser&&(n[t.browser]=!0,n.version=t.version),n.webkit&&(n.safari=!0),i.browser=n,i.sub=function(){function n(t,i){return new n.fn.init(t,i)}i.extend(!0,n,this),n.superclass=this,n.fn=n.prototype=this(),n.fn.constructor=n,n.sub=this.sub,n.fn.init=function u(c,r){return r&&r instanceof i&&!(r instanceof n)&&(r=n(r)),i.fn.init.call(this,u,r,t)},n.fn.init.prototype=n.fn;var t=n(r);return n}}();var u,v,y,dt=/alpha\([^)]*\)/i,ke=/opacity=([^)]*)/,no=/^(top|right|bottom|left)$/,fr=/^margin/,uo=new RegExp("^("+d+")(.*)$","i"),g=new RegExp("^("+d+")(?!px)[a-z%]+$","i"),to=new RegExp("^([-+])=("+d+")","i"),ti={},bf={position:"absolute",visibility:"hidden",display:"block"},rr={letterSpacing:0,fontWeight:400,lineHeight:1},c=["Top","Right","Bottom","Left"],pi=["Webkit","O","Moz","ms"],du=i.fn.toggle;i.fn.extend({css:function(n,r){return i.access(this,function(n,r,u){return u!==t?i.style(n,r,u):i.css(n,r)},n,r,arguments.length>1)},show:function(){return vr(this,!0)},hide:function(){return vr(this)},toggle:function(n,t){var r=typeof n=="boolean";return i.isFunction(n)&&i.isFunction(t)?du.apply(this,arguments):this.each(function(){(r?n:st(this))?i(this).show():i(this).hide()})}}),i.extend({cssHooks:{opacity:{get:function(n,t){if(t){var i=u(n,"opacity");return i===""?"1":i}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:i.support.cssFloat?"cssFloat":"styleFloat"},style:function(n,r,u,f){if(n&&n.nodeType!==3&&n.nodeType!==8&&n.style){var s,h,e,o=i.camelCase(r),c=n.style;if(r=i.cssProps[o]||(i.cssProps[o]=uu(c,o)),e=i.cssHooks[r]||i.cssHooks[o],u===t)return e&&"get"in e&&(s=e.get(n,!1,f))!==t?s:c[r];if((h=typeof u,h==="string"&&(s=to.exec(u))&&(u=(s[1]+1)*s[2]+parseFloat(i.css(n,r)),h="number"),u!=null&&(h!=="number"||!isNaN(u)))&&(h==="number"&&!i.cssNumber[o]&&(u+="px"),!e||!("set"in e)||(u=e.set(n,u,f))!==t))try{c[r]=u}catch(l){}}},css:function(n,r,f,e){var o,c,s,h=i.camelCase(r);return r=i.cssProps[h]||(i.cssProps[h]=uu(n.style,h)),s=i.cssHooks[r]||i.cssHooks[h],s&&"get"in s&&(o=s.get(n,!0,e)),o===t&&(o=u(n,r)),o==="normal"&&r in rr&&(o=rr[r]),f||e!==t?(c=parseFloat(o),f||i.isNumeric(c)?c||0:o):o},swap:function(n,t,i){var f,r,u={};for(r in t)u[r]=n.style[r],n.style[r]=t[r];f=i.call(n);for(r in t)n.style[r]=u[r];return f}}),n.getComputedStyle?u=function(n,t){var u,e,o,s,f=getComputedStyle(n,null),r=n.style;return f&&(u=f[t],u===""&&!i.contains(n.ownerDocument.documentElement,n)&&(u=i.style(n,t)),g.test(u)&&fr.test(t)&&(e=r.width,o=r.minWidth,s=r.maxWidth,r.minWidth=r.maxWidth=r.width=u,u=f.width,r.width=e,r.minWidth=o,r.maxWidth=s)),u}:r.documentElement.currentStyle&&(u=function(n,t){var f,u,i=n.currentStyle&&n.currentStyle[t],r=n.style;return i==null&&r&&r[t]&&(i=r[t]),g.test(i)&&!no.test(t)&&(f=r.left,u=n.runtimeStyle&&n.runtimeStyle.left,u&&(n.runtimeStyle.left=n.currentStyle.left),r.left=t==="fontSize"?"1em":i,i=r.pixelLeft+"px",r.left=f,u&&(n.runtimeStyle.left=u)),i===""?"auto":i}),i.each(["height","width"],function(n,t){i.cssHooks[t]={get:function(n,r,f){if(r)return n.offsetWidth!==0||u(n,"display")!=="none"?hr(n,t,f):i.swap(n,bf,function(){return hr(n,t,f)})},set:function(n,r,u){return ar(n,r,u?yr(n,t,u,i.support.boxSizing&&i.css(n,"boxSizing")==="border-box"):0)}}}),i.support.opacity||(i.cssHooks.opacity={get:function(n,t){return ke.test((t&&n.currentStyle?n.currentStyle.filter:n.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(n,t){var r=n.style,f=n.currentStyle,e=i.isNumeric(t)?"alpha(opacity="+t*100+")":"",u=f&&f.filter||r.filter||"";(r.zoom=1,t>=1&&i.trim(u.replace(dt,""))===""&&r.removeAttribute&&(r.removeAttribute("filter"),f&&!f.filter))||(r.filter=dt.test(u)?u.replace(dt,e):u+" "+e)}}),i(function(){i.support.reliableMarginRight||(i.cssHooks.marginRight={get:function(n,t){return i.swap(n,{display:"inline-block"},function(){if(t)return u(n,"marginRight")})}}),!i.support.pixelPosition&&i.fn.position&&i.each(["top","left"],function(n,t){i.cssHooks[t]={get:function(n,r){if(r){var f=u(n,t);return g.test(f)?i(n).position()[t]+"px":f}}}})}),i.expr&&i.expr.filters&&(i.expr.filters.hidden=function(n){return n.offsetWidth===0&&n.offsetHeight===0||!i.support.reliableHiddenOffsets&&(n.style&&n.style.display||u(n,"display"))==="none"},i.expr.filters.visible=function(n){return!i.expr.filters.hidden(n)}),i.each({margin:"",padding:"",border:"Width"},function(n,t){i.cssHooks[n+t]={expand:function(i){for(var u=typeof i=="string"?i.split(" "):[i],f={},r=0;r<4;r++)f[n+c[r]+t]=u[r]||u[r-2]||u[0];return f}},fr.test(n)||(i.cssHooks[n+t].set=ar)});var nf=/%20/g,rf=/\[\]$/,hi=/\r?\n/g,ku=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bu=/^(?:select|textarea)/i;i.fn.extend({serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?i.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bu.test(this.nodeName)||ku.test(this.type))}).map(function(n,t){var r=i(this).val();return r==null?null:i.isArray(r)?i.map(r,function(n){return{name:t.name,value:n.replace(hi,"\r\n")}}):{name:t.name,value:r.replace(hi,"\r\n")}}).get()}}),i.param=function(n,r){var f,u=[],e=function(n,t){t=i.isFunction(t)?t():t==null?"":t,u[u.length]=encodeURIComponent(n)+"="+encodeURIComponent(t)};if(r===t&&(r=i.ajaxSettings&&i.ajaxSettings.traditional),i.isArray(n)||n.jquery&&!i.isPlainObject(n))i.each(n,function(){e(this.name,this.value)});else for(f in n)ii(f,n[f],r,e);return u.join("&").replace(nf,"+")};var a,l,vf=/#.*$/,af=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,pf=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,yf=/^(?:GET|HEAD)$/,of=/^\/\//,ri=/\?/,ff=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,gu=/([?&])_=[^&]*/,tr=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,ki=i.fn.load,ni={},wi={},gi=["*/"]+["*"];try{a=ge.href}catch(po){a=r.createElement("a"),a.href="",a=a.href}l=tr.exec(a.toLowerCase())||[],i.fn.load=function(n,r,u){if(typeof n!="string"&&ki)return ki.apply(this,arguments);if(!this.length)return this;var e,o,h,s=this,f=n.indexOf(" ");return f>=0&&(e=n.slice(f,n.length),n=n.slice(0,f)),i.isFunction(r)?(u=r,r=t):typeof r=="object"&&(o="POST"),i.ajax({url:n,type:o,dataType:"html",data:r,complete:function(n,t){u&&s.each(u,h||[n.responseText,t,n])}}).done(function(n){h=arguments,s.html(e?i("<div>").append(n.replace(ff,"")).find(e):n)}),this},i.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(n,t){i.fn[t]=function(n){return this.on(t,n)}}),i.each(["get","post"],function(n,r){i[r]=function(n,u,f,e){return i.isFunction(u)&&(e=e||f,f=u,u=t),i.ajax({type:r,url:n,data:u,success:f,dataType:e})}}),i.extend({getScript:function(n,r){return i.get(n,t,r,"script")},getJSON:function(n,t,r){return i.get(n,t,r,"json")},ajaxSetup:function(n,t){return t?iu(n,i.ajaxSettings):(t=n,n=i.ajaxSettings),iu(n,t),n},ajaxSettings:{url:a,isLocal:pf.test(l[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":gi},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":n.String,"text html":!0,"text json":i.parseJSON,"text xml":i.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:tu(ni),ajaxTransport:tu(wi),ajax:function(n,r){function p(n,r,h,c){var a,d,w,tt,p,l=r;e!==2&&(e=2,nt&&clearTimeout(nt),v=t,k=c||"",f.readyState=n>0?4:0,h&&(tt=uf(u,f,h)),n>=200&&n<300||n===304?(u.ifModified&&(p=f.getResponseHeader("Last-Modified"),p&&(i.lastModified[o]=p),p=f.getResponseHeader("Etag"),p&&(i.etag[o]=p)),n===304?(l="notmodified",a=!0):(a=tf(u,tt),l=a.state,d=a.data,w=a.error,a=!w)):(w=l,(!l||n)&&(l="error",n<0&&(n=0))),f.status=n,f.statusText=""+(r||l),a?it.resolveWith(s,[d,l,f]):it.rejectWith(s,[f,l,w]),f.statusCode(b),b=t,y&&g.trigger("ajax"+(a?"Success":"Error"),[f,u,a?d:w]),ut.fireWith(s,[f,l]),y&&(g.trigger("ajaxComplete",[f,u]),--i.active||i.event.trigger("ajaxStop")))}var d,tt;typeof n=="object"&&(r=n,n=t),r=r||{};var o,k,w,v,nt,a,y,c,u=i.ajaxSetup({},r),s=u.context||u,g=s!==u&&(s.nodeType||s instanceof i)?i(s):i.event,it=i.Deferred(),ut=i.Callbacks("once memory"),b=u.statusCode||{},ft={},et={},e=0,rt="canceled",f={readyState:0,setRequestHeader:function(n,t){if(!e){var i=n.toLowerCase();n=et[i]=et[i]||n,ft[n]=t}return this},getAllResponseHeaders:function(){return e===2?k:null},getResponseHeader:function(n){var i;if(e===2){if(!w)for(w={};i=af.exec(k);)w[i[1].toLowerCase()]=i[2];i=w[n.toLowerCase()]}return i===t?null:i},overrideMimeType:function(n){return e||(u.mimeType=n),this},abort:function(n){return n=n||rt,v&&v.abort(n),p(0,n),this}};if(it.promise(f),f.success=f.done,f.error=f.fail,f.complete=ut.add,f.statusCode=function(n){if(n){var t;if(e<2)for(t in n)b[t]=[b[t],n[t]];else t=n[f.status],f.always(t)}return this},u.url=((n||u.url)+"").replace(vf,"").replace(of,l[1]+"//"),u.dataTypes=i.trim(u.dataType||"*").toLowerCase().split(h),u.crossDomain==null&&(a=tr.exec(u.url.toLowerCase()),u.crossDomain=!(!a||a[1]==l[1]&&a[2]==l[2]&&(a[3]||(a[1]==="http:"?80:443))==(l[3]||(l[1]==="http:"?80:443)))),u.data&&u.processData&&typeof u.data!="string"&&(u.data=i.param(u.data,u.traditional)),lt(ni,u,r,f),e===2)return f;y=u.global,u.type=u.type.toUpperCase(),u.hasContent=!yf.test(u.type),y&&i.active++==0&&i.event.trigger("ajaxStart"),u.hasContent||(u.data&&(u.url+=(ri.test(u.url)?"&":"?")+u.data,delete u.data),o=u.url,u.cache===!1&&(d=i.now(),tt=u.url.replace(gu,"$1_="+d),u.url=tt+(tt===u.url?(ri.test(u.url)?"&":"?")+"_="+d:""))),(u.data&&u.hasContent&&u.contentType!==!1||r.contentType)&&f.setRequestHeader("Content-Type",u.contentType),u.ifModified&&(o=o||u.url,i.lastModified[o]&&f.setRequestHeader("If-Modified-Since",i.lastModified[o]),i.etag[o]&&f.setRequestHeader("If-None-Match",i.etag[o])),f.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+(u.dataTypes[0]!=="*"?", "+gi+"; q=0.01":""):u.accepts["*"]);for(c in u.headers)f.setRequestHeader(c,u.headers[c]);if(!u.beforeSend||u.beforeSend.call(s,f,u)!==!1&&e!==2){rt="abort";for(c in{success:1,error:1,complete:1})f[c](u[c]);if(v=lt(wi,u,r,f),v){f.readyState=1,y&&g.trigger("ajaxSend",[f,u]),u.async&&u.timeout>0&&(nt=setTimeout(function(){f.abort("timeout")},u.timeout));try{e=1,v.send(ft,p)}catch(ot){if(e<2)p(-1,ot);else throw ot;}}else p(-1,"No Transport");return f}return f.abort()},active:0,lastModified:{},etag:{}});var di=[],lf=/\?/,et=/(=)\?(?=&|$)|\?\?/,sf=i.now();i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var n=di.pop()||i.expando+"_"+sf++;return this[n]=!0,n}}),i.ajaxPrefilter("json jsonp",function(r,u,f){var e,s,o,l=r.data,a=r.url,h=r.jsonp!==!1,c=h&&et.test(a),v=h&&!c&&typeof l=="string"&&!(r.contentType||"").indexOf("application/x-www-form-urlencoded")&&et.test(l);if(r.dataTypes[0]==="jsonp"||c||v)return e=r.jsonpCallback=i.isFunction(r.jsonpCallback)?r.jsonpCallback():r.jsonpCallback,s=n[e],c?r.url=a.replace(et,"$1"+e):v?r.data=l.replace(et,"$1"+e):h&&(r.url+=(lf.test(a)?"&":"?")+r.jsonp+"="+e),r.converters["script json"]=function(){return o||i.error(e+" was not called"),o[0]},r.dataTypes[0]="json",n[e]=function(){o=arguments},f.always(function(){n[e]=s,r[e]&&(r.jsonpCallback=u.jsonpCallback,di.push(e)),o&&i.isFunction(s)&&s(o[0]),o=s=t}),"script"}),i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(n){return i.globalEval(n),n}}}),i.ajaxPrefilter("script",function(n){n.cache===t&&(n.cache=!1),n.crossDomain&&(n.type="GET",n.global=!1)}),i.ajaxTransport("script",function(n){if(n.crossDomain){var i,u=r.head||r.getElementsByTagName("head")[0]||r.documentElement;return{send:function(f,e){i=r.createElement("script"),i.async="async",n.scriptCharset&&(i.charset=n.scriptCharset),i.src=n.url,i.onload=i.onreadystatechange=function(n,r){(r||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,u&&i.parentNode&&u.removeChild(i),i=t,r||e(200,"success"))},u.insertBefore(i,u.firstChild)},abort:function(){i&&i.onload(0,1)}}}}),ot=n.ActiveXObject?function(){for(var n in w)w[n](0,1)}:!1,ir=0,i.ajaxSettings.xhr=n.ActiveXObject?function(){return!this.isLocal&&gr()||wu()}:gr,function(n){i.extend(i.support,{ajax:!!n,cors:!!n&&"withCredentials"in n})}(i.ajaxSettings.xhr()),i.support.ajax&&i.ajaxTransport(function(r){if(!r.crossDomain||i.support.cors){var u;return{send:function(f,e){var h,s,o=r.xhr();if(r.username?o.open(r.type,r.url,r.async,r.username,r.password):o.open(r.type,r.url,r.async),r.xhrFields)for(s in r.xhrFields)o[s]=r.xhrFields[s];r.mimeType&&o.overrideMimeType&&o.overrideMimeType(r.mimeType),!r.crossDomain&&!f["X-Requested-With"]&&(f["X-Requested-With"]="XMLHttpRequest");try{for(s in f)o.setRequestHeader(s,f[s])}catch(c){}o.send(r.hasContent&&r.data||null),u=function(n,f){var c,a,v,s,l;try{if(u&&(f||o.readyState===4))if(u=t,h&&(o.onreadystatechange=i.noop,ot&&delete w[h]),f)o.readyState!==4&&o.abort();else{c=o.status,v=o.getAllResponseHeaders(),s={},l=o.responseXML,l&&l.documentElement&&(s.xml=l);try{s.text=o.responseText}catch(n){}try{a=o.statusText}catch(p){a=""}!c&&r.isLocal&&!r.crossDomain?c=s.text?200:404:c===1223&&(c=204)}}catch(y){f||e(-1,y)}s&&e(c,a,s,v)},r.async?o.readyState===4?setTimeout(u,0):(h=++ir,ot&&(w||(w={},i(n).unload(ot)),w[h]=u),o.onreadystatechange=u):u()},abort:function(){u&&u(0,1)}}}});var ct,rt,cf=/^(?:toggle|show|hide)$/,ef=new RegExp("^(?:([-+])=|)("+d+")([a-z%]*)$","i"),wf=/queueHooks$/,ut=[be],k={"*":[function(n,t){var o,s,h,r=this.createTween(n,t),e=ef.exec(t),c=r.cur(),u=+c||0,f=1;if(e){if(o=+e[2],s=e[3]||(i.cssNumber[n]?"":"px"),s!=="px"&&u){u=i.css(r.elem,n,!0)||o||1;do h=f=f||".5",u=u/f,i.style(r.elem,n,u+s),f=r.cur()/c;while(f!==1&&f!==h)}r.unit=s,r.start=u,r.end=e[1]?u+(e[1]+1)*o:o}return r}]};i.Animation=i.extend(dr,{tweener:function(n,t){i.isFunction(n)?(t=n,n=["*"]):n=n.split(" ");for(var r,u=0,f=n.length;u<f;u++)r=n[u],k[r]=k[r]||[],k[r].unshift(t)},prefilter:function(n,t){t?ut.unshift(n):ut.push(n)}}),i.Tween=f,f.prototype={constructor:f,init:function(n,t,r,u,f,e){this.elem=n,this.prop=r,this.easing=f||"swing",this.options=t,this.start=this.now=this.cur(),this.end=u,this.unit=e||(i.cssNumber[r]?"":"px")},cur:function(){var n=f.propHooks[this.prop];return n&&n.get?n.get(this):f.propHooks._default.get(this)},run:function(n){var r,t=f.propHooks[this.prop];return this.pos=r=i.easing[this.easing](n,this.options.duration*n,0,1,this.options.duration),this.now=(this.end-this.start)*r+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),t&&t.set?t.set(this):f.propHooks._default.set(this),this}},f.prototype.init.prototype=f.prototype,f.propHooks={_default:{get:function(n){var t;return n.elem[n.prop]==null||!!n.elem.style&&n.elem.style[n.prop]!=null?(t=i.css(n.elem,n.prop,!1,""),!t||t==="auto"?0:t):n.elem[n.prop]},set:function(n){i.fx.step[n.prop]?i.fx.step[n.prop](n):n.elem.style&&(n.elem.style[i.cssProps[n.prop]]!=null||i.cssHooks[n.prop])?i.style(n.elem,n.prop,n.now+n.unit):n.elem[n.prop]=n.now}}},f.propHooks.scrollTop=f.propHooks.scrollLeft={set:function(n){n.elem.nodeType&&n.elem.parentNode&&(n.elem[n.prop]=n.now)}},i.each(["toggle","show","hide"],function(n,t){var r=i.fn[t];i.fn[t]=function(u,f,e){return u==null||typeof u=="boolean"||!n&&i.isFunction(u)&&i.isFunction(f)?r.apply(this,arguments):this.animate(it(t,!0),u,f,e)}}),i.fn.extend({fadeTo:function(n,t,i,r){return this.filter(st).css("opacity",0).show().end().animate({opacity:t},n,i,r)},animate:function(n,t,r,u){var o=i.isEmptyObject(n),f=i.speed(t,r,u),e=function(){var t=dr(this,i.extend({},n),f);o&&t.stop(!0)};return o||f.queue===!1?this.each(e):this.queue(f.queue,e)},stop:function(n,r,u){var f=function(n){var t=n.stop;delete n.stop,t(u)};return typeof n!="string"&&(u=r,r=n,n=t),r&&n!==!1&&this.queue(n||"fx",[]),this.each(function(){var o=!0,t=n!=null&&n+"queueHooks",e=i.timers,r=i._data(this);if(t)r[t]&&r[t].stop&&f(r[t]);else for(t in r)r[t]&&r[t].stop&&wf.test(t)&&f(r[t]);for(t=e.length;t--;)e[t].elem===this&&(n==null||e[t].queue===n)&&(e[t].anim.stop(u),o=!1,e.splice(t,1));(o||!u)&&i.dequeue(this,n)})}}),i.each({slideDown:it("show"),slideUp:it("hide"),slideToggle:it("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,t){i.fn[n]=function(n,i,r){return this.animate(t,n,i,r)}}),i.speed=function(n,t,r){var u=n&&typeof n=="object"?i.extend({},n):{complete:r||!r&&t||i.isFunction(n)&&n,duration:n,easing:r&&t||t&&!i.isFunction(t)&&t};return u.duration=i.fx.off?0:typeof u.duration=="number"?u.duration:u.duration in i.fx.speeds?i.fx.speeds[u.duration]:i.fx.speeds._default,(u.queue==null||u.queue===!0)&&(u.queue="fx"),u.old=u.complete,u.complete=function(){i.isFunction(u.old)&&u.old.call(this),u.queue&&i.dequeue(this,u.queue)},u},i.easing={linear:function(n){return n},swing:function(n){return.5-Math.cos(n*Math.PI)/2}},i.timers=[],i.fx=f.prototype.init,i.fx.tick=function(){for(var r,t=i.timers,n=0;n<t.length;n++)r=t[n],!r()&&t[n]===r&&t.splice(n--,1);t.length||i.fx.stop()},i.fx.timer=function(n){n()&&i.timers.push(n)&&!rt&&(rt=setInterval(i.fx.tick,i.fx.interval))},i.fx.interval=13,i.fx.stop=function(){clearInterval(rt),rt=null},i.fx.speeds={slow:600,fast:200,_default:400},i.fx.step={},i.expr&&i.expr.filters&&(i.expr.filters.animated=function(n){return i.grep(i.timers,function(t){return n===t.elem}).length}),kt=/^(?:body|html)$/i,i.fn.offset=function(n){if(arguments.length)return n===t?this:this.each(function(t){i.offset.setOffset(this,n,t)});var o,r,e,s,a,c,v,y,l,h,u=this[0],f=u&&u.ownerDocument;if(f)return(e=f.body)===u?i.offset.bodyOffset(u):(r=f.documentElement,i.contains(r,u)?(o=u.getBoundingClientRect(),s=br(f),a=r.clientTop||e.clientTop||0,c=r.clientLeft||e.clientLeft||0,v=s.pageYOffset||r.scrollTop,y=s.pageXOffset||r.scrollLeft,l=o.top+v-a,h=o.left+y-c,{top:l,left:h}):{top:0,left:0})},i.offset={bodyOffset:function(n){var r=n.offsetTop,t=n.offsetLeft;return i.support.doesNotIncludeMarginInBodyOffset&&(r+=parseFloat(i.css(n,"marginTop"))||0,t+=parseFloat(i.css(n,"marginLeft"))||0),{top:r,left:t}},setOffset:function(n,t,r){var s=i.css(n,"position");s==="static"&&(n.style.position="relative");var h=i(n),c=h.offset(),l=i.css(n,"top"),a=i.css(n,"left"),v=(s==="absolute"||s==="fixed")&&i.inArray("auto",[l,a])>-1,u={},e={},f,o;v?(e=h.position(),f=e.top,o=e.left):(f=parseFloat(l)||0,o=parseFloat(a)||0),i.isFunction(t)&&(t=t.call(n,r,c)),t.top!=null&&(u.top=t.top-c.top+f),t.left!=null&&(u.left=t.left-c.left+o),"using"in t?t.using.call(n,u):h.css(u)}},i.fn.extend({position:function(){if(this[0]){var u=this[0],r=this.offsetParent(),n=this.offset(),t=kt.test(r[0].nodeName)?{top:0,left:0}:r.offset();return n.top-=parseFloat(i.css(u,"marginTop"))||0,n.left-=parseFloat(i.css(u,"marginLeft"))||0,t.top+=parseFloat(i.css(r[0],"borderTopWidth"))||0,t.left+=parseFloat(i.css(r[0],"borderLeftWidth"))||0,{top:n.top-t.top,left:n.left-t.left}}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent||r.body;n&&!kt.test(n.nodeName)&&i.css(n,"position")==="static";)n=n.offsetParent;return n||r.body})}}),i.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,r){var u=/Y/.test(r);i.fn[n]=function(f){return i.access(this,function(n,f,e){var o=br(n);if(e===t)return o?r in o?o[r]:o.document.documentElement[f]:n[f];o?o.scrollTo(u?i(o).scrollLeft():e,u?e:i(o).scrollTop()):n[f]=e},n,f,arguments.length,null)}}),i.each({Height:"height",Width:"width"},function(n,r){i.each({padding:"inner"+n,content:r,"":"outer"+n},function(u,f){i.fn[f]=function(f,e){var s=arguments.length&&(u||typeof f!="boolean"),o=u||(f===!0||e===!0?"margin":"border");return i.access(this,function(r,u,f){var e;return i.isWindow(r)?r.document.documentElement["client"+n]:r.nodeType===9?(e=r.documentElement,Math.max(r.body["scroll"+n],e["scroll"+n],r.body["offset"+n],e["offset"+n],e["client"+n])):f===t?i.css(r,u,f,o):i.style(r,u,f,o)},r,s?f:t,s)}})}),n.jQuery=n.$=i,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return i})})(window),function(){(function(n){var i=this||eval("this"),r=i.document,f=i.navigator,t=i.jQuery,u=i.JSON;(function(n){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?n(module.exports||exports,require):"function"==typeof define&&define.amd?define(["exports","require"],n):n(i.ko={})})(function(e,o){function p(n,t){return null===n||typeof n in b?n===t:!1}function k(t,i){var r;return function(){r||(r=setTimeout(function(){r=n,t()},i))}}function d(n,t){var i;return function(){clearTimeout(i),i=setTimeout(n,t)}}function w(n,t,i,r){s.d[n]={init:function(n,u,f,e,o){var c,h;return s.s(function(){var l=s.a.c(u()),e=!i!=!l,f=!h;(f||t||e!==c)&&(f&&s.Y.la()&&(h=s.a.ia(s.f.childNodes(n),!0)),e?(f||s.f.T(n,s.a.ia(h)),s.Ca(r?r(o,l):o,n)):s.f.ja(n),c=e)},null,{o:n}),{controlsDescendantBindings:!0}}},s.h.ha[n]=!1,s.f.Q[n]=!0}var s="undefined"!=typeof e?e:{},b,l,h,c,v,y,a;s.b=function(n,t){for(var i=n.split("."),u=s,r=0;r<i.length-1;r++)u=u[i[r]];u[i[i.length-1]]=t},s.A=function(n,t,i){n[t]=i},s.version="3.2.0",s.b("version",s.version),s.a=function(){function o(n,t){for(var i in n)n.hasOwnProperty(i)&&t(i,n[i])}function y(n,t){if(t)for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}function v(n,t){return n.__proto__=t,n}var l={__proto__:[]}instanceof Array,h={},a={},c,e;return h[f&&/Firefox\/2/i.test(f.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],h.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),o(h,function(n,t){if(t.length)for(var i=0,r=t.length;i<r;i++)a[t[i]]=n}),c={propertychange:!0},e=r&&function(){for(var t=3,i=r.createElement("div"),u=i.getElementsByTagName("i");i.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",u[0];);return 4<t?t:n}(),{vb:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],u:function(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i],i)},m:function(n,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(n,t);for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},qb:function(n,t,i){for(var r=0,u=n.length;r<u;r++)if(t.call(i,n[r],r))return n[r];return null},ua:function(n,t){var i=s.a.m(n,t);0<i?n.splice(i,1):0===i&&n.shift()},rb:function(n){n=n||[];for(var i=[],t=0,r=n.length;t<r;t++)0>s.a.m(i,n[t])&&i.push(n[t]);return i},Da:function(n,t){n=n||[];for(var r=[],i=0,u=n.length;i<u;i++)r.push(t(n[i],i));return r},ta:function(n,t){n=n||[];for(var r=[],i=0,u=n.length;i<u;i++)t(n[i],i)&&r.push(n[i]);return r},ga:function(n,t){if(t instanceof Array)n.push.apply(n,t);else for(var i=0,r=t.length;i<r;i++)n.push(t[i]);return n},ea:function(n,t,i){var r=s.a.m(s.a.Xa(n),t);0>r?i&&n.push(t):i||n.splice(r,1)},xa:l,extend:y,za:v,Aa:l?v:y,G:o,na:function(n,t){if(!n)return n;var r={},i;for(i in n)n.hasOwnProperty(i)&&(r[i]=t(n[i],i,n));return r},Ka:function(n){for(;n.firstChild;)s.removeNode(n.firstChild)},oc:function(n){n=s.a.S(n);for(var i=r.createElement("div"),t=0,u=n.length;t<u;t++)i.appendChild(s.R(n[t]));return i},ia:function(n,t){for(var i,r=0,f=n.length,u=[];r<f;r++)i=n[r].cloneNode(!0),u.push(t?s.R(i):i);return u},T:function(n,t){if(s.a.Ka(n),t)for(var i=0,r=t.length;i<r;i++)n.appendChild(t[i])},Lb:function(n,t){var r=n.nodeType?[n]:n;if(0<r.length){for(var f=r[0],e=f.parentNode,i=0,u=t.length;i<u;i++)e.insertBefore(t[i],f);for(i=0,u=r.length;i<u;i++)s.removeNode(r[i])}},ka:function(n,t){if(n.length){for(t=8===t.nodeType&&t.parentNode||t;n.length&&n[0].parentNode!==t;)n.shift();if(1<n.length){var i=n[0],r=n[n.length-1];for(n.length=0;i!==r;)if(n.push(i),i=i.nextSibling,!i)return;n.push(r)}}return n},Nb:function(n,t){7>e?n.setAttribute("selected",t):n.selected=t},cb:function(t){return null===t||t===n?"":t.trim?t.trim():t.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},vc:function(n,t){return n=n||"",t.length>n.length?!1:n.substring(0,t.length)===t},cc:function(n,t){if(n===t)return!0;if(11===n.nodeType)return!1;if(t.contains)return t.contains(3===n.nodeType?n.parentNode:n);if(t.compareDocumentPosition)return 16==(t.compareDocumentPosition(n)&16);for(;n&&n!=t;)n=n.parentNode;return!!n},Ja:function(n){return s.a.cc(n,n.ownerDocument.documentElement)},ob:function(n){return!!s.a.qb(n,s.a.Ja)},t:function(n){return n&&n.tagName&&n.tagName.toLowerCase()},n:function(n,i,r){var o=e&&c[i],f,u;if(!o&&t)t(n).bind(i,r);else if(o||"function"!=typeof n.addEventListener)if("undefined"!=typeof n.attachEvent)f=function(t){r.call(n,t)},u="on"+i,n.attachEvent(u,f),s.a.w.da(n,function(){n.detachEvent(u,f)});else throw Error("Browser doesn't support addEventListener or attachEvent");else n.addEventListener(i,r,!1)},oa:function(n,u){if(!n||!n.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var f;if("input"===s.a.t(n)&&n.type&&"click"==u.toLowerCase()?(f=n.type,f="checkbox"==f||"radio"==f):f=!1,t&&!f)t(n).trigger(u);else if("function"==typeof r.createEvent)if("function"==typeof n.dispatchEvent)f=r.createEvent(a[u]||"HTMLEvents"),f.initEvent(u,!0,!0,i,0,0,0,0,0,!1,!1,!1,!1,0,n),n.dispatchEvent(f);else throw Error("The supplied element doesn't support dispatchEvent");else if(f&&n.click)n.click();else if("undefined"!=typeof n.fireEvent)n.fireEvent("on"+u);else throw Error("Browser doesn't support triggering events");},c:function(n){return s.C(n)?n():n},Xa:function(n){return s.C(n)?n.v():n},Ba:function(n,t,i){if(t){var u=/\S+/g,r=n.className.match(u)||[];s.a.u(t.match(u),function(n){s.a.ea(r,n,i)}),n.className=r.join(" ")}},bb:function(t,i){var u=s.a.c(i),r;(null===u||u===n)&&(u=""),r=s.f.firstChild(t),!r||3!=r.nodeType||s.f.nextSibling(r)?s.f.T(t,[t.ownerDocument.createTextNode(u)]):r.data=u,s.a.fc(t)},Mb:function(n,t){if(n.name=t,7>=e)try{n.mergeAttributes(r.createElement("<input name='"+n.name+"'/>"),!1)}catch(i){}},fc:function(n){9<=e&&(n=1==n.nodeType?n:n.parentNode,n.style&&(n.style.zoom=n.style.zoom))},dc:function(n){if(e){var t=n.style.width;n.style.width=0,n.style.width=t}},sc:function(n,t){n=s.a.c(n),t=s.a.c(t);for(var r=[],i=n;i<=t;i++)r.push(i);return r},S:function(n){for(var i=[],t=0,r=n.length;t<r;t++)i.push(n[t]);return i},yc:6===e,zc:7===e,L:e,xb:function(n,t){for(var r=s.a.S(n.getElementsByTagName("input")).concat(s.a.S(n.getElementsByTagName("textarea"))),f="string"==typeof t?function(n){return n.name===t}:function(n){return t.test(n.name)},u=[],i=r.length-1;0<=i;i--)f(r[i])&&u.push(r[i]);return u},pc:function(n){return"string"==typeof n&&(n=s.a.cb(n))?u&&u.parse?u.parse(n):new Function("return "+n)():null},eb:function(n,t,i){if(!u||!u.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return u.stringify(s.a.c(n),t,i)},qc:function(n,t,i){var l,e,h,f,u,c;i=i||{};var a=i.params||{},v=i.includeFields||this.vb,l=n;if("object"==typeof n&&"form"===s.a.t(n))for(l=n.action,e=v.length-1;0<=e;e--)for(h=s.a.xb(n,v[e]),f=h.length-1;0<=f;f--)a[h[f].name]=h[f].value;t=s.a.c(t),u=r.createElement("form"),u.style.display="none",u.action=l,u.method="post";for(c in t)n=r.createElement("input"),n.type="hidden",n.name=c,n.value=s.a.eb(s.a.c(t[c])),u.appendChild(n);o(a,function(n,t){var i=r.createElement("input");i.type="hidden",i.name=n,i.value=t,u.appendChild(i)}),r.body.appendChild(u),i.submitter?i.submitter(u):u.submit(),setTimeout(function(){u.parentNode.removeChild(u)},0)}}}(),s.b("utils",s.a),s.b("utils.arrayForEach",s.a.u),s.b("utils.arrayFirst",s.a.qb),s.b("utils.arrayFilter",s.a.ta),s.b("utils.arrayGetDistinctValues",s.a.rb),s.b("utils.arrayIndexOf",s.a.m),s.b("utils.arrayMap",s.a.Da),s.b("utils.arrayPushAll",s.a.ga),s.b("utils.arrayRemoveItem",s.a.ua),s.b("utils.extend",s.a.extend),s.b("utils.fieldsIncludedWithJsonPost",s.a.vb),s.b("utils.getFormFields",s.a.xb),s.b("utils.peekObservable",s.a.Xa),s.b("utils.postJson",s.a.qc),s.b("utils.parseJson",s.a.pc),s.b("utils.registerEventHandler",s.a.n),s.b("utils.stringifyJson",s.a.eb),s.b("utils.range",s.a.sc),s.b("utils.toggleDomNodeCssClass",s.a.Ba),s.b("utils.triggerEvent",s.a.oa),s.b("utils.unwrapObservable",s.a.c),s.b("utils.objectForEach",s.a.G),s.b("utils.addOrRemoveItem",s.a.ea),s.b("unwrap",s.a.c),Function.prototype.bind||(Function.prototype.bind=function(n){var i=this,t=Array.prototype.slice.call(arguments);return n=t.shift(),function(){return i.apply(n,t.concat(Array.prototype.slice.call(arguments)))}}),s.a.e=new function(){function r(r,f){var e=r[t];if(!e||"null"===e||!i[e]){if(!f)return n;e=r[t]="ko"+u++,i[e]={}}return i[e]}var u=0,t="__ko__"+ +new Date,i={};return{get:function(t,i){var u=r(t,!1);return u===n?n:u[i]},set:function(t,i,u){(u!==n||r(t,!1)!==n)&&(r(t,!0)[i]=u)},clear:function(n){var r=n[t];return r?(delete i[r],n[t]=null,!0):!1},F:function(){return u+++t}}},s.b("utils.domData",s.a.e),s.b("utils.domData.clear",s.a.e.clear),s.a.w=new function(){function u(t,r){var u=s.a.e.get(t,i);return u===n&&r&&(u=[],s.a.e.set(t,i,u)),u}function r(n){var t=u(n,!1),i;if(t)for(t=t.slice(0),i=0;i<t.length;i++)t[i](n);if(s.a.e.clear(n),s.a.w.cleanExternalData(n),f[n.nodeType])for(t=n.firstChild;n=t;)t=n.nextSibling,8===n.nodeType&&r(n)}var i=s.a.e.F(),e={1:!0,8:!0,9:!0},f={1:!0,9:!0};return{da:function(n,t){if("function"!=typeof t)throw Error("Callback must be a function");u(n,!0).push(t)},Kb:function(t,r){var f=u(t,!1);f&&(s.a.ua(f,r),0==f.length&&s.a.e.set(t,i,n))},R:function(n){var i,t,u;if(e[n.nodeType]&&(r(n),f[n.nodeType]))for(i=[],s.a.ga(i,n.getElementsByTagName("*")),t=0,u=i.length;t<u;t++)r(i[t]);return n},removeNode:function(n){s.R(n),n.parentNode&&n.parentNode.removeChild(n)},cleanExternalData:function(n){t&&"function"==typeof t.cleanData&&t.cleanData([n])}}},s.R=s.a.w.R,s.removeNode=s.a.w.removeNode,s.b("cleanNode",s.R),s.b("removeNode",s.removeNode),s.b("utils.domNodeDisposal",s.a.w),s.b("utils.domNodeDisposal.addDisposeCallback",s.a.w.da),s.b("utils.domNodeDisposal.removeDisposeCallback",s.a.w.Kb),function(){s.a.ba=function(n){var u,f;if(t){if(t.parseHTML)u=t.parseHTML(n)||[];else if((u=t.clean([n]))&&u[0]){for(n=u[0];n.parentNode&&11!==n.parentNode.nodeType;)n=n.parentNode;n.parentNode&&n.parentNode.removeChild(n)}}else{for(f=s.a.cb(n).toLowerCase(),u=r.createElement("div"),f=f.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!f.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!f.indexOf("<td")||!f.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],n="ignored<div>"+f[1]+n+f[2]+"</div>","function"==typeof i.innerShiv?u.appendChild(i.innerShiv(n)):u.innerHTML=n;f[0]--;)u=u.lastChild;u=s.a.S(u.lastChild.childNodes)}return u},s.a.$a=function(i,r){if(s.a.Ka(i),r=s.a.c(r),null!==r&&r!==n)if("string"!=typeof r&&(r=r.toString()),t)t(i).html(r);else for(var f=s.a.ba(r),u=0;u<f.length;u++)i.appendChild(f[u])}}(),s.b("utils.parseHtmlFragment",s.a.ba),s.b("utils.setHtml",s.a.$a),s.D=function(){function i(n,t){var r;if(n)if(8==n.nodeType)r=s.D.Gb(n.nodeValue),null!=r&&t.push({bc:n,mc:r});else if(1==n.nodeType)for(var r=0,u=n.childNodes,f=u.length;r<f;r++)i(u[r],t)}var t={};return{Ua:function(n){if("function"!=typeof n)throw Error("You can only pass a function to ko.memoization.memoize()");var i=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return t[i]=n,"<!--[ko_memo:"+i+"]-->"},Rb:function(i,r){var u=t[i];if(u===n)throw Error("Couldn't find any memo with ID "+i+". Perhaps it's already been unmemoized.");try{return u.apply(null,r||[]),!0}finally{delete t[i]}},Sb:function(n,t){var f=[],u,o,r,e;for(i(n,f),u=0,o=f.length;u<o;u++)r=f[u].bc,e=[r],t&&s.a.ga(e,t),s.D.Rb(f[u].mc,e),r.nodeValue="",r.parentNode&&r.parentNode.removeChild(r)},Gb:function(n){return(n=n.match(/^\[ko_memo\:(.*?)\]$/))?n[1]:null}}}(),s.b("memoization",s.D),s.b("memoization.memoize",s.D.Ua),s.b("memoization.unmemoize",s.D.Rb),s.b("memoization.parseMemoText",s.D.Gb),s.b("memoization.unmemoizeDomNodeAndDescendants",s.D.Sb),s.La={throttle:function(n,t){n.throttleEvaluation=t;var i=null;return s.j({read:n,write:function(r){clearTimeout(i),i=setTimeout(function(){n(r)},t)}})},rateLimit:function(n,t){var i,u,r;"number"==typeof t?i=t:(i=t.timeout,u=t.method),r="notifyWhenChangesStop"==u?d:k,n.Ta(function(n){return r(n,i)})},notify:function(n,t){n.equalityComparer="always"==t?null:p}},b={undefined:1,boolean:1,number:1,string:1},s.b("extenders",s.La),s.Pb=function(n,t,i){this.target=n,this.wa=t,this.ac=i,this.Cb=!1,s.A(this,"dispose",this.K)},s.Pb.prototype.K=function(){this.Cb=!0,this.ac()},s.P=function(){s.a.Aa(this,s.P.fn),this.M={}},l="change",h={U:function(n,t,i){var r=this,u;return i=i||l,u=new s.Pb(r,t?n.bind(t):n,function(){s.a.ua(r.M[i],u),r.nb&&r.nb()}),r.va&&r.va(i),r.M[i]||(r.M[i]=[]),r.M[i].push(u),u},notifySubscribers:function(n,t){if(t=t||l,this.Ab(t))try{s.k.Ea();for(var u=this.M[t].slice(0),r=0,i;i=u[r];++r)i.Cb||i.wa(n)}finally{s.k.end()}},Ta:function(n){var t=this,e=s.C(t),u,r,i,f;t.qa||(t.qa=t.notifySubscribers,t.notifySubscribers=function(n,i){i&&i!==l?"beforeChange"===i?t.kb(n):t.qa(n,i):t.lb(n)}),f=n(function(){e&&i===t&&(i=t()),u=!1,t.Pa(r,i)&&t.qa(r=i)}),t.lb=function(n){u=!0,i=n,f()},t.kb=function(n){u||(r=n,t.qa(n,"beforeChange"))}},Ab:function(n){return this.M[n]&&this.M[n].length},yb:function(){var n=0;return s.a.G(this.M,function(t,i){n+=i.length}),n},Pa:function(n,t){return!this.equalityComparer||!this.equalityComparer(n,t)},extend:function(n){var t=this;return n&&s.a.G(n,function(n,i){var r=s.La[n];"function"==typeof r&&(t=r(t,i)||t)}),t}},s.A(h,"subscribe",h.U),s.A(h,"extend",h.extend),s.A(h,"getSubscriptionsCount",h.yb),s.a.xa&&s.a.za(h,Function.prototype),s.P.fn=h,s.Db=function(n){return null!=n&&"function"==typeof n.U&&"function"==typeof n.notifySubscribers},s.b("subscribable",s.P),s.b("isSubscribable",s.Db),s.Y=s.k=function(){function i(i){t.push(n),n=i}function r(){n=t.pop()}var t=[],n,u=0;return{Ea:i,end:r,Jb:function(t){if(n){if(!s.Db(t))throw Error("Only subscribable things can act as dependencies");n.wa(t,t.Vb||(t.Vb=++u))}},B:function(n,t,u){try{return i(),n.apply(t,u||[])}finally{r()}},la:function(){if(n)return n.s.la()},ma:function(){if(n)return n.ma}}}(),s.b("computedContext",s.Y),s.b("computedContext.getDependenciesCount",s.Y.la),s.b("computedContext.isInitial",s.Y.ma),s.b("computedContext.isSleeping",s.Y.Ac),s.p=function(n){function t(){return 0<arguments.length?(t.Pa(i,arguments[0])&&(t.X(),i=arguments[0],t.W()),this):(s.k.Jb(t),i)}var i=n;return s.P.call(t),s.a.Aa(t,s.p.fn),t.v=function(){return i},t.W=function(){t.notifySubscribers(i)},t.X=function(){t.notifySubscribers(i,"beforeChange")},s.A(t,"peek",t.v),s.A(t,"valueHasMutated",t.W),s.A(t,"valueWillMutate",t.X),t},s.p.fn={equalityComparer:p},c=s.p.rc="__ko_proto__",s.p.fn[c]=s.p,s.a.xa&&s.a.za(s.p.fn,s.P.fn),s.Ma=function(t,i){return null===t||t===n||t[c]===n?!1:t[c]===i?!0:s.Ma(t[c],i)},s.C=function(n){return s.Ma(n,s.p)},s.Ra=function(n){return"function"==typeof n&&n[c]===s.p||"function"==typeof n&&n[c]===s.j&&n.hc?!0:!1},s.b("observable",s.p),s.b("isObservable",s.C),s.b("isWriteableObservable",s.Ra),s.b("isWritableObservable",s.Ra),s.aa=function(n){if(n=n||[],"object"!=typeof n||!("length"in n))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return n=s.p(n),s.a.Aa(n,s.aa.fn),n.extend({trackArrayChanges:!0})},s.aa.fn={remove:function(n){for(var r,u=this.v(),i=[],f="function"!=typeof n||s.C(n)?function(t){return t===n}:n,t=0;t<u.length;t++)r=u[t],f(r)&&(0===i.length&&this.X(),i.push(r),u.splice(t,1),t--);return i.length&&this.W(),i},removeAll:function(t){if(t===n){var i=this.v(),r=i.slice(0);return this.X(),i.splice(0,i.length),this.W(),r}return t?this.remove(function(n){return 0<=s.a.m(t,n)}):[]},destroy:function(n){var i=this.v(),r="function"!=typeof n||s.C(n)?function(t){return t===n}:n,t;for(this.X(),t=i.length-1;0<=t;t--)r(i[t])&&(i[t]._destroy=!0);this.W()},destroyAll:function(t){return t===n?this.destroy(function(){return!0}):t?this.destroy(function(n){return 0<=s.a.m(t,n)}):[]},indexOf:function(n){var t=this();return s.a.m(t,n)},replace:function(n,t){var i=this.indexOf(n);0<=i&&(this.X(),this.v()[i]=t,this.W())}},s.a.u("pop push reverse shift sort splice unshift".split(" "),function(n){s.aa.fn[n]=function(){var t=this.v();return this.X(),this.sb(t,n,arguments),t=t[n].apply(t,arguments),this.W(),t}}),s.a.u(["slice"],function(n){s.aa.fn[n]=function(){var t=this();return t[n].apply(t,arguments)}}),s.a.xa&&s.a.za(s.aa.fn,s.p.fn),s.b("observableArray",s.aa),v="arrayChange",s.La.trackArrayChanges=function(n){function f(){var f,u;r||(r=!0,f=n.notifySubscribers,n.notifySubscribers=function(n,t){return t&&t!==l||++i,f.apply(this,arguments)},u=[].concat(n.v()||[]),t=null,n.U(function(r){if(r=[].concat(r||[]),n.Ab(v)){var f;(!t||1<i)&&(t=s.a.Fa(u,r,{sparse:!0})),f=t,f.length&&n.notifySubscribers(f,v)}u=r,t=null,i=0}))}if(!n.sb){var r=!1,t=null,i=0,u=n.U;n.U=n.subscribe=function(n,t,i){return i===v&&f(),u.apply(this,arguments)},n.sb=function(n,u,f){function c(n,t,i){return l[l.length]={status:n,value:t,index:i}}if(r&&!i){var l=[],e=n.length,h=f.length,o=0;switch(u){case"push":o=e;case"unshift":for(u=0;u<h;u++)c("added",f[u],o+u);break;case"pop":o=e-1;case"shift":e&&c("deleted",n[o],o);break;case"splice":u=Math.min(Math.max(0,0>f[0]?e+f[0]:f[0]),e);for(var e=1===h?e:Math.min(u+(f[1]||0),e),h=u+h-2,o=Math.max(e,h),y=[],v=[],a=2;u<o;++u,++a)u<e&&v.push(c("deleted",n[u],u)),u<h&&y.push(c("added",f[a],u));s.a.wb(v,y);break;default:return}t=l}}}},s.s=s.j=function(t,i,r){function nt(){s.a.G(l,function(n,t){t.K()}),l={}}function tt(){nt(),f=0,g=!0,h=!1}function ot(){var n=u.throttleEvaluation;n&&0<=n?(clearTimeout(rt),rt=setTimeout(v,n)):u.ib?u.ib():v()}function v(t){var w,r,c,v;if(p){if(k)throw Error("A 'pure' computed must not be called recursively");}else if(!g){if(b&&b()){if(!d){a();return}}else d=!1;if(p=!0,y)try{w={},s.k.Ea({wa:function(n,t){w[t]||(w[t]=1,++f)},s:u,ma:n}),f=0,o=e.call(i)}finally{s.k.end(),p=!1}else try{r=l,c=f,s.k.Ea({wa:function(n,t){g||(c&&r[t]?(l[t]=r[t],++f,delete r[t],--c):l[t]||(l[t]=n.U(ot),++f))},s:u,ma:k?n:!f}),l={},f=0;try{v=i?e.call(i):e()}finally{s.k.end(),c&&s.a.G(r,function(n,t){t.K()}),h=!1}u.Pa(o,v)&&(u.notifySubscribers(o,"beforeChange"),o=v,!0!==t&&u.notifySubscribers(o))}finally{p=!1}f||a()}}function u(){if(0<arguments.length){if("function"==typeof ft)ft.apply(i,arguments);else throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return this}return s.k.Jb(u),h&&v(!0),o}function et(){return h&&!f&&v(!0),o}function ut(){return h||0<f}var o,h=!0,p=!1,d=!1,g=!1,e=t,k=!1,y=!1,it;if(e&&"object"==typeof e?(r=e,e=r.read):(r=r||{},e||(e=r.read)),"function"!=typeof e)throw Error("Pass a function that returns the value of the ko.computed");var ft=r.write,c=r.disposeWhenNodeIsRemoved||r.o||null,w=r.disposeWhen||r.Ia,b=w,a=tt,l={},f=0,rt=null;return i||(i=r.owner),s.P.call(u),s.a.Aa(u,s.j.fn),u.v=et,u.la=function(){return f},u.hc="function"==typeof r.write,u.K=function(){a()},u.Z=ut,it=u.Ta,u.Ta=function(n){it.call(u,n),u.ib=function(){u.kb(o),h=!0,u.lb(u)}},r.pure?(y=k=!0,u.va=function(){y&&(y=!1,v(!0))},u.nb=function(){u.yb()||(nt(),y=h=!0)}):r.deferEvaluation&&(u.va=function(){et(),delete u.va}),s.A(u,"peek",u.v),s.A(u,"dispose",u.K),s.A(u,"isActive",u.Z),s.A(u,"getDependenciesCount",u.la),c&&(d=!0,c.nodeType&&(b=function(){return!s.a.Ja(c)||w&&w()})),y||r.deferEvaluation||v(),c&&ut()&&c.nodeType&&(a=function(){s.a.w.Kb(c,a),tt()},s.a.w.da(c,a)),u},s.jc=function(n){return s.Ma(n,s.j)},h=s.p.rc,s.j[h]=s.p,s.j.fn={equalityComparer:p},s.j.fn[h]=s.j,s.a.xa&&s.a.za(s.j.fn,s.P.fn),s.b("dependentObservable",s.j),s.b("computed",s.j),s.b("isComputed",s.jc),s.Ib=function(n,t){return"function"==typeof n?s.s(n,t,{pure:!0}):(n=s.a.extend({},n),n.pure=!0,s.s(n,t))},s.b("pureComputed",s.Ib),function(){function i(u,f,e){if(e=e||new t,u=f(u),"object"!=typeof u||null===u||u===n||u instanceof Date||u instanceof String||u instanceof Number||u instanceof Boolean)return u;var o=u instanceof Array?[]:{};return e.save(u,o),r(u,function(t){var r=f(u[t]),s;switch(typeof r){case"boolean":case"number":case"string":case"function":o[t]=r;break;case"object":case"undefined":s=e.get(r),o[t]=s!==n?s:i(r,f,e)}}),o}function r(n,t){if(n instanceof Array){for(var i=0;i<n.length;i++)t(i);"function"==typeof n.toJSON&&t("toJSON")}else for(i in n)t(i)}function t(){this.keys=[],this.hb=[]}s.Qb=function(n){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return i(n,function(n){for(var t=0;s.C(n)&&10>t;t++)n=n();return n})},s.toJSON=function(n,t,i){return n=s.Qb(n),s.a.eb(n,t,i)},t.prototype={save:function(n,t){var i=s.a.m(this.keys,n);0<=i?this.hb[i]=t:(this.keys.push(n),this.hb.push(t))},get:function(t){return t=s.a.m(this.keys,t),0<=t?this.hb[t]:n}}}(),s.b("toJS",s.Qb),s.b("toJSON",s.toJSON),function(){s.i={q:function(t){switch(s.a.t(t)){case"option":return!0===t.__ko__hasDomDataOptionValue__?s.a.e.get(t,s.d.options.Va):7>=s.a.L?t.getAttributeNode("value")&&t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return 0<=t.selectedIndex?s.i.q(t.options[t.selectedIndex]):n;default:return t.value}},ca:function(t,i,r){switch(s.a.t(t)){case"option":switch(typeof i){case"string":s.a.e.set(t,s.d.options.Va,n),"__ko__hasDomDataOptionValue__"in t&&delete t.__ko__hasDomDataOptionValue__,t.value=i;break;default:s.a.e.set(t,s.d.options.Va,i),t.__ko__hasDomDataOptionValue__=!0,t.value="number"==typeof i?i:""}break;case"select":(""===i||null===i)&&(i=n);for(var e=-1,u=0,o=t.options.length,f;u<o;++u)if(f=s.i.q(t.options[u]),f==i||""==f&&i===n){e=u;break}(r||0<=e||i===n&&1<t.size)&&(t.selectedIndex=e);break;default:(null===i||i===n)&&(i=""),t.value=i}}}}(),s.b("selectExtensions",s.i),s.b("selectExtensions.readValue",s.i.q),s.b("selectExtensions.writeValue",s.i.ca),s.h=function(){function i(t){var o,u,i;t=s.a.cb(t),123===t.charCodeAt(0)&&(t=t.slice(1,-1));var a=[],h=t.match(n),c,f,l=0;if(h)for(h.push(","),o=0;u=h[o];++o){if(i=u.charCodeAt(0),44===i){if(0>=l){c&&a.push(f?{key:c,value:f.join("")}:{unknown:c}),c=f=l=0;continue}}else if(58===i){if(!f)continue}else if(47===i&&o&&1<u.length)(i=h[o-1].match(e))&&!r[i[0]]&&(t=t.substr(t.indexOf(u)+1),h=t.match(n),h.push(","),o=-1,u="/");else if(40===i||123===i||91===i)++l;else if(41===i||125===i||93===i)--l;else if(!c&&!f){c=34===i||39===i?u.slice(1,-1):u;continue}f?f.push(u):f=[u]}return a}var f=["true","false","null","undefined"],u=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,n=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),e=/[\])"'A-Za-z0-9_$]+$/,r={"in":1,"return":1,"typeof":1},t={};return{ha:[],V:t,Wa:i,ya:function(n,r){function o(n,i){var c,r;if(!l){if(r=s.getBindingHandler(n),r&&r.preprocess&&!(i=r.preprocess(i,n,o)))return;(r=t[n])&&(c=i,0<=s.a.m(f,c)?c=!1:(r=c.match(u),c=null===r?!1:r[1]?"Object("+r[1]+")"+r[2]:c),r=c),r&&e.push("'"+n+"':function(_z){"+c+"=_z}")}a&&(i="function(){return "+i+" }"),h.push("'"+n+"':"+i)}r=r||{};var h=[],e=[],a=r.valueAccessors,l=r.bindingParams,c="string"==typeof n?i(n):n;return s.a.u(c,function(n){o(n.key||n.unknown,n.value)}),e.length&&o("_ko_property_writers","{"+e.join(",")+" }"),h.join(",")},lc:function(n,t){for(var i=0;i<n.length;i++)if(n[i].key==t)return!0;return!1},pa:function(n,t,i,r,u){n&&s.C(n)?!s.Ra(n)||u&&n.v()===r||n(r):(n=t.get("_ko_property_writers"))&&n[i]&&n[i](r)}}}(),s.b("expressionRewriting",s.h),s.b("expressionRewriting.bindingRewriteValidators",s.h.ha),s.b("expressionRewriting.parseObjectLiteral",s.h.Wa),s.b("expressionRewriting.preProcessBindings",s.h.ya),s.b("expressionRewriting._twoWayBindings",s.h.V),s.b("jsonExpressionRewriting",s.h),s.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",s.h.ya),function(){function n(n){return 8==n.nodeType&&u.test(t?n.text:n.nodeValue)}function i(n){return 8==n.nodeType&&h.test(t?n.text:n.nodeValue)}function f(t,r){for(var u=t,f=1,e=[];u=u.nextSibling;){if(i(u)&&(f--,0===f))return e;e.push(u),n(u)&&f++}if(!r)throw Error("Cannot find closing comment tag to match: "+t.nodeValue);return null}function e(n,t){var i=f(n,t);return i?0<i.length?i[i.length-1].nextSibling:n.nextSibling:null}var t=r&&"<!--test-->"===r.createComment("test").text,u=t?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,h=t?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,o={ul:!0,ol:!0};s.f={Q:{},childNodes:function(t){return n(t)?f(t):t.childNodes},ja:function(t){if(n(t)){t=s.f.childNodes(t);for(var i=0,r=t.length;i<r;i++)s.removeNode(t[i])}else s.a.Ka(t)},T:function(t,i){if(n(t)){s.f.ja(t);for(var u=t.nextSibling,r=0,f=i.length;r<f;r++)u.parentNode.insertBefore(i[r],u)}else s.a.T(t,i)},Hb:function(t,i){n(t)?t.parentNode.insertBefore(i,t.nextSibling):t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i)},Bb:function(t,i,r){r?n(t)?t.parentNode.insertBefore(i,r.nextSibling):r.nextSibling?t.insertBefore(i,r.nextSibling):t.appendChild(i):s.f.Hb(t,i)},firstChild:function(t){return n(t)?!t.nextSibling||i(t.nextSibling)?null:t.nextSibling:t.firstChild},nextSibling:function(t){return n(t)&&(t=e(t)),t.nextSibling&&i(t.nextSibling)?null:t.nextSibling},gc:n,xc:function(n){return(n=(t?n.text:n.nodeValue).match(u))?n[1]:null},Fb:function(t){var h,r,u,f;if(o[s.a.t(t)]&&(h=t.firstChild,h))do if(1===h.nodeType){if(r=h.firstChild,u=null,r)do u?u.push(r):n(r)?(f=e(r,!0),f?r=f:u=[r]):i(r)&&(u=[r]);while(r=r.nextSibling);if(r=u)for(u=h.nextSibling,f=0;f<r.length;f++)u?t.insertBefore(r[f],u):t.appendChild(r[f])}while(h=h.nextSibling)}}}(),s.b("virtualElements",s.f),s.b("virtualElements.allowedBindings",s.f.Q),s.b("virtualElements.emptyNode",s.f.ja),s.b("virtualElements.insertAfter",s.f.Bb),s.b("virtualElements.prepend",s.f.Hb),s.b("virtualElements.setDomNodeChildren",s.f.T),function(){s.J=function(){this.Yb={}},s.a.extend(s.J.prototype,{nodeHasBindings:function(n){switch(n.nodeType){case 1:return null!=n.getAttribute("data-bind")||s.g.getComponentNameForNode(n);case 8:return s.f.gc(n);default:return!1}},getBindings:function(n,t){var i=this.getBindingsString(n,t),i=i?this.parseBindingsString(i,t,n):null;return s.g.mb(i,n,t,!1)},getBindingAccessors:function(n,t){var i=this.getBindingsString(n,t),i=i?this.parseBindingsString(i,t,n,{valueAccessors:!0}):null;return s.g.mb(i,n,t,!0)},getBindingsString:function(n){switch(n.nodeType){case 1:return n.getAttribute("data-bind");case 8:return s.f.xc(n);default:return null}},parseBindingsString:function(n,t,i,r){var e,f,u,h,o;try{return e=this.Yb,f=n+(r&&r.valueAccessors||""),(u=e[f])||(o="with($context){with($data||{}){return{"+s.h.ya(n,r)+"}}}",h=new Function("$context","$element",o),u=e[f]=h),u(t,i)}catch(c){throw c.message="Unable to parse bindings.\nBindings value: "+n+"\nMessage: "+c.message,c;}}}),s.J.instance=new s.J}(),s.b("bindingProvider",s.J),function(){function v(n){return function(){return n}}function e(n){return n()}function c(n){return s.a.na(s.k.B(n),function(t,i){return function(){return n()[i]}})}function p(n,t){return c(this.getBindings.bind(this,n,t))}function a(n,t,i){var r,u=s.f.firstChild(t),e=s.J.instance,f=e.preprocessNode;if(f){for(;r=u;)u=s.f.nextSibling(r),f.call(e,r);u=s.f.firstChild(t)}for(;r=u;)u=s.f.nextSibling(r),l(n,r,i)}function l(n,t,i){var u=!0,r=1===t.nodeType;r&&s.f.Fb(t),(r&&i||s.J.instance.nodeHasBindings(t))&&(u=o(t,null,n,i).shouldBindDescendants),u&&!h[s.a.t(t)]&&a(n,t,!r)}function y(n){var r=[],i={},t=[];return s.a.G(n,function u(f){if(!i[f]){var e=s.getBindingHandler(f);e&&(e.after&&(t.push(f),s.a.u(e.after,function(i){if(n[i]){if(-1!==s.a.m(t,i))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+t.join(", "));u(i)}}),t.length--),r.push({key:f,zb:e})),i[f]=!0}}),r}function o(t,i,r,f){var v=s.a.e.get(t,u),o,a,l,c;if(!i){if(v)throw Error("You cannot apply bindings multiple times to the same element.");s.a.e.set(t,u,!0)}if(!v&&f&&s.Ob(t,r),i&&"function"!=typeof i)o=i;else{var w=s.J.instance,b=w.getBindingAccessors||p,h=s.j(function(){return(o=i?i(r,t):b.call(w,t,r))&&r.I&&r.I(),o},null,{o:t});o&&h.Z()||(h=null)}return o&&(l=h?function(n){return function(){return e(h()[n])}}:function(n){return o[n]},c=function(){return s.a.na(h?h():o,e)},c.get=function(n){return o[n]&&e(l(n))},c.has=function(n){return n in o},f=y(o),s.a.u(f,function(i){var e=i.zb.init,f=i.zb.update,u=i.key;if(8===t.nodeType&&!s.f.Q[u])throw Error("The binding '"+u+"' cannot be used with virtual elements");try{"function"==typeof e&&s.k.B(function(){var i=e(t,l(u),c,r.$data,r);if(i&&i.controlsDescendantBindings){if(a!==n)throw Error("Multiple bindings ("+a+" and "+u+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");a=u}}),"function"==typeof f&&s.j(function(){f(t,l(u),c,r.$data,r)},null,{o:t})}catch(h){throw h.message='Unable to process binding "'+u+": "+o[u]+'"\nMessage: '+h.message,h;}})),{shouldBindDescendants:a===n}}function r(n){return n&&n instanceof s.N?n:new s.N(n)}var h,u,f;s.d={},h={script:!0},s.getBindingHandler=function(n){return s.d[n]},s.N=function(t,i,r,u){var f=this,h="function"==typeof t&&!s.C(t),o,e=s.j(function(){var o=h?t():t,n=s.a.c(o);return i?(i.I&&i.I(),s.a.extend(f,i),e&&(f.I=e)):(f.$parents=[],f.$root=n,f.ko=s),f.$rawData=o,f.$data=n,r&&(f[r]=n),u&&u(f,i,n),f.$data},null,{Ia:function(){return o&&!s.a.ob(o)},o:!0});e.Z()&&(f.I=e,e.equalityComparer=null,o=[],e.Tb=function(t){o.push(t),s.a.w.da(t,function(t){s.a.ua(o,t),o.length||(e.K(),f.I=e=n)})})},s.N.prototype.createChildContext=function(n,t,i){return new s.N(n,this,t,function(n,t){n.$parentContext=t,n.$parent=t.$data,n.$parents=(t.$parents||[]).slice(0),n.$parents.unshift(n.$parent),i&&i(n)})},s.N.prototype.extend=function(n){return new s.N(this.I||this.$data,this,null,function(t,i){t.$rawData=i.$rawData,s.a.extend(t,"function"==typeof n?n():n)})},u=s.a.e.F(),f=s.a.e.F(),s.Ob=function(n,t){if(2==arguments.length)s.a.e.set(n,f,t),t.I&&t.I.Tb(n);else return s.a.e.get(n,f)},s.ra=function(n,t,i){return 1===n.nodeType&&s.f.Fb(n),o(n,t,r(i),!0)},s.Wb=function(n,t,i){return i=r(i),s.ra(n,"function"==typeof t?c(t.bind(null,i,n)):s.a.na(t,v),i)},s.Ca=function(n,t){1!==t.nodeType&&8!==t.nodeType||a(r(n),t,!0)},s.pb=function(n,u){if(!t&&i.jQuery&&(t=i.jQuery),u&&1!==u.nodeType&&8!==u.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");u=u||i.document.body,l(r(n),u,!0)},s.Ha=function(t){switch(t.nodeType){case 1:case 8:var i=s.Ob(t);if(i)return i;if(t.parentNode)return s.Ha(t.parentNode)}return n},s.$b=function(t){return(t=s.Ha(t))?t.$data:n},s.b("bindingHandlers",s.d),s.b("applyBindings",s.pb),s.b("applyBindingsToDescendants",s.Ca),s.b("applyBindingAccessorsToNode",s.ra),s.b("applyBindingsToNode",s.Wb),s.b("contextFor",s.Ha),s.b("dataFor",s.$b)}(),function(n){function f(t,f){var e=i.hasOwnProperty(t)?i[t]:n,o;e||(e=i[t]=new s.P,u(t,function(n){r[t]=n,delete i[t],o?e.notifySubscribers(n):setTimeout(function(){e.notifySubscribers(n)},0)}),o=!0),e.U(f)}function u(n,i){t("getConfig",[n],function(r){r?t("loadComponent",[n,r],function(n){i(n)}):i(null)})}function t(i,r,u,f){var e,h,o;if(f||(f=s.g.loaders.slice(0)),e=f.shift(),e)if(h=e[i],h){if(o=!1,h.apply(e,r.concat(function(n){o?u(null):null!==n?u(n):t(i,r,u,f)}))!==n&&(o=!0,!e.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.");}else t(i,r,u,f);else u(null)}var i={},r={};s.g={get:function(t,i){var u=r.hasOwnProperty(t)?r[t]:n;u?setTimeout(function(){i(u)},0):f(t,i)},tb:function(n){delete r[n]},jb:t},s.g.loaders=[],s.b("components",s.g),s.b("components.get",s.g.get),s.b("components.clearCachedDefinition",s.g.tb)}(),function(){function l(n,i,r,f){function e(){0==--c&&f(o)}var o={},c=2,h=r.template;r=r.viewModel,h?u(i,h,function(t){s.g.jb("loadTemplate",[n,t],function(n){o.template=n,e()})}):e(),r?u(i,r,function(i){s.g.jb("loadViewModel",[n,i],function(n){o[t]=n,e()})}):e()}function e(n,i,r){if("function"==typeof i)r(function(n){return new i(n)});else if("function"==typeof i[t])r(i[t]);else if("instance"in i){var u=i.instance;r(function(){return u})}else"viewModel"in i?e(n,i.viewModel,r):n("Unknown viewModel value: "+i)}function h(n){switch(s.a.t(n)){case"script":return s.a.ba(n.text);case"textarea":return s.a.ba(n.value);case"template":if(c(n.content))return s.a.ia(n.content.childNodes)}return s.a.ia(n.childNodes)}function c(n){return i.DocumentFragment?n instanceof DocumentFragment:n&&11===n.nodeType}function u(n,t,r){"string"==typeof t.require?o||i.require?(o||i.require)([t.require],r):n("Uses require, but no AMD loader is present"):r(t)}function f(n){return function(t){throw Error("Component '"+n+"': "+t);}}var n={},t;s.g.tc=function(t,i){if(!i)throw Error("Invalid configuration for "+t);if(s.g.Qa(t))throw Error("Component "+t+" is already registered");n[t]=i},s.g.Qa=function(t){return t in n},s.g.wc=function(t){delete n[t],s.g.tb(t)},s.g.ub={getConfig:function(t,i){i(n.hasOwnProperty(t)?n[t]:null)},loadComponent:function(n,t,i){var r=f(n);u(r,t,function(t){l(n,r,t,i)})},loadTemplate:function(n,t,u){if(n=f(n),"string"==typeof t)u(s.a.ba(t));else if(t instanceof Array)u(t);else if(c(t))u(s.a.S(t.childNodes));else if(t.element)if(t=t.element,i.HTMLElement?t instanceof HTMLElement:t&&t.tagName&&1===t.nodeType)u(h(t));else if("string"==typeof t){var e=r.getElementById(t);e?u(h(e)):n("Cannot find element with ID "+t)}else n("Unknown element type: "+t);else n("Unknown template value: "+t)},loadViewModel:function(n,t,i){e(f(n),t,i)}},t="createViewModel",s.b("components.register",s.g.tc),s.b("components.isRegistered",s.g.Qa),s.b("components.unregister",s.g.wc),s.b("components.defaultLoader",s.g.ub),s.g.loaders.push(s.g.ub),s.g.Ub=n}(),function(){function t(t,i){var r=t.getAttribute("params");if(r){var r=n.parseBindingsString(r,i,t,{valueAccessors:!0,bindingParams:!0}),r=s.a.na(r,function(n){return s.s(n,null,{o:t})}),u=s.a.na(r,function(n){return n.Z()?s.s(function(){return s.a.c(n())},null,{o:t}):n.v()});return u.hasOwnProperty("$raw")||(u.$raw=r),u}return{$raw:{}}}s.g.getComponentNameForNode=function(n){return n=s.a.t(n),s.g.Qa(n)&&n},s.g.mb=function(n,i,r,u){var e,f;if(1===i.nodeType&&(e=s.g.getComponentNameForNode(i),e)){if(n=n||{},n.component)throw Error('Cannot use the "component" binding on a custom element matching a component');f={name:e,params:t(i,r)},n.component=u?function(){return f}:f}return n};var n=new s.J;9>s.a.L&&(s.g.register=function(n){return function(t){return r.createElement(t),n.apply(this,arguments)}}(s.g.register),r.createDocumentFragment=function(n){return function(){var i=n(),r=s.g.Ub,t;for(t in r)r.hasOwnProperty(t)&&i.createElement(t);return i}}(r.createDocumentFragment))}(),function(){var n=0;s.d.component={init:function(t,i,r,u,f){function h(){var n=e&&e.dispose;"function"==typeof n&&n.call(e),o=null}var e,o;return s.a.w.da(t,h),s.s(function(){var u=s.a.c(i()),r,l,c;if("string"==typeof u?r=u:(r=s.a.c(u.name),l=s.a.c(u.params)),!r)throw Error("No component name specified");c=o=++n,s.g.get(r,function(n){var i,u;if(o===c){if(h(),!n)throw Error("Unknown component '"+r+"'");if(i=n.template,!i)throw Error("Component '"+r+"' has no template");i=s.a.ia(i),s.f.T(t,i),i=l,u=n.createViewModel,n=u?u.call(n,i,{element:t}):i,i=f.createChildContext(n),e=n,s.Ca(i,t)}})},null,{o:t}),{controlsDescendantBindings:!0}}},s.f.Q.component=!0}(),y={"class":"className","for":"htmlFor"},s.d.attr={update:function(t,i){var r=s.a.c(i())||{};s.a.G(r,function(i,r){r=s.a.c(r);var u=!1===r||null===r||r===n;u&&t.removeAttribute(i),8>=s.a.L&&i in y?(i=y[i],u?t.removeAttribute(i):t[i]=r):u||t.setAttribute(i,r.toString()),"name"===i&&s.a.Mb(t,u?"":r.toString())})}},function(){s.d.checked={after:["value","attr"],init:function(t,i,r){function c(){var c=t.checked,h=l?e():c,n;s.Y.ma()||u&&!c||(n=s.k.B(i),f?o!==h?(c&&(s.a.ea(n,h,!0),s.a.ea(n,o,!1)),o=h):s.a.ea(n,h,c):s.h.pa(n,r,"checked",h,!0))}function a(){var n=s.a.c(i());t.checked=f?0<=s.a.m(n,e()):h?n:e()===n}var e=s.Ib(function(){return r.has("checkedValue")?s.a.c(r.get("checkedValue")):r.has("value")?s.a.c(r.get("value")):t.value}),h="checkbox"==t.type,u="radio"==t.type;if(h||u){var f=h&&s.a.c(i())instanceof Array,o=f?e():n,l=u||f;u&&!t.name&&s.d.uniqueName.init(t,function(){return!0}),s.s(c,null,{o:t}),s.a.n(t,"click",c),s.s(a,null,{o:t})}}},s.h.V.checked=!0,s.d.checkedValue={update:function(n,t){n.value=s.a.c(t())}}}(),s.d.css={update:function(n,t){var i=s.a.c(t());"object"==typeof i?s.a.G(i,function(t,i){i=s.a.c(i),s.a.Ba(n,t,i)}):(i=String(i||""),s.a.Ba(n,n.__ko__cssValue,!1),n.__ko__cssValue=i,s.a.Ba(n,i,!0))}},s.d.enable={update:function(n,t){var i=s.a.c(t());i&&n.disabled?n.removeAttribute("disabled"):i||n.disabled||(n.disabled=!0)}},s.d.disable={update:function(n,t){s.d.enable.update(n,function(){return!s.a.c(t())})}},s.d.event={init:function(n,t,i,r,u){var f=t()||{};s.a.G(f,function(f){"string"==typeof f&&s.a.n(n,f,function(n){var o,h=t()[f],e;if(h){try{e=s.a.S(arguments),r=u.$data,e.unshift(r),o=h.apply(r,e)}finally{!0!==o&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}!1===i.get(f+"Bubble")&&(n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation())}})})}},s.d.foreach={Eb:function(n){return function(){var i=n(),t=s.a.Xa(i);return!t||"number"==typeof t.length?{foreach:i,templateEngine:s.O.Oa}:(s.a.c(i),{foreach:t.data,as:t.as,includeDestroyed:t.includeDestroyed,afterAdd:t.afterAdd,beforeRemove:t.beforeRemove,afterRender:t.afterRender,beforeMove:t.beforeMove,afterMove:t.afterMove,templateEngine:s.O.Oa})}},init:function(n,t){return s.d.template.init(n,s.d.foreach.Eb(t))},update:function(n,t,i,r,u){return s.d.template.update(n,s.d.foreach.Eb(t),i,r,u)}},s.h.ha.foreach=!1,s.f.Q.foreach=!0,s.d.hasfocus={init:function(n,t,i){function f(r){var u,f;if(n.__ko_hasfocusUpdating=!0,u=n.ownerDocument,"activeElement"in u){try{f=u.activeElement}catch(e){f=u.body}r=f===n}u=t(),s.h.pa(u,i,"hasfocus",r,!0),n.__ko_hasfocusLastValue=r,n.__ko_hasfocusUpdating=!1}var u=f.bind(null,!0),r=f.bind(null,!1);s.a.n(n,"focus",u),s.a.n(n,"focusin",u),s.a.n(n,"blur",r),s.a.n(n,"focusout",r)},update:function(n,t){var i=!!s.a.c(t());n.__ko_hasfocusUpdating||n.__ko_hasfocusLastValue===i||(i?n.focus():n.blur(),s.k.B(s.a.oa,null,[n,i?"focusin":"focusout"]))}},s.h.V.hasfocus=!0,s.d.hasFocus=s.d.hasfocus,s.h.V.hasFocus=!0,s.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(n,t){s.a.$a(n,t())}},w("if"),w("ifnot",!1,!0),w("with",!0,!1,function(n,t){return n.createChildContext(t)}),a={},s.d.options={init:function(n){if("select"!==s.a.t(n))throw Error("options binding applies only to SELECT elements");for(;0<n.length;)n.remove(0);return{controlsDescendantBindings:!0}},update:function(t,i,r){function c(){return s.a.ta(t.options,function(n){return n.selected})}function v(n,t,i){var r=typeof t;return"function"==r?t(n):"string"==r?n[t]:i}function l(n,i){if(f.length){var r=0<=s.a.m(f,s.i.q(i[0]));s.a.Nb(i[0],r),h&&!r&&s.k.B(s.a.oa,null,[t,"change"])}}var o=0!=t.length&&t.multiple?t.scrollTop:null,u=s.a.c(i()),y=r.get("optionsIncludeDestroyed"),e,f,h;i={},f=t.multiple?s.a.Da(c(),s.i.q):0<=t.selectedIndex?[s.i.q(t.options[t.selectedIndex])]:[],u&&("undefined"==typeof u.length&&(u=[u]),e=s.a.ta(u,function(t){return y||t===n||null===t||!s.a.c(t._destroy)}),r.has("optionsCaption")&&(u=s.a.c(r.get("optionsCaption")),null!==u&&u!==n&&e.unshift(a))),h=!1,i.beforeRemove=function(n){t.removeChild(n)},u=l,r.has("optionsAfterRender")&&(u=function(t,i){l(0,i),s.k.B(r.get("optionsAfterRender"),null,[i[0],t!==a?t:n])}),s.a.Za(t,e,function(i,u,e){return e.length&&(f=e[0].selected?[s.i.q(e[0])]:[],h=!0),u=t.ownerDocument.createElement("option"),i===a?(s.a.bb(u,r.get("optionsCaption")),s.i.ca(u,n)):(e=v(i,r.get("optionsValue"),i),s.i.ca(u,s.a.c(e)),i=v(i,r.get("optionsText"),e),s.a.bb(u,i)),[u]},i,u),s.k.B(function(){r.get("valueAllowUnset")&&r.has("value")?s.i.ca(t,s.a.c(r.get("value")),!0):(t.multiple?f.length&&c().length<f.length:f.length&&0<=t.selectedIndex?s.i.q(t.options[t.selectedIndex])!==f[0]:f.length||0<=t.selectedIndex)&&s.a.oa(t,"change")}),s.a.dc(t),o&&20<Math.abs(o-t.scrollTop)&&(t.scrollTop=o)}},s.d.options.Va=s.a.e.F(),s.d.selectedOptions={after:["options","foreach"],init:function(n,t,i){s.a.n(n,"change",function(){var u=t(),r=[];s.a.u(n.getElementsByTagName("option"),function(n){n.selected&&r.push(s.i.q(n))}),s.h.pa(u,i,"selectedOptions",r)})},update:function(n,t){if("select"!=s.a.t(n))throw Error("values binding applies only to SELECT elements");var i=s.a.c(t());i&&"number"==typeof i.length&&s.a.u(n.getElementsByTagName("option"),function(n){var t=0<=s.a.m(i,s.i.q(n));s.a.Nb(n,t)})}},s.h.V.selectedOptions=!0,s.d.style={update:function(t,i){var r=s.a.c(i()||{});s.a.G(r,function(i,r){r=s.a.c(r),(null===r||r===n||!1===r)&&(r=""),t.style[i]=r})}},s.d.submit={init:function(n,t,i,r,u){if("function"!=typeof t())throw Error("The value for a submit binding must be a function");s.a.n(n,"submit",function(i){var r,f=t();try{r=f.call(u.$data,n)}finally{!0!==r&&(i.preventDefault?i.preventDefault():i.returnValue=!1)}})}},s.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(n,t){s.a.bb(n,t())}},s.f.Q.text=!0,function(){if(i&&i.navigator)var f=function(n){if(n)return parseFloat(n[1])},h=i.opera&&i.opera.version&&parseInt(i.opera.version()),u=i.navigator.userAgent,c=f(u.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),l=f(u.match(/Firefox\/([^ ]*)/));if(10>s.a.L)var r=s.a.e.F(),t=s.a.e.F(),e=function(n){var i=this.activeElement;(i=i&&s.a.e.get(i,t))&&i(n)},o=function(n,i){var u=n.ownerDocument;s.a.e.get(u,r)||(s.a.e.set(u,r,!0),s.a.n(u,"selectionchange",e)),s.a.e.set(n,t,i)};s.d.textInput={init:function(t,i,r){function u(n,i){s.a.n(t,n,i)}function p(){var r=s.a.c(i());(null===r||r===n)&&(r=""),v!==n&&r===v?setTimeout(p,4):t.value!==r&&(y=r,t.value=r)}function e(){a||(v=t.value,a=setTimeout(f,4))}function f(){clearTimeout(a),v=a=n;var u=t.value;y!==u&&(y=u,s.h.pa(i(),r,"textInput",u))}var y=t.value,a,v;10>s.a.L?(u("propertychange",function(n){"value"===n.propertyName&&f()}),8==s.a.L&&(u("keyup",f),u("keydown",f)),8<=s.a.L&&(o(t,f),u("dragend",e))):(u("input",f),5>c&&"textarea"===s.a.t(t)?(u("keydown",e),u("paste",e),u("cut",e)):11>h?u("keydown",e):4>l&&(u("DOMAutoComplete",f),u("dragdrop",f),u("drop",f))),u("change",f),s.s(p,null,{o:t})}},s.h.V.textInput=!0,s.d.textinput={preprocess:function(n,t,i){i("textInput",n)}}}(),s.d.uniqueName={init:function(n,t){if(t()){var i="ko_unique_"+ ++s.d.uniqueName.Zb;s.a.Mb(n,i)}}},s.d.uniqueName.Zb=0,s.d.value={after:["options","foreach"],init:function(n,t,i){var f,h;if("input"!=n.tagName.toLowerCase()||"checkbox"!=n.type&&"radio"!=n.type){var u=["change"],r=i.get("valueUpdate"),o=!1,e=null;r&&("string"==typeof r&&(r=[r]),s.a.ga(u,r),u=s.a.rb(u)),f=function(){e=null,o=!1;var u=t(),r=s.i.q(n);s.h.pa(u,i,"value",r)},!s.a.L||"input"!=n.tagName.toLowerCase()||"text"!=n.type||"off"==n.autocomplete||n.form&&"off"==n.form.autocomplete||-1!=s.a.m(u,"propertychange")||(s.a.n(n,"propertychange",function(){o=!0}),s.a.n(n,"focus",function(){o=!1}),s.a.n(n,"blur",function(){o&&f()})),s.a.u(u,function(t){var i=f;s.a.vc(t,"after")&&(i=function(){e=s.i.q(n),setTimeout(f,0)},t=t.substring(5)),s.a.n(n,t,i)}),h=function(){var r=s.a.c(t()),u=s.i.q(n),f;null!==e&&r===e?setTimeout(h,0):r!==u&&("select"===s.a.t(n)?(f=i.get("valueAllowUnset"),u=function(){s.i.ca(n,r,f)},u(),f||r===s.i.q(n)?setTimeout(u,0):s.k.B(s.a.oa,null,[n,"change"])):s.i.ca(n,r))},s.s(h,null,{o:n})}else s.ra(n,{checkedValue:t})},update:function(){}},s.h.V.value=!0,s.d.visible={update:function(n,t){var r=s.a.c(t()),i="none"!=n.style.display;r&&!i?n.style.display="":!r&&i&&(n.style.display="none")}},function(n){s.d[n]={init:function(t,i,r,u,f){return s.d.event.init.call(this,t,function(){var t={};return t[n]=i(),t},r,u,f)}}}("click"),s.H=function(){},s.H.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource");},s.H.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock");},s.H.prototype.makeTemplateSource=function(n,t){if("string"==typeof n){t=t||r;var i=t.getElementById(n);if(!i)throw Error("Cannot find template with ID "+n);return new s.r.l(i)}if(1==n.nodeType||8==n.nodeType)return new s.r.fa(n);throw Error("Unknown template type: "+n);},s.H.prototype.renderTemplate=function(n,t,i,r){return n=this.makeTemplateSource(n,r),this.renderTemplateSource(n,t,i)},s.H.prototype.isTemplateRewritten=function(n,t){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(n,t).data("isRewritten")},s.H.prototype.rewriteTemplate=function(n,t,i){n=this.makeTemplateSource(n,i),t=t(n.text()),n.text(t),n.data("isRewritten",!0)},s.b("templateEngine",s.H),s.fb=function(){function n(n,t,i,r){var o,f,u,e;for(n=s.h.Wa(n),o=s.h.ha,f=0;f<n.length;f++)if(u=n[f].key,o.hasOwnProperty(u))if(e=o[u],"function"==typeof e){if(u=e(n[f].value))throw Error(u);}else if(!e)throw Error("This template engine does not support the '"+u+"' binding within its templates");return i="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+s.h.ya(n,{valueAccessors:!0})+" } })()},'"+i.toLowerCase()+"')",r.createJavaScriptEvaluatorBlock(i)+t}var i=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,t=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{ec:function(n,t,i){t.isTemplateRewritten(n,i)||t.rewriteTemplate(n,function(n){return s.fb.nc(n,t)},i)},nc:function(r,u){return r.replace(i,function(t,i,r,f,e){return n(e,i,r,u)}).replace(t,function(t,i){return n(i,"<!-- ko -->","#comment",u)})},Xb:function(n,t){return s.D.Ua(function(i,r){var u=i.nextSibling;u&&u.nodeName.toLowerCase()===t&&s.ra(u,n,r)})}}}(),s.b("__tr_ambtns",s.fb.Xb),function(){var i,t;s.r={},s.r.l=function(n){this.l=n},s.r.l.prototype.text=function(){var n=s.a.t(this.l),n="script"===n?"text":"textarea"===n?"value":"innerHTML",t;if(0==arguments.length)return this.l[n];t=arguments[0],"innerHTML"===n?s.a.$a(this.l,t):this.l[n]=t},i=s.a.e.F()+"_",s.r.l.prototype.data=function(n){if(1===arguments.length)return s.a.e.get(this.l,i+n);s.a.e.set(this.l,i+n,arguments[1])},t=s.a.e.F(),s.r.fa=function(n){this.l=n},s.r.fa.prototype=new s.r.l,s.r.fa.prototype.text=function(){if(0==arguments.length){var i=s.a.e.get(this.l,t)||{};return i.gb===n&&i.Ga&&(i.gb=i.Ga.innerHTML),i.gb}s.a.e.set(this.l,t,{gb:arguments[0]})},s.r.l.prototype.nodes=function(){if(0==arguments.length)return(s.a.e.get(this.l,t)||{}).Ga;s.a.e.set(this.l,t,{Ga:arguments[0]})},s.b("templateSources",s.r),s.b("templateSources.domElement",s.r.l),s.b("templateSources.anonymousTemplate",s.r.fa)}(),function(){function u(n,t,i){var r;for(t=s.f.nextSibling(t);n&&(r=n)!==t;)n=s.f.nextSibling(r),i(r,n)}function e(n,t){if(n.length){var i=n[0],r=n[n.length-1],o=i.parentNode,e=s.J.instance,f=e.preprocessNode;if(f){if(u(i,r,function(n,t){var o=n.previousSibling,u=f.call(e,n);u&&(n===i&&(i=u[0]||t),n===r&&(r=u[u.length-1]||o))}),n.length=0,!i)return;i===r?n.push(i):(n.push(i,r),s.a.ka(n,o))}u(i,r,function(n){1!==n.nodeType&&8!==n.nodeType||s.pb(t,n)}),u(i,r,function(n){1!==n.nodeType&&8!==n.nodeType||s.D.Sb(n,[t])}),s.a.ka(n,o)}}function r(n){return n.nodeType?n:0<n.length?n[0]:null}function f(n,i,u,f,o){o=o||{};var h=n&&r(n),h=h&&h.ownerDocument,c=o.templateEngine||t;if(s.fb.ec(u,c,h),u=c.renderTemplate(u,f,o,h),"number"!=typeof u.length||0<u.length&&"number"!=typeof u[0].nodeType)throw Error("Template engine must return an array of DOM nodes");h=!1;switch(i){case"replaceChildren":s.f.T(n,u),h=!0;break;case"replaceNode":s.a.Lb(n,u),h=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+i);}return h&&(e(u,f),o.afterRender&&s.k.B(o.afterRender,null,[u,f.$data])),u}var t,i;s.ab=function(i){if(i!=n&&!(i instanceof s.H))throw Error("templateEngine must inherit from ko.templateEngine");t=i},s.Ya=function(i,u,e,o,h){if(e=e||{},(e.templateEngine||t)==n)throw Error("Set a template engine before calling renderTemplate");if(h=h||"replaceChildren",o){var c=r(o);return s.j(function(){var n=u&&u instanceof s.N?u:new s.N(s.a.c(u)),t=s.C(i)?i():"function"==typeof i?i(n.$data,n):i,n=f(o,h,t,n,e);"replaceNode"==h&&(o=n,c=r(o))},null,{Ia:function(){return!c||!s.a.Ja(c)},o:c&&"replaceNode"==h?c.parentNode:c})}return s.D.Ua(function(n){s.Ya(i,u,e,n,"replaceNode")})},s.uc=function(t,i,r,u,o){function c(n,t){e(t,h),r.afterRender&&r.afterRender(t,n)}function l(n,i){h=o.createChildContext(n,r.as,function(n){n.$index=i});var u=s.C(t)?t():"function"==typeof t?t(n,h):t;return f(null,"ignoreTargetNode",u,h,r)}var h;return s.j(function(){var t=s.a.c(i)||[];"undefined"==typeof t.length&&(t=[t]),t=s.a.ta(t,function(t){return r.includeDestroyed||t===n||null===t||!s.a.c(t._destroy)}),s.k.B(s.a.Za,null,[u,t,l,r,c])},null,{o:u})},i=s.a.e.F(),s.d.template={init:function(n,t){var i=s.a.c(t());return"string"==typeof i||i.name?s.f.ja(n):(i=s.f.childNodes(n),i=s.a.oc(i),new s.r.fa(n).nodes(i)),{controlsDescendantBindings:!0}},update:function(t,r,u,f,e){var h=r(),o;r=s.a.c(h),u=!0,f=null,"string"==typeof r?r={}:(h=r.name,"if"in r&&(u=s.a.c(r["if"])),u&&"ifnot"in r&&(u=!s.a.c(r.ifnot)),o=s.a.c(r.data)),"foreach"in r?f=s.uc(h||t,u&&r.foreach||[],r,t,e):u?(e="data"in r?e.createChildContext(o,r.as):e,f=s.Ya(h||t,e,r,t)):s.f.ja(t),e=f,(o=s.a.e.get(t,i))&&"function"==typeof o.K&&o.K(),s.a.e.set(t,i,e&&e.Z()?e:n)}},s.h.ha.template=function(n){return n=s.h.Wa(n),1==n.length&&n[0].unknown||s.h.lc(n,"name")?null:"This template engine does not support anonymous templates nested within its templates"},s.f.Q.template=!0}(),s.b("setTemplateEngine",s.ab),s.b("renderTemplate",s.Ya),s.a.wb=function(n,t,i){if(n.length&&t.length)for(var o,r,f,u,e=o=0;(!i||e<i)&&(f=n[o]);++o){for(r=0;u=t[r];++r)if(f.value===u.value){f.moved=u.index,u.moved=f.index,t.splice(r,1),e=r=0;break}e+=r}},s.a.Fa=function(){function n(n,t,i,r,u){for(var o=Math.min,v=Math.max,y=[],c=n.length,f,h=t.length,l=h-c||1,b=c+h+1,a,p,w,e=0;e<=c;e++)for(p=a,y.push(a=[]),w=o(h,e+l),f=v(0,e-1);f<=w;f++)a[f]=f?e?n[e-1]===t[f-1]?p[f-1]:o(p[f]||b,a[f-1]||b)+1:f+1:e+1;for(o=[],v=[],l=[],e=c,f=h;e||f;)h=y[e][f]-1,f&&h===y[e][f-1]?v.push(o[o.length]={status:i,value:t[--f],index:f}):e&&h===y[e-1][f]?l.push(o[o.length]={status:r,value:n[--e],index:e}):(--f,--e,u.sparse||o.push({status:"retained",value:t[f]}));return s.a.wb(v,l,10*c),o.reverse()}return function(t,i,r){return r="boolean"==typeof r?{dontLimitMoves:r}:r||{},t=t||[],i=i||[],t.length<=i.length?n(t,i,"added","deleted",r):n(i,t,"deleted","added",r)}}(),s.b("utils.compareArrays",s.a.Fa),function(){function i(t,i,r,u,f){var e=[],o=s.j(function(){var n=i(r,f,s.a.ka(e,t))||[];0<e.length&&(s.a.Lb(e,n),u&&s.k.B(u,null,[r,n,f])),e.length=0,s.a.ga(e,n)},null,{o:t,Ia:function(){return!s.a.ob(e)}});return{$:e,j:o.Z()?o:n}}var t=s.a.e.F();s.a.Za=function(r,u,f,e,o){function ut(n,t){h=g[t],it!==t&&(k[n]=h),h.Na(it++),s.a.ka(h.$,r),nt.push(h),w.push(h)}function y(n,t){if(n)for(var i=0,r=t.length;i<r;i++)t[i]&&s.a.u(t[i].$,function(r){n(r,i,t[i].sa)})}var c,v,rt;u=u||[],e=e||{};var v=s.a.e.get(r,t)===n,g=s.a.e.get(r,t)||[],d=s.a.Da(g,function(n){return n.sa}),l=s.a.Fa(d,u,e.dontLimitMoves),nt=[],a=0,it=0,tt=[],w=[];u=[];for(var k=[],d=[],h,c=0,p,b;p=l[c];c++)switch(b=p.moved,p.status){case"deleted":b===n&&(h=g[a],h.j&&h.j.K(),tt.push.apply(tt,s.a.ka(h.$,r)),e.beforeRemove&&(u[c]=h,w.push(h))),a++;break;case"retained":ut(c,a++);break;case"added":b!==n?ut(c,b):(h={sa:p.value,Na:s.p(it++)},nt.push(h),w.push(h),v||(d[c]=h))}for(y(e.beforeMove,k),s.a.u(tt,e.beforeRemove?s.R:s.removeNode),c=0,v=s.f.firstChild(r);h=w[c];c++){for(h.$||s.a.extend(h,i(r,f,h.sa,o,h.Na)),a=0;l=h.$[a];v=l.nextSibling,rt=l,a++)l!==v&&s.f.Bb(r,l,rt);!h.ic&&o&&(o(h.sa,h.$,h.Na),h.ic=!0)}y(e.beforeRemove,u),y(e.afterMove,k),y(e.afterAdd,d),s.a.e.set(r,t,nt)}}(),s.b("utils.setDomNodeChildrenFromArrayMapping",s.a.Za),s.O=function(){this.allowTemplateRewriting=!1},s.O.prototype=new s.H,s.O.prototype.renderTemplateSource=function(n){var t=(9>s.a.L?0:n.nodes)?n.nodes():null;return t?s.a.S(t.cloneNode(!0).childNodes):(n=n.text(),s.a.ba(n))},s.O.Oa=new s.O,s.ab(s.O.Oa),s.b("nativeTemplateEngine",s.O),function(){s.Sa=function(){var n=this.kc=function(){if(!t||!t.tmpl)return 0;try{if(0<=t.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(n){}return 1}();this.renderTemplateSource=function(i,u,f){if(f=f||{},2>n)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var e=i.data("precompiled");return e||(e=i.text()||"",e=t.template(null,"{{ko_with $item.koBindingContext}}"+e+"{{/ko_with}}"),i.data("precompiled",e)),i=[u.$data],u=t.extend({koBindingContext:u},f.templateOptions),u=t.tmpl(e,i,u),u.appendTo(r.createElement("div")),t.fragments={},u},this.createJavaScriptEvaluatorBlock=function(n){return"{{ko_code ((function() { return "+n+" })()) }}"},this.addTemplate=function(n,t){r.write("<script type='text/html' id='"+n+"'>"+t+"<\/script>")},0<n&&(t.tmpl.tag.ko_code={open:"__.push($1 || '');"},t.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},s.Sa.prototype=new s.H;var n=new s.Sa;0<n.kc&&s.ab(n),s.b("jqueryTmplTemplateEngine",s.Sa)}()})})()}(),function(){var y=this,et=y._,u=Array.prototype,k=Object.prototype,ft=Function.prototype,nt=u.push,t=u.slice,c=u.concat,r=k.toString,d=k.hasOwnProperty,tt=Array.isArray,g=Object.keys,v=ft.bind,n=function(t){return t instanceof n?t:this instanceof n?void(this._wrapped=t):new n(t)},i,l,s,f,e,h,p,o;"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports._=n):y._=n,n.VERSION="1.7.0",i=function(n,t,i){if(t===void 0)return n;switch(null==i?3:i){case 1:return function(i){return n.call(t,i)};case 2:return function(i,r){return n.call(t,i,r)};case 3:return function(i,r,u){return n.call(t,i,r,u)};case 4:return function(i,r,u,f){return n.call(t,i,r,u,f)}}return function(){return n.apply(t,arguments)}},n.iteratee=function(t,r,u){return null==t?n.identity:n.isFunction(t)?i(t,r,u):n.isObject(t)?n.matches(t):n.property(t)},n.each=n.forEach=function(t,r,u){var f,e,o;if(null==t)return t;if(r=i(r,u),e=t.length,e===+e)for(f=0;e>f;f++)r(t[f],f,t);else for(o=n.keys(t),f=0,e=o.length;e>f;f++)r(t[o[f]],o[f],t);return t},n.map=n.collect=function(t,i,r){if(null==t)return[];i=n.iteratee(i,r);for(var f,e=t.length!==+t.length&&n.keys(t),o=(e||t).length,s=Array(o),u=0;o>u;u++)f=e?e[u]:u,s[u]=i(t[f],f,t);return s},l="Reduce of empty array with no initial value",n.reduce=n.foldl=n.inject=function(t,r,u,f){null==t&&(t=[]),r=i(r,f,4);var s,o=t.length!==+t.length&&n.keys(t),h=(o||t).length,e=0;if(arguments.length<3){if(!h)throw new TypeError(l);u=t[o?o[e++]:e++]}for(;h>e;e++)s=o?o[e]:e,u=r(u,t[s],s,t);return u},n.reduceRight=n.foldr=function(t,r,u,f){null==t&&(t=[]),r=i(r,f,4);var s,o=t.length!==+t.length&&n.keys(t),e=(o||t).length;if(arguments.length<3){if(!e)throw new TypeError(l);u=t[o?o[--e]:--e]}for(;e--;)s=o?o[e]:e,u=r(u,t[s],s,t);return u},n.find=n.detect=function(t,i,r){var u;return i=n.iteratee(i,r),n.some(t,function(n,t,r){if(i(n,t,r))return u=n,!0}),u},n.filter=n.select=function(t,i,r){var u=[];return null==t?u:(i=n.iteratee(i,r),n.each(t,function(n,t,r){i(n,t,r)&&u.push(n)}),u)},n.reject=function(t,i,r){return n.filter(t,n.negate(n.iteratee(i)),r)},n.every=n.all=function(t,i,r){if(null==t)return!0;i=n.iteratee(i,r);for(var e,f=t.length!==+t.length&&n.keys(t),o=(f||t).length,u=0;o>u;u++)if(e=f?f[u]:u,!i(t[e],e,t))return!1;return!0},n.some=n.any=function(t,i,r){if(null==t)return!1;i=n.iteratee(i,r);for(var e,f=t.length!==+t.length&&n.keys(t),o=(f||t).length,u=0;o>u;u++)if(e=f?f[u]:u,i(t[e],e,t))return!0;return!1},n.contains=n.include=function(t,i){return null==t?!1:(t.length!==+t.length&&(t=n.values(t)),n.indexOf(t,i)>=0)},n.invoke=function(i,r){var f=t.call(arguments,2),u=n.isFunction(r);return n.map(i,function(n){return(u?r:n[r]).apply(n,f)})},n.pluck=function(t,i){return n.map(t,n.property(i))},n.where=function(t,i){return n.filter(t,n.matches(i))},n.findWhere=function(t,i){return n.find(t,n.matches(i))},n.max=function(t,i,r){var o,e,u=-1/0,h=-1/0,f,s;if(null==i&&null!=t)for(t=t.length===+t.length?t:n.values(t),f=0,s=t.length;s>f;f++)o=t[f],o>u&&(u=o);else i=n.iteratee(i,r),n.each(t,function(n,t,r){e=i(n,t,r),(e>h||e===-1/0&&u===-1/0)&&(u=n,h=e)});return u},n.min=function(t,i,r){var o,e,u=1/0,h=1/0,f,s;if(null==i&&null!=t)for(t=t.length===+t.length?t:n.values(t),f=0,s=t.length;s>f;f++)o=t[f],u>o&&(u=o);else i=n.iteratee(i,r),n.each(t,function(n,t,r){e=i(n,t,r),(h>e||1/0===e&&1/0===u)&&(u=n,h=e)});return u},n.shuffle=function(t){for(var u,f=t&&t.length===+t.length?t:n.values(t),e=f.length,r=Array(e),i=0;e>i;i++)u=n.random(0,i),u!==i&&(r[i]=r[u]),r[u]=f[i];return r},n.sample=function(t,i,r){return null==i||r?(t.length!==+t.length&&(t=n.values(t)),t[n.random(t.length-1)]):n.shuffle(t).slice(0,Math.max(0,i))},n.sortBy=function(t,i,r){return i=n.iteratee(i,r),n.pluck(n.map(t,function(n,t,r){return{value:n,index:t,criteria:i(n,t,r)}}).sort(function(n,t){var r=n.criteria,i=t.criteria;if(r!==i){if(r>i||r===void 0)return 1;if(i>r||i===void 0)return-1}return n.index-t.index}),"value")},s=function(t){return function(i,r,u){var f={};return r=n.iteratee(r,u),n.each(i,function(n,u){var e=r(n,u,i);t(f,n,e)}),f}},n.groupBy=s(function(t,i,r){n.has(t,r)?t[r].push(i):t[r]=[i]}),n.indexBy=s(function(n,t,i){n[i]=t}),n.countBy=s(function(t,i,r){n.has(t,r)?t[r]++:t[r]=1}),n.sortedIndex=function(t,i,r,u){var f;r=n.iteratee(r,u,1);for(var s=r(i),e=0,o=t.length;o>e;)f=e+o>>>1,r(t[f])<s?e=f+1:o=f;return e},n.toArray=function(i){return i?n.isArray(i)?t.call(i):i.length===+i.length?n.map(i,n.identity):n.values(i):[]},n.size=function(t){return null==t?0:t.length===+t.length?t.length:n.keys(t).length},n.partition=function(t,i,r){i=n.iteratee(i,r);var f=[],u=[];return n.each(t,function(n,t,r){(i(n,t,r)?f:u).push(n)}),[f,u]},n.first=n.head=n.take=function(n,i,r){if(null!=n)return null==i||r?n[0]:0>i?[]:t.call(n,0,i)},n.initial=function(n,i,r){return t.call(n,0,Math.max(0,n.length-(null==i||r?1:i)))},n.last=function(n,i,r){if(null!=n)return null==i||r?n[n.length-1]:t.call(n,Math.max(n.length-i,0))},n.rest=n.tail=n.drop=function(n,i,r){return t.call(n,null==i||r?1:i)},n.compact=function(t){return n.filter(t,n.identity)},f=function(t,i,r,u){var o,s,e;if(i&&n.every(t,n.isArray))return c.apply(u,t);for(o=0,s=t.length;s>o;o++)e=t[o],n.isArray(e)||n.isArguments(e)?i?nt.apply(u,e):f(e,i,r,u):r||u.push(e);return u},n.flatten=function(n,t){return f(n,t,!1,[])},n.without=function(i){return n.difference(i,t.call(arguments,1))},n.uniq=n.unique=function(t,i,r,u){var f,h;if(null==t)return[];n.isBoolean(i)||(u=r,r=i,i=!1),null!=r&&(r=n.iteratee(r,u));for(var o=[],s=[],e=0,c=t.length;c>e;e++)f=t[e],i?(e&&s===f||o.push(f),s=f):r?(h=r(f,e,t),n.indexOf(s,h)<0&&(s.push(h),o.push(f))):n.indexOf(o,f)<0&&o.push(f);return o},n.union=function(){return n.uniq(f(arguments,!0,!0,[]))},n.intersection=function(t){var r,i;if(null==t)return[];for(var f=[],e=arguments.length,u=0,o=t.length;o>u;u++)if(r=t[u],!n.contains(f,r)){for(i=1;e>i&&n.contains(arguments[i],r);i++);i===e&&f.push(r)}return f},n.difference=function(i){var r=f(t.call(arguments,1),!0,!0,[]);return n.filter(i,function(t){return!n.contains(r,t)})},n.zip=function(t){if(null==t)return[];for(var r=n.max(arguments,"length").length,u=Array(r),i=0;r>i;i++)u[i]=n.pluck(arguments,i);return u},n.object=function(n,t){if(null==n)return{};for(var r={},i=0,u=n.length;u>i;i++)t?r[n[i]]=t[i]:r[n[i][0]]=n[i][1];return r},n.indexOf=function(t,i,r){if(null==t)return-1;var u=0,f=t.length;if(r){if("number"!=typeof r)return u=n.sortedIndex(t,i),t[u]===i?u:-1;u=0>r?Math.max(0,f+r):r}for(;f>u;u++)if(t[u]===i)return u;return-1},n.lastIndexOf=function(n,t,i){if(null==n)return-1;var r=n.length;for("number"==typeof i&&(r=0>i?r+i+1:Math.min(r,i+1));--r>=0;)if(n[r]===t)return r;return-1},n.range=function(n,t,i){arguments.length<=1&&(t=n||0,n=0),i=i||1;for(var u=Math.max(Math.ceil((t-n)/i),0),f=Array(u),r=0;u>r;r++,n+=i)f[r]=n;return f},e=function(){},n.bind=function(i,r){var u,f;if(v&&i.bind===v)return v.apply(i,t.call(arguments,1));if(!n.isFunction(i))throw new TypeError("Bind must be called on a function");return u=t.call(arguments,2),f=function(){var s,o;return this instanceof f?(e.prototype=i.prototype,s=new e,e.prototype=null,o=i.apply(s,u.concat(t.call(arguments))),n.isObject(o)?o:s):i.apply(r,u.concat(t.call(arguments)))}},n.partial=function(i){var r=t.call(arguments,1);return function(){for(var f=0,t=r.slice(),u=0,e=t.length;e>u;u++)t[u]===n&&(t[u]=arguments[f++]);for(;f<arguments.length;)t.push(arguments[f++]);return i.apply(this,t)}},n.bindAll=function(t){var i,r,u=arguments.length;if(1>=u)throw new Error("bindAll must be passed function names");for(i=1;u>i;i++)r=arguments[i],t[r]=n.bind(t[r],t);return t},n.memoize=function(t,i){var r=function(u){var e=r.cache,f=i?i.apply(this,arguments):u;return n.has(e,f)||(e[f]=t.apply(this,arguments)),e[f]};return r.cache={},r},n.delay=function(n,i){var r=t.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},i)},n.defer=function(i){return n.delay.apply(n,[i,1].concat(t.call(arguments,1)))},n.throttle=function(t,i,r){var e,o,s,u=null,f=0,h;return r||(r={}),h=function(){f=r.leading===!1?0:n.now(),u=null,s=t.apply(e,o),u||(e=o=null)},function(){var l=n.now(),c;return f||r.leading!==!1||(f=l),c=i-(l-f),e=this,o=arguments,0>=c||c>i?(clearTimeout(u),u=null,f=l,s=t.apply(e,o),u||(e=o=null)):u||r.trailing===!1||(u=setTimeout(h,c)),s}},n.debounce=function(t,i,r){var u,e,f,h,o,s=function(){var c=n.now()-h;i>c&&c>0?u=setTimeout(s,i-c):(u=null,r||(o=t.apply(f,e),u||(f=e=null)))};return function(){f=this,e=arguments,h=n.now();var c=r&&!u;return u||(u=setTimeout(s,i)),c&&(o=t.apply(f,e),f=e=null),o}},n.wrap=function(t,i){return n.partial(i,t)},n.negate=function(n){return function(){return!n.apply(this,arguments)}},n.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,i=n[t].apply(this,arguments);r--;)i=n[r].call(this,i);return i}},n.after=function(n,t){return function(){if(--n<1)return t.apply(this,arguments)}},n.before=function(n,t){var i;return function(){return--n>0?i=t.apply(this,arguments):t=null,i}},n.once=n.partial(n.before,2),n.keys=function(t){var r,i;if(!n.isObject(t))return[];if(g)return g(t);r=[];for(i in t)n.has(t,i)&&r.push(i);return r},n.values=function(t){for(var f=n.keys(t),r=f.length,u=Array(r),i=0;r>i;i++)u[i]=t[f[i]];return u},n.pairs=function(t){for(var r=n.keys(t),u=r.length,f=Array(u),i=0;u>i;i++)f[i]=[r[i],t[r[i]]];return f},n.invert=function(t){for(var u={},r=n.keys(t),i=0,f=r.length;f>i;i++)u[t[r[i]]]=r[i];return u},n.functions=n.methods=function(t){var r=[],i;for(i in t)n.isFunction(t[i])&&r.push(i);return r.sort()},n.extend=function(t){if(!n.isObject(t))return t;for(var r,i,u=1,f=arguments.length;f>u;u++){r=arguments[u];for(i in r)d.call(r,i)&&(t[i]=r[i])}return t},n.pick=function(r,u,f){var e,s={},l,h,o,a;if(null==r)return s;if(n.isFunction(u)){u=i(u,f);for(e in r)l=r[e],u(l,e,r)&&(s[e]=l)}else for(h=c.apply([],t.call(arguments,1)),r=new Object(r),o=0,a=h.length;a>o;o++)e=h[o],e in r&&(s[e]=r[e]);return s},n.omit=function(i,r,u){if(n.isFunction(r))r=n.negate(r);else{var f=n.map(c.apply([],t.call(arguments,1)),String);r=function(t,i){return!n.contains(f,i)}}return n.pick(i,r,u)},n.defaults=function(t){var r,f,u,i;if(!n.isObject(t))return t;for(r=1,f=arguments.length;f>r;r++){u=arguments[r];for(i in u)t[i]===void 0&&(t[i]=u[i])}return t},n.clone=function(t){return n.isObject(t)?n.isArray(t)?t.slice():n.extend({},t):t},n.tap=function(n,t){return t(n),n},h=function(t,i,u,f){var a,v,s,o,e,c,l,y;if(t===i)return 0!==t||1/t==1/i;if(null==t||null==i)return t===i;if(t instanceof n&&(t=t._wrapped),i instanceof n&&(i=i._wrapped),a=r.call(t),a!==r.call(i))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+t==""+i;case"[object Number]":return+t!=+t?+i!=+i:0==+t?1/+t==1/i:+t==+i;case"[object Date]":case"[object Boolean]":return+t==+i}if("object"!=typeof t||"object"!=typeof i)return!1;for(v=u.length;v--;)if(u[v]===t)return f[v]===i;if(s=t.constructor,o=i.constructor,s!==o&&"constructor"in t&&"constructor"in i&&!(n.isFunction(s)&&s instanceof s&&n.isFunction(o)&&o instanceof o))return!1;if(u.push(t),f.push(i),"[object Array]"===a){if(e=t.length,c=e===i.length)for(;e--&&(c=h(t[e],i[e],u,f)););}else if(y=n.keys(t),e=y.length,c=n.keys(i).length===e)for(;e--&&(l=y[e],c=n.has(i,l)&&h(t[l],i[l],u,f)););return u.pop(),f.pop(),c},n.isEqual=function(n,t){return h(n,t,[],[])},n.isEmpty=function(t){if(null==t)return!0;if(n.isArray(t)||n.isString(t)||n.isArguments(t))return 0===t.length;for(var i in t)if(n.has(t,i))return!1;return!0},n.isElement=function(n){return!(!n||1!==n.nodeType)},n.isArray=tt||function(n){return"[object Array]"===r.call(n)},n.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},n.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){n["is"+t]=function(n){return r.call(n)==="[object "+t+"]"}}),n.isArguments(arguments)||(n.isArguments=function(t){return n.has(t,"callee")}),"function"!=typeof/./&&(n.isFunction=function(n){return"function"==typeof n||!1}),n.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},n.isNaN=function(t){return n.isNumber(t)&&t!==+t},n.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===r.call(n)},n.isNull=function(n){return null===n},n.isUndefined=function(n){return n===void 0},n.has=function(n,t){return null!=n&&d.call(n,t)},n.noConflict=function(){return y._=et,this},n.identity=function(n){return n},n.constant=function(n){return function(){return n}},n.noop=function(){},n.property=function(n){return function(t){return t[n]}},n.matches=function(t){var r=n.pairs(t),i=r.length;return function(n){var t,f,u;if(null==n)return!i;for(n=new Object(n),t=0;i>t;t++)if(f=r[t],u=f[0],f[1]!==n[u]||!(u in n))return!1;return!0}},n.times=function(n,t,r){var f=Array(Math.max(0,n)),u;for(t=i(t,r,1),u=0;n>u;u++)f[u]=t(u);return f},n.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},n.now=Date.now||function(){return+new Date};var w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},ot=n.invert(w),b=function(t){var f=function(n){return t[n]},i="(?:"+n.keys(t).join("|")+")",u=RegExp(i),r=RegExp(i,"g");return function(n){return n=null==n?"":""+n,u.test(n)?n.replace(r,f):n}};n.escape=b(w),n.unescape=b(ot),n.result=function(t,i){if(null==t)return void 0;var r=t[i];return n.isFunction(r)?t[i]():r},p=0,n.uniqueId=function(n){var t=++p+"";return n?n+t:t},n.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var a=/(.)^/,ut={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},rt=/\\|'|\r|\n|\u2028|\u2029/g,it=function(n){return"\\"+ut[n]};n.template=function(t,i,r){var o,f,e;!i&&r&&(i=r),i=n.defaults({},i,n.templateSettings);var h=RegExp([(i.escape||a).source,(i.interpolate||a).source,(i.evaluate||a).source].join("|")+"|$","g"),s=0,u="__p+='";t.replace(h,function(n,i,r,f,e){return u+=t.slice(s,e).replace(rt,it),s=e+n.length,i?u+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":r?u+="'+\n((__t=("+r+"))==null?'':__t)+\n'":f&&(u+="';\n"+f+"\n__p+='"),n}),u+="';\n",i.variable||(u="with(obj||{}){\n"+u+"}\n"),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{o=new Function(i.variable||"obj","_",u)}catch(c){throw c.source=u,c;}return f=function(t){return o.call(this,t,n)},e=i.variable||"obj",f.source="function("+e+"){\n"+u+"}",f},n.chain=function(t){var i=n(t);return i._chain=!0,i},o=function(t){return this._chain?n(t).chain():t},n.mixin=function(t){n.each(n.functions(t),function(i){var r=n[i]=t[i];n.prototype[i]=function(){var t=[this._wrapped];return nt.apply(t,arguments),o.call(this,r.apply(n,t))}})},n.mixin(n),n.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var i=u[t];n.prototype[t]=function(){var n=this._wrapped;return i.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],o.call(this,n)}}),n.each(["concat","join","slice"],function(t){var i=u[t];n.prototype[t]=function(){return o.call(this,i.apply(this._wrapped,arguments))}}),n.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return n})}.call(this),this.JSON||(this.JSON={}),function(){function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var c,l,h,a,v=n,s,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i)),typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,s=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,c=0;c<a;c+=1)s[c]=r(c,o)||"null";return h=s.length===0?"[]":n?"[\n"+n+s.join(",\n"+n)+"\n"+v+"]":"["+s.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,c=0;c<a;c+=1)l=t[c],typeof l=="string"&&(h=r(l,o),h&&s.push(f(l)+(n?": ":":")+h));else for(l in o)Object.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&s.push(f(l)+(n?": ":":")+h));return h=s.length===0?"{}":n?"{\n"+n+s.join(",\n"+n)+"\n"+v+"}":"{"+s.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(n,t){var r,u,i=n[t];if(i&&typeof i=="object")for(r in i)Object.hasOwnProperty.call(i,r)&&(u=walk(i,r),u!==undefined?i[r]=u:delete i[r]);return reviver.call(n,t,i)}var j;if(text=String(text),e.lastIndex=0,e.test(text)&&(text=text.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse");})}(),function(n){function i(t){var i=this.form,r;i.clk=this,this.type=="image"&&(t.offsetX!=undefined?(i.clk_x=t.offsetX,i.clk_y=t.offsetY):typeof n.fn.offset=="function"?(r=n(this).offset(),i.clk_x=t.pageX-r.left,i.clk_y=t.pageY-r.top):(i.clk_x=t.pageX-this.offsetLeft,i.clk_y=t.pageY-this.offsetTop)),setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},10)}function t(){var i=this.formPluginId,t=n.fn.ajaxForm.optionHash[i];return n(this).ajaxSubmit(t),!1}n.fn.ajaxSubmit=function(t){function l(){function o(){var ok,data,doc,ta;if(!l++){f.detachEvent?f.detachEvent("onload",o):f.removeEventListener("load",o,!1),ok=!0;try{if(h)throw"timeout";doc=f.contentWindow?f.contentWindow.document:f.contentDocument?f.contentDocument:f.document,u.responseText=doc.body?doc.body.innerHTML:null,u.responseXML=doc.XMLDocument?doc.XMLDocument:doc,r.dataType=="json"||r.dataType=="script"?(ta=doc.getElementsByTagName("textarea")[0],data=ta?ta.value:u.responseText,r.dataType=="json"?eval("data = "+data):n.globalEval(data)):r.dataType=="xml"?(data=u.responseXML,data||u.responseText==null||(data=v(u.responseText))):data=u.responseText}catch(e){ok=!1,n.handleError(r,u,"error",e)}ok&&(r.success(data,"success"),e&&n.event.trigger("ajaxSuccess",[u,r])),e&&n.event.trigger("ajaxComplete",[u,r]),e&&!--n.active&&n.event.trigger("ajaxStop"),r.complete&&r.complete(u,ok?"success":"error"),setTimeout(function(){s.remove(),u.responseXML=null},100)}}function v(n,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(n)):t=(new DOMParser).parseFromString(n,"text/xml"),t&&t.documentElement&&t.documentElement.tagName!="parsererror"?t:null}var a=i[0],r=n.extend({},n.ajaxSettings,t),c="jqFormIO"+n.fn.ajaxSubmit.counter++,s=n('<iframe id="'+c+'" name="'+c+'" />'),f=s[0],y=n.browser.opera&&window.opera.version()<9,u,e,l,h;(n.browser.msie||y)&&(f.src='javascript:false;document.write("");'),s.css({position:"absolute",top:"-1000px",left:"-1000px"}),u={responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){}},e=r.global,e&&!n.active++&&n.event.trigger("ajaxStart"),e&&n.event.trigger("ajaxSend",[u,r]),l=0,h=0,setTimeout(function(){s.appendTo("body"),f.attachEvent?f.attachEvent("onload",o):f.addEventListener("load",o,!1);var t=a.encoding?"encoding":"enctype",n=i.attr("target");i.attr({target:c,method:"POST",encAttr:"multipart/form-data",action:r.url}),r.timeout&&setTimeout(function(){h=!0,o()},r.timeout),a.submit(),i.attr("target",n)},10)}var f,s,h,i,r,c,o,e,u;if((typeof t=="function"&&(t={success:t}),t=n.extend({url:this.attr("action")||window.location,type:this.attr("method")||"GET"},t||{}),f=this.formToArray(t.semantic),t.beforeSubmit&&t.beforeSubmit(f,this,t)===!1)||(s={},n.event.trigger("form.submit.validate",[f,this,t,s]),s.veto))return this;for(h=n.param(f),t.type.toUpperCase()=="GET"?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+h,t.data=null):t.data=h,i=this,r=[],t.resetForm&&r.push(function(){i.resetForm()}),t.clearForm&&r.push(function(){i.clearForm()}),!t.dataType&&t.target?(c=t.success,r.push(function(i){n(t.target).attr("innerHTML",i).evalScripts().each(c,arguments)})):t.success&&r.push(t.success),t.success=function(n,t){for(var u=0,f=r.length;u<f;u++)r[u](n,t,i)},o=n("input:file",this).fieldValue(),e=!1,u=0;u<o.length;u++)o[u]&&(e=!0);return t.iframe||e?l():n.ajax(t),n.event.trigger("form.submit.notify",[this,t]),this},n.fn.ajaxSubmit.counter=0,n.fn.ajaxForm=function(r){return this.ajaxFormUnbind().submit(t).each(function(){this.formPluginId=n.fn.ajaxForm.counter++,n.fn.ajaxForm.optionHash[this.formPluginId]=r,n(":submit,input:image",this).click(i)})},n.fn.ajaxForm.counter=1,n.fn.ajaxForm.optionHash={},n.fn.ajaxFormUnbind=function(){return this.unbind("submit",t),this.each(function(){n(":submit,input:image",this).unbind("click",i)})},n.fn.formToArray=function(t){var e=[],i,l,o,f,c,v,a,u,h,s,r;if(this.length==0||(i=this[0],l=t?i.getElementsByTagName("*"):i.elements,!l))return e;for(u=0,h=l.length;u<h;u++)if(o=l[u],r=o.name,r){if(t&&i.clk&&o.type=="image"){o.disabled||i.clk!=o||e.push({name:r+".x",value:i.clk_x},{name:r+".y",value:i.clk_y});continue}if(f=n.fieldValue(o,!0),f&&f.constructor==Array)for(c=0,v=f.length;c<v;c++)e.push({name:r,value:f[c]});else f!==null&&typeof f!="undefined"&&e.push({name:r,value:f})}if(!t&&i.clk)for(a=i.getElementsByTagName("input"),u=0,h=a.length;u<h;u++)s=a[u],r=s.name,r&&!s.disabled&&s.type=="image"&&i.clk==s&&e.push({name:r+".x",value:i.clk_x},{name:r+".y",value:i.clk_y});return e},n.fn.formSerialize=function(t){return n.param(this.formToArray(t))},n.fn.fieldSerialize=function(t){var i=[];return this.each(function(){var e=this.name,r,u,f;if(e)if(r=n.fieldValue(this,t),r&&r.constructor==Array)for(u=0,f=r.length;u<f;u++)i.push({name:e,value:r[u]});else r!==null&&typeof r!="undefined"&&i.push({name:this.name,value:r})}),n.param(i)},n.fn.fieldValue=function(t){for(var f,i,u=[],r=0,e=this.length;r<e;r++)(f=this[r],i=n.fieldValue(f,t),i!==null&&typeof i!="undefined"&&(i.constructor!=Array||i.length))&&(i.constructor==Array?n.merge(u,i):u.push(i));return u},n.fieldValue=function(t,i){var v=t.name,r=t.type,h=t.tagName.toLowerCase(),f,e,u,s;if(typeof i=="undefined"&&(i=!0),i&&(!v||t.disabled||r=="reset"||r=="button"||(r=="checkbox"||r=="radio")&&!t.checked||(r=="submit"||r=="image")&&t.form&&t.form.clk!=t||h=="select"&&t.selectedIndex==-1))return null;if(h=="select"){if(f=t.selectedIndex,f<0)return null;var c=[],l=t.options,o=r=="select-one",a=o?f+1:l.length;for(e=o?f:0;e<a;e++)if(u=l[e],u.selected){if(s=n.browser.msie&&!u.attributes.value.specified?u.text:u.value,o)return s;c.push(s)}return c}return t.value},n.fn.clearForm=function(){return this.each(function(){n("input,select,textarea",this).clearFields()})},n.fn.clearFields=n.fn.clearInputs=function(){return this.each(function(){var n=this.type,t=this.tagName.toLowerCase();n=="text"||n=="password"||t=="textarea"?this.value="":n=="checkbox"||n=="radio"?this.checked=!1:t=="select"&&(this.selectedIndex=-1)})},n.fn.resetForm=function(){return this.each(function(){typeof this.reset!="function"&&(typeof this.reset!="object"||this.reset.nodeType)||this.reset()})}}(jQuery),ZeroClipboard={version:"1.0.7",clients:{},moviePath:"/Scripts/KC/ZeroClipboard.swf",nextId:1,$:function(n){return typeof n=="string"&&(n=document.getElementById(n)),n.addClass||(n.hide=function(){this.style.display="none"},n.show=function(){this.style.display=""},n.addClass=function(n){this.removeClass(n),this.className+=" "+n},n.removeClass=function(n){for(var i=this.className.split(/\s+/),r=-1,t=0;t<i.length;t++)i[t]==n&&(r=t,t=i.length);return r>-1&&(i.splice(r,1),this.className=i.join(" ")),this},n.hasClass=function(n){return!!this.className.match(new RegExp("\\s*"+n+"\\s*"))}),n},setMoviePath:function(n){this.moviePath=n},dispatch:function(n,t,i){var r=this.clients[n];r&&r.receiveEvent(t,i)},register:function(n,t){this.clients[n]=t},getDOMObjectPosition:function(n,t){for(var i={left:0,top:0,width:n.width?n.width:n.offsetWidth,height:n.height?n.height:n.offsetHeight};n&&n!=t;)i.left+=n.offsetLeft,i.top+=n.offsetTop,n=n.offsetParent;return i},Client:function(n,t){this.handlers={},this.id=t?t:ZeroClipboard.nextId++,this.movieId="ZeroClipboardMovie_"+this.id,ZeroClipboard.register(this.id,this),n&&this.glue(n)},GetClient:function(){}},ZeroClipboard.Client.prototype={id:0,ready:!1,movie:null,clipText:"",handCursorEnabled:!0,cssEffects:!0,handlers:null,glue:function(n,t,i){var f,u,r;if(this.domElement=ZeroClipboard.$(n),f=1001,this.domElement.style.zIndex&&(f=parseInt(this.domElement.style.zIndex,10)+1),typeof t=="string"?t=ZeroClipboard.$(t):typeof t=="undefined"&&(t=document.getElementsByTagName("body")[0]),u=ZeroClipboard.getDOMObjectPosition(this.domElement,t),this.div=document.createElement("div"),r=this.div.style,r.position="absolute",r.left=""+u.left+"px",r.top=""+u.top+"px",r.width=""+u.width+"px",r.height=""+u.height+"px",r.zIndex=f,typeof i=="object")for(addedStyle in i)r[addedStyle]=i[addedStyle];t.appendChild(this.div),this.div.innerHTML=this.getHTML(u.width,u.height)},getHTML:function(n,t){var i="",u="id="+this.id+"&width="+n+"&height="+t,r;return navigator.userAgent.match(/MSIE/)?(r=location.href.match(/^https/i)?"https://":"http://",i+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+r+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+n+'" height="'+t+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+u+'"/><param name="wmode" value="transparent"/></object>'):i+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+n+'" height="'+t+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+u+'" wmode="transparent" />',i},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroyById:function(){var n=document.getElementById(this.movieId);n.parentElement.remove()},destroy:function(){if(this.domElement&&this.div){this.hide(),this.div.innerHTML="";var n=document.getElementsByTagName("body")[0];try{n.removeChild(this.div)}catch(t){}this.domElement=null,this.div=null}},reposition:function(n){if(n&&(this.domElement=ZeroClipboard.$(n),this.domElement||this.hide()),this.domElement&&this.div){var i=ZeroClipboard.getDOMObjectPosition(this.domElement),t=this.div.style;t.left=""+i.left+"px",t.top=""+i.top+"px"}},setText:function(n){this.clipText=n,this.ready&&this.movie.setText(n)},addEventListener:function(n,t){n=n.toString().toLowerCase().replace(/^on/,""),this.handlers[n]||(this.handlers[n]=[]),this.handlers[n].push(t)},setHandCursor:function(n){this.handCursorEnabled=n,this.ready&&this.movie.setHandCursor(n)},setCSSEffects:function(n){this.cssEffects=!!n},receiveEvent:function(n,t){var r,u,f,i;n=n.toString().toLowerCase().replace(/^on/,"");switch(n){case"load":if(this.movie=document.getElementById(this.movieId),!this.movie){r=this,setTimeout(function(){r.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){r=this,setTimeout(function(){r.receiveEvent("load",null)},100),this.ready=!0;return}this.ready=!0,this.movie.setText(this.clipText),this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0),this.domElement.removeClass("hover"));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[n])for(u=0,f=this.handlers[n].length;u<f;u++)i=this.handlers[n][u],typeof i=="function"?i(this,t):typeof i=="object"&&i.length==2?i[0][i[1]](this,t):typeof i=="string"&&window[i](this,t)}},function(n,t){"use strict";function l(t,r){var u,f;if(n.isArray(t)){for(u=t.length-1;u>=0;u--)f=t[u],n.type(t)==="object"||n.type(f)==="string"&&i.transports[f]||(r.log("Invalid transport: "+f+", removing it from the transports list."),t.splice(u,1));t.length===0&&(r.log("No transports remain within the specified transport array."),t=null)}else if(n.type(t)==="object"||i.transports[t]||t==="auto"){if(t==="auto"&&i._.ieVersion<=8)return["longPolling"]}else r.log("Invalid transport: "+t.toString()),t=null;return t}function a(n){return n==="http:"?80:n==="https:"?443:void 0}function o(n,t){return t.match(/:\d+$/)?t:t+":"+a(n)}if(typeof n!="function")throw new Error("SignalR: jQuery not found. Please ensure jQuery is referenced before the SignalR.js file.");if(!t.JSON)throw new Error("SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.");var i,s,e=t.document.readyState==="complete",f=n(t),r={onStart:"onStart",onStarting:"onStarting",onReceived:"onReceived",onError:"onError",onConnectionSlow:"onConnectionSlow",onReconnecting:"onReconnecting",onReconnect:"onReconnect",onStateChanged:"onStateChanged",onDisconnect:"onDisconnect"},v=function(n,i){if(i!==!1){var r;typeof t.console!="undefined"&&(r="["+(new Date).toTimeString()+"] SignalR: "+n,t.console.debug?t.console.debug(r):t.console.log&&t.console.log(r))}},u=function(t,i,u){return i===t.state?(t.state=u,n(t).triggerHandler(r.onStateChanged,[{oldState:i,newState:u}]),!0):!1},h=function(n){return n.state===i.connectionState.disconnected},c=function(n){var u,r;n._.configuredStopReconnectingTimeout||(r=function(n){n.log("Couldn't reconnect within the configured timeout ("+n.disconnectTimeout+"ms), disconnecting."),n.stop(!1,!1)},n.reconnecting(function(){var n=this;n.state===i.connectionState.reconnecting&&(u=t.setTimeout(function(){r(n)},n.disconnectTimeout))}),n.stateChanged(function(n){n.oldState===i.connectionState.reconnecting&&t.clearTimeout(u)}),n._.configuredStopReconnectingTimeout=!0)};i=function(n,t,r){return new i.fn.init(n,t,r)},i._={defaultContentType:"application/x-www-form-urlencoded; charset=UTF-8",ieVersion:function(){var i,n;return t.navigator.appName==="Microsoft Internet Explorer"&&(n=/MSIE ([0-9]+\.[0-9]+)/.exec(t.navigator.userAgent),n&&(i=t.parseFloat(n[1]))),i}()},i.events=r,i.changeState=u,i.isDisconnecting=h,i.connectionState={connecting:0,connected:1,reconnecting:2,disconnected:4},i.hub={start:function(){throw new Error("SignalR: Error loading hubs. Ensure your hubs reference is correct, e.g. <script src='/signalr/hubs'><\/script>.");}},f.load(function(){e=!0}),i.fn=i.prototype={init:function(n,t,i){this.url=n,this.qs=t,this._={},typeof i=="boolean"&&(this.logging=i)},isCrossDomain:function(i,r){var u;return(i=n.trim(i),i.indexOf("http")!==0)?!1:(r=r||t.location,u=t.document.createElement("a"),u.href=i,u.protocol+o(u.protocol,u.host)!==r.protocol+o(r.protocol,r.host))},ajaxDataType:"json",contentType:"application/json; charset=UTF-8",logging:!1,state:i.connectionState.disconnected,keepAliveData:{},reconnectDelay:2e3,disconnectTimeout:3e4,keepAliveWarnAt:2/3,start:function(o,s){var h=this,a={waitForPageLoad:!0,transport:"auto",jsonp:!1},w,v=h._deferral||n.Deferred(),y=t.document.createElement("a"),p;if(n.type(o)==="function"?s=o:n.type(o)==="object"&&(n.extend(a,o),n.type(a.callback)==="function"&&(s=a.callback)),a.transport=l(a.transport,h),!a.transport)throw new Error("SignalR: Invalid transport(s) specified, aborting start.");return!e&&a.waitForPageLoad===!0?(f.load(function(){h._deferral=v,h.start(o,s)}),v.promise()):(c(h),u(h,i.connectionState.disconnected,i.connectionState.connecting)===!1)?(v.resolve(h),v.promise()):(y.href=h.url,y.protocol&&y.protocol!==":"?(h.protocol=y.protocol,h.host=y.host,h.baseUrl=y.protocol+"//"+y.host):(h.protocol=t.document.location.protocol,h.host=t.document.location.host,h.baseUrl=h.protocol+"//"+h.host),h.wsProtocol=h.protocol==="https:"?"wss://":"ws://",a.transport==="auto"&&a.jsonp===!0&&(a.transport="longPolling"),this.isCrossDomain(h.url)&&(h.log("Auto detected cross domain url."),a.transport==="auto"&&(a.transport=["webSockets","longPolling"]),a.jsonp||(a.jsonp=!n.support.cors,a.jsonp&&h.log("Using jsonp because this browser doesn't support CORS")),h.contentType=i._.defaultContentType),h.ajaxDataType=a.jsonp?"jsonp":"json",n(h).bind(r.onStart,function(){n.type(s)==="function"&&s.call(h),v.resolve(h)}),w=function(t,e){if(e=e||0,e>=t.length){h.transport||(n(h).triggerHandler(r.onError,["SignalR: No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization."]),v.reject("SignalR: No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization."),h.stop());return}var o=t[e],s=n.type(o)==="object"?o:i.transports[o];if(o.indexOf("_")===0){w(t,e+1);return}s.start(h,function(){s.supportsKeepAlive&&h.keepAliveData.activated&&i.transports._logic.monitorKeepAlive(h),h.transport=s,u(h,i.connectionState.connecting,i.connectionState.connected),n(h).triggerHandler(r.onStart),f.unload(function(){h.stop(!1)})},function(){w(t,e+1)})},p=h.url+"/negotiate",p=i.transports._logic.addQs(p,h),h.log("Negotiating with '"+p+"'."),n.ajax({url:p,global:!1,cache:!1,type:"GET",contentType:h.contentType,data:{},dataType:h.ajaxDataType,error:function(t){n(h).triggerHandler(r.onError,[t.responseText]),v.reject("SignalR: Error during negotiation request: "+t.responseText),h.stop()},success:function(t){var u=h.keepAliveData,e,f;if(h.appRelativeUrl=t.Url,h.id=t.ConnectionId,h.token=t.ConnectionToken,h.webSocketServerUrl=t.WebSocketServerUrl,h.disconnectTimeout=t.DisconnectTimeout*1e3,t.KeepAliveTimeout?(u.activated=!0,u.timeout=t.KeepAliveTimeout*1e3,u.timeoutWarning=u.timeout*h.keepAliveWarnAt,u.checkInterval=(u.timeout-u.timeoutWarning)/3):u.activated=!1,!t.ProtocolVersion||t.ProtocolVersion!=="1.2"){n(h).triggerHandler(r.onError,["You are using a version of the client that isn't compatible with the server. Client version 1.2, server version "+t.ProtocolVersion+"."]),v.reject("You are using a version of the client that isn't compatible with the server. Client version 1.2, server version "+t.ProtocolVersion+".");return}n(h).triggerHandler(r.onStarting),e=[],f=[],n.each(i.transports,function(n){if(n==="webSockets"&&!t.TryWebSockets)return!0;f.push(n)}),n.isArray(a.transport)?n.each(a.transport,function(){var t=this;(n.type(t)==="object"||n.type(t)==="string"&&n.inArray(""+t,f)>=0)&&e.push(n.type(t)==="string"?""+t:t)}):n.type(a.transport)==="object"||n.inArray(a.transport,f)>=0?e.push(a.transport):e=f,w(e)}}),v.promise())},starting:function(t){var i=this;return n(i).bind(r.onStarting,function(){t.call(i)}),i},send:function(n){var t=this;if(t.state===i.connectionState.disconnected)throw new Error("SignalR: Connection must be started before data can be sent. Call .start() before .send()");if(t.state===i.connectionState.connecting)throw new Error("SignalR: Connection has not been fully initialized. Use .start().done() or .start().fail() to run logic after the connection has started.");return t.transport.send(t,n),t},received:function(t){var i=this;return n(i).bind(r.onReceived,function(n,r){t.call(i,r)}),i},stateChanged:function(t){var i=this;return n(i).bind(r.onStateChanged,function(n,r){t.call(i,r)}),i},error:function(t){var i=this;return n(i).bind(r.onError,function(n,r){t.call(i,r)}),i},disconnected:function(t){var i=this;return n(i).bind(r.onDisconnect,function(){t.call(i)}),i},connectionSlow:function(t){var i=this;return n(i).bind(r.onConnectionSlow,function(){t.call(i)}),i},reconnecting:function(t){var i=this;return n(i).bind(r.onReconnecting,function(){t.call(i)}),i},reconnected:function(t){var i=this;return n(i).bind(r.onReconnect,function(){t.call(i)}),i},stop:function(t,f){var e=this;if(e.state!==i.connectionState.disconnected){try{e.transport&&(f!==!1&&e.transport.abort(e,t),e.transport.supportsKeepAlive&&e.keepAliveData.activated&&i.transports._logic.stopMonitoringKeepAlive(e),e.transport.stop(e),e.transport=null),n(e).triggerHandler(r.onDisconnect),delete e.messageId,delete e.groupsToken,delete e.id,delete e._deferral}finally{u(e,e.state,i.connectionState.disconnected)}return e}},log:function(n){v(n,this.logging)}},i.fn.init.prototype=i.fn,i.noConflict=function(){return n.connection===i&&(n.connection=s),i},n.connection&&(s=n.connection),n.connection=n.signalR=i}(window.jQuery,window),function(n,t){"use strict";function u(f){var e=f.keepAliveData,o,s;f.state===i.connectionState.connected&&(o=new Date,o.setTime(o-e.lastKeepAlive),s=o.getTime(),s>=e.timeout?(f.log("Keep alive timed out.  Notifying transport that connection has been lost."),f.transport.lostConnection(f)):s>=e.timeoutWarning?e.userNotified||(f.log("Keep alive has been missed, connection may be dead/slow."),n(f).triggerHandler(r.onConnectionSlow),e.userNotified=!0):e.userNotified=!1),e.monitoring&&t.setTimeout(function(){u(f)},e.checkInterval)}function e(n){return n.state===i.connectionState.connected||n.state===i.connectionState.reconnecting}var i=n.signalR,r=n.signalR.events,f=n.signalR.changeState;i.transports={},i.transports._logic={pingServer:function(t,i){var f=i==="webSockets"?"":t.baseUrl,u=f+t.appRelativeUrl+"/ping",r=n.Deferred();return u=this.addQs(u,t),n.ajax({url:u,global:!1,cache:!1,type:"GET",contentType:t.contentType,data:{},dataType:t.ajaxDataType,success:function(n){n.Response==="pong"?r.resolve():r.reject("SignalR: Invalid ping response when pinging server: "+(n.responseText||n.statusText))},error:function(n){r.reject("SignalR: Error pinging server: "+(n.responseText||n.statusText))}}),r.promise()},addQs:function(t,i){var u=t.indexOf("?")!==-1?"&":"?",r;if(!i.qs)return t;if(typeof i.qs=="object")return t+u+n.param(i.qs);if(typeof i.qs=="string")return r=i.qs.charAt(0),(r==="?"||r==="&")&&(u=""),t+u+i.qs;throw new Error("Connections query string property must be either a string or object.");},getUrl:function(n,i,r,u){var o=i==="webSockets"?"":n.baseUrl,f=o+n.appRelativeUrl,e="transport="+i+"&connectionToken="+t.encodeURIComponent(n.token);return n.data&&(e+="&connectionData="+t.encodeURIComponent(n.data)),n.groupsToken&&(e+="&groupsToken="+t.encodeURIComponent(n.groupsToken)),r?(f+=u?"/poll":"/reconnect",n.messageId&&(e+="&messageId="+t.encodeURIComponent(n.messageId))):f+="/connect",f+="?"+e,f=this.addQs(f,n),f+="&tid="+Math.floor(Math.random()*11)},maximizePersistentResponse:function(n){return{MessageId:n.C,Messages:n.M,Disconnect:typeof n.D!="undefined"?!0:!1,TimedOut:typeof n.T!="undefined"?!0:!1,LongPollDelay:n.L,GroupsToken:n.G}},updateGroups:function(n,t){t&&(n.groupsToken=t)},ajaxSend:function(u,f){var e=u.url+"/send?transport="+u.transport.name+"&connectionToken="+t.encodeURIComponent(u.token);return e=this.addQs(e,u),n.ajax({url:e,global:!1,type:u.ajaxDataType==="jsonp"?"GET":"POST",contentType:i._.defaultContentType,dataType:u.ajaxDataType,data:{data:f},success:function(t){t&&n(u).triggerHandler(r.onReceived,[t])},error:function(t,i){i!=="abort"&&i!=="parsererror"&&n(u).triggerHandler(r.onError,[t])}})},ajaxAbort:function(i,r){if(typeof i.transport!="undefined"){r=typeof r=="undefined"?!0:r;var u=i.url+"/abort?transport="+i.transport.name+"&connectionToken="+t.encodeURIComponent(i.token);u=this.addQs(u,i),n.ajax({url:u,async:r,timeout:1e3,global:!1,type:"POST",contentType:i.contentType,dataType:i.ajaxDataType,data:{}}),i.log("Fired ajax abort async = "+r)}},processMessages:function(t,i){var u,f;if(t.transport){if(f=n(t),t.transport.supportsKeepAlive&&t.keepAliveData.activated&&this.updateKeepAlive(t),!i)return;if(u=this.maximizePersistentResponse(i),u.Disconnect){t.log("Disconnect command received from server"),t.stop(!1,!1);return}this.updateGroups(t,u.GroupsToken),u.Messages&&n.each(u.Messages,function(n,t){f.triggerHandler(r.onReceived,[t])}),u.MessageId&&(t.messageId=u.MessageId)}},monitorKeepAlive:function(t){var i=t.keepAliveData,f=this;i.monitoring?t.log("Tried to monitor keep alive but it's already being monitored"):(i.monitoring=!0,f.updateKeepAlive(t),t.keepAliveData.reconnectKeepAliveUpdate=function(){f.updateKeepAlive(t)},n(t).bind(r.onReconnect,t.keepAliveData.reconnectKeepAliveUpdate),t.log("Now monitoring keep alive with a warning timeout of "+i.timeoutWarning+" and a connection lost timeout of "+i.timeout),u(t))},stopMonitoringKeepAlive:function(t){var i=t.keepAliveData;i.monitoring&&(i.monitoring=!1,n(t).unbind(r.onReconnect,t.keepAliveData.reconnectKeepAliveUpdate),t.keepAliveData={},t.log("Stopping the monitoring of the keep alive"))},updateKeepAlive:function(n){n.keepAliveData.lastKeepAlive=new Date},ensureReconnectingState:function(t){return f(t,i.connectionState.connected,i.connectionState.reconnecting)===!0&&n(t).triggerHandler(r.onReconnecting),t.state===i.connectionState.reconnecting},clearReconnectTimeout:function(n){n&&n._.reconnectTimeout&&(t.clearTimeout(n._.reconnectTimeout),delete n._.reconnectTimeout)},reconnect:function(n,r){var u=i.transports[r],f=this;e(n)&&!n._.reconnectTimeout&&(n._.reconnectTimeout=t.setTimeout(function(){u.stop(n),f.ensureReconnectingState(n)&&(n.log(r+" reconnecting"),u.start(n))},n.reconnectDelay))},foreverFrame:{count:0,connections:{}}}}(window.jQuery,window),function(n,t){"use strict";var r=n.signalR,u=n.signalR.events,f=n.signalR.changeState,i=r.transports._logic;r.transports.webSockets={name:"webSockets",supportsKeepAlive:!0,send:function(n,t){n.socket.send(t)},start:function(e,o,s){var h,a=!1,l=this,c=!o,v=n(e);if(!t.WebSocket){s();return}e.socket||(h=e.webSocketServerUrl?e.webSocketServerUrl:e.wsProtocol+e.host,h+=i.getUrl(e,this.name,c),e.log("Connecting to websocket endpoint '"+h+"'"),e.socket=new t.WebSocket(h),e.socket.onopen=function(){a=!0,e.log("Websocket opened"),i.clearReconnectTimeout(e),o?o():f(e,r.connectionState.reconnecting,r.connectionState.connected)===!0&&v.triggerHandler(u.onReconnect)},e.socket.onclose=function(t){if(this===e.socket){if(a)typeof t.wasClean!="undefined"&&t.wasClean===!1?(n(e).triggerHandler(u.onError,[t.reason]),e.log("Unclean disconnect from websocket."+t.reason)):e.log("Websocket closed");else{s?s():c&&l.reconnect(e);return}l.reconnect(e)}},e.socket.onmessage=function(r){var f=t.JSON.parse(r.data),o=n(e);f&&(n.isEmptyObject(f)||f.M?i.processMessages(e,f):o.triggerHandler(u.onReceived,[f]))})},reconnect:function(n){i.reconnect(n,this.name)},lostConnection:function(n){this.reconnect(n)},stop:function(n){i.clearReconnectTimeout(n),n.socket!==null&&(n.log("Closing the Websocket"),n.socket.close(),n.socket=null)},abort:function(){}}}(window.jQuery,window),function(n,t){"use strict";var r=n.signalR,u=n.signalR.events,f=n.signalR.changeState,i=r.transports._logic;r.transports.serverSentEvents={name:"serverSentEvents",supportsKeepAlive:!0,timeOut:3e3,start:function(e,o,s){var h=this,l=!1,y=n(e),c=!o,v,a;if(e.eventSource&&(e.log("The connection already has an event source. Stopping it."),e.stop()),!t.EventSource){s&&(e.log("This browser doesn't support SSE."),s());return}v=i.getUrl(e,this.name,c);try{e.log("Attempting to connect to SSE endpoint '"+v+"'"),e.eventSource=new t.EventSource(v)}catch(p){e.log("EventSource failed trying to connect with error "+p.Message),s?s():(y.triggerHandler(u.onError,[p]),c&&h.reconnect(e));return}a=t.setTimeout(function(){l===!1&&(e.log("EventSource timed out trying to connect"),e.log("EventSource readyState: "+e.eventSource.readyState),c||h.stop(e),c?e.eventSource.readyState!==t.EventSource.CONNECTING&&e.eventSource.readyState!==t.EventSource.OPEN&&h.reconnect(e):s&&s())},h.timeOut),e.eventSource.addEventListener("open",function(){e.log("EventSource connected"),a&&t.clearTimeout(a),i.clearReconnectTimeout(e),l===!1&&(l=!0,o?o():f(e,r.connectionState.reconnecting,r.connectionState.connected)===!0&&y.triggerHandler(u.onReconnect))},!1),e.eventSource.addEventListener("message",function(n){n.data!=="initialized"&&i.processMessages(e,t.JSON.parse(n.data))},!1),e.eventSource.addEventListener("error",function(n){if(this===e.eventSource){if(!l){s&&s();return}e.log("EventSource readyState: "+e.eventSource.readyState),n.eventPhase===t.EventSource.CLOSED?(e.log("EventSource reconnecting due to the server connection ending"),h.reconnect(e)):(e.log("EventSource error"),y.triggerHandler(u.onError))}},!1)},reconnect:function(n){i.reconnect(n,this.name)},lostConnection:function(n){this.reconnect(n)},send:function(n,t){i.ajaxSend(n,t)},stop:function(n){i.clearReconnectTimeout(n),n&&n.eventSource&&(n.log("EventSource calling close()"),n.eventSource.close(),n.eventSource=null,delete n.eventSource)},abort:function(n,t){i.ajaxAbort(n,t)}}}(window.jQuery,window),function(n,t){"use strict";var r=n.signalR,f=n.signalR.events,e=n.signalR.changeState,i=r.transports._logic,u=function(){var u=null,f=1e3,i=0;return{prevent:function(){r._.ieVersion<=8&&(i===0&&(u=t.setInterval(function(){var t=n("<iframe style='position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;' src=''></iframe>");n("body").append(t),t.remove(),t=null},f)),i++)},cancel:function(){i===1&&t.clearInterval(u),i>0&&i--}}}();r.transports.foreverFrame={name:"foreverFrame",supportsKeepAlive:!0,timeOut:3e3,start:function(r,f,e){var s=this,h=i.foreverFrame.count+=1,c,o=n("<iframe data-signalr-connection-id='"+r.id+"' style='position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;' src=''></iframe>");if(t.EventSource){e&&(r.log("This browser supports SSE, skipping Forever Frame."),e());return}u.prevent(),c=i.getUrl(r,this.name),c+="&frameId="+h,n("body").append(o),o.prop("src",c),i.foreverFrame.connections[h]=r,r.log("Binding to iframe's readystatechange event."),o.bind("readystatechange",function(){n.inArray(this.readyState,["loaded","complete"])>=0&&(r.log("Forever frame iframe readyState changed to "+this.readyState+", reconnecting"),s.reconnect(r))}),r.frame=o[0],r.frameId=h,f&&(r.onSuccess=f),t.setTimeout(function(){r.onSuccess&&(r.log("Failed to connect using forever frame source, it timed out after "+s.timeOut+"ms."),s.stop(r),e&&e())},s.timeOut)},reconnect:function(n){var r=this;t.setTimeout(function(){if(n.frame&&i.ensureReconnectingState(n)){var u=n.frame,t=i.getUrl(n,r.name,!0)+"&frameId="+n.frameId;n.log("Updating iframe src to '"+t+"'."),u.src=t}},n.reconnectDelay)},lostConnection:function(n){this.reconnect(n)},send:function(n,t){i.ajaxSend(n,t)},receive:function(t,r){var u;i.processMessages(t,r),t.frameMessageCount=(t.frameMessageCount||0)+1,t.frameMessageCount>50&&(t.frameMessageCount=0,u=t.frame.contentWindow||t.frame.contentDocument,u&&u.document&&n("body",u.document).empty())},stop:function(t){var r=null;if(u.cancel(),t.frame){if(t.frame.stop)t.frame.stop();else try{r=t.frame.contentWindow||t.frame.contentDocument,r.document&&r.document.execCommand&&r.document.execCommand("Stop")}catch(f){t.log("SignalR: Error occured when stopping foreverFrame transport. Message = "+f.message)}n(t.frame).remove(),delete i.foreverFrame.connections[t.frameId],t.frame=null,t.frameId=null,delete t.frame,delete t.frameId,t.log("Stopping forever frame")}},abort:function(n,t){i.ajaxAbort(n,t)},getConnection:function(n){return i.foreverFrame.connections[n]},started:function(t){t.onSuccess?(t.onSuccess(),t.onSuccess=null,delete t.onSuccess):e(t,r.connectionState.reconnecting,r.connectionState.connected)===!0&&n(t).triggerHandler(f.onReconnect)}}}(window.jQuery,window),function(n,t){"use strict";var r=n.signalR,f=n.signalR.events,e=n.signalR.changeState,u=n.signalR.isDisconnecting,i=r.transports._logic;r.transports.longPolling={name:"longPolling",supportsKeepAlive:!1,reconnectDelay:3e3,init:function(n,r){var e=this,f,o=function(i){u(n)===!1&&(n.log("SignalR: Server ping failed because '"+i+"', re-trying ping."),t.setTimeout(f,e.reconnectDelay))};n.log("SignalR: Initializing long polling connection with server."),f=function(){i.pingServer(n,e.name).done(r).fail(o)},f()},start:function(o,s){var l=this,v=!1,y=function(){v||(v=!0,s(),o.log("Longpolling connected"))},c=0,h=null,a=function(i){t.clearTimeout(h),h=null,e(o,r.connectionState.reconnecting,r.connectionState.connected)===!0&&(o.log("Raising the reconnect event"),n(i).triggerHandler(f.onReconnect))},p=36e5;o.pollXhr&&(o.log("Polling xhr requests already exists, aborting."),o.stop()),l.init(o,function(){o.messageId=null,t.setTimeout(function(){(function e(s,v){var g=s.messageId,k=g===null,w=!k,d=!v,b=i.getUrl(s,l.name,w,d);u(s)!==!0&&(o.log("Attempting to connect to '"+b+"' using longPolling."),s.pollXhr=n.ajax({url:b,global:!1,cache:!1,type:"GET",dataType:o.ajaxDataType,contentType:o.contentType,success:function(r){var o=0,f;(c=0,h!==null&&a(),y(),r&&(f=i.maximizePersistentResponse(r)),i.processMessages(s,r),f&&n.type(f.LongPollDelay)==="number"&&(o=f.LongPollDelay),f&&f.Disconnect)||u(s)!==!0&&(o>0?t.setTimeout(function(){e(s,!1)},o):e(s,!1))},error:function(u,a){if(t.clearTimeout(h),h=null,a==="abort"){o.log("Aborted xhr requst.");return}c++,o.state!==r.connectionState.reconnecting&&(o.log("An error occurred using longPolling. Status = "+a+". "+u.responseText),n(s).triggerHandler(f.onError,[u.responseText])),i.ensureReconnectingState(s),l.init(s,function(){e(s,!0)})}}),w&&v===!0&&(h=t.setTimeout(function(){a(s)},Math.min(1e3*(Math.pow(2,c)-1),p))))})(o),t.setTimeout(function(){y()},250)},250)})},lostConnection:function(){throw new Error("Lost Connection not handled for LongPolling");},send:function(n,t){i.ajaxSend(n,t)},stop:function(n){n.pollXhr&&(n.pollXhr.abort(),n.pollXhr=null,delete n.pollXhr)},abort:function(n,t){i.ajaxAbort(n,t)}}}(window.jQuery,window),function(n,t){"use strict";function f(n){return n+s}function h(n,t,i){for(var f=n.length,u=[],r=0;r<f;r+=1)n.hasOwnProperty(r)&&(u[r]=t.call(i,n[r],r,n));return u}function c(t){return n.isFunction(t)?null:n.type(t)==="undefined"?null:t}function o(n){for(var t in n)if(n.hasOwnProperty(t))return!0;return!1}function r(n,t){return new r.fn.init(n,t)}function i(t,r){var u={qs:null,logging:!1,useDefaultPath:!0};return n.extend(u,r),(!t||u.useDefaultPath)&&(t=(t||"")+"/signalr"),new i.fn.init(t,u)}var e=0,u={},s=".hubProxy";r.fn=r.prototype={init:function(n,t){this.state={},this.connection=n,this.hubName=t,this._={callbackMap:{}}},hasSubscriptions:function(){return o(this._.callbackMap)},on:function(t,i){var u=this,r=u._.callbackMap;return t=t.toLowerCase(),r[t]||(r[t]={}),r[t][i]=function(n,t){i.apply(u,t)},n(u).bind(f(t),r[t][i]),u},off:function(t,i){var u=this,e=u._.callbackMap,r;return t=t.toLowerCase(),r=e[t],r&&(r[i]?(n(u).unbind(f(t),r[i]),delete r[i],o(r)||delete e[t]):i||(n(u).unbind(f(t)),delete e[t])),u},invoke:function(i){var r=this,l=n.makeArray(arguments).slice(1),a=h(l,c),o={H:r.hubName,M:i,A:a,I:e},f=n.Deferred(),s=function(t){var i=r._maximizeHubResponse(t);n.extend(r.state,i.State),i.Error?(i.StackTrace&&r.connection.log(i.Error+"\n"+i.StackTrace),f.rejectWith(r,[i.Error])):f.resolveWith(r,[i.Result])};return u[e.toString()]={scope:r,method:s},e+=1,n.isEmptyObject(r.state)||(o.S=r.state),r.connection.send(t.JSON.stringify(o)),f.promise()},_maximizeHubResponse:function(n){return{State:n.S,Result:n.R,Id:n.I,Error:n.E,StackTrace:n.T}}},r.fn.init.prototype=r.fn,i.fn=i.prototype=n.connection(),i.fn.init=function(t,i){var e={qs:null,logging:!1,useDefaultPath:!0},r=this;n.extend(e,i),n.signalR.fn.init.call(r,t,e.qs,e.logging),r.proxies={},r.received(function(t){var i,s,o,e,c,h;t&&(typeof t.I!="undefined"?(o=t.I.toString(),e=u[o],e&&(u[o]=null,delete u[o],e.method.call(e.scope,t))):(i=this._maximizeClientHubInvocation(t),r.log("Triggering client hub event '"+i.Method+"' on hub '"+i.Hub+"'."),c=i.Hub.toLowerCase(),h=i.Method.toLowerCase(),s=this.proxies[c],n.extend(s.state,i.State),n(s).triggerHandler(f(h),[i.Args])))})},i.fn._maximizeClientHubInvocation=function(n){return{Hub:n.H,Method:n.M,Args:n.A,State:n.S}},i.fn._registerSubscribedHubs=function(){this._subscribedToHubs||(this._subscribedToHubs=!0,this.starting(function(){var i=[];n.each(this.proxies,function(n){this.hasSubscriptions()&&i.push({name:n})}),this.data=t.JSON.stringify(i)}))},i.fn.createHubProxy=function(n){n=n.toLowerCase();var t=this.proxies[n];return t||(t=r(this,n),this.proxies[n]=t),this._registerSubscribedHubs(),t},i.fn.init.prototype=i.fn,n.hubConnection=i}(window.jQuery,window),function(n){n.signalR.version="1.1.2"}(window.jQuery),function(n,t,i){function y(t,i){var u,f;if(n.isArray(t)){for(u=t.length-1;u>=0;u--)f=t[u],n.type(f)==="string"&&r.transports[f]||(i.log("Invalid transport: "+f+", removing it from the transports list."),t.splice(u,1));t.length===0&&(i.log("No transports remain within the specified transport array."),t=null)}else if(r.transports[t]||t==="auto"){if(t==="auto"&&r._.ieVersion<=8)return["longPolling"]}else i.log("Invalid transport: "+t.toString()+"."),t=null;return t}function k(n){return n==="http:"?80:n==="https:"?443:void 0}function l(n,t){return t.match(/:\d+$/)?t:t+":"+k(n)}function w(t,i){var u=this,r=[];u.tryBuffer=function(i){return t.state===n.signalR.connectionState.connecting?(r.push(i),!0):!1},u.drain=function(){if(t.state===n.signalR.connectionState.connected)while(r.length>0)i(r.shift())},u.clear=function(){r=[]}}var f={nojQuery:"jQuery was not found. Please ensure jQuery is referenced before the SignalR client JavaScript file.",noTransportOnInit:"No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization.",errorOnNegotiate:"Error during negotiation request.",stoppedWhileLoading:"The connection was stopped during page load.",stoppedWhileNegotiating:"The connection was stopped during the negotiate request.",errorParsingNegotiateResponse:"Error parsing negotiate response.",errorDuringStartRequest:"Error during start request. Stopping the connection.",stoppedDuringStartRequest:"The connection was stopped during the start request.",errorParsingStartResponse:"Error parsing start response: '{0}'. Stopping the connection.",invalidStartResponse:"Invalid start response: '{0}'. Stopping the connection.",protocolIncompatible:"You are using a version of the client that isn't compatible with the server. Client version {0}, server version {1}.",sendFailed:"Send failed.",parseFailed:"Failed at parsing response: {0}",longPollFailed:"Long polling request failed.",eventSourceFailedToConnect:"EventSource failed to connect.",eventSourceError:"Error raised by EventSource",webSocketClosed:"WebSocket closed.",pingServerFailedInvalidResponse:"Invalid ping response when pinging server: '{0}'.",pingServerFailed:"Failed to ping server.",pingServerFailedStatusCode:"Failed to ping server.  Server responded with status code {0}, stopping the connection.",pingServerFailedParse:"Failed to parse ping server response, stopping the connection.",noConnectionTransport:"Connection is in an invalid state, there is no transport active.",webSocketsInvalidState:"The Web Socket transport is in an invalid state, transitioning into reconnecting.",reconnectTimeout:"Couldn't reconnect within the configured timeout of {0} ms, disconnecting.",reconnectWindowTimeout:"The client has been inactive since {0} and it has exceeded the inactivity timeout of {1} ms. Stopping the connection."};if(typeof n!="function")throw new Error(f.nojQuery);var r,a,s=t.document.readyState==="complete",e=n(t),c="__Negotiate Aborted__",u={onStart:"onStart",onStarting:"onStarting",onReceived:"onReceived",onError:"onError",onConnectionSlow:"onConnectionSlow",onReconnecting:"onReconnecting",onReconnect:"onReconnect",onStateChanged:"onStateChanged",onDisconnect:"onDisconnect"},b=function(n,i){if(i!==!1){var r;typeof t.console!="undefined"&&(r="["+(new Date).toTimeString()+"] SignalR: "+n,t.console.debug?t.console.debug(r):t.console.log&&t.console.log(r))}},o=function(t,i,r){return i===t.state?(t.state=r,n(t).triggerHandler(u.onStateChanged,[{oldState:i,newState:r}]),!0):!1},v=function(n){return n.state===r.connectionState.disconnected},h=function(n){return n._.keepAliveData.activated&&n.transport.supportsKeepAlive(n)},p=function(i){var e,f;i._.configuredStopReconnectingTimeout||(f=function(t){var i=r._.format(r.resources.reconnectTimeout,t.disconnectTimeout);t.log(i),n(t).triggerHandler(u.onError,[r._.error(i,"TimeoutException")]),t.stop(!1,!1)},i.reconnecting(function(){var n=this;n.state===r.connectionState.reconnecting&&(e=t.setTimeout(function(){f(n)},n.disconnectTimeout))}),i.stateChanged(function(n){n.oldState===r.connectionState.reconnecting&&t.clearTimeout(e)}),i._.configuredStopReconnectingTimeout=!0)};r=function(n,t,i){return new r.fn.init(n,t,i)},r._={defaultContentType:"application/x-www-form-urlencoded; charset=UTF-8",ieVersion:function(){var i,n;return t.navigator.appName==="Microsoft Internet Explorer"&&(n=/MSIE ([0-9]+\.[0-9]+)/.exec(t.navigator.userAgent),n&&(i=t.parseFloat(n[1]))),i}(),error:function(n,t,i){var r=new Error(n);return r.source=t,typeof i!="undefined"&&(r.context=i),r},transportError:function(n,t,r,u){var f=this.error(n,r,u);return f.transport=t?t.name:i,f},format:function(){for(var t=arguments[0],n=0;n<arguments.length-1;n++)t=t.replace("{"+n+"}",arguments[n+1]);return t},firefoxMajorVersion:function(n){var t=n.match(/Firefox\/(\d+)/);return!t||!t.length||t.length<2?0:parseInt(t[1],10)},configurePingInterval:function(i){var f=i._.config,e=function(t){n(i).triggerHandler(u.onError,[t])};f&&!i._.pingIntervalId&&f.pingInterval&&(i._.pingIntervalId=t.setInterval(function(){r.transports._logic.pingServer(i).fail(e)},f.pingInterval))}},r.events=u,r.resources=f,r.ajaxDefaults={processData:!0,timeout:null,async:!0,global:!1,cache:!1},r.changeState=o,r.isDisconnecting=v,r.connectionState={connecting:0,connected:1,reconnecting:2,disconnected:4},r.hub={start:function(){throw new Error("SignalR: Error loading hubs. Ensure your hubs reference is correct, e.g. <script src='/signalr/js'><\/script>.");}},e.load(function(){s=!0}),r.fn=r.prototype={init:function(t,i,r){var f=n(this);this.url=t,this.qs=i,this.lastError=null,this._={keepAliveData:{},connectingMessageBuffer:new w(this,function(n){f.triggerHandler(u.onReceived,[n])}),onFailedTimeoutHandle:null,lastMessageAt:+new Date,lastActiveAt:+new Date,beatInterval:5e3,beatHandle:null,totalTransportConnectTimeout:0},typeof r=="boolean"&&(this.logging=r)},_parseResponse:function(n){var t=this;return n?typeof n=="string"?t.json.parse(n):n:n},_originalJson:t.JSON,json:t.JSON,isCrossDomain:function(i,r){var u;return(i=n.trim(i),r=r||t.location,i.indexOf("http")!==0)?!1:(u=t.document.createElement("a"),u.href=i,u.protocol+l(u.protocol,u.host)!==r.protocol+l(r.protocol,r.host))},ajaxDataType:"text",contentType:"application/json; charset=UTF-8",logging:!1,state:r.connectionState.disconnected,clientProtocol:"1.4",reconnectDelay:2e3,transportConnectTimeout:0,disconnectTimeout:3e4,reconnectWindow:3e4,keepAliveWarnAt:2/3,start:function(i,l){var a=this,v={pingInterval:3e5,waitForPageLoad:!0,transport:"auto",jsonp:!1},g,w=a._deferral||n.Deferred(),b=t.document.createElement("a"),k,d;if(a.lastError=null,a._deferral=w,!a.json)throw new Error("SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.");if(n.type(i)==="function"?l=i:n.type(i)==="object"&&(n.extend(v,i),n.type(v.callback)==="function"&&(l=v.callback)),v.transport=y(v.transport,a),!v.transport)throw new Error("SignalR: Invalid transport(s) specified, aborting start.");return(a._.config=v,!s&&v.waitForPageLoad===!0)?(a._.deferredStartHandler=function(){a.start(i,l)},e.bind("load",a._.deferredStartHandler),w.promise()):a.state===r.connectionState.connecting?w.promise():o(a,r.connectionState.disconnected,r.connectionState.connecting)===!1?(w.resolve(a),w.promise()):(p(a),b.href=a.url,b.protocol&&b.protocol!==":"?(a.protocol=b.protocol,a.host=b.host):(a.protocol=t.document.location.protocol,a.host=b.host||t.document.location.host),a.baseUrl=a.protocol+"//"+a.host,a.wsProtocol=a.protocol==="https:"?"wss://":"ws://",v.transport==="auto"&&v.jsonp===!0&&(v.transport="longPolling"),a.url.indexOf("//")===0&&(a.url=t.location.protocol+a.url,a.log("Protocol relative URL detected, normalizing it to '"+a.url+"'.")),this.isCrossDomain(a.url)&&(a.log("Auto detected cross domain url."),v.transport==="auto"&&(v.transport=["webSockets","serverSentEvents","longPolling"]),typeof v.withCredentials=="undefined"&&(v.withCredentials=!0),v.jsonp||(v.jsonp=!n.support.cors,v.jsonp&&a.log("Using jsonp because this browser doesn't support CORS.")),a.contentType=r._.defaultContentType),a.withCredentials=v.withCredentials,a.ajaxDataType=v.jsonp?"jsonp":"text",n(a).bind(u.onStart,function(){n.type(l)==="function"&&l.call(a),w.resolve(a)}),g=function(i,s){var y=r._.error(f.noTransportOnInit);if(s=s||0,s>=i.length){n(a).triggerHandler(u.onError,[y]),w.reject(y),a.stop();return}if(a.state!==r.connectionState.disconnected){var p=i[s],c=r.transports[p],l=!1,v=function(){l||(l=!0,t.clearTimeout(a._.onFailedTimeoutHandle),c.stop(a),g(i,s+1))};a.transport=c;try{a._.onFailedTimeoutHandle=t.setTimeout(function(){a.log(c.name+" timed out when trying to connect."),v()},a._.totalTransportConnectTimeout),c.start(a,function(){var i=function(){var f=r._.firefoxMajorVersion(t.navigator.userAgent)>=11,i=!!a.withCredentials&&f;a.log("The start request succeeded. Transitioning to the connected state."),h(a)&&r.transports._logic.monitorKeepAlive(a),r.transports._logic.startHeartbeat(a),r._.configurePingInterval(a),o(a,r.connectionState.connecting,r.connectionState.connected)||a.log("WARNING! The connection was not in the connecting state."),a._.connectingMessageBuffer.drain(),n(a).triggerHandler(u.onStart),e.bind("unload",function(){a.log("Window unloading, stopping the connection."),a.stop(i)}),f&&e.bind("beforeunload",function(){t.setTimeout(function(){a.stop(i)},0)})};if(!l){if(l=!0,t.clearTimeout(a._.onFailedTimeoutHandle),a.state===r.connectionState.disconnected)return;a.log(c.name+" transport selected. Initiating start request."),r.transports._logic.ajaxStart(a,i)}},v)}catch(b){a.log(c.name+" transport threw '"+b.message+"' when attempting to start."),v()}}},k=a.url+"/negotiate",d=function(t,i){var e=r._.error(f.errorOnNegotiate,t,i._.negotiateRequest);n(i).triggerHandler(u.onError,e),w.reject(e),i.stop()},n(a).triggerHandler(u.onStarting),k=r.transports._logic.prepareQueryString(a,k),a.log("Negotiating with '"+k+"'."),a._.negotiateRequest=r.transports._logic.ajax(a,{url:k,error:function(n,t){t!==c?d(n,a):w.reject(r._.error(f.stoppedWhileNegotiating,null,a._.negotiateRequest))},success:function(t){var i,e,h,o=[],s=[];try{i=a._parseResponse(t)}catch(c){d(r._.error(f.errorParsingNegotiateResponse,c),a);return}if(e=a._.keepAliveData,a.appRelativeUrl=i.Url,a.id=i.ConnectionId,a.token=i.ConnectionToken,a.webSocketServerUrl=i.WebSocketServerUrl,a._.pollTimeout=i.ConnectionTimeout*1e3+1e4,a.disconnectTimeout=i.DisconnectTimeout*1e3,a._.totalTransportConnectTimeout=a.transportConnectTimeout+i.TransportConnectTimeout*1e3,i.KeepAliveTimeout?(e.activated=!0,e.timeout=i.KeepAliveTimeout*1e3,e.timeoutWarning=e.timeout*a.keepAliveWarnAt,a._.beatInterval=(e.timeout-e.timeoutWarning)/3):e.activated=!1,a.reconnectWindow=a.disconnectTimeout+(e.timeout||0),!i.ProtocolVersion||i.ProtocolVersion!==a.clientProtocol){h=r._.error(r._.format(f.protocolIncompatible,a.clientProtocol,i.ProtocolVersion)),n(a).triggerHandler(u.onError,[h]),w.reject(h);return}n.each(r.transports,function(n){if(n.indexOf("_")===0||n==="webSockets"&&!i.TryWebSockets)return!0;s.push(n)}),n.isArray(v.transport)?n.each(v.transport,function(t,i){n.inArray(i,s)>=0&&o.push(i)}):v.transport==="auto"?o=s:n.inArray(v.transport,s)>=0&&o.push(v.transport),g(o)}}),w.promise())},starting:function(t){var i=this;return n(i).bind(u.onStarting,function(){t.call(i)}),i},send:function(n){var t=this;if(t.state===r.connectionState.disconnected)throw new Error("SignalR: Connection must be started before data can be sent. Call .start() before .send()");if(t.state===r.connectionState.connecting)throw new Error("SignalR: Connection has not been fully initialized. Use .start().done() or .start().fail() to run logic after the connection has started.");return t.transport.send(t,n),t},received:function(t){var i=this;return n(i).bind(u.onReceived,function(n,r){t.call(i,r)}),i},stateChanged:function(t){var i=this;return n(i).bind(u.onStateChanged,function(n,r){t.call(i,r)}),i},error:function(t){var i=this;return n(i).bind(u.onError,function(n,r,u){i.lastError=r,t.call(i,r,u)}),i},disconnected:function(t){var i=this;return n(i).bind(u.onDisconnect,function(){t.call(i)}),i},connectionSlow:function(t){var i=this;return n(i).bind(u.onConnectionSlow,function(){t.call(i)}),i},reconnecting:function(t){var i=this;return n(i).bind(u.onReconnecting,function(){t.call(i)}),i},reconnected:function(t){var i=this;return n(i).bind(u.onReconnect,function(){t.call(i)}),i},stop:function(i,l){var a=this,v=a._deferral;if(a._.deferredStartHandler&&e.unbind("load",a._.deferredStartHandler),delete a._.config,delete a._.deferredStartHandler,!s&&(!a._.config||a._.config.waitForPageLoad===!0)){a.log("Stopping connection prior to negotiate."),v&&v.reject(r._.error(f.stoppedWhileLoading));return}if(a.state!==r.connectionState.disconnected)return a.log("Stopping connection."),o(a,a.state,r.connectionState.disconnected),t.clearTimeout(a._.beatHandle),t.clearTimeout(a._.onFailedTimeoutHandle),t.clearInterval(a._.pingIntervalId),a.transport&&(a.transport.stop(a),l!==!1&&a.transport.abort(a,i),h(a)&&r.transports._logic.stopMonitoringKeepAlive(a),a.transport=null),a._.negotiateRequest&&(a._.negotiateRequest.abort(c),delete a._.negotiateRequest),r.transports._logic.tryAbortStartRequest(a),n(a).triggerHandler(u.onDisconnect),delete a._deferral,delete a.messageId,delete a.groupsToken,delete a.id,delete a._.pingIntervalId,delete a._.lastMessageAt,delete a._.lastActiveAt,a._.connectingMessageBuffer.clear(),a},log:function(n){b(n,this.logging)}},r.fn.init.prototype=r.fn,r.noConflict=function(){return n.connection===r&&(n.connection=a),r},n.connection&&(a=n.connection),n.connection=n.signalR=r}(window.jQuery,window),function(n,t){function o(n){n._.keepAliveData.monitoring&&s(n),r.markActive(n)&&(n._.beatHandle=t.setTimeout(function(){o(n)},n._.beatInterval))}function s(t){var r=t._.keepAliveData,f;t.state===i.connectionState.connected&&(f=+new Date-t._.lastMessageAt,f>=r.timeout?(t.log("Keep alive timed out.  Notifying transport that connection has been lost."),t.transport.lostConnection(t)):f>=r.timeoutWarning?r.userNotified||(t.log("Keep alive has been missed, connection may be dead/slow."),n(t).triggerHandler(u.onConnectionSlow),r.userNotified=!0):r.userNotified=!1)}function f(n,t){var i=n.url+t;return n.transport&&(i+="?transport="+n.transport.name),r.prepareQueryString(n,i)}var i=n.signalR,u=n.signalR.events,h=n.signalR.changeState,e="__Start Aborted__",r;i.transports={},r=i.transports._logic={ajax:function(t,i){return n.ajax(n.extend(!0,{},n.signalR.ajaxDefaults,{type:"GET",data:{},xhrFields:{withCredentials:t.withCredentials},contentType:t.contentType,dataType:t.ajaxDataType},i))},pingServer:function(t){var e,f,u=n.Deferred();return t.transport?(e=t.url+"/ping",e=r.addQs(e,t.qs),f=r.ajax(t,{url:e,success:function(n){var r;try{r=t._parseResponse(n)}catch(e){u.reject(i._.transportError(i.resources.pingServerFailedParse,t.transport,e,f)),t.stop();return}r.Response==="pong"?u.resolve():u.reject(i._.transportError(i._.format(i.resources.pingServerFailedInvalidResponse,n),t.transport,null,f))},error:function(n){n.status===401||n.status===403?(u.reject(i._.transportError(i._.format(i.resources.pingServerFailedStatusCode,n.status),t.transport,n,f)),t.stop()):u.reject(i._.transportError(i.resources.pingServerFailed,t.transport,n,f))}})):u.reject(i._.transportError(i.resources.noConnectionTransport,t.transport)),u.promise()},prepareQueryString:function(n,i){var u;return u=r.addQs(i,"clientProtocol="+n.clientProtocol),u=r.addQs(u,n.qs),n.token&&(u+="&connectionToken="+t.encodeURIComponent(n.token)),n.data&&(u+="&connectionData="+t.encodeURIComponent(n.data)),u},addQs:function(t,i){var u=t.indexOf("?")!==-1?"&":"?",r;if(!i)return t;if(typeof i=="object")return t+u+n.param(i);if(typeof i=="string")return r=i.charAt(0),(r==="?"||r==="&")&&(u=""),t+u+i;throw new Error("Query string property must be either a string or object.");},getUrl:function(n,i,u,f){var s=i==="webSockets"?"":n.baseUrl,e=s+n.appRelativeUrl,o="transport="+i;return n.groupsToken&&(o+="&groupsToken="+t.encodeURIComponent(n.groupsToken)),u?(e+=f?"/poll":"/reconnect",n.messageId&&(o+="&messageId="+t.encodeURIComponent(n.messageId))):e+="/connect",e+="?"+o,e=r.prepareQueryString(n,e),e+("&tid="+Math.floor(Math.random()*11))},maximizePersistentResponse:function(n){return{MessageId:n.C,Messages:n.M,Initialized:typeof n.S!="undefined"?!0:!1,Disconnect:typeof n.D!="undefined"?!0:!1,ShouldReconnect:typeof n.T!="undefined"?!0:!1,LongPollDelay:n.L,GroupsToken:n.G}},updateGroups:function(n,t){t&&(n.groupsToken=t)},stringifySend:function(n,t){return typeof t=="string"||typeof t=="undefined"||t===null?t:n.json.stringify(t)},ajaxSend:function(t,e){var h=r.stringifySend(t,e),c=f(t,"/send"),o,s=function(t,r){n(r).triggerHandler(u.onError,[i._.transportError(i.resources.sendFailed,r.transport,t,o),e])};return o=r.ajax(t,{url:c,type:t.ajaxDataType==="jsonp"?"GET":"POST",contentType:i._.defaultContentType,data:{data:h},success:function(n){var i;if(n){try{i=t._parseResponse(n)}catch(u){s(u,t),t.stop();return}r.triggerReceived(t,i)}},error:function(n,i){i!=="abort"&&i!=="parsererror"&&s(n,t)}})},ajaxAbort:function(n,t){if(typeof n.transport!="undefined"){t=typeof t=="undefined"?!0:t;var i=f(n,"/abort");r.ajax(n,{url:i,async:t,timeout:1e3,type:"POST"}),n.log("Fired ajax abort async = "+t+".")}},ajaxStart:function(t,o){var h=function(n){var i=t._deferral;i&&i.reject(n)},s=function(i){t.log("The start request failed. Stopping the connection."),n(t).triggerHandler(u.onError,[i]),h(i),t.stop()};t._.startRequest=r.ajax(t,{url:f(t,"/start"),success:function(n,r,u){var f;try{f=t._parseResponse(n)}catch(e){s(i._.error(i._.format(i.resources.errorParsingStartResponse,n),e,u));return}f.Response==="started"?o():s(i._.error(i._.format(i.resources.invalidStartResponse,n),null,u))},error:function(n,r,u){r!==e?s(i._.error(i.resources.errorDuringStartRequest,u,n)):(t.log("The start request aborted because connection.stop() was called."),h(i._.error(i.resources.stoppedDuringStartRequest,null,n)))}})},tryAbortStartRequest:function(n){n._.startRequest&&(n._.startRequest.abort(e),delete n._.startRequest)},tryInitialize:function(n,t){n.Initialized&&t()},triggerReceived:function(t,i){t._.connectingMessageBuffer.tryBuffer(i)||n(t).triggerHandler(u.onReceived,[i])},processMessages:function(t,i,u){var f;r.markLastMessage(t),i&&(f=r.maximizePersistentResponse(i),r.updateGroups(t,f.GroupsToken),f.MessageId&&(t.messageId=f.MessageId),f.Messages&&(n.each(f.Messages,function(n,i){r.triggerReceived(t,i)}),r.tryInitialize(f,u)))},monitorKeepAlive:function(t){var i=t._.keepAliveData;i.monitoring?t.log("Tried to monitor keep alive but it's already being monitored."):(i.monitoring=!0,r.markLastMessage(t),t._.keepAliveData.reconnectKeepAliveUpdate=function(){r.markLastMessage(t)},n(t).bind(u.onReconnect,t._.keepAliveData.reconnectKeepAliveUpdate),t.log("Now monitoring keep alive with a warning timeout of "+i.timeoutWarning+" and a connection lost timeout of "+i.timeout+"."))},stopMonitoringKeepAlive:function(t){var i=t._.keepAliveData;i.monitoring&&(i.monitoring=!1,n(t).unbind(u.onReconnect,t._.keepAliveData.reconnectKeepAliveUpdate),t._.keepAliveData={},t.log("Stopping the monitoring of the keep alive."))},startHeartbeat:function(n){n._.lastActiveAt=+new Date,o(n)},markLastMessage:function(n){n._.lastMessageAt=+new Date},markActive:function(n){return r.verifyLastActive(n)?(n._.lastActiveAt=+new Date,!0):!1},isConnectedOrReconnecting:function(n){return n.state===i.connectionState.connected||n.state===i.connectionState.reconnecting},ensureReconnectingState:function(t){return h(t,i.connectionState.connected,i.connectionState.reconnecting)===!0&&n(t).triggerHandler(u.onReconnecting),t.state===i.connectionState.reconnecting},clearReconnectTimeout:function(n){n&&n._.reconnectTimeout&&(t.clearTimeout(n._.reconnectTimeout),delete n._.reconnectTimeout)},verifyLastActive:function(t){if(+new Date-t._.lastActiveAt>=t.reconnectWindow){var r=i._.format(i.resources.reconnectWindowTimeout,new Date(t._.lastActiveAt),t.reconnectWindow);return t.log(r),n(t).triggerHandler(u.onError,[i._.error(r,"TimeoutException")]),t.stop(!1,!1),!1}return!0},reconnect:function(n,u){var f=i.transports[u];if(r.isConnectedOrReconnecting(n)&&!n._.reconnectTimeout){if(!r.verifyLastActive(n))return;n._.reconnectTimeout=t.setTimeout(function(){r.verifyLastActive(n)&&(f.stop(n),r.ensureReconnectingState(n)&&(n.log(u+" reconnecting."),f.start(n)))},n.reconnectDelay)}},handleParseFailure:function(t,r,f,e,o){t.state===i.connectionState.connecting?(t.log("Failed to parse server response while attempting to connect."),e()):(n(t).triggerHandler(u.onError,[i._.transportError(i._.format(i.resources.parseFailed,r),t.transport,f,o)]),t.stop())},foreverFrame:{count:0,connections:{}}}}(window.jQuery,window),function(n,t){var r=n.signalR,u=n.signalR.events,f=n.signalR.changeState,i=r.transports._logic;r.transports.webSockets={name:"webSockets",supportsKeepAlive:function(){return!0},send:function(t,f){var e=i.stringifySend(t,f);try{t.socket.send(e)}catch(o){n(t).triggerHandler(u.onError,[r._.transportError(r.resources.webSocketsInvalidState,t.transport,o,t.socket),f])}},start:function(e,o,s){var h,a=!1,l=this,c=!o,v=n(e);if(!t.WebSocket){s();return}e.socket||(h=e.webSocketServerUrl?e.webSocketServerUrl:e.wsProtocol+e.host,h+=i.getUrl(e,this.name,c),e.log("Connecting to websocket endpoint '"+h+"'."),e.socket=new t.WebSocket(h),e.socket.onopen=function(){a=!0,e.log("Websocket opened."),i.clearReconnectTimeout(e),f(e,r.connectionState.reconnecting,r.connectionState.connected)===!0&&v.triggerHandler(u.onReconnect)},e.socket.onclose=function(t){if(this===e.socket){if(a)typeof t.wasClean!="undefined"&&t.wasClean===!1?(n(e).triggerHandler(u.onError,[r._.transportError(r.resources.webSocketClosed,e.transport,t)]),e.log("Unclean disconnect from websocket: "+t.reason||"[no reason given].")):e.log("Websocket closed.");else{s?s():c&&l.reconnect(e);return}l.reconnect(e)}},e.socket.onmessage=function(t){var r;try{r=e._parseResponse(t.data)}catch(u){i.handleParseFailure(e,t.data,u,s,t);return}r&&(n.isEmptyObject(r)||r.M?i.processMessages(e,r,o):i.triggerReceived(e,r))})},reconnect:function(n){i.reconnect(n,this.name)},lostConnection:function(n){this.reconnect(n)},stop:function(n){i.clearReconnectTimeout(n),n.socket&&(n.log("Closing the Websocket."),n.socket.close(),n.socket=null)},abort:function(n,t){i.ajaxAbort(n,t)}}}(window.jQuery,window),function(n,t){var r=n.signalR,u=n.signalR.events,e=n.signalR.changeState,i=r.transports._logic,f=function(n){t.clearTimeout(n._.reconnectAttemptTimeoutHandle),delete n._.reconnectAttemptTimeoutHandle};r.transports.serverSentEvents={name:"serverSentEvents",supportsKeepAlive:function(){return!0},timeOut:3e3,start:function(o,s,h){var l=this,c=!1,y=n(o),v=!s,a;if(o.eventSource&&(o.log("The connection already has an event source. Stopping it."),o.stop()),!t.EventSource){h&&(o.log("This browser doesn't support SSE."),h());return}a=i.getUrl(o,this.name,v);try{o.log("Attempting to connect to SSE endpoint '"+a+"'."),o.eventSource=new t.EventSource(a,{withCredentials:o.withCredentials})}catch(p){o.log("EventSource failed trying to connect with error "+p.Message+"."),h?h():(y.triggerHandler(u.onError,[r._.transportError(r.resources.eventSourceFailedToConnect,o.transport,p)]),v&&l.reconnect(o));return}v&&(o._.reconnectAttemptTimeoutHandle=t.setTimeout(function(){c===!1&&o.eventSource.readyState!==t.EventSource.OPEN&&l.reconnect(o)},l.timeOut)),o.eventSource.addEventListener("open",function(){o.log("EventSource connected."),f(o),i.clearReconnectTimeout(o),c===!1&&(c=!0,e(o,r.connectionState.reconnecting,r.connectionState.connected)===!0&&y.triggerHandler(u.onReconnect))},!1),o.eventSource.addEventListener("message",function(n){var t;if(n.data!=="initialized"){try{t=o._parseResponse(n.data)}catch(r){i.handleParseFailure(o,n.data,r,h,n);return}i.processMessages(o,t,s)}},!1),o.eventSource.addEventListener("error",function(n){if(this===o.eventSource){if(!c){h&&h();return}o.log("EventSource readyState: "+o.eventSource.readyState+"."),n.eventPhase===t.EventSource.CLOSED?(o.log("EventSource reconnecting due to the server connection ending."),l.reconnect(o)):(o.log("EventSource error."),y.triggerHandler(u.onError,[r._.transportError(r.resources.eventSourceError,o.transport,n)]))}},!1)},reconnect:function(n){i.reconnect(n,this.name)},lostConnection:function(n){this.reconnect(n)},send:function(n,t){i.ajaxSend(n,t)},stop:function(n){f(n),i.clearReconnectTimeout(n),n&&n.eventSource&&(n.log("EventSource calling close()."),n.eventSource.close(),n.eventSource=null,delete n.eventSource)},abort:function(n,t){i.ajaxAbort(n,t)}}}(window.jQuery,window),function(n,t){var r=n.signalR,e=n.signalR.events,o=n.signalR.changeState,i=r.transports._logic,u=function(){var n=t.document.createElement("iframe");return n.setAttribute("style","position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;"),n},f=function(){var i=null,f=1e3,n=0;return{prevent:function(){r._.ieVersion<=8&&(n===0&&(i=t.setInterval(function(){var n=u();t.document.body.appendChild(n),t.document.body.removeChild(n),n=null},f)),n++)},cancel:function(){n===1&&t.clearInterval(i),n>0&&n--}}}();r.transports.foreverFrame={name:"foreverFrame",supportsKeepAlive:function(){return!0},iframeClearThreshold:50,start:function(n,r,e){var l=this,h=i.foreverFrame.count+=1,s,o=u(),c=function(){n.log("Forever frame iframe finished loading and is no longer receiving messages."),l.reconnect(n)};if(t.EventSource){e&&(n.log("This browser supports SSE, skipping Forever Frame."),e());return}o.setAttribute("data-signalr-connection-id",n.id),f.prevent(),s=i.getUrl(n,this.name),s+="&frameId="+h,t.document.body.appendChild(o),n.log("Binding to iframe's load event."),o.addEventListener?o.addEventListener("load",c,!1):o.attachEvent&&o.attachEvent("onload",c),o.src=s,i.foreverFrame.connections[h]=n,n.frame=o,n.frameId=h,r&&(n.onSuccess=function(){n.log("Iframe transport started."),r()})},reconnect:function(n){var r=this;i.isConnectedOrReconnecting(n)&&i.verifyLastActive(n)&&t.setTimeout(function(){if(i.verifyLastActive(n)&&n.frame&&i.ensureReconnectingState(n)){var u=n.frame,t=i.getUrl(n,r.name,!0)+"&frameId="+n.frameId;n.log("Updating iframe src to '"+t+"'."),u.src=t}},n.reconnectDelay)},lostConnection:function(n){this.reconnect(n)},send:function(n,t){i.ajaxSend(n,t)},receive:function(t,u){var f,e,o;if(t.json!==t._originalJson&&(u=t._originalJson.stringify(u)),o=t._parseResponse(u),i.processMessages(t,o,t.onSuccess),t.state===n.signalR.connectionState.connected&&(t.frameMessageCount=(t.frameMessageCount||0)+1,t.frameMessageCount>r.transports.foreverFrame.iframeClearThreshold&&(t.frameMessageCount=0,f=t.frame.contentWindow||t.frame.contentDocument,f&&f.document&&f.document.body)))for(e=f.document.body;e.firstChild;)e.removeChild(e.firstChild)},stop:function(n){var r=null;if(f.cancel(),n.frame){if(n.frame.stop)n.frame.stop();else try{r=n.frame.contentWindow||n.frame.contentDocument,r.document&&r.document.execCommand&&r.document.execCommand("Stop")}catch(u){n.log("Error occured when stopping foreverFrame transport. Message = "+u.message+".")}n.frame.parentNode===t.document.body&&t.document.body.removeChild(n.frame),delete i.foreverFrame.connections[n.frameId],n.frame=null,n.frameId=null,delete n.frame,delete n.frameId,delete n.onSuccess,delete n.frameMessageCount,n.log("Stopping forever frame.")}},abort:function(n,t){i.ajaxAbort(n,t)},getConnection:function(n){return i.foreverFrame.connections[n]},started:function(t){o(t,r.connectionState.reconnecting,r.connectionState.connected)===!0&&n(t).triggerHandler(e.onReconnect)}}}(window.jQuery,window),function(n,t){var r=n.signalR,f=n.signalR.events,e=n.signalR.changeState,u=n.signalR.isDisconnecting,i=r.transports._logic;r.transports.longPolling={name:"longPolling",supportsKeepAlive:function(){return!1},reconnectDelay:3e3,start:function(o,s,h){var v=this,y=function(){y=n.noop,h=null,o.log("LongPolling connected."),s()},p=function(){return h?(h(),h=null,o.log("LongPolling failed to connect."),!0):!1},c=o._,l=0,a=function(i){t.clearTimeout(c.reconnectTimeoutId),c.reconnectTimeoutId=null,e(i,r.connectionState.reconnecting,r.connectionState.connected)===!0&&(i.log("Raising the reconnect event"),n(i).triggerHandler(f.onReconnect))},w=36e5;o.pollXhr&&(o.log("Polling xhr requests already exists, aborting."),o.stop()),o.messageId=null,c.reconnectTimeoutId=null,c.pollTimeoutId=t.setTimeout(function(){(function e(s,h){var nt=s.messageId,d=nt===null,b=!d,g=!h,k=i.getUrl(s,v.name,b,g);u(s)!==!0&&(o.log("Opening long polling request to '"+k+"'."),s.pollXhr=i.ajax(o,{xhrFields:{onprogress:function(){i.markLastMessage(o)}},url:k,timeout:o._.pollTimeout,success:function(r){var h,w=0,f,v;o.log("Long poll complete."),l=0;try{h=o._parseResponse(r)}catch(b){i.handleParseFailure(s,r,b,p,s.pollXhr);return}(c.reconnectTimeoutId!==null&&a(s),h&&(f=i.maximizePersistentResponse(h)),i.processMessages(s,h,y),f&&n.type(f.LongPollDelay)==="number"&&(w=f.LongPollDelay),f&&f.Disconnect)||u(s)!==!0&&(v=f&&f.ShouldReconnect,!v||i.ensureReconnectingState(s))&&(w>0?c.pollTimeoutId=t.setTimeout(function(){e(s,v)},w):e(s,v))},error:function(u,h){if(t.clearTimeout(c.reconnectTimeoutId),c.reconnectTimeoutId=null,h==="abort"){o.log("Aborted xhr request.");return}if(!p()){if(l++,o.state!==r.connectionState.reconnecting&&(o.log("An error occurred using longPolling. Status = "+h+".  Response = "+u.responseText+"."),n(s).triggerHandler(f.onError,[r._.transportError(r.resources.longPollFailed,o.transport,u,s.pollXhr)])),(o.state===r.connectionState.connected||o.state===r.connectionState.reconnecting)&&!i.verifyLastActive(o))return;if(!i.ensureReconnectingState(s))return;c.pollTimeoutId=t.setTimeout(function(){e(s,!0)},v.reconnectDelay)}}}),b&&h===!0&&(c.reconnectTimeoutId=t.setTimeout(function(){a(s)},Math.min(1e3*(Math.pow(2,l)-1),w))))})(o)},250)},lostConnection:function(n){n.pollXhr&&n.pollXhr.abort("lostConnection")},send:function(n,t){i.ajaxSend(n,t)},stop:function(n){t.clearTimeout(n._.pollTimeoutId),t.clearTimeout(n._.reconnectTimeoutId),delete n._.pollTimeoutId,delete n._.reconnectTimeoutId,n.pollXhr&&(n.pollXhr.abort(),n.pollXhr=null,delete n.pollXhr)},abort:function(n,t){i.ajaxAbort(n,t)}}}(window.jQuery,window),function(n){function r(n){return n+e}function h(n,t,i){for(var f=n.length,u=[],r=0;r<f;r+=1)n.hasOwnProperty(r)&&(u[r]=t.call(i,n[r],r,n));return u}function s(t){return n.isFunction(t)?null:n.type(t)==="undefined"?null:t}function u(n){for(var t in n)if(n.hasOwnProperty(t))return!0;return!1}function f(n,t){var r=n._.invocationCallbacks,i,f;u(r)&&n.log("Clearing hub invocation callbacks with error: "+t+"."),n._.invocationCallbackId=0,delete n._.invocationCallbacks,n._.invocationCallbacks={};for(f in r)i=r[f],i.method.call(i.scope,{E:t})}function i(n,t){return new i.fn.init(n,t)}function t(i,r){var u={qs:null,logging:!1,useDefaultPath:!0};return n.extend(u,r),(!i||u.useDefaultPath)&&(i=(i||"")+"/signalr"),new t.fn.init(i,u)}var e=".hubProxy",o=n.signalR;i.fn=i.prototype={init:function(n,t){this.state={},this.connection=n,this.hubName=t,this._={callbackMap:{}}},constructor:i,hasSubscriptions:function(){return u(this._.callbackMap)},on:function(t,i){var f=this,u=f._.callbackMap;return t=t.toLowerCase(),u[t]||(u[t]={}),u[t][i]=function(n,t){i.apply(f,t)},n(f).bind(r(t),u[t][i]),f},off:function(t,i){var e=this,o=e._.callbackMap,f;return t=t.toLowerCase(),f=o[t],f&&(f[i]?(n(e).unbind(r(t),f[i]),delete f[i],u(f)||delete o[t]):i||(n(e).unbind(r(t)),delete o[t])),e},invoke:function(t){var i=this,r=i.connection,c=n.makeArray(arguments).slice(1),l=h(c,s),f={H:i.hubName,M:t,A:l,I:r._.invocationCallbackId},u=n.Deferred(),e=function(f){var e=i._maximizeHubResponse(f),h,s;n.extend(i.state,e.State),e.Progress?u.notifyWith?u.notifyWith(i,[e.Progress.Data]):r._.progressjQueryVersionLogged||(r.log("A hub method invocation progress update was received but the version of jQuery in use ("+n.prototype.jquery+") does not support progress updates. Upgrade to jQuery 1.7+ to receive progress notifications."),r._.progressjQueryVersionLogged=!0):e.Error?(e.StackTrace&&r.log(e.Error+"\n"+e.StackTrace+"."),h=e.IsHubException?"HubException":"Exception",s=o._.error(e.Error,h),s.data=e.ErrorData,r.log(i.hubName+"."+t+" failed to execute. Error: "+s.message),u.rejectWith(i,[s])):(r.log("Invoked "+i.hubName+"."+t),u.resolveWith(i,[e.Result]))};return r._.invocationCallbacks[r._.invocationCallbackId.toString()]={scope:i,method:e},r._.invocationCallbackId+=1,n.isEmptyObject(i.state)||(f.S=i.state),r.log("Invoking "+i.hubName+"."+t),r.send(f),u.promise()},_maximizeHubResponse:function(n){return{State:n.S,Result:n.R,Progress:n.P?{Id:n.P.I,Data:n.P.D}:null,Id:n.I,IsHubException:n.H,Error:n.E,StackTrace:n.T,ErrorData:n.D}}},i.fn.init.prototype=i.fn,t.fn=t.prototype=n.connection(),t.fn.init=function(t,i){var e={qs:null,logging:!1,useDefaultPath:!0},u=this;n.extend(e,i),n.signalR.fn.init.call(u,t,e.qs,e.logging),u.proxies={},u._.invocationCallbackId=0,u._.invocationCallbacks={},u.received(function(t){var f,o,e,i,h,s;t&&(typeof t.P!="undefined"?(e=t.P.I.toString(),i=u._.invocationCallbacks[e],i&&i.method.call(i.scope,t)):typeof t.I!="undefined"?(e=t.I.toString(),i=u._.invocationCallbacks[e],i&&(u._.invocationCallbacks[e]=null,delete u._.invocationCallbacks[e],i.method.call(i.scope,t))):(f=this._maximizeClientHubInvocation(t),u.log("Triggering client hub event '"+f.Method+"' on hub '"+f.Hub+"'."),h=f.Hub.toLowerCase(),s=f.Method.toLowerCase(),o=this.proxies[h],n.extend(o.state,f.State),n(o).triggerHandler(r(s),[f.Args])))}),u.error(function(n,t){var r,i;t&&(r=t.I,i=u._.invocationCallbacks[r],i&&(u._.invocationCallbacks[r]=null,delete u._.invocationCallbacks[r],i.method.call(i.scope,{E:n})))}),u.reconnecting(function(){u.transport&&u.transport.name==="webSockets"&&f(u,"Connection started reconnecting before invocation result was received.")}),u.disconnected(function(){f(u,"Connection was disconnected before invocation result was received.")})},t.fn._maximizeClientHubInvocation=function(n){return{Hub:n.H,Method:n.M,Args:n.A,State:n.S}},t.fn._registerSubscribedHubs=function(){var t=this;t._subscribedToHubs||(t._subscribedToHubs=!0,t.starting(function(){var i=[];n.each(t.proxies,function(n){this.hasSubscriptions()&&(i.push({name:n}),t.log("Client subscribed to hub '"+n+"'."))}),i.length===0&&t.log("No hubs have been subscribed to.  The client will not receive data from hubs.  To fix, declare at least one client side function prior to connection start for each hub you wish to subscribe to."),t.data=t.json.stringify(i)}))},t.fn.createHubProxy=function(n){n=n.toLowerCase();var t=this.proxies[n];return t||(t=i(this,n),this.proxies[n]=t),this._registerSubscribedHubs(),t},t.fn.init.prototype=t.fn,n.hubConnection=t}(window.jQuery,window),function(n){n.signalR.version="2.1.2"}(window.jQuery),function(n){"use strict";function f(t,i){return function(){i.apply(t,n.makeArray(arguments))}}function u(t,i){var s,r,u,o,e;for(s in t)if(t.hasOwnProperty(s)){if(r=t[s],!r.hubName)continue;e=i?r.on:r.off;for(u in r.client)if(r.client.hasOwnProperty(u)){if(o=r.client[u],!n.isFunction(o))continue;e.call(r,u,f(r,o))}}}if(typeof n.signalR!="function")throw new Error("SignalR: SignalR is not loaded. Please ensure jquery.signalR-x.js is referenced before ~/signalr/js.");var r=n.signalR;n.hubConnection.prototype.createHubProxies=function(){var n={};return this.starting(function(){u(n,!0),this._registerSubscribedHubs()}).disconnected(function(){u(n,!1)}),n.mainHub=this.createHubProxy("mainHub"),n.mainHub.client={},n.mainHub.server={},n},r.hub=n.hubConnection("/signalr",{useDefaultPath:!1}),n.extend(r,r.hub.createHubProxies())}(window.jQuery,window),function(n,t){function w(n,t){var r=n.createElement("p"),i=n.getElementsByTagName("head")[0]||n.documentElement;return r.innerHTML="x<style>"+t+"</style>",i.insertBefore(r.lastChild,i.firstChild)}function a(){var n=i.elements;return"string"==typeof n?n.split(" "):n}function o(n){var t=h[n[s]];return t||(t={},e++,n[s]=e,h[e]=t),t}function c(n,i,u){if(i||(i=t),r)return i.createElement(n);u||(u=o(i));var f;return f=u.cache[n]?u.cache[n].cloneNode():y.test(n)?(u.cache[n]=u.createElem(n)).cloneNode():u.createElem(n),f.canHaveChildren&&!b.test(n)?u.frag.appendChild(f):f}function p(n,i){if(n||(n=t),r)return n.createDocumentFragment();i=i||o(n);for(var e=i.frag.cloneNode(),u=0,f=a(),s=f.length;s>u;u++)e.createElement(f[u]);return e}function k(n,t){t.cache||(t.cache={},t.createElem=n.createElement,t.createFrag=n.createDocumentFragment,t.frag=t.createFrag()),n.createElement=function(r){return i.shivMethods?c(r,n,t):t.createElem(r)},n.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+a().join().replace(/\w+/g,function(n){return t.createElem(n),t.frag.createElement(n),'c("'+n+'")'})+");return n}")(i,t.frag)}function l(n){n||(n=t);var f=o(n);return!i.shivCSS||u||f.hasCSS||(f.hasCSS=!!w(n,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),r||k(n,f),n}var u,r,v="3.6.2pre",f=n.html5||{},b=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,y=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,s="_html5shiv",e=0,h={},i;(function(){try{var n=t.createElement("a");n.innerHTML="<xyz></xyz>",u="hidden"in n,r=1==n.childNodes.length||function(){t.createElement("a");var n=t.createDocumentFragment();return n.cloneNode===void 0||n.createDocumentFragment===void 0||n.createElement===void 0}()}catch(i){u=!0,r=!0}})(),i={elements:f.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video",version:v,shivCSS:f.shivCSS!==!1,supportsUnknownElements:r,shivMethods:f.shivMethods!==!1,type:"default",shivDocument:l,createElement:c,createDocumentFragment:p},n.html5=i,l(t)}(this,document),function(n){typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)}(function(n){function r(n){return n}function f(n){return decodeURIComponent(n.replace(u," "))}function i(n){n.indexOf('"')===0&&(n=n.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t.json?JSON.parse(n):n}catch(i){}}var u=/\+/g,t=n.cookie=function(u,e,o){var p,c,s,y;if(e!==undefined)return o=n.extend({},t.defaults,o),typeof o.expires=="number"&&(p=o.expires,c=o.expires=new Date,c.setDate(c.getDate()+p)),e=t.json?JSON.stringify(e):String(e),document.cookie=[t.raw?u:encodeURIComponent(u),"=",t.raw?e:encodeURIComponent(e),o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("");var w=t.raw?r:f,b=document.cookie.split("; "),h=u?undefined:{};for(s=0,y=b.length;s<y;s++){var v=b[s].split("="),a=w(v.shift()),l=w(v.join("="));if(u&&u===a){h=i(l);break}u||(h[a]=i(l))}return h};t.defaults={},n.removeCookie=function(t,i){return n.cookie(t)!==undefined?(n.cookie(t,"",n.extend({},i,{expires:-1})),!0):!1}}),function(n){function i(n){(n.attr("title")||typeof n.attr("original-title")!="string")&&n.attr("original-title",n.attr("title")||"").removeAttr("title")}function t(t,r){this.$element=n(t),this.options=r,this.enabled=!0,i(this.$element)}t.prototype={show:function(){var o=this.getTitle(),i;if(o&&this.enabled){i=this.tip(),i.find(".tipsy-inner")[this.options.html?"html":"text"](o),i[0].className="tipsy",i.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var t=n.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),f=i[0].offsetWidth,e=i[0].offsetHeight,u=typeof this.options.gravity=="function"?this.options.gravity.call(this.$element[0]):this.options.gravity,r;switch(u.charAt(0)){case"n":r={top:t.top+t.height+this.options.offset,left:t.left+t.width/2-f/2};break;case"s":r={top:t.top-e-this.options.offset,left:t.left+t.width/2-f/2};break;case"e":r={top:t.top+t.height/2-e/2,left:t.left-f-this.options.offset};break;case"w":r={top:t.top+t.height/2-e/2,left:t.left+t.width+this.options.offset}}u.length==2&&(r.left=u.charAt(1)=="w"?t.left+t.width/2-15:t.left+t.width/2-f+15),i.css(r).addClass("tipsy-"+u),this.options.fade?i.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):i.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){n(this).remove()}):this.tip().remove()},getTitle:function(){var r=this.$element,n=this.options,t;return i(r),n=this.options,typeof n.title=="string"?t=r.attr(n.title=="title"?"original-title":n.title):typeof n.title=="function"&&(t=n.title.call(r[0])),t=(""+t).replace(/(^\s*|\s*$)/,""),t||n.fallback},tip:function(){return this.$tip||(this.$tip=n('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"/></div>')),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},n.fn.tipsy=function(i){function r(r){var u=n.data(r,"tipsy");return u||(u=new t(r,n.fn.tipsy.elementOptions(r,i)),n.data(r,"tipsy",u)),u}function o(){var n=r(this);n.hoverState="in",i.delayIn==0?n.show():setTimeout(function(){n.hoverState=="in"&&n.show()},i.delayIn)}function s(){var n=r(this);n.hoverState="out",i.delayOut==0?n.hide():setTimeout(function(){n.hoverState=="out"&&n.hide()},i.delayOut)}if(i===!0)return this.data("tipsy");if(typeof i=="string")return this.data("tipsy")[i]();if(i=n.extend({},n.fn.tipsy.defaults,i),i.live||this.each(function(){r(this)}),i.trigger!="manual"){var u=i.on?"on":"bind",e=i.trigger=="hover"?"mouseenter":"focus",f=i.trigger=="hover"?"mouseleave":"blur";this[u](e,o)[u](f,s)}return this},n.fn.tipsy.defaults={delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover"},n.fn.tipsy.elementOptions=function(t,i){return n.metadata?n.extend({},i,n(t).metadata()):i},n.fn.tipsy.autoNS=function(){return n(this).offset().top>n(document).scrollTop()+n(window).height()/2?"s":"n"},n.fn.tipsy.autoWE=function(){return n(this).offset().left>n(document).scrollLeft()+n(window).width()/2?"e":"w"}}(jQuery),!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):n("object"==typeof module&&module.exports?require("jquery"):jQuery)}(function(n){function a(t){var i={},r=/^jQuery\d+$/;return n.each(t.attributes,function(n,t){t.specified&&!r.test(t.name)&&(i[t.name]=t.value)}),i}function f(i,r){var f=this,u=n(f);if(f.value==u.attr("placeholder")&&u.hasClass(t.customClass))if(u.data("placeholder-password")){if(u=u.hide().nextAll('input[type="password"]:first').show().attr("id",u.removeAttr("id").data("placeholder-id")),i===!0)return u[0].value=r;u.focus()}else f.value="",u.removeClass(t.customClass),f==c()&&f.select()}function e(){var r,e=this,i=n(e),u=this.id;if(""===e.value){if("password"===e.type){if(!i.data("placeholder-textinput")){try{r=i.clone().prop({type:"text"})}catch(o){r=n("<input>").attr(n.extend(a(this),{type:"text"}))}r.removeAttr("name").data({"placeholder-password":i,"placeholder-id":u}).bind("focus.placeholder",f),i.data({"placeholder-textinput":r,"placeholder-id":u}).before(r)}i=i.removeAttr("id").hide().prevAll('input[type="text"]:first').attr("id",u).show()}i.addClass(t.customClass),i[0].value=i.attr("placeholder")}else i.removeClass(t.customClass)}function c(){try{return document.activeElement}catch(n){}}var r,i,l="[object OperaMini]"==Object.prototype.toString.call(window.operamini),u="placeholder"in document.createElement("input")&&!l,o="placeholder"in document.createElement("textarea")&&!l,s=n.valHooks,h=n.propHooks,t;u&&o?(i=n.fn.placeholder=function(){return this},i.input=i.textarea=!0):(t={},i=n.fn.placeholder=function(i){var o={customClass:"placeholder"},r;return t=n.extend({},o,i),r=this,r.filter((u?"textarea":":input")+"[placeholder]").not("."+t.customClass).bind({"focus.placeholder":f,"blur.placeholder":e}).data("placeholder-enabled",!0).trigger("blur.placeholder"),r},i.input=u,i.textarea=o,r={get:function(i){var r=n(i),u=r.data("placeholder-password");return u?u[0].value:r.data("placeholder-enabled")&&r.hasClass(t.customClass)?"":i.value},set:function(i,r){var u=n(i),o=u.data("placeholder-password");return o?o[0].value=r:u.data("placeholder-enabled")?(""===r?(i.value=r,i!=c()&&e.call(i)):u.hasClass(t.customClass)?f.call(i,!0,r)||(i.value=r):i.value=r,u):i.value=r}},u||(s.input=r,h.value=r),o||(s.textarea=r,h.value=r),n(function(){n(document).delegate("form","submit.placeholder",function(){var i=n("."+t.customClass,this).each(f);setTimeout(function(){i.each(e)},10)})}),n(window).bind("beforeunload.placeholder",function(){n("."+t.customClass).each(function(){this.value=""})}))}),function(n){"function"==typeof define&&define.amd?define(["jquery"],n):n(jQuery)}(function(n){n.cxCalendar=function(){for(var r,f,u,t={dom:{},api:{}},h=function(n){return n&&("function"==typeof HTMLElement||"object"==typeof HTMLElement)&&n instanceof HTMLElement?!0:n&&n.nodeType&&1===n.nodeType?!0:!1},c=function(n){return n&&n.length&&("function"==typeof jQuery||"object"==typeof jQuery)&&n instanceof jQuery?!0:!1},l=!+"\v1",s=/^(\d+)[-.](\d+)[-.](\d+)$/,e=/^\d+$/,i=0,o=arguments.length;i<o;i++)c(arguments[i])?r=arguments[i]:h(arguments[i])?r=n(arguments[i]):"function"==typeof arguments[i]?u=arguments[i]:"object"==typeof arguments[i]&&(f=arguments[i]);if(!(1>r.length))return t.init=function(){var t=this;t.dom.el=r,t.settings=n.extend({},n.cxCalendar.defaults,f,{startDate:t.dom.el.data("startDate"),endDate:t.dom.el.data("endDate"),type:t.dom.el.data("type"),wday:t.dom.el.data("wday"),position:t.dom.el.data("position"),baseClass:t.dom.el.data("baseClass"),language:t.dom.el.data("language")}),t.dom.el.val().length&&(t.settings.date=l&&s.test(t.dom.el.val())?t.dom.el.val().replace(/[\.\-]/g,"/"):t.dom.el.val()),t.setOptions(),t.build(!0),t.api={show:function(){t.show()},hide:function(){t.hide()},getDate:function(){return t.getDate.apply(t,arguments)},setDate:function(){t.setDate.apply(t,arguments)},gotoDate:function(){t.gotoDate.apply(t,arguments)},clearDate:function(){t.clearDate()},setOptions:function(){t.setOptions.apply(t,arguments),t.build()}},"function"==typeof u&&u(t.api)},t.getMonthDay=function(n){return[31,28+(0==n%4&&0!=n%100||0==n%400?1:0),31,30,31,30,31,31,30,31,30,31]},t.formatDate=function(n,t){if("string"==typeof n&&"undefined"!==t){"string"==typeof t&&(t=t.replace(/[\.-]/g,"/"));var i=new Date(t),f,s,r,h,u,o,e;if(!isNaN(i.getTime()))return f=i.getFullYear(),s=f.toString(10).slice(-2),r=i.getMonth()+1,h=10>r?"0"+r:r,u=i.getDate(),o=10>u?"0"+u:u,e=i.getTime(),i=i.toDateString(),n=n.replace(/STRING/g,i),n=n.replace(/TIME/g,e),n=n.replace(/YYYY/g,f),n=n.replace(/YY/g,s),n=n.replace(/MM/g,h),n=n.replace(/M/g,r),n=n.replace(/DD/g,o),n=n.replace(/D/g,u)}},t.getLanguage=function(t){return"object"==typeof t?t:("string"==typeof t?t=t.toLowerCase():"string"==typeof navigator.language?t=navigator.language.toLowerCase():"string"==typeof navigator.browserLanguage&&(t=navigator.browserLanguage.toLowerCase()),"string"==typeof t&&"object"==typeof n.cxCalendar.languages[t]?n.cxCalendar.languages[t]:n.cxCalendar.languages["default"])},t.setOptions=function(t){var i;if("object"==typeof t&&n.extend(this.settings,t),t="number"==typeof this.settings.startDate&&9999>=this.settings.startDate?new Date(this.settings.startDate,0,1):new Date(this.settings.startDate),i="number"==typeof this.settings.endDate&&9999>=this.settings.endDate?new Date(this.settings.endDate,11,31):new Date(this.settings.endDate),(isNaN(t.getTime())||isNaN(i.getTime())||t.getFullYear()>i.getFullYear())&&(t=new Date(n.cxCalendar.defaults.startDate,0,1),i=new Date(n.cxCalendar.defaults.endDate,11,31)),this.minDate={year:t.getFullYear(),month:t.getMonth()+1,time:t.getTime()},this.maxDate={year:i.getFullYear(),month:i.getMonth()+1,time:i.getTime()},t="number"==typeof this.settings.date&&9999>=this.settings.date?new Date(this.settings.date,0,1):new Date(this.settings.date),isNaN(t.getTime())&&(t=new Date),this.defDate=t.getTime()<this.minDate.time?n.extend({},this.minDate):t.getTime()>this.maxDate.time?n.extend({},this.maxDate):{year:t.getFullYear(),month:t.getMonth()+1,time:t.getTime()},this.settings.saturday=6-this.settings.wday,this.settings.sunday=7<=7-this.settings.wday?0:7-this.settings.wday,this.language=this.getLanguage(this.settings.language),t=this.language.holiday,t=Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t),t&&this.language.holiday.length)for(this.holiday={},t=0,i=this.language.holiday.length;t<i;t++)this.holiday[this.language.holiday[t].day]=this.language.holiday[t].name;else this.holiday=!1},t.build=function(t){var r,i;for(!0===t&&(this.dom.pane=n("<div></div>",{"class":"cxcalendar"}),this.dom.paneHd=n("<div></div>",{"class":"cxcalendar_hd"}).appendTo(this.dom.pane),this.dom.paneBd=n("<div></div>",{"class":"cxcalendar_bd"}).appendTo(this.dom.pane),this.dom.paneHd.html('<a class="prev" href="javascript://" rel="prev"></a><a class="next" href="javascript://" rel="next"></a>'),this.dom.dateTxt=n("<div></div>",{"class":"intxt"}).appendTo(this.dom.paneHd),this.dom.dateSet=n("<div></div>",{"class":"inset"}).appendTo(this.dom.paneHd),this.dom.yearSet=n("<select></select>",{"class":"year"}).appendTo(this.dom.dateSet),this.dom.monthSet=n("<select></select>",{"class":"month"}).appendTo(this.dom.dateSet),this.dom.weekSet=n("<ul></ul>",{"class":"week"}).appendTo(this.dom.paneBd),this.dom.daySet=n("<ul></ul>",{"class":"days"}).appendTo(this.dom.paneBd)),r="",i=this.minDate.year;i<=this.maxDate.year;i++)r+='<option value="'+i+'">'+i+"</option>";for(this.dom.yearSet.html(r).val(this.defDate.year),r="",i=0;12>i;i++)r+='<option value="'+(i+1)+'">'+this.language.monthList[i]+"</option>";for(this.dom.monthSet.html(r).val(this.defDate.month),r="",i=0;7>i;i++)r+="<li",i===this.settings.saturday?r+=' class="sat"':i===this.settings.sunday&&(r+=' class="sun"'),r+=">",r+=7>i+this.settings.wday?this.language.weekList[i+this.settings.wday]:this.language.weekList[i+this.settings.wday-7],r+="</li>";this.dom.weekSet.html(r),"string"==typeof this.settings.baseClass&&(this.dom.pane.attr("class","cxcalendar"),this.dom.pane.addClass(this.settings.baseClass)),this.gotoDate(this.defDate.year,this.defDate.month),!0===t&&(this.dom.pane.appendTo("body"),this.dom.blockBg=n("<div></div>",{"class":"cxcalendar_lock"}).appendTo("body"),this.bindEvents())},t.bindEvents=function(){var t=this;t.dom.el.on("click",function(){t.show()});t.dom.blockBg.on("click",function(){t.hide()});t.dom.dateTxt.on("click",function(){t.dom.dateTxt.hide(),t.dom.dateSet.show()});t.dom.yearSet.on("change",function(){t.gotoDate(parseInt(t.dom.yearSet.val(),10),parseInt(t.dom.monthSet.val(),10))});t.dom.monthSet.on("change",function(){t.gotoDate(parseInt(t.dom.yearSet.val(),10),parseInt(t.dom.monthSet.val(),10))});t.dom.pane.on("click","a",function(){switch(this.rel){case"prev":return t.gotoDate(parseInt(t.dom.yearSet.val(),10),parseInt(t.dom.monthSet.val(),10)-1),!1;case"next":return t.gotoDate(parseInt(t.dom.yearSet.val(),10),parseInt(t.dom.monthSet.val(),10)+1),!1}});t.dom.daySet.on("click","li",function(){var i=n(this);i.hasClass("del")||t.setDate(i.data("year"),i.data("month"),i.data("day"))})},t.rebulidMonthSelect=function(n,t){for(var u=t||12,r="",i=n||1;i<=u;i++)r+='<option value="'+i+'">'+this.language.monthList[i-1]+"</option>";this.dom.monthSet.html(r)},t.show=function(){var i=this.settings.position,c=document.body.clientWidth,h=document.body.clientHeight,o=this.dom.pane.outerWidth(),f=this.dom.pane.outerHeight(),n=this.dom.el.offset().top,t=this.dom.el.offset().left,s=this.dom.el.outerWidth(),u=this.dom.el.outerHeight(),r=n+f+u>h?n-f:n+u,e=t+o>c?t-o-s:t;if("string"==typeof i&&i.length)switch(i){case"top":r=n-f;break;case"topLeft":case"topRight":r=n-f,e="topLeft"===i?t-o+s:t;break;case"bottom":r=n+u;break;case"bottomLeft":case"bottomRight":r=n+u,e="bottomLeft"===i?t-o+s:t;break;case"left":case"right":r=n+f+u>h?n+u-f:n,e="left"===i?t-o:t+s;break;case"leftTop":case"leftBottom":r="leftTop"===i?n+u-f:n,e=t-o;break;case"rightTop":case"rightBottom":r="rightTop"===i?n+u-f:n,e=t+s}this.dom.dateTxt.html('<span class="y">'+this.dom.yearSet.val()+'</span><span class="m">'+this.language.monthList[this.dom.monthSet.val()-1]+"</span>"),this.dom.pane.css({top:r,left:e}).show(),this.dom.blockBg.css({width:c,height:h}).show()},t.hide=function(){this.dom.pane.hide(),this.dom.blockBg.hide(),this.dom.dateSet.hide(),this.dom.dateTxt.show()},t.getDate=function(n){var t=this.dom.el.val();return t.length&&(t="string"==typeof n?this.formatDate(n,t):this.formatDate(this.settings.type,t)),t},t.gotoDate=function(n,t){var o,u,c;o="number"==typeof n&&9999>=n&&"number"==typeof t?new Date(n,t-1,1):new Date(n),u=o.getFullYear(),c=o.getMonth()+1,_theTime=o.getTime(),u<this.minDate.year||u<=this.minDate.year&&c<this.minDate.month?(u=this.minDate.year,c=this.minDate.month):(u>this.maxDate.year||u>=this.maxDate.year&&c>this.maxDate.month)&&(u=this.maxDate.year,c=this.maxDate.month),u===this.minDate.year&&u===this.maxDate.year?this.rebulidMonthSelect(this.minDate.month,this.maxDate.month):u===this.minDate.year?this.rebulidMonthSelect(this.minDate.month,12):u===this.maxDate.year?this.rebulidMonthSelect(1,this.maxDate.month):this.rebulidMonthSelect(),o=c-1;var a=this.getMonthDay(u),v=new Date(u,o,1),b=new Date,nt=b.getFullYear(),tt=b.getMonth()+1,b=b.getDate(),y=this.dom.el.val(),l,d,k,g;y.length&&(e.test(y)&&(y=parseInt(y,10)),l=new Date(y),isNaN(l.getTime())||(d=l.getFullYear(),k=l.getMonth()+1,g=l.getDate())),v=v.getDay()-this.settings.wday,0>v&&(v+=7);for(var y=7*Math.ceil((a[o]+v)/7),i,s,r,h,f,w="",p=0;p<y;p++)f=[],s=u,r=c,i=p-v+1,0>=i?(f.push("other"),1>=r?(s--,r=12,i=a[11]+i):(r--,i=a[o-1]+i)):i>a[o]&&(f.push("other"),12<=r?(s++,r=1,i-=a[0]):(r++,i-=a[o])),h=+new Date(s,r-1,i),"object"==typeof l&&s===d&&r===k&&i===g?f.push("selected"):s===nt&&r===tt&&i===b&&f.push("now"),p%7===this.settings.saturday?f.push("sat"):p%7===this.settings.sunday&&f.push("sun"),(h<this.minDate.time||h>this.maxDate.time)&&f.push("del"),this.holiday?"string"==typeof this.holiday["M"+r+"-"+i]?(f.push("holiday"),h=this.holiday["M"+r+"-"+i]):"string"==typeof this.holiday["D"+s+"-"+r+"-"+i]?(f.push("holiday"),h=this.holiday["D"+s+"-"+r+"-"+i]):h=s+"-"+r+"-"+i:h=s+"-"+r+"-"+i,w+="<li",f.length&&(w+=' class="'+f.join(" ")+'"'),w+=' title="'+h+'"',w+=' data-year="'+s+'" data-month="'+r+'" data-day="'+i+'">'+i+"</li>";return this.dom.daySet.html(w),this.dom.dateTxt.html('<span class="y">'+u+'</span><span class="m">'+this.language.monthList[o]+"</span>"),this.dom.yearSet.val(u),this.dom.monthSet.val(c),this},t.setDate=function(n,t,i){i="number"==typeof n&&9999>=n&&"number"==typeof t&&"number"==typeof i?new Date(n,t-1,i):new Date(n),isNaN(i.getTime())||(n=i.getFullYear(),t=i.getMonth()+1,_todayTime=i.getTime(),i=this.formatDate(this.settings.type,_todayTime),this.dom.el.val(i).trigger("change"),this.hide(),this.gotoDate(n,t))},t.clearDate=function(){this.dom.el.val(""),this.hide()},t.init(),this},n.cxCalendar.defaults={startDate:1950,endDate:2030,date:void 0,type:"YYYY-MM-DD",wday:0,position:void 0,baseClass:void 0,language:void 0},n.cxCalendar.languages={"default":{monthList:"1 2 3 4 5 6 7 8 9 10 11 12".split(" "),weekList:"日一二三四五六".split(""),holiday:[]}},n.fn.cxCalendar=function(t,i){return this.each(function(){n.cxCalendar(this,t,i)}),this}}),function(n){n.fly=function(t,i){var u={version:"1.0.0",autoPlay:!0,vertex_Rtop:20,speed:1.2,start:{},end:{},onEnd:n.noop},r=n(t);this.init=function(n){this.setOptions(n),this.settings.autoPlay&&this.play()},this.setOptions=function(t){var f,i,e;t=this.settings=n.extend(!0,{},u,t),f=t.start,i=t.end,r.css({marginTop:"0px",marginLeft:"0px",position:"fixed"}).appendTo("body"),null!=i.width&&null!=i.height&&n.extend(!0,f,{width:r.width(),height:r.height()}),e=Math.min(f.top,i.top)-Math.abs(f.left-i.left)/3,e<t.vertex_Rtop&&(e=Math.min(t.vertex_Rtop,Math.min(f.top,i.top)));var s=Math.sqrt(Math.pow(f.top-i.top,2)+Math.pow(f.left-i.left,2)),s=Math.ceil(Math.min(Math.max(Math.log(s)/.05-75,30),100)/t.speed),o=f.top==e?0:-Math.sqrt((i.top-e)/(f.top-e)),f=(o*f.left-i.left)/(o-1),i=i.left==f?0:(i.top-e)/Math.pow(i.left-f,2);n.extend(!0,t,{count:-1,steps:s,vertex_left:f,vertex_top:e,curvature:i})},this.play=function(){this.move()},this.move=function(){var t=this.settings,u=t.start,f=t.count,o=t.steps,i=t.end,s=u.left+(i.left-u.left)*f/o,c=0==t.curvature?u.top+(i.top-u.top)*f/o:t.curvature*Math.pow(s-t.vertex_left,2)+t.vertex_top;if(null!=i.width&&null!=i.height){var e=o/2,h=i.width-(i.width-u.width)*Math.cos(f<e?0:(f-e)/(o-e)*Math.PI/2),u=i.height-(i.height-u.height)*Math.cos(f<e?0:(f-e)/(o-e)*Math.PI/2);r.css({width:h+"px",height:u+"px","font-size":Math.min(h,u)+"px"})}r.css({left:s+"px",top:c+"px"}),t.count++,s=window.requestAnimationFrame(n.proxy(this.move,this)),f==o&&(window.cancelAnimationFrame(s),t.onEnd.apply(this))},this.destory=function(){r.remove()},this.init(i)},n.fn.fly=function(t){return this.each(function(){void 0==n(this).data("fly")&&n(this).data("fly",new n.fly(this,t))})}}(jQuery),function(n){n.fn.slideshowLite=function(){return this.each(function(){function f(n){1>=i||(v=n?setTimeout(function(){f(!1),t=t<i-1?parseInt(t+1):0,u(),f(!0)},3e3):clearTimeout(v))}function u(){h.hide().eq(t).show(),c.get(0)&&e&&e.removeClass("active").eq(t).addClass("active")}var r=n(this),h=r.children(".slideshow-content:first").find("li"),c=r.children(".slideshow-page:first"),s,o;r.children(".slideshow-option:first");var a=r.children(".so-prev:first"),l=r.children(".so-next:first"),e=null,i=h.length,v=null,t=0;if(n.each(h,function(t,i){n(i).css("z-index",t)}),1>=i&&(a.hide(),l.hide()),c.get(0)&&1<i){for(s=n("<ol>").appendTo(c),o=0;o<i;o++)s.append('<li><a href="javascript:void(0);">'+parseInt(o+1)+"</a></li>");e=s.children("li");e.on("mouseenter",function(){t=n(this).index(),u()})}u(),f(!0);r.on({mouseenter:function(){f(!1)},mouseleave:function(){f(!0)}});a.on("click",function(){t=0<t?t-1:i-1,u()});l.on("click",function(){t=t<i-1?parseInt(t+1):0,u()})})}}(jQuery),function(n){n.fn.dragsort=function(t){var r=n.extend({},n.fn.dragsort.defaults,t),u=[],i=null,f=null;return this.selector&&n("head").append("<style type='text/css'>"+(this.selector.split(",").join(" "+r.dragSelector+",")+" "+r.dragSelector)+" { cursor: pointer; }</style>"),this.each(function(t,e){n(e).is("table")&&n(e).children().size()==1&&n(e).children().is("tbody")&&(e=n(e).children().get(0));var o={draggedItem:null,placeHolderItem:null,pos:null,offset:null,offsetLimit:null,scroll:null,container:e,init:function(){n(this.container).attr("data-listIdx",t).mousedown(this.grabItem).find(r.dragSelector).css("cursor","pointer"),n(this.container).children(r.itemSelector).each(function(t){n(this).attr("data-itemIdx",t)})},grabItem:function(t){var f,e,o;if(!(t.which!=1||n(t.target).is(r.dragSelectorExclude))){for(f=t.target;!n(f).is("[data-listIdx='"+n(this).attr("data-listIdx")+"'] "+r.dragSelector);){if(f==this)return;f=f.parentNode}return i!=null&&i.draggedItem!=null&&i.dropItem(),n(t.target).css("cursor","move"),i=u[n(this).attr("data-listIdx")],i.draggedItem=n(f).closest(r.itemSelector),f=parseInt(i.draggedItem.css("marginTop")),e=parseInt(i.draggedItem.css("marginLeft")),i.offset=i.draggedItem.offset(),i.offset.top=t.pageY-i.offset.top+(isNaN(f)?0:f)-1,i.offset.left=t.pageX-i.offset.left+(isNaN(e)?0:e)-1,r.dragBetween||(f=n(i.container).outerHeight()==0?Math.max(1,Math.round(.5+n(i.container).children(r.itemSelector).size()*i.draggedItem.outerWidth()/n(i.container).outerWidth()))*i.draggedItem.outerHeight():n(i.container).outerHeight(),i.offsetLimit=n(i.container).offset(),i.offsetLimit.right=i.offsetLimit.left+n(i.container).outerWidth()-i.draggedItem.outerWidth(),i.offsetLimit.bottom=i.offsetLimit.top+f-i.draggedItem.outerHeight()),f=i.draggedItem.height(),e=i.draggedItem.width(),o=i.draggedItem.attr("style"),i.draggedItem.attr("data-origStyle",o?o:""),r.itemSelector=="tr"?(i.draggedItem.children().each(function(){n(this).width(n(this).width())}),i.placeHolderItem=i.draggedItem.clone().attr("data-placeHolder",!0),i.draggedItem.after(i.placeHolderItem),i.placeHolderItem.children().each(function(){n(this).css({borderWidth:0,width:n(this).width()+1,height:n(this).height()+1}).html("&nbsp;")})):(i.draggedItem.after(r.placeHolderTemplate),i.placeHolderItem=i.draggedItem.next().css({height:f,width:e}).attr("data-placeHolder",!0)),i.draggedItem.css({position:"absolute",opacity:.8,"z-index":999,height:f,width:e}),n(u).each(function(n,t){t.createDropTargets(),t.buildPositionTable()}),i.scroll={moveX:0,moveY:0,maxX:n(document).width()-n(window).width(),maxY:n(document).height()-n(window).height()},i.scroll.scrollY=window.setInterval(function(){if(r.scrollContainer!=window)n(r.scrollContainer).scrollTop(n(r.scrollContainer).scrollTop()+i.scroll.moveY);else{var t=n(r.scrollContainer).scrollTop();(i.scroll.moveY>0&&t<i.scroll.maxY||i.scroll.moveY<0&&t>0)&&(n(r.scrollContainer).scrollTop(t+i.scroll.moveY),i.draggedItem.css("top",i.draggedItem.offset().top+i.scroll.moveY+1))}},10),i.scroll.scrollX=window.setInterval(function(){if(r.scrollContainer!=window)n(r.scrollContainer).scrollLeft(n(r.scrollContainer).scrollLeft()+i.scroll.moveX);else{var t=n(r.scrollContainer).scrollLeft();(i.scroll.moveX>0&&t<i.scroll.maxX||i.scroll.moveX<0&&t>0)&&(n(r.scrollContainer).scrollLeft(t+i.scroll.moveX),i.draggedItem.css("left",i.draggedItem.offset().left+i.scroll.moveX+1))}},10),i.setPos(t.pageX,t.pageY),n(document).bind("selectstart",i.stopBubble),n(document).bind("mousemove",i.swapItems),n(document).bind("mouseup",i.dropItem),r.scrollContainer!=window&&n(window).bind("DOMMouseScroll mousewheel",i.wheel),!1}},setPos:function(t,u){var e=u-this.offset.top,s=t-this.offset.left,o,f;r.dragBetween||(e=Math.min(this.offsetLimit.bottom,Math.max(e,this.offsetLimit.top)),s=Math.min(this.offsetLimit.right,Math.max(s,this.offsetLimit.left))),this.draggedItem.parents().each(function(){if(n(this).css("position")!="static"&&(!n.browser.mozilla||n(this).css("display")!="table")){var t=n(this).offset();return e-=t.top,s-=t.left,!1}}),r.scrollContainer==window?(u-=n(window).scrollTop(),t-=n(window).scrollLeft(),u=Math.max(0,u-n(window).height()+5)+Math.min(0,u-5),t=Math.max(0,t-n(window).width()+5)+Math.min(0,t-5)):(o=n(r.scrollContainer),f=o.offset(),u=Math.max(0,u-o.height()-f.top)+Math.min(0,u-f.top),t=Math.max(0,t-o.width()-f.left)+Math.min(0,t-f.left)),i.scroll.moveX=t==0?0:t*r.scrollSpeed/Math.abs(t),i.scroll.moveY=u==0?0:u*r.scrollSpeed/Math.abs(u),this.draggedItem.css({top:e,left:s})},wheel:function(t){if((n.browser.safari||n.browser.mozilla)&&i&&r.scrollContainer!=window){var f=n(r.scrollContainer),u=f.offset();t.pageX>u.left&&t.pageX<u.left+f.width()&&t.pageY>u.top&&t.pageY<u.top+f.height()&&(u=t.detail?t.detail*5:t.wheelDelta/-2,f.scrollTop(f.scrollTop()+u),t.preventDefault())}},buildPositionTable:function(){var i=this.draggedItem==null?null:this.draggedItem.get(0),t=[];n(this.container).children(r.itemSelector).each(function(r,u){if(u!=i){var f=n(u).offset();f.right=f.left+n(u).width(),f.bottom=f.top+n(u).height(),f.elm=u,t.push(f)}}),this.pos=t},dropItem:function(){if(i.draggedItem!=null){n(i.container).find(r.dragSelector).css("cursor","pointer"),i.placeHolderItem.before(i.draggedItem),i.draggedItem.attr("style",i.draggedItem.attr("data-origStyle")).removeAttr("data-origStyle"),i.placeHolderItem.remove(),n("[data-dropTarget]").remove(),window.clearInterval(i.scroll.scrollY),window.clearInterval(i.scroll.scrollX);var t=!1;return n(u).each(function(){n(this.container).children(r.itemSelector).each(function(i){parseInt(n(this).attr("data-itemIdx"))!=i&&(t=!0,n(this).attr("data-itemIdx",i))})}),t&&r.dragEnd.apply(i.draggedItem),i.draggedItem=null,n(document).unbind("selectstart",i.stopBubble),n(document).unbind("mousemove",i.swapItems),n(document).unbind("mouseup",i.dropItem),r.scrollContainer!=window&&n(window).unbind("DOMMouseScroll mousewheel",i.wheel),!1}},stopBubble:function(){return!1},swapItems:function(t){if(i.draggedItem==null)return!1;i.setPos(t.pageX,t.pageY);for(var e=i.findPos(t.pageX,t.pageY),s=i,o=0;e==-1&&r.dragBetween&&o<u.length;o++)e=u[o].findPos(t.pageX,t.pageY),s=u[o];return e==-1||n(s.pos[e].elm).attr("data-placeHolder")?!1:(f==null||f.top>i.draggedItem.offset().top||f.left>i.draggedItem.offset().left?n(s.pos[e].elm).before(i.placeHolderItem):n(s.pos[e].elm).after(i.placeHolderItem),n(u).each(function(n,t){t.createDropTargets(),t.buildPositionTable()}),f=i.draggedItem.offset(),!1)},findPos:function(n,t){for(var i=0;i<this.pos.length;i++)if(this.pos[i].left<n&&this.pos[i].right>n&&this.pos[i].top<t&&this.pos[i].bottom>t)return i;return-1},createDropTargets:function(){r.dragBetween&&n(u).each(function(){var r=n(this.container).find("[data-placeHolder]"),t=n(this.container).find("[data-dropTarget]");r.size()>0&&t.size()>0?t.remove():r.size()==0&&t.size()==0&&n(this.container).append(i.placeHolderItem.clone().removeAttr("data-placeHolder").attr("data-dropTarget",!0))})}};o.init(),u.push(o)}),this},n.fn.dragsort.defaults={itemSelector:"li",dragSelector:"li",dragSelectorExclude:"input, textarea, a[href]",dragEnd:function(){},dragBetween:!1,placeHolderTemplate:"<li>&nbsp;</li>",scrollContainer:window,scrollSpeed:5}}(jQuery),function(n){var i="tpui",t="tp-ui",h="icon-",o,s,e,r,u,f;n.tpUI={_base:{},_vendors:["ms","moz","webkit","o"],_agent:function(){return o!==undefined?o:o=navigator.userAgent.toLowerCase()},_device:function(){if(e!==undefined)return e;var t=this,n=t._agent();return $d={},$d.u=n,$d.os={name:null,version:null},$d.screenWidth=window.screen.width,$d.screenHeight=window.screen.height,$d.avaWidth=window.screen.availWidth,$d.avalHeight=window.screen.availHeight,$d.pageWidth=document.documentElement.clientWidth,$d.pageHeight=document.documentElement.clientHeight,$d.core="",$d.mobile=t._isMobile(),$d.ios=n.indexOf("iphone os")>-1,$d.android=n.match(/(Android)/i),$d.iPhone=n.match(/(iPhone|ios)/i),$d.iPad=n.match(/(iPad|ios)/i),$d.webApp=n.indexOf("safari")==-1||n.indexOf("mobile safari")==-1,e=$d},_isIE:function(){return r!==undefined?r:r=this._agent().indexOf("msie")>-1?!0:!1},_isMobile:function(){return u!==undefined?u:u=navigator.userAgent.match(/(iPhone|iPod|Android|ios|SymbianOS)/i)},_isWebApp:function(){return f!==undefined?f:f=this._agent().indexOf("webapp")>-1?!0:!1},_obj:function(t,i){var r=n.type(t)!=="object"?n(t):t;return i&&i==!0?r[0]:r},_intRevise:function(n,t,i,r){return n=parseFloat(n),t=t!==undefined?parseFloat(t):null,i=i!==undefined?parseFloat(i):null,r=r||!1,n=t!==null&&n<=t?r&&i!==null?i:t:n,n=i!==null&&n>=i?r&&i!==null?i:i:n},_valParse:function(n){var t={},n=n?n.split(","):[0],i=n.length;switch(i){case 4:t={top:parseInt(n[0]),right:parseInt(n[1]),bottom:parseInt(n[2]),left:parseInt(n[3])};break;case 3:t={top:parseInt(n[0]),right:parseInt(n[1]),bottom:parseInt(n[2]),left:parseInt(n[1])};break;case 2:t={top:parseInt(n[0]),right:parseInt(n[1]),bottom:parseInt(n[0]),left:parseInt(n[1])};default:t={top:parseInt(n[0]),right:parseInt(n[0]),bottom:parseInt(n[0]),left:parseInt(n[0])}}return t},_decPlaces:function(n,t){var n=n.toString().split("."),t=t||0;return n[1]?n[1].length:parseInt(t)},_interval:function(t,i,r){return t=parseFloat(t),isNaN(t)&&(t=0),n.isNumeric(i)&&t<=i&&(t=i),n.isNumeric(r)&&t>=r&&(t=r),t},_dimensions:function(t){var i=t[0];return i.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:n.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:t.pageY,left:t.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}},_scrollbarWidth:function(){if(s!==undefined)return s;var r=0,i=0,t={};return t.base=n("<div>").css({display:"block",position:"absolute",width:"50px",height:"50px",overflow:"hidden"}).appendTo(n("body")),t.sub=n("<div>").css({width:"auto",height:"100px"}).appendTo(t.base),r=t.sub[0].offsetWidth,t.base.css("overflow","scroll"),i=t.sub[0].offsetWidth,r===i&&(i=t.base[0].clientWidth),t.base.remove(),s=r-i},_mousePoint:function(n,t){var u=this,f=u._obj(n),n=u._obj(n,!0),i=f.width(),r=f.height(),o=(t.pageX-n.offsetLeft-i/2)*(i>r?r/i:1),e=(t.pageY-n.offsetTop-r/2)*(r>i?i/r:1);return Math.round((Math.atan2(e,o)*(180/Math.PI)+180)/90+3)%4},_event:function(n,t){return n.originalEvent.touches?(n=n.originalEvent,t!==undefined?n.touches[t]||n.changedTouches[t]:n.touches):n},_windowLock:function(t){var f=this._scrollbarWidth(),r=n("body"),i=n("html"),u=n(window),t=t||!1,e=this._dimensions(u);t?(r.css({overflow:"hidden"}),i.css({"margin-left":0-f,overflow:"hidden"})):(r.css({overflow:"auto"}),i.css({"margin-left":0,overflow:"auto"}))},_isInWindow:function(t,i){var l=n(window),s=this._obj(t),u=this._dimensions(l),r=this._dimensions(s),c=!!(r.width||r.height)&&s.css("display")!=="none";if(!c)return!1;var f=u.offset.left,e=u.offset.top,o=r.offset.left,h=r.offset.top;return i=n.extend({top:0,left:0},i),h+r.height>=e&&h-i.top<=e+u.height&&o+r.width>=f&&o-i.left<=f+u.width},_animationFrame:function(){for(var i=0,t=this._vendors,n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var r=+new Date,t=Math.max(0,16-(r-i)),u=null;return i=r+t,window.setTimeout(function(){n(i)},t)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){return clearTimeout(n)})},_uiItem:function(){return n("<div>").addClass(t+"-item")},_uiSub:function(){return n("<div>").addClass(t+"-sub")},_uiRefer:function(){return n("<div>").addClass(t+"-refer")},_uiHide:function(){return n("<div>").addClass(t+"-hide")},_uiMask:function(){return n("<div>").addClass(t+"-mask")},_uiClear:function(){return n("<div>").addClass(t+"-clear")},_uiForm:function(){return this._uiItem().addClass(t+"-forminput")},_uiIcon:function(){return n("<div>").addClass(t+"-icon").append("<i>&nbsp;</i>")},_uiHandle:function(i){return n("<div>").addClass(t+"-sub "+t+"-handle").append("<span><em>"+i||"</em></span>")},_uiHandleLink:function(i){return n("<div>").addClass(t+"-sub "+t+"-handle-link").append('<a href="javascript:void(0);"><em>'+i+"</em></a>")},_uiHandleButton:function(i){return n("<div>").addClass(t+"-sub "+t+"-handle-button").append('<button type="button"><em>'+i+"</em></button>")},_uiImage:function(n,t){return'<img src="'+n+'" alt="'+(t||"")+'" />'},_icon:function(i,r){var u=this;r=r||i,n.each([null,"before","after"],function(n,f){var h=f?"data-icon-":"data-icon",e=f?f:"",s=i.attr(h+e)||null,o=i.attr(h+e+"-patch")||null,f=f||"base";(s||o)&&($thisIcon=u._iconSet(f,s,o),e=="before"?r.before($thisIcon).addClass(t+"-iconat-"+f):r.after($thisIcon).addClass(t+"-iconat-"+f))})},_iconSet:function(n,i,r){var u=this._uiIcon().addClass(t+"-icon-"+n);return i&&u.addClass(h+i),r&&u.empty().append(this._uiImage(r,n)),u},_gadgets:function(t,r,u){var f=i+t,o=this,u={},e={};if(!n.isFunction(n[f])){n.error("$."+f+"() 不存在!");return}u=u?n[f].prototype:n[f],e=u._option||{},n.fn[f]=function(t,i){var o=typeof t=="string",u=o?n.extend({},e):n.extend({},e,t);return this.each(function(e,s){if(n(s).get(0)){var c=n(s),h=n.data(this,f);o?(h||(h=n.data(this,f,new r(c,u))),h._init&&h._init(e),h.$this.trigger(t,i)):(h?h._optionSet?n.data(this,f,h._optionSet(u)):"":n.data(this,f,new r(c,u)),h=n.data(this,f),h._init&&h._init(e))}})}}},n.tpUI._animationFrame(),n.tpuiBacktop=function(t,i){return this.$ui=n.tpUI||{},this.$this=this.$ui._obj(t),this.$document=n("html,body"),this.options=i,this.name="backtop",this._uiEvent(),this},n.tpuiBacktop.prototype={_option:{speed:600,easing:"swing",onBacktop:n.noop,version:"1.0"},_uiEvent:function(){var n=this;this.$this.on({"click.backtop":function(t){t.preventDefault(),n._run()}})},_run:function(){var r=this,n=this.options,u=n.speed,t=n.easing,i=n.onBacktop;this.$document.stop(!0,!0).animate({scrollTop:0},u,t,function(){i.apply(r)})}},n.tpUI._gadgets("Backtop",n.tpuiBacktop,n.tpuiBacktop.prototype),n.tpuiAnimation={_animateEnd:"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oAnimationEnd animationEnd",_item:{animate:null,callback:n.noop}},n.fn[i+"Animation"]=function(t,i){var f=this,r=n.tpuiAnimation,u=n.extend(!0,{},r._item,{animate:t,callback:i});return this.each(function(){var i=n(this),t=u.animate,f=u.callback;i.removeClass(t).addClass(t).one(r._animateEnd,function(){i.removeClass(t),f.apply(this)})})},n.tpuiPosition=function(i,r){return this.$ui=this._ui,this.$this=this.$ui._obj(i),this.thisClass=t+"-"+this._name,this.typeClass=this.$this.attr("data-type")||"base",this.options=r,this.$this=this.$ui._obj(i),this.$refer=this.options.of?this.$ui._obj(this.options.of):n(window),this._uiEvent(),this},n.tpuiPosition.prototype={_ui:n.tpUI||{},_name:"position",_dataName:i+"Position",_option:{of:null,my:"left,top",at:"left,top",offset:null,speed:600,easing:"swing",flip:"none",onFlip:n.noop,onRever:n.noop,onMoveEnd:n.noop,version:"2.0"},_init:function(){this._position()},_uiEvent:function(){var t=this;this.$this.on({_to:function(n,i){var u={},r=i?i.split(",").slice(0,2):null;r&&(u.x=r[0],u.y=r[1]),t._slideTo()},_update:function(){t._position()}})},_position:function(){this.thisSize=this.$ui._dimensions(this.$this),this.referSize=this.$ui._dimensions(this.$refer),this.offSet=this.$ui._valParse(this.options.offset||0),this._operation(),this._moveTo()},_operation:function(){var n=this,r=this.options,t=r.at.split(/[^a-z]/).slice(0,2),i=r.my.split(/[^a-z]/).slice(0,2);t[0]=t[0]||"left",t[1]=t[1]||"top",i[0]=i[0]||"left",i[1]=i[1]||"top";switch(i[0]){case"center":n.thisMyLeft=n.thisSize.width/2;break;case"right":n.thisMyLeft=n.thisSize.width;break;case"left":default:n.thisMyLeft=0}switch(i[1]){case"middle":n.thisMyTop=n.thisSize.height/2;break;case"bottom":n.thisMyTop=n.thisSize.height;break;case"top":default:n.thisMyTop=0}switch(t[0]){case"center":n.thisAtLeft=n.referSize.width/2,n.thisAtLeft-=n.thisMyLeft,n.thisAtLeft+=n.referSize.offset.left;break;case"right":n.thisAtLeft=n.referSize.width,n.thisAtLeft+=n.thisMyLeft,n.thisAtLeft+=n.referSize.offset.left;break;case"left":default:n.thisAtLeft=n.referSize.width,n.thisAtLeft-=n.thisMyLeft,n.thisAtLeft+=n.referSize.offset.left}switch(t[1]){case"middle":n.thisAtTop=n.referSize.height/2,n.thisAtTop-=n.thisMyTop,n.thisAtTop+=n.referSize.offset.top;break;case"bottom":n.thisAtTop=n.referSize.height,n.thisAtTop+=n.thisMyTop,n.thisAtTop+=n.referSize.offset.top;break;case"top":default:n.thisAtTop=n.referSize.height,n.thisAtTop-=n.thisMyTop,n.thisAtTop+=n.referSize.offset.top}},_moveTo:function(){this.$this.css({position:"absolute",left:this.thisAtLeft,top:this.thisAtTop})},_slideTo:function(){var t=this;this.$this.css({position:"absolute"}).stop(!0,!1).animate({left:this.thisAtLeft,top:this.thisAtTop},this.options.speed,this.options.easing,function(){this.options.onMoveEnd(t)})},_referArea:function(){var s=this,t={},o=thisData.option,i=o.my.split(",").slice(0,2),u=parseInt(thisData.baseSize.width),r=parseInt(thisData.baseSize.height),f=parseInt(thisData.referSize.width),e=parseInt(thisData.referSize.height);return t.flipArea={},t.flipArea.minX=0,t.flipArea.maxX=f-u,t.flipArea.minY=0,t.flipArea.maxY=e-r,i[0]=="center"?(t.flipArea.minX=Math.floor(u/2),t.flipArea.maxX=parseInt(f+t.flipArea.minX)):i[0]=="right"&&(t.flipArea.minX-=u),i[1]=="middle"?(t.flipArea.minY=Math.floor(r/2),t.flipArea.maxY=parseInt(e+t.flipArea.minY)):i[0]=="bottom"&&(t.flipArea.minY-=r),n.extend(thisData,t)}},n.tpUI._gadgets("Position",n.tpuiPosition,n.tpuiPosition.prototype),n.tpuiDrag=function(i,r){return this.$ui=n.tpUI||{},this.$this=this.$ui._obj(i),this.options=r,this.name="drag",this.$uiHandle=this.options.handle?this.$this.find(this.options.handle).eq(0):this.$this,this.thisClass=t+"-"+this.name,this.canDrag=!1,this._uiEvent(),this},n.tpuiDrag.prototype={_option:{delay:0,axis:"both",contain:"document",helper:"original",grid:!1,opacity:!1,handle:null,cancel:null,revert:!1,revertDuration:0,snap:!1,snapMode:"both",snapTolerance:20,zIndex:!1,onStart:n.noop,onMove:n.noop,onEnd:n.noop,version:"1.0"},_uiEvent:function(){var i=this,r=this.$ui,u=n(document);this.$uiHandle.on({"mousedown.dragStart touchstart.dragStart":function(n){n.preventDefault(),n=r._event(n,0),i.canDrag=!0,i.objSize=r._dimensions(i.$this),i.$this.css({position:"absolute"}),i.startMousePos={x:n.pageX,y:n.pageY},i.startObjPos={x:i.startMousePos.x-i.objSize.offset.left,y:i.startMousePos.y-i.objSize.offset.top};i.options.onStart(i);u.on({"mousemove.dragMove touchmove.dragMove":function(n){if(n=r._event(n,0),i.canDrag){i.moveMousePos={x:n.pageX,y:n.pageY},i.moveObjPos={x:i.moveMousePos.x-i.startObjPos.x,y:i.moveMousePos.y-i.startObjPos.y},i._moveTo();i.options.onMove(i)}},"mouseup.dragEnd mouseleave.dragEnd touchend.dragEnd touchcancel.dragEnd":function(n){n=r._event(n,0),i.canDrag=!1,i.endMousePos={x:n.pageX,y:n.pageY},i.dragDistance={x:i.startMousePos.x-i.endMousePos.x,y:i.startMousePos.y-i.endMousePos.y},i.options.revert,u.off("mousemove.dragMove touchmove.dragMove mouseup.dragEnd mouseleave.dragEnd touchend.dragEnd touchcancel.dragEnd");i.options.onEnd(i)}})}})},_revert:function(){},_moveTo:function(){var n=this;switch(n.options.axis){case"x":n.$this.css({left:n.moveObjPos.x});break;case"y":n.$this.css({top:n.moveObjPos.y});break;case"both":default:n.$this.css({left:n.moveObjPos.x,top:n.moveObjPos.y})}}},n.tpUI._gadgets("Drag",n.tpuiDrag,n.tpuiDrag.prototype),n.tpuiLoading=function(i,r){return this.$ui=n.tpUI||{},this.$this=this.$ui._obj(i),this.$win=n(window),this.options=r,this.name="loading",this.thisClass=t+"-"+this.name,this.typeClass=this.options.typeClass,this.isShow=!1,this.delayOut=null,this.isBody=this.$this[0].tagName=="BODY"?!0:!1,this._create(),this},n.tpuiLoading.prototype={_option:{autoOpen:!1,outMode:"hide",delay:0,escape:!0,image:!0,imagePath:null,imageName:null,info:!1,infoSet:null,inner:!1,innerSet:null,mask:!1,maskStyle:"base",referBox:null,speed:600,title:!0,titleSet:"加载中",typeClass:"base",onCreate:n.noop,onShow:n.noop,onHide:n.noop,width:null,height:null,version:"2.0"},_init:function(){this.options.autoOpen&&this._show()},_create:function(){var i=this.thisClass,t=this.options;this.isBody&&(this.$loadWrap=n("<div>").css({position:"fixed",width:"100%",left:0,top:0,"z-index":999}).appendTo(n("body"))),this.$uiThis=this.$ui._uiItem().addClass(i+" "+i+"-"+this.typeClass),this.$uiContent=this.$ui._uiSub().addClass(i+"-content").appendTo(this.$uiThis),this.$uiContentInner=this.$ui._uiSub().addClass(i+"-content-inner").appendTo(this.$uiContent),t.image&&(this.$uiImage=this.$ui._uiSub().addClass(i+"-image "+i+"-image-base").appendTo(this.$uiContentInner),t.imageName&&this.$uiImage.removeClass(i+"-image-base").addClass(t.imageName),t.imagePath&&this.$uiImage.removeClass(i+"-image-base").append('<img src="'+t.imagePath+'" alt="" />')),t.title&&(this.$uiTitle=this.$ui._uiSub().addClass(i+"-title").append("<h2><span>"+t.titleSet+"</span></h2>").appendTo(this.$uiContentInner)),t.info&&(this.$uiTitle=this.$ui._uiSub().addClass(i+"-info").append("<p>"+t.infoSet+"</p>").appendTo(this.$uiContentInner)),t.refer&&(this.$uiTitle=this.$ui._uiSub().addClass(this.thisClass+"-refer").append(t.referInner).appendTo(this.$uiContentInner)),t.mask&&(this.$uiMask=this.$ui._uiMask().addClass(this.thisClass+"-"+t.maskStyle).appendTo(this.$uiThis)),this.$uiThis.appendTo(this.$loadWrap),this._uiEvent(),this._runInit();t.onCreate(this)},_uiEvent:function(){var n=this;this.$this.on({"_show.loading":function(){n._show()},"_hide.loading":function(){n._hide()},"_remove.loading":function(){n._remove()}})},_docBind:function(){var n=this,t=this.options;this.$win.on({"resize.loading":function(){n._runInit()},"keyup.loading":function(i){i.preventDefault(),t.escape&&i.keyCode==27&&n._hide()}})},_docUnBind:function(){var n=this;this.$win.off("resize.loading keyup.loading")},_runInit:function(){var t=this,n=this.options;this.$uiThis.show(),this.isBody?(this.thisSize=this.$ui._dimensions(this.$win),this.$uiThis.css({position:"absolute",left:0,top:0})):this.thisSize=this.$ui._dimensions(this.$this),n.width&&(this.thisSize.width=Math.abs(parseInt(n.width))),n.height&&(this.thisSize.height=Math.abs(parseInt(n.height))),this.cntentSize||(this.cntentSize=this.$ui._dimensions(this.$uiContent)),this.$this.css("position")||this.$this.css("position","relative"),this.$uiThis.css({width:this.thisSize.width,height:this.thisSize.height}),this.$uiContent.css({position:"absolute",top:"50%",left:"50%","margin-top":0-t.cntentSize.height/2,"margin-left":0-t.cntentSize.width/2}),this.autoOpen||this.$uiThis.hide()},_show:function(){var n=this,t=this.options;this.isShow||(this.isShow=!0,n._docBind(),n.delayOut=clearTimeout(n.delayOut),this.$uiThis.stop(!0,!0).fadeIn(t.speed,function(){t.onShow(n);t.delay&&t.delay>0&&(n.delayOut=setTimeout(function(){n._hide()},t.delay))}),this.isBody&&this.$ui._windowLock(!0))},_hide:function(){var n=this,t=this.options;if(t.outMode=="remove"){n._remove();return}this.isShow&&(this.isShow=!1,n._docUnBind(),n.delayOut=clearTimeout(n.delayOut),this.$uiThis.stop(!0,!0).fadeOut(t.speed,function(){t.onHide(n)}),this.isBody&&this.$ui._windowLock(!1))},_remove:function(){var n=this,t=this.options;this.isShow&&(this.isShow=!1,n._docUnBind(),n.delayOut=clearTimeout(n.delayOut),this.$uiThis.stop(!0,!1).fadeOut(t.speed,function(){n.$uiThis.remove(),n.$this.removeData(i+"Loading")}),this.isBody&&this.$ui._windowLock(!1))}},n.tpUI._gadgets("Loading",n.tpuiLoading,n.tpuiLoading.prototype),n.tpuiMedia=function(i){return this.$ui=n.tpUI||{},this.options=n.extend({},this._option,i),this.type=this.options.type,this.isVideo=this.type=="video"?!0:!1,this.info={mediaType:this.mediaSuffix},this.struct={},this.thisClass=t+"-media",this.mediaObj=this.isVideo?this._video():this._audio(),this.media=this.mediaObj.get(0),this.media.controls="controls",this._create(),this},n.tpuiMedia.prototype={_option:{type:"audio",box:null,autoPlay:!1,loop:0,volume:100,poster:null,width:null,height:null,onCreate:n.noop,tipsMode:n.noop,errorMode:n.noop,version:"1.0"},_isSupport:function(){},_create:function(){var r=this.$ui,u=this.options,t=this.thisClass,i=this.struct;this.$mediaBox=u.box?r._obj(u.box):n("body"),i.$uiThis=r._uiItem().addClass(t+" "+t+"-"+this.type).appendTo(this.$mediaBox),i.$uiPlayer=r._uiSub().addClass(t+"-player").append(this.mediaObj).appendTo(i.$uiThis),this._controlsEvent(),this._callBack("onCreate")},_controlsEvent:function(){var n=this,i=this.options,t=this.info;this.mediaObj.on({play:function(){n._play()},pushe:function(){n._pushe()},stop:function(){n._stop()},ended:function(){n.media.ended&&n._callBack("onEnd")},waiting:function(){n._tips("播放源进度加载中...")},progress:function(){n._tips("媒体资源加载中...")},playing:function(){n._tips("媒体资源加载成功，开始播放")},seeking:function(){n._tips("正在调整到指定位置,请稍后")},seeked:function(){n._tips("已从指定位置开始播放")},stalled:function(){},abort:function(){},suspend:function(){},volumechange:function(){n._tips("音量已更改,当前音量："+n.media.volume)},loadstart:function(){n.loadStartTime=new Date,n._callBack("onLoadStart")},loadedmetadata:function(){n.loadEndTime=new Date,n.loadTime=n.loadEndTime-n.loadStartTime,n._infoRead(),n._autoPlay(i.autoPlay),n._callBack("onLoadEnd")},timeupdate:function(){t.currentTime=n.media.currentTime,t.currentTimes=n._times(t.duration-t.currentTime)},error:function(){var i=n.media.error.code;switch(i){case 1:n._error("取回过程被用户中止");break;case 2:n._error("资源文件加载错误");break;case 3:n._error("错误的播放源编码，请确保您播放的是对应格式的播放源");break;case 4:n._error("文件不存在，或不支持的文件格式");break;default:n._error("播放器出现未知错误")}return}})},_infoRead:function(){var t=this.media,n=this.info;n.file=t.currentSrc,n.readyState=t.readyState,n.networkState=t.networkState,n.playbackRate=t.playbackRate,n.muted=t.muted,n.volume=t.volume,n.duration=t.duration,n.durations=this._times(t.duration),n.currentTime=t.currentTime,n.currentTimes=this._times(t.currentTime)},_autoPlay:function(n){this.media.autoplay=n},_audio:function(){return n("<audio>")},_video:function(){return n("<video>")},_load:function(n){this.media.src=n,this.media.load()},_play:function(n){n&&this._load(n),this.media.play(),this._callBack("onPlay")},_stop:function(){this.media.pause(),this.media.currentTime=0,this.isStoped=!0,this._callBack("onStop")},_pushe:function(){this.media.pause(),this._callBack("onPushed")},_volume:function(n){this.media.volume=(parseInt(n)/100).toFixed(1)},_muteToggle:function(n){this.media.muted=n||!this.media.muted?!0:!1},_loop:function(n){var t=this,n=parseInt(n);if(n>=0)if(n==0)this._play();else{this.playIndex=0;this.mediaObj.on("ended",function(){setTimeout(function(){t.playIndex<=n&&(t._play(),t.playIndex++)},t.media.duration)})}else this.media.loop=!0,this._play()},_poster:function(n){this.isVideo&&(this.media.poster=n||this.options.poster||"")},_times:function(n,t){var f="",n=parseInt(n),u=n,i=0,r=0;return n>=60&&(i=parseInt(n/60),i=i<10?"0"+i:i,u=parseInt(n%60),u=u<10?"0"+u:u,i>60&&(r=parseInt(i/60),r=r<10?"0"+r:r,i=parseInt(i%60),i=i<10?"0"+i:i)),t?f=r+":"+i+":"+u:(f+=r?r+":":"",f+=i?i+":":"",f+=u),f},_callBack:function(n){this.options[n]&&this.options[n](this)},_tips:function(n){this.options.tipsMode(n)},_error:function(n){this.options.errorMode(n)}},n.tpuiFormItem={_version:"2.1.2",_baseEvent:function(){var n=this,r=n.struct,i=t+"-form-";this.$this.on({"disable.formDisable":function(){n.isDisabled=!0,r.$uiThis.addClass(i+"disabled"),n._attribute("disabled","disabled")},"enable.formEnble":function(){n.isDisabled=!1,r.$uiThis.removeClass(i+"disabled"),n._attribute("disabled",!1)},"readonly.formReadonly":function(){n.isReadonly=!0,r.$uiThis.addClass(i+"readonly"),n._attribute("readonly",!1)},"writable.formWritable":function(){n.isReadonly=!1,r.$uiThis.removeClass(i+"readonly"),n._attribute("readonly","readonly")}})},_initState:function(){this.isDisabled&&this.$this.trigger("disable.formDisable"),this.isReadonly&&this.$this.trigger("readonly.formReadonly")},_attribute:function(n,t){t?this.$this.attr(n,t).prop(n,!0):this.$this.removeAttr(n).prop(n,!1)},_checked:function(n,i,r){i?(r.addClass(t+"-active"),this._attribute("checked","checked")):(r.removeClass(t+"-active"),this._attribute("checked",null))},_numerInit:function(n,t){return parseFloat(this.$this.attr(n))||t},_isDisable:function(){return this.$this[0].disabled},_isReadonly:function(){return this.$this[0].readonly}},n.tpuiButton=function(i){if(this.$ui=n.tpUI||{},this.$this=this.$ui._obj(i),this.$this[0].tagName==="A"||this.$this[0].tagName==="BUTTON"||this.$this[0].type==="submit"||this.$this[0].type==="reset"||this.$this[0].type==="button")return this.name="button",this.thisClass=t+"-"+this.name,this.typeClass=this.$this.attr("data-type")||"default",this._create(),this},n.tpuiButton.prototype=n.extend({},n.tpuiFormItem,{_init:function(){this.isDisabled=this._isDisable(),this.isReadonly=this._isReadonly(),this._baseEvent(),this._initState()},_create:function(){var t=this.thisClass,n=this.struct={};n.$uiThis=this.$ui._uiForm().addClass(t+"-noselect "+t+" "+t+"-"+this.typeClass),this.$this.before(n.$uiThis),n.$uiBase=this.$ui._uiSub().addClass(t+"-base").append(this.$this).appendTo(n.$uiThis),this.$ui._icon(this.$this,n.$uiBase)}}),n.tpUI._gadgets("Button",n.tpuiButton,n.tpuiButton.prototype),n.tpuiText=function(i){if(this.$ui=n.tpUI||{},this.$this=this.$ui._obj(i),this.$this[0].type==="text"||this.$this[0].type==="password"||this.$this[0].tagName==="INPUT")return this.name="text",this.thisClass=t+"-"+this.name,this.typeClass=this.$this.attr("data-type")||"base",this._create(),this},n.tpuiText.prototype=n.extend({},n.tpuiFormItem,{_init:function(){this.isDisabled=this._isDisable(),this.isReadonly=this._isReadonly(),this._baseEvent(),this._initState()},_create:function(){var t=this.thisClass,n=this.struct={};n.$uiThis=this.$ui._uiForm().addClass(t+" "+t+"-"+this.typeClass),this.$this.before(n.$uiThis),n.$uiBase=this.$ui._uiSub().addClass(t+"-base").append(this.$this).appendTo(n.$uiThis),this.$ui._icon(this.$this,n.$uiBase)}}),n.tpUI._gadgets("Text",n.tpuiText,n.tpuiText.prototype),n.tpuiTextarea=function(i){if(this.$ui=n.tpUI||{},this.$this=this.$ui._obj(i),this.$this[0].tagName==="TEXTAREA")return this.name="textarea",this.thisClass=t+"-"+this.name,this.typeClass=this.$this.attr("data-type")||"base",this._create(),this},n.tpuiTextarea.prototype=n.extend({},n.tpuiFormItem,{_init:function(){this.isDisabled=this._isDisable(),this.isReadonly=this._isReadonly(),this._baseEvent(),this._initState()},_create:function(){var t=this.thisClass,n=this.struct={};n.$uiThis=this.$ui._uiForm().addClass(t+" "+t+"-"+this.typeClass),this.$this.before(n.$uiThis),n.$uiBase=this.$ui._uiSub().addClass(t+"-base").append(this.$this).appendTo(n.$uiThis)}}),n.tpUI._gadgets("Textarea",n.tpuiTextarea,n.tpuiTextarea.prototype),n.tpuiRadio=function(i,r){if(this.$ui=n.tpUI||{},this.$this=this.$ui._obj(i),this.$this[0].tagName==="INPUT"||this.$this[0].type==="radio")return this.options=r,this.name="radio",this.struct={},this.thisClass=t+"-"+this.name,this._create(),this},n.tpuiRadio.prototype=n.extend({},n.tpuiFormItem,{_init:function(){this.isDisabled=this._isDisable(),this.isReadonly=this._isReadonly(),this._baseEvent(),this._initState(),this._checked(this.$this,this.$this.is(":checked"),this.struct.$uiThis)},_create:function(){var t=this.thisClass,n=this.struct||{};n.$uiThis=this.$ui._uiForm().addClass(t),n.$uiBase=this.$ui._uiSub().addClass(t+"-base").appendTo(n.$uiThis),n.$uiHandle=this.$ui._uiHandleLink("&nbsp;").addClass(t+"-handle").appendTo(n.$uiThis),this.$this.before(n.$uiThis).appendTo(n.$uiBase),this._uiEvent()},_uiEvent:function(){var t=this,i=this.struct;this.nameAttr=this.$this.attr("name")||null,this.radioGroup=this.nameAttr?n("input[name='"+this.nameAttr+"']"):this.$this;this.$this.on({"click.radioClick":function(n){n.preventDefault(),i.$uiHandle.triggerHandler("click"),n.stopPropagation()},"change.radioChange":function(){t.isDisabled||t.isReadonly||t._radioEach()},"changeToggle.radioChangeToggle":function(r,u){t._checked(n(this),u,i.$uiThis)}});i.$uiHandle.on({"click.radioToggle touchstart.radioToggle":function(){t.isDisabled||t.isReadonly||(t.$this.is(":checked")||t._checked(t.$this,!0,i.$uiThis),t.$this.triggerHandler("change"))}})},_radioEach:function(){n.each(this.radioGroup,function(t,i){n(i).trigger("changeToggle",n(i)[0].checked)})}}),n.tpUI._gadgets("Radio",n.tpuiRadio,n.tpuiRadio.prototype),n.tpuiCheckbox=function(i,r){if(this.$ui=n.tpUI||{},this.$this=this.$ui._obj(i),this.$this[0].tagName==="INPUT"||this.$this[0].type==="checkbox")return this.options=r,this.name="checkbox",this.thisClass=t+"-"+this.name,this._create(),this},n.tpuiCheckbox.prototype=n.extend({},n.tpuiFormItem,{_init:function(){this.isDisabled=this._isDisable(),this.isReadonly=this._isReadonly(),this._baseEvent(),this._initState(),this._checked(this.$this,this.$this.is(":checked"),this.struct.$uiThis)},_create:function(){var t=this.thisClass,n=this.struct={};n.$uiThis=this.$ui._uiForm().addClass(t),n.$uiBase=this.$ui._uiSub().addClass(t+"-base").appendTo(n.$uiThis),n.$uiHandle=this.$ui._uiHandleLink("&nbsp;").addClass(t+"-handle").appendTo(n.$uiThis),this.$this.before(n.$uiThis).appendTo(n.$uiBase),this._uiEvent()},_uiEvent:function(){var n=this,t=this.struct;this.$this.on({"click.checkboxClick":function(n){n.preventDefault(),t.$uiHandle.triggerHandler("click"),n.stopPropagation()},"change.checkboxChange":function(){n.isDisabled||n.isReadonly||n._checked(n.$this,n.$this.is(":checked"),n.struct.$uiThis)}});t.$uiHandle.on({"click.checkboxToggle touchcancel.checkboxToggle":function(){n.isDisabled||n.isReadonly||(n.$this.is(":checked")?n._checked(n.$this,!1,t.$uiThis):n._checked(n.$this,!0,t.$uiThis),n.$this.trigger("change"))}})}}),n.tpUI._gadgets("Checkbox",n.tpuiCheckbox,n.tpuiCheckbox.prototype),n.tpuiSwitch=function(i,r){if(this.$ui=n.tpUI||{},this.$this=this.$ui._obj(i),this.$this[0].tagName==="INPUT"||this.$this[0].type==="checkbox")return this.name="switch",this.options=r,this.thisClass=t+"-"+this.name,this._create(),this},n.tpuiSwitch.prototype=n.extend({},n.tpuiFormItem,{_option:{onTitle:"开",offTitle:"关",version:"2.0"},_init:function(){this.isDisabled=this._isDisable(),this.isReadonly=this._isReadonly(),this._baseEvent(),this._initState(),this._checked(this.$this,this.$this.is(":checked"),this.struct.$uiThis)},_create:function(){var t=this.thisClass,i=this.options,n=this.struct={};n.$uiThis=this.$ui._uiForm().addClass(t),n.$uiBase=this.$ui._uiSub().addClass(t+"-base").appendTo(n.$uiThis),n.$uiRefer=this.$ui._uiSub().addClass(t+"-refer").append('<span class="'+t+'-color-on">&nbsp;</span>').append('<span class="'+t+'-color-off">&nbsp;</span>').append('<em class="'+t+'-text-on"><i>'+i.onTitle+"<i></em>").append('<em class="'+t+'-text-off"><i>'+i.offTitle+"<i></em>").appendTo(n.$uiThis),n.$uiHandle=this.$ui._uiHandleLink("&nbsp;").addClass(t+"-handle").appendTo(n.$uiThis),this.$this.before(n.$uiThis).appendTo(n.$uiBase),this._uiEvent()},_uiEvent:function(){var t=this,i=this.struct;this.$this.on({"click.switchClick":function(n){n.preventDefault(),i.$uiHandle.triggerHandler("click"),n.stopPropagation()},"change.switchChange":function(){t.isDisabled||t.isReadonly||t._checked(n(this),n(this).is(":checked"),i.$uiThis)}});i.$uiHandle.on({"click.switchToggle touchcancel.switchToggle":function(n){(n.preventDefault(),t.isDisabled||t.isReadonly)||(t.$this.is(":checked")?t._checked(t.$this,!1,i.$uiThis):t._checked(t.$this,!0,i.$uiThis),t.$this.trigger("change"))}})}}),n.tpUI._gadgets("Switch",n.tpuiSwitch,n.tpuiSwitch.prototype),n.tpuiFile=function(i,r){if(this.$ui=n.tpUI||{},this.$this=this.$ui._obj(i),this.$this[0].tagName==="INPUT"||this.$this[0].type==="file")return this.name="file",this.options=r,this.thisClass=t+"-"+this.name,this.value=this.$this.val(),this._create(),this},n.tpuiFile.prototype=n.extend({},n.tpuiFormItem,{_init:function(){this.isDisabled=this._isDisable(),this.isReadonly=this._isReadonly(),this._baseEvent(),this._initState()},_create:function(){var i=this.thisClass,t=this.struct={};t.$uiThis=this.$ui._uiForm().addClass(i),t.$uiBase=this.$ui._uiSub().addClass(i+"-base").appendTo(t.$uiThis),t.$uiRefer=this.$ui._uiSub().addClass(i+"-refer").appendTo(t.$uiThis),t.$uiReferInput=n("<input>").attr({type:"text",placeholder:this.$this.attr("placeholder")||"请选择文件"}).appendTo(t.$uiRefer).tpuiText(),t.$uiHandle=this.$ui._uiSub().addClass(i+"-handle").appendTo(t.$uiThis),t.$uiHandleBtn=n('<button type="button">选择文件</button>').appendTo(t.$uiHandle).tpuiButton(),this.$this.before(t.$uiThis).appendTo(t.$uiBase),this._uiEvent()},_uiEvent:function(){var t=this,i=this.struct;this.$this.on({"click.fileToggle touchcancel.fileToggle":function(){t.isDisabled||t.isReadonly},"change.fileChange":function(){t.isDisabled||t.isReadonly||t._fileSet(n(this).val(),i.$uiReferInput)}});i.$uiHandleBtn.add(i.$uiReferInput).on({"click.fileToggle touchcancel.fileToggle":function(){t.isDisabled||t.isReadonly||t.$this.trigger("click")}});i.$uiReferInput.on({"keyup.fileInput":function(){t.isDisabled||t.isReadonly||t._fileSet(n(this).val(),i.$uiReferInput)}})},_fileSet:function(n,t){this.value=n,this.value!==""&&t.val(this.value)}}),n.tpUI._gadgets("File",n.tpuiFile,n.tpuiFile.prototype),n.tpuiNumber=function(i,r){if(this.$ui=n.tpUI||{},this.$this=this.$ui._obj(i),this.$this[0].type==="number"||this.$this[0].type==="text"||this.$this[0].tagName==="INPUT")return this.name="number",this.thisClass=t+"-"+this.name,this.options=r,this.$window=n(window),this._create(),this},n.tpuiNumber.prototype=n.extend({},n.tpuiFormItem,{_option:{type:"base",addtoTitle:"+",reduceTitle:"-",width:null,height:null,version:"2.0.1"},_init:function(){this.min=this.$this.attr("min")!==undefined?parseFloat(this.$this.attr("min")):null,this.max=this.$this.attr("max")!==undefined?parseFloat(this.$this.attr("max")):null,this.step=this.$this.attr("step")!==undefined?parseFloat(this.$this.attr("step")):1,this.fixed=this.$ui._decPlaces(this.step),this.startInt=(this.min!==null?this.min:0).toFixed(this.fixed),this.offsetInt=(this.min!==null?this.min:0)+this.step,this.isDisabled=this._isDisable(),this.isReadonly=this._isReadonly(),this._baseEvent(),this._initState(),this.value=parseFloat(this.$this.val()),this._operation("init")},_create:function(){var t=this.thisClass,i=this.options,n=this.struct={};n.$uiThis=this.$ui._uiForm().addClass(t+" "+t+"-"+i.type),n.$uiBase=this.$ui._uiSub().addClass(t+"-refer").appendTo(n.$uiThis),n.$uiAddto=this.$ui._uiHandleButton(i.addtoTitle).addClass(t+"-option "+t+"-addto").appendTo(n.$uiThis),n.$uiReduce=this.$ui._uiHandleButton(i.reduceTitle).addClass(t+"-option "+t+"-reduce").appendTo(n.$uiThis),this.$this.before(n.$uiThis).appendTo(n.$uiBase),this._uiEvent()},_uiEvent:function(){var t=this,i=this.struct,r=n(window);this.$this.on({"focus.numberFocus":function(){t._keyAdjust(!0)},"blur.numberBlur":function(){t._keyAdjust(!1)},"keyup.numberInputEnd":function(){},"change.numberChange":function(){t._operation("change",!1)}});i.$uiAddto.on({"click.numberAddto touchstart.numberAddto":function(n){n.preventDefault(),t._addto()}});i.$uiReduce.on({"click.numberReduce touchstart.numberReduce":function(n){n.preventDefault(),t._reduce()}})},_keyAdjust:function(n){var i=this,t="keydown.numberChange";if(n)this.$window.on(t,function(n){return n.keyCode==38||n.keyCode==39?(n.preventDefault(),i._addto(),!1):n.keyCode==37||n.keyCode==40?(n.preventDefault(),i._reduce(),!1):void 0});else this.$window.off(t)},_addto:function(){this._operation("addto",!0)},_reduce:function(){this._operation("reduce",!0)},_operation:function(n,t){if(!this.isDisabled&&!this.isReadonly){this.value=this.$this.val()?parseFloat(this.$this.val()):0;switch(n){case"addto":this.value+=this.step;break;case"reduce":this.value-=this.step;break;case"init":case"change":default:this.value=this.value}this._realValue(this.value),this.$this.val(this.value),t&&this.$this.trigger("change")}},_realValue:function(n){return this.value=this._toStep(n).toFixed(this.fixed),this.min!==null&&this.value<=this.min&&(this.value=this.min),this.max!==null&&this.value>=this.max&&(this.value=this.max),this.value},_stepOffset:function(n){return this.fixed>=1?(n/this.step).toFixed(this.fixed):n/this.step},_inStep:function(n){return this._stepOffset(n)-parseInt(this._stepOffset(n))==0},_toStep:function(n){return this._inStep(n)?parseFloat(n):Math.round(this._stepOffset(n)-1)*this.step}}),n.tpUI._gadgets("Number",n.tpuiNumber,n.tpuiNumber.prototype),n.tpuiSelect=function(i,r){if(this.$ui=n.tpUI||{},this.$this=this.$ui._obj(i),this.$this[0].tagName==="SELECT")return this.name="select",this.thisClass=t+"-"+this.name,this.options=r,this.isMobile=this.$ui._isMobile(),this.isAndroid=this.$ui._device().android,this.$window=n(window),this.$document=n(document),this.base={},this.struct={},this.base.$child=this.$this.children(),this.base.$options=this.$this.find("option"),this.selected=this.base.$options.filter(":selected").index()||0,this._create(),this},n.tpuiSelect.prototype=n.extend({},n.tpuiFormItem,{_init:function(){this.isDisabled=this._isDisable(),this.isReadonly=this._isReadonly(),this._baseEvent(),this._initState(),this._selected(),this._resize(),this._position()},_create:function(){var i=this,t=this.thisClass,r=this.base,n=this.struct;n.$uiThis=this.$ui._uiForm().addClass(t),this.isAndroid&&n.$uiThis.addClass(t+"-android"),n.$uiBase=this.$ui._uiSub().addClass(t+"-base").appendTo(n.$uiThis),n.$uiHead=this.$ui._uiSub().addClass(t+"-head").appendTo(n.$uiThis),n.$uiTitle=this.$ui._uiHandleLink("加载中...").addClass(t+"-value").appendTo(n.$uiHead),n.$uiArrowToggle=this.$ui._uiHandleLink("&nbsp;").addClass(t+"-arrow").appendTo(n.$uiHead),this.$ui._icon(this.$this,n.$uiTitle),n.$uiContent=this.$ui._uiSub().addClass(t+"-content").appendTo(n.$uiThis).hide(),n.$uiContentList=this.$ui._uiSub().addClass(t+"-content-list").append(this._list()).appendTo(n.$uiContent),n.$uiContentSub=n.$uiContentList.find("."+t+"-sub"),n.$titleRefer=n.$uiTitle.children("a:first"),this.$this.before(n.$uiThis).appendTo(n.$uiBase),this._uiEvent()},_uiEvent:function(){var t=this,r=this.thisClass,i=this.struct;this.$this.on({"change.selectChange":function(){t.isDisabled||t.isReadonly||(t.selected=t.base.$options.index(n(this).find("option:selected")[0]),t._selected())},"_toggle.selectToggle":function(){t._toggle()}});i.$uiHead.on({"click.selectClick touchend.selectClick":function(n){(n.preventDefault(),t.isDisabled||t.isReadonly)||(t.isMobile?t.$this.trigger("focus"):t._toggle())}});i.$uiContentSub.on({"click.selectSelected touchcancel.selectSelected":function(){t.isDisabled||t.isReadonly||(t.selected=t.struct.$uiContentSub.index(n(this)[0]),t._selected(),t.$this.trigger("change"),t._hide())}})},_selected:function(){var n=this.struct;n.$titleRefer.text(this.base.$options.eq(this.selected).text()),this.isMobile||n.$uiContentSub.removeClass(t+"-active").eq(this.selected).addClass(t+"-active"),this.base.$options.removeAttr("selected").prop("selected",!1).eq(this.selected).attr("selected","selected").prop("selected",!0)},_toggle:function(){this.struct.$uiContent.is(":visible")?this._hide():this._show()},_show:function(){var r=this,h=this.$ui,u=this.thisClass,f=this.struct,s=f.$uiThis,e=f.$uiHead,o=f.$uiContent;n("."+u).css({"z-index":1}),n("."+u+"-head").removeClass(t+"-form-focus"),n("."+u+"-content:visible").hide(),e.addClass(t+"-form-focus"),s.css({"z-index":99}),o.show(0,function(){r._position();r.$window.on({"scroll.selectPos resize.selectPos":function(){r._position()}});r.$document.on({"click.selectBlank":function(i){n(i.target).closest("."+u).length<=0&&(e.removeClass(t+"-form-focus"),r._hide())}})})},_hide:function(){var u=this,f=this.$ui,r=this.$window,n=this.$document,t=this.struct,i=t.$uiContent;i.hide(0,function(){r.off("scroll.selectPos resize.selectPos"),n.off("click.selectBlank")})},_active:function(n){var f=[1,999],e=t+"-form-focus",u=this.struct,i=u.$uiHead,r=u.$uiThis;n?(i.addClass(e),r.css({"z-index":f[1]})):(i.removeClass(e),r.css({"z-index":f[0]}))},_list:function(t){var r=this,i=null,f=this.thisClass,u=t||this.base.$child;return i=this.$ui._uiSub().addClass(f+"-option"),n.each(u,function(t,u){var f=n(u),e=f.children();f[0].tagName==="OPTGROUP"?i.append(r._subGroup(f)):i.append(r._subItem(f))}),i},_subGroup:function(n){var t=this.$ui,r=this.thisClass,i=null,f=null,u=null,e=null;return i=t._uiSub().addClass(r+"-group"),f=t._uiSub().addClass(r+"-group-head").appendTo(i),u=t._uiHandle(n.attr("label")||"").addClass(r+"-value").appendTo(f),e=t._uiHandleLink("&nbsp;").addClass(r+"-group-arrow").appendTo(u),t._icon(n,u),this._list(n.children()).appendTo(i),i},_subItem:function(n){var i=this.$ui,r=this.thisClass,t=null,u=null,f=null;return t=i._uiSub().addClass(r+"-sub"),u=i._uiHandleLink(n.text()).addClass(r+"-value").appendTo(t),f=i._uiHandleLink("&nbsp;").addClass(r+"-checker").appendTo(t),i._icon(n,u),t},_resize:function(){var t=this,n=this.struct,r=n.$uiContentList,i=this.$ui._dimensions(n.$uiArrowToggle);this.selectWidth||(n.$uiContent.css({position:"relative"}).show(0,function(){t.selectWidth=t.$ui._dimensions(r).width,n.$uiContent.css({position:"absolute"}).hide()}),n.$titleRefer.css({width:t.selectWidth+parseInt(i.height)}))},_position:function(){var i=this,t=this.struct,n=this.surface={};n.window=this.$ui._dimensions(this.$window),n.select=this.$ui._dimensions(t.$uiHead),n.content=this.$ui._dimensions(t.$uiContent),n.contentList=this.$ui._dimensions(t.$uiContentList),n.maxHeight=this.$this.attr("data-height")||Math.floor(parseInt(n.window.height)/2),n.listHeight=parseInt(n.contentList.height),n.listOffsetTop=parseInt(n.contentList.offset.top),n.listMaxHeight=n.listHeight>=n.maxHeight?n.maxHeight:"auto",t.$uiContentList.height(parseInt(n.listMaxHeight))}}),n.tpUI._gadgets("Select",n.tpuiSelect,n.tpuiSelect.prototype),n.tpuiProgress=function(i,r){if(this.$ui=n.tpUI||{},this.$this=this.$ui._obj(i),this.$this[0].tagName!=="INPUT"||this.$this[0].type!=="text"){n.error('请使用 input type="text" 表单构建进度条。');return}return this.name="progress",this.thisClass=t+"-"+this.name,this.options=r,this._create(),this},n.tpuiProgress.prototype=n.extend({},n.tpuiFormItem,{_option:{output:"default",direction:"x",width:null,height:null,progress:!0,surplus:!1,onCreate:n.noop,onStart:n.noop,onEnd:n.noop,onUpdate:n.noop,version:"1.0"},_init:function(){this.isDisabled=this._isDisable(),this.isReadonly=this._isReadonly(),this._baseEvent(),this._initState(),this.min=this._numerInit("min",0),this.max=this._numerInit("max",100),this.interval=this.max-this.min,this.distance==undefined&&(this.distance=this.min),this._run(this.$this.val(),1)},_create:function(){var t=this.struct={},i=this.options,r=this.thisClass;t.$uiThis=this.$ui._uiForm().addClass(r),t.$uiBase=this.$ui._uiSub().addClass(r+"-base").appendTo(t.$uiThis),t.$uiRefer=this.$ui._uiSub().addClass(r+"-refer").appendTo(t.$uiThis),i.progress&&(t.$uiProgress=n("<span>").addClass(r+"-bands "+r+"-progress").appendTo(t.$uiRefer)),i.surplus&&(t.$uiSurplus=n("<span>").addClass(r+"-bands "+r+"-surplus").appendTo(t.$uiRefer)),this.$this.before(t.$uiThis).appendTo(t.$uiBase);switch(i.direction){case"y":i.direction="y",t.$uiThis.addClass(r+"-vertical");break;case"x":default:i.direction="x",t.$uiThis.addClass(r+"-horizontal")}i.width&&t.$uiThis.width(i.width),i.height&&t.$uiThis.height(i.height),this._uiEvent(),this.created=!0;i.onCreate(this)},_uiEvent:function(){var t=this;this.$this.on({"_update.progressUpdate":function(n){n.preventDefault(),t._init()},"_to.progressTo":function(i,r){t.isDisabled||t.isReadonly||(n(this).val(r),t._run(r))}})},_run:function(t,i){var r=this,f=this.options,u=this.struct,i=i,t=t||this.min;i==1?(r._operation(t),r._progressSet()):n({counter:r.distance}).stop(!0,!0).animate({counter:t},{step:function(n){r._operation(n),r._progressSet()}}),this.distance=t},_operation:function(n){this.value=this.$ui._interval(Math.round(n),this.min,this.max),this.lave=this.interval-this.value,this.progress=Math.round((this.value-this.min)/this.interval*100),this.progress=this.$ui._interval(this.progress,0,100),this.surplus=100-this.progress,this.progressRatio=this.progress/100,this.surplusRatio=this.surplus/100},_inputOutput:function(){var n=this,t=this.options;switch(t.output){case"progress":n.$this[0].value=n.progress;break;case"progress-ratio":n.$this[0].value=n.progressRatio;break;case"surplus":n.$this.val(n.surplus);break;case"surplus-ratio":n.$this[0].value=n.surplusRatio;break;case"both":n.$this.val(n.value+"/"+n.lave);break;case"lave":n.$this.val(n.lave);break;case"default":case"value":default:n.$this.val(n.value)}},_progressSet:function(){var n=this.options,t=this.struct;this._inputOutput(),n.progress&&(n.direction=="x"?t.$uiProgress.width(this.progress+"%"):t.$uiProgress.height(this.progress+"%")),n.surplus&&(n.direction=="x"?t.$uiSurplus.width(this.surplus+"%"):t.$uiSurplus.height(this.surplus+"%"));n.onUpdate(this.progress,this.progressRatio,this);if(this.ratio<=this.min)n.onStart(this.progress,this.progressRatio,this);if(this.ratio>=this.max)n.onEnd(this.progress,this.progressRatio,this)}}),n.tpUI._gadgets("Progress",n.tpuiProgress,n.tpuiProgress.prototype),n.tpuiVerification=function(i){if(this.$ui=n.tpUI||{},this.$this=this.$ui._obj(i),this.imagePatch=this.$this.attr("data-image"),this.imagePatch&&(this.$this[0].tagName==="INPUT"||this.$this[0].type==="text"))return this.name="verification",this.thisClass=t+"-"+this.name,this.typeClass=this.$this.attr("data-type")||"default",this.tips=this.$this.attr("data-tips")||"点击刷新验证码",this.optionHandle=this.$this.attr("data-option")||!1,this.struct={},this._create(),this},n.tpuiVerification.prototype=n.extend({},n.tpuiFormItem,{_init:function(){this._reload(),this.isDisabled=this._isDisable(),this.isReadonly=this._isReadonly(),this._baseEvent(),this._initState()},_create:function(){var i=this.$ui,n=this.struct,t=this.thisClass,u=this.typeClass,r=this.tips;n.$uiThis=i._uiForm().addClass(t+" "+t+"-"+u),n.$uiBase=i._uiSub().addClass(t+"-sub "+t+"-base").appendTo(n.$uiThis),this.$this.before(n.$uiThis).appendTo(n.$uiBase),i._icon(this.$this,this.$this),n.$uiImageHandle=i._uiSub().addClass(t+"-sub "+t+"-image").attr("title",r).append('<a href="javascript:void(0);"><img src="" alt="'+r+'" /></a>').appendTo(n.$uiThis),n.$uiImage=n.$uiImageHandle.find("img:first"),this.optionHandle&&(n.$uiOptionHandle=i._uiSub().addClass(t+"-sub "+t+"-option").append('<a href="javascript:void(0);">'+this.optionHandle+"</a>").appendTo(n.$uiThis),n.$uiOptionHandle=n.$uiOptionHandle.children("a:first").attr("title",r)),this._uiEvent()},_uiEvent:function(){var t=this,n=this.struct;n.$uiImageHandle.add(n.$uiOptionHandle).on({"click.verificationReload":function(n){n.preventDefault(),t._reload()}})},_reload:function(){this.isDisabled||(this.struct.$uiImage[0].src=this.imagePatch)}}),n.tpUI._gadgets("Verification",n.tpuiVerification,n.tpuiVerification.prototype),n.tpuiVerREG={_RegConf:{integer:/^[-]{0,1}[0-9]{1,}$/,number:/^[0-9]+$/,decimal:/^[-]{0,1}(\d+)[\.]+(\d+)$/,dobWord:/^[^\x00-\xff]+$/,cn:/[\u4E00-\u9FA5]/,username:/^(?!_)(?!.*?_$)[0-9a-zA-Z\_]+$/,nicName:/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/,cnName:/^[\u4E00-\u9FA5]{2,4}$/,letterOrNum:/^[0-9a-zA-Z]+$/,password:/^(\w){6,20}$/,qq:/^[1-9][0-9]{5,10}$/,mobile:/^(1[0-9]{10})$/,phone:/^(([0+]\d{2,3}-)?(0\d{2,3})-)?(\d{7,8})(-(\d{3,4}))?$/,email:/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/,url:/^http:\/\/(?:[\w-\.]{0,255})(?:(?:\/?[^\s]{0,255}){0,255})/g,monney:/^([\u0024\u00A2\u00A3\u00A4\u20AC\u00A5\u20B1\20B9\uFFE5]\s*)(\d+,?)+\.?\d*\s*$/,ip:/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/,date:/^(\d{2,4})\-(\d{1,2})\-(\d{1,2})$/,time:/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,dateTime:/^(\d{2,4})\-(\d{1,2})\-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,version:"1.0"},_isNull:function(t){return t==""||n.trim(t)==""?!0:/^[ ]+$/.test(t)},_isOver:function(n,t,i){return this._isNull(n)||n.length<parseInt(t)||n.length>parseInt(i)?!0:!1},_isInteger:function(n){return this._RegConf.integer.test(n)},_isHasCN:function(n){return this._RegConf.cn.test(n)},_isUsername:function(n){return!n||this._isNull(n)?!1:this._RegConf.username.test(n)},_isStartOf:function(str,checkStr){return!str||this._isNull(str)||!checkStr?!1:str==checkStr?!0:eval("/^("+checkStr+")/").test(str)},_isEndOf:function(str,checkStr){return!str||this._isNull(str)||!checkStr?!1:str==checkStr?!0:eval("/(.*?"+checkStr+"$)/").test(str)},_isIndexOf:function(str,checkStr){return!str||this._isNull(str)||!checkStr?!1:str==checkStr?!0:eval("/("+checkStr+".*?)/").test(str)},_isEmail:function(n){return!n||this._isNull(n)||!this._isIndexOf(n,"@")?!1:this._RegConf.email.test(n)},_isUrl:function(n){return!n||this._isNull(n)?!1:this._RegConf.url.test(n)},_isIP:function(n){return!n||this._isNull(n)?!1:this._RegConf.ip.test(n)},_isMobile:function(n){return!n||this._isNull(n)?!1:this._RegConf.mobile.test(n)},_isPhone:function(n){return!n||this._isNull(n)?!1:this._RegConf.phone.test(n)},_isQQ:function(n){return!n||this._isNull(n)||!this._RegConf.number.test(n)?!1:this._RegConf.qq.test(n)},_isDate:function(n){return!n||this._isNull(n)?!1:this._RegConf.date.test(n)}},n.tpuiFormTipsy=function(i){return this.$ui=n.tpUI||{},this.$this=this.$ui._obj(i),this.name="form-tipsy",this.thisClass=t+"-"+this.name,this.tipsy={},this._uiEvent(),this},n.tpuiFormTipsy.prototype={version:"1.0.3",_messgaeItem:{message:null,html:!1,icon:!1,gravity:"sw",offset:5,appendTo:null,delayIn:0,delayOut:0,onShow:n.noop,onHide:n.noop,version:"1.0"},_uiEvent:function(){var n=this;this.$this.on({"_default.formTipsy":function(t,i){n._hide(),n._tipsy(i)},"_danger.formTipsy":function(t,i){n._hide(),n._tipsy(i,"danger")},"_success.formTipsy":function(t,i){n._hide(),n._tipsy(i,"success")},"_warning.formTipsy":function(t,i){n._hide(),n._tipsy(i,"warning")},"_hide.formTipsy":function(){n._hide()}})},_tipsy:function(i,r){var e=this.$ui,f=this.thisClass,u=this._message(i),h=f+"-"+u.gravity,s=r?f+"-"+r:f+"-default",o=u.appendTo||n("body");u.message&&(this.$uiTipsy=e._uiItem().addClass(f+" "+h+" "+s).appendTo(o),this.$uiInnner=e._uiSub().addClass(f+"-inner").appendTo(this.$uiTipsy),u.icon&&(this.$uiIcon=n("<i>").addClass(t+"-icon").appendTo(this.$uiInnner),this.$uiTipsy.addClass(f+"-icon-on")),this.$uiInnner[this.tipsy.html?"text":"append"](u.message),u.appendTo||(this.$uiTipsy.css({position:"absolute",left:0,top:0}),this._position(u.gravity)))},_hide:function(){this.$uiTipsy&&this.$uiTipsy.remove()},_message:function(t){return n.extend(!0,{},this._messgaeItem,n.isPlainObject(t)?t:{message:t})},_position:function(n){var c=this.$ui,o=c._dimensions(this.$this),l=c._dimensions(this.$uiTipsy),t={},e=parseInt(o.width),h=parseInt(o.height),r=parseInt(o.offset.top),i=parseInt(o.offset.left),f=parseInt(l.width),s=parseInt(l.height),u=0;switch(n.charAt(0)){case"n":t={top:r+h+u,left:i+(e/2-f/2)};break;case"s":t={top:r-s-u,left:i+(e/2-f/2)};break;case"e":t={top:r+h/2-s/2,left:i-f-u};break;case"w":t={top:r+h/2-s/2,left:i+e+u}}n.length==2&&(t.left=n.charAt(1)=="w"?i:i+(e-f)),this.$uiTipsy.css(t)}},n.tpUI._gadgets("FormTipsy",n.tpuiFormTipsy,n.tpuiFormTipsy.prototype),n.tpuiNotify=function(t,i){return this.$ui=n.tpUI||{},this.name="notify",this.thisClass="tp-ui-"+this.name,n.type(t)=="object"?this.options=n.extend({},this._option,t):n.type(t)=="string"?(this.dataName=t,this.options=i&&n.type(i)=="object"?n.extend({},this._option,i):n.extend({},this._option)):this.options=n.extend({},this._option),this.dataCache={},this.itemLength=0,this.isDisabled=!1,this.isMobile=this.$ui._isMobile(),this},n.tpuiNotify.prototype={_option:{size:320,innerBox:null,position:"center,top",hideMode:"hide",doUpdate:n.noop,doAdd:n.noop,doShow:n.noop,doHide:n.noop,doRemove:n.noop,doClean:n.noop,onCreate:n.noop,onEnabled:n.noop,onDisabled:n.noop,version:"1.0.1"},_itemOption:{image:null,title:null,notify:null,buttons:null,pendAt:"default",status:"default",timeout:5e3,speed:600,onCheck:n.noop,onShow:n.noop,onHide:n.noop,onRemove:n.noop,version:"2.0.1"},_init:function(){var i=this,t=this.options;if(!this.$notify){this.$notifyList=n("<div>").addClass(this.thisClass+"-content"),t.innerBox?(this.$notify=this.$ui._obj(t.innerBox).append(this.$notifyList),this.$notifyList.css({position:"relative",width:"auto"})):(this.$notify=this.$ui._obj("body"),this.$notifyBase=n("<div>").addClass(this.thisClass).appendTo(this.$notify),this.$notifyList.css({width:Math.abs(parseInt(t.size))}).appendTo(this.$notifyBase),this._position());this.options.onCreate(this)}},_item:function(t){var u=this,r=this.thisClass,i={};i.$row=n("<div>").addClass(r+"-row"),i.options=t,i.timeOut=null,i.$item=n("<div>").addClass(r+"-item "+r+"-"+t.status).appendTo(i.$row),t.image&&(i.$item.addClass(r+"-image-item"),i.$contents=n("<div>").addClass(this.thisClass+"-image").appendTo(i.$item),t.image.indexOf("/")==0?i.$contents.append('<span><img src="'+t.image+'"></span>'):i.$contents.append('<span class="'+t.image+'">&nbsp;</span>')),i.$content=n("<div>").addClass(r+"-message").appendTo(i.$item),t.title&&(i.$title=n("<h4>").append("<span>"+t.title+"</span>").appendTo(i.$content)),t.notify&&(i.$contents=n("<p>").append(t.notify).appendTo(i.$content)),i.$buttonGroup=n("<div>").addClass(r+"-button-group").appendTo(i.$item),t.buttons?(i.$item.addClass(r+"-button-item"),n.each(t.buttons,function(r,u){var f=n("<button>").text(r).on({click:function(){u(t,i)}}).appendTo(i.$buttonGroup).tpuiButton()})):(i.$item.addClass(r+"-close-item"),i.$close=n("<div>").addClass(r+"-button "+r+"-close").append('<a href="javascript:void(0);"><em>关闭</em></a>').on({"click.notify":function(){u._remove(i)}}).appendTo(i.$buttonGroup),this.isMobile||i.$close.hide());i.$row.on({"_show.notify":function(){u._show(i)},"_hide.notify":function(){u._hide(i)},"_remove.notify":function(){u._remove(i)},"click.notify":function(i){if(n(i.target).closest("."+r+"-button").length===0)t.onCheck(t)},"mouseenter.notify":function(){i.$close&&!this.isMobile&&i.$close.stop(!0,!0).fadeIn(),i.timeOut&&(i.timeOut=clearTimeout(i.timeOut))},"mouseleave.notify":function(){i.$close&&!this.isMobile&&i.$close.stop(!0,!0).fadeOut(),t.timeout&&t.timeout>0&&(i.timeOut=setTimeout(function(){u._hide(i)},Math.abs(parseInt(t.timeout))))}});return t.timeout&&t.timeout>0&&(i.timeOut=setTimeout(function(){switch(u.options.hideMode){case"remove":u._remove(i);break;case"hide":default:u._hide(i)}},Math.abs(parseInt(t.timeout)))),i},_add:function(t,i){if(!this.isDisabled){if(n.type(t)!=="string"&&n.type(t)!=="object"){n.error("消息内容需为字符串或消息对象格式，请重新指定消息内容！");return}this._init();var u={},r=null;n.type(t)=="string"?n.extend(u,this._itemOption,{notify:t,status:this._status(i)}):n.extend(u,this._itemOption,t),r=this._item(u,this.thisClass);switch(u.pendAt){case"after":r.$row.appendTo(this.$notifyList);break;case"before":case"default":default:r.$row.prependTo(this.$notifyList)}this._update(),this.options.doAdd(this),this._show(r)}},_show:function(n){var t=this,r=n.options,i=r.speed;n.$item.show(),n.$row.hide().stop(!0,!0).slideDown(i).dequeue().fadeIn(i,function(){t._update(),t.options.doShow(t)})},_hide:function(n){var t=this,r=n.options,i=r.speed;rowSize=this.$ui._dimensions(n.$row).height,n.$row.stop(!0,!0).fadeOut(i).dequeue().slideUp(i,function(){n.$item.hide(),t._update(),t.options.doHide(t)})},_remove:function(t){var r=this,f=t.options,i=f.speed,u=this.$ui._dimensions(t.$row).height;t.$row.stop(!0,!0).animate({"margin-top":u},i).dequeue().fadeOut(i).dequeue().slideUp(i,function(){n(this).empty().remove(),r._update(),r.options.doRemove(r)})},_clean:function(){this.$notifyList.children().remove(),this.$notifyList.empty(),this._update(),this.options.doClean(this)},_empty:function(){_self._clean()},_update:function(){this.itemLength=this.$notifyList.children().length,this.options.doUpdate(this)},_enabled:function(){this.isDisabled=!1},_disabled:function(){this.isDisabled=!0},_status:function(n){var t=n||"base";switch(t){case"success":t="success";break;case"danger":t="danger";break;case"warning":t="warning";break;case"base":default:t="base"}return t},_position:function(){var t={},n=this.options.position.split(","),i=this.options.size+10;if(n.length<=1)switch(n){case"right":n=["right","top"];break;case"left":n=["right","top"];break;case"center":default:n=["center","top"]}switch(n[0]){case"left":t.left=0;break;case"right":t.left="100%",t.marginLeft=0-i;break;case"right":default:t.left="50%",t.marginLeft=0-i/2}switch(n[1]){case"bottom":t.top="100%";break;case"top":default:t.top=0}this.$notifyBase.css(t),n[1]=="bottom"&&this.$notifyList.css({bottom:0})}},n.tpuiMenu=function(i,r){if(this.$ui=n.tpUI||{},this.$this=this.$ui._obj(i),this.$this=this.$ui._obj(i),this.$sub=this.$this.children(),this.$item=this.$this.find("li"),this.$this[0].tagName==="UL"||this.$this[0].tagName==="OL")return this.options=r,this.name="menu",this.thisClass=t+"-"+this.name,this.typeClass=this.$this.attr("data-type")||"base",this._create(),this},n.tpuiMenu.prototype={_option:{startInt:0,toggleOther:!1,targetIndex:null,arrow:!0,speed:"normal",easing:"swing",onCreate:n.noop,onShow:n.noop,onHide:n.noop,version:"2.0.4"},_init:function(){var t=this.options,n;this.playInt=parseInt(t.startInt),t.targetIndex&&(this.playInt=this._active()||this.playInt),this._showAll(!0),n=this.$item.eq(this.playInt),n.parents("li").length>0?this._show(n.parents("li."+this.thisClass+"-sub"),!0):this._show(n,!0)},_create:function(){this.$uiThis=this.$ui._uiItem().addClass(this.thisClass),this.$this.after(this.$uiThis),this.$uiMenu=this._menus(this.$this,this.options.arrow).appendTo(this.$uiThis),this.$uiMenuHead=this.$uiThis.find("."+this.thisClass+"-base"),this.$uiMenuArrow=this.$uiThis.find("."+this.thisClass+"-arrow"),this._uiEvent();this.options.onCreate(this)},_menus:function(t,i){var f=this,u=this.$ui,e=t,o=t.children(),r=this.thisClass,i=i||!1;return n.each(o,function(t,e){var o=n(e),h=o.children().eq(0),c=o.children("ul")||o.children("ol")||null,v,l,a,s;!n.isEmptyObject(c)&&c.get(0)?(o.addClass(r+"-sub "+r+"-sub-group "),s=u._uiSub().addClass(r+"-base "+r+"-head").append(h).appendTo(o),u._icon(h),i&&(v=u._uiHandleButton("&nbsp;").addClass(r+"-arrow").appendTo(s),s.addClass(r+"-base-arrow")),l=u._uiSub().addClass(r+"-submenu").appendTo(o),a=f._menus(c,i).appendTo(l)):(o.addClass(r+"-sub"),s=u._uiSub().addClass(r+"-base").append(h).appendTo(o),f.$ui._icon(h))}),e},_uiEvent:function(){var t=this;this.$this.on({_show:function(n,i){t.playInt=parseInt(i),t._toggle(t.playInt,!0)},_hide:function(n,i){t.playInt=parseInt(i),t._toggle(t.playInt,!1)}});this.$uiMenuHead.on({click:function(){t.playInt=t._headIndex(n(this)),t._toggle()}})},_active:function(){return this.$target=this.$this.find("li."+this.options.targetIndex.match(/[a-z0-9\-\_]+/)[0]+":first"),this._itemIndex(this.$target)},_headIndex:function(n){return this.$uiMenuHead.index(n[0])},_itemIndex:function(n){return this.$item.index(n[0])},_toggle:function(n,i){var r=this.$item.eq(n||this.playInt||0);this[r.hasClass(t+"-active")?"_hide":"_show"](r,i)},_show:function(n,i){var o=this,r=this.options,u=t+"-active",s=n.children("."+this.thisClass+"-submenu"),f=i?0:r.speed,e=i?"swing":r.easing;r.toggleOther&&this._hide(n.siblings("li."+u),i),n.addClass(u),s.stop(!0,!0).slideDown(f,e,function(){r.onShow(o)})},_hide:function(i,r){var s=this,u=this.options,h=t+"-active",o=i.find("."+this.thisClass+"-submenu"),f=r?0:u.speed,e=r?"swing":u.easing;i.removeClass(t+"-active"),o.stop(!0,!0).slideUp(f,e,function(){n(this).parents("li:first").removeClass(t+"-active");u.onHide(s)})},_isOpen:function(){return this.$item.eq(parseInt(this.playInt)).children("."+this.thisClass+"-submenu").is(":visible")},_showAll:function(n){this._show(this.$item,n)},_hideAll:function(n){this._hide(this.$item,n)}},n.tpUI._gadgets("Menu",n.tpuiMenu,n.tpuiMenu.prototype),n.tpuiMarquee=function(i,r){return this.$ui=n.tpUI||{},this.$window=n(window),this.name="marquee",this.thisClass=t+"-"+this.name,this.keyCode={prev:[37,38,65,87,187,188],next:[39,40,68,83,189,190],tab:[9]},this.options=r,this.$this=this.$ui._obj(i),this.$sub=this.$this.children(),this.typeClass=this.$this.attr("data-type")||this.options.type||"base",this.struct={},this.isMode=this.options.mode?!0:!1,this.length=this.$sub.length,this.step=this._step(this.options.step),this.now=0,this.scroll=0,this.canFlip=!0,this._canFlip(),this.playInt=null,this.scrolling=!1,this.scrollType="next",this.animating=!1,this.autoPlayInited=!1,this._create(),this},n.tpuiMarquee.prototype={_option:{type:"base",mode:!1,direction:"x",keyboardFlip:!0,tabFlip:!0,modeSize:1,step:1,speed:600,easing:"swing",autoPlay:!0,timer:5e3,option:!0,prevText:"上翻",nextText:"下翻",optionToggle:!0,delay:20,hoverMode:"stop",onCreate:n.noop,onFlip:n.noop,onReady:n.noop,onEnd:n.noop,version:"3.0.3"},_init:function(){this._runInit(),this._play()},_canFlip:function(){this.length<=this.step&&(this.canFlip=!1)},_create:function(){var i=this.$ui,t=this.thisClass,r=this.options,n=this.struct;n.$uiThis=i._uiItem().addClass(t+" "+t+"-"+this.typeClass),n.$uiContent=i._uiSub().addClass(t+"-content").appendTo(n.$uiThis),n.$uiContentList=i._uiSub().addClass(t+"-content-list").appendTo(n.$uiContent),n.$uiSubClone=this.$sub.clone(!0).addClass(t+"-sub-clone").appendTo(this.$this),this.$this.before(n.$uiThis).appendTo(n.$uiContentList),this._options(),n.$uiSub=this.$this.children(),this.useLength=n.$uiSub.length,this.grid=this.$ui._dimensions(n.$uiSub.eq(0)),this._uiEvent()},_destroy:function(){var n=this;this._stop(),this.$this.off("marqueePrev marqueeNext marqueePlay marqueeStop marqueeDestroy"),this.struct.$uiThis.before(this.$this),this.struct.$uiSubClone.remove(),this.struct.$uiThis.remove(),this.$this.removeData("tpuiMarquee")},_options:function(){if(!this.isMode&&this.options.option){var i=this,u=this.$ui,t=this.thisClass,r=this.options,n=this.struct;n.$uiOptionPrev=u._uiHandleLink(r.prevText).addClass(t+"-option "+t+"-prev").on({"click.marqueeOptionPrev touchend.marqueeOptionPrev":function(n){i.$this.trigger("_prev"),n.preventDefault()}}).appendTo(n.$uiThis),n.$uiOptionNext=u._uiHandleLink(r.nextText).addClass(t+"-option "+t+"-next").on({"click.marqueeOptionPrev touchend.marqueeOptionPrev":function(n){i.$this.trigger("_next"),n.preventDefault()}}).appendTo(n.$uiThis),n.$uiOption=n.$uiThis.children("."+t+"-option")}},_step:function(n){var i=0,t=this.length;return this.step=Math.abs(Math.round(parseInt(n))),this.step<=i&&(this.step=i),this.step>=t&&(this.step=t),this.step},_runInit:function(){var t=this.struct,n=this.options.direction=="x"?!0:!1;this._optionToggle(!1),t.$uiThis.addClass(this.thisClass+(n?"-hor":"-ver")),t.$uiContentList.css(n?"width":"height",this.grid[n?"width":"height"]*this.useLength)},_play:function(){var n=this,t=this.options,r=t.autoPlay,u=parseInt(t.delay),i=parseInt(t.timer);this._stop(),this.isMode?this.scrolling=setTimeout(function(){n["_"+n.scrollType]()},30):r&&(n.playInt=clearTimeout(n.playInt),this.playInt=setTimeout(function(){n._next(),n._play()},i))},_stop:function(){var n=this.options.autoPlay;this.isMode?this.scrolling=clearTimeout(this.scrolling):this.playInt=clearTimeout(this.playInt)},_prev:function(){var t=this,n="prev",i=this.options,r=parseInt(i.delay);this.scrollType!==n&&(this.scrollType=n),this.isMode?(this._stop(),this.scrolling=setTimeout(function(){t._scrollMode(n),t._prev()},30)):this._slideMode(n)},_next:function(){var t=this,n="next",i=this.options;this.scrollType!==n&&(this.scrollType=n),this.isMode?(this._stop(),this.scrolling=setTimeout(function(){t._scrollMode(n),t._next()},30)):this._slideMode(n)},_uiEvent:function(){var n=this,i=this.struct,r=this.options,t=this.$this;t.on({"_prev.marquee":function(){n._prev()},"_next.marquee":function(){n._next()},"_play.marquee":function(){n._play()},"_stop.marquee":function(){n._stop()},"_destroy.marquee":function(){n._destroy()}});i.$uiThis.on({"mouseenter.marqueeEnter touchstart.marqueeEnter":function(){n.playInt&&(n.autoPlayInited=!0,n._stop()),n._optionToggle(!0),n._keyBoardToggle(!0),n._marqueeHover(!0)},"mouseleave.marqueeOut touchend.marqueeOut":function(){n.autoPlayInited&&(n._play(),n.autoPlayInited=!1),n._optionToggle(!1),n._keyBoardToggle(!1),n._marqueeHover(!1)}})},_optionToggle:function(n){this.struct.$uiOption&&this.options.optionToggle&&(n?this.struct.$uiOption.stop(!0,!0).fadeIn():this.struct.$uiOption.stop(!0,!0).fadeOut())},_keyBoardToggle:function(n){if(this.options.keyboardFlip){var r=this,t=this.$window,i="keydown.marqueeKeyCheck";if(n)t.on(i,function(n){r._keyBoardEvent(n)});else t.off(i)}},_keyBoardEvent:function(n){var o=this,e=this.keyCode,u=this.options,t=u.keyboardFlip,f=u.tabFlip,i=n.keyCode,r=this.$this;return!t||n.metaKey||n.shiftKey||n.ctrlKey||n.altKey?!1:t&&this._isKeyCode("prev",i)?(r.trigger("_prev"),n.preventDefault(),!1):t&&this._isKeyCode("next",i)?(r.trigger("_next"),n.preventDefault(),!1):!this.isMode&&f&&this._isKeyCode("tab",i)?(r.trigger("_next"),n.preventDefault(),!1):void 0},_isKeyCode:function(t,i){return i&&n.inArray(i,this.keyCode[t])!==-1?!0:!1},_marqueeHover:function(n){var u,f;if(this.isMode){var i=this,s=this.options,t=s.hoverMode,e="mousemove.scrillPoint",o=this.struct,r=o.$uiThis;if(n){if(t=="stop"&&i._stop(),t=="enter"){u=0,f=this.$ui._dimensions(r),uiOffsetLeft=f.offset.left,multiple=Math.round(f.width/2),reEvent=null;r.on(e,function(n){n.preventDefault(),u=n.pageX-uiOffsetLeft,reEvent=reEvent?clearTimeout(reEvent):setTimeout(function(){u<=multiple?i._prev():i._next(),reEvent=clearTimeout(reEvent)},30)})}}else t=="stop"&&i._play(),t=="enter"&&r.off(e)}},_scrollMode:function(n){var r=parseInt(this.options.modeSize),u=this.options.direction,i=this.struct.$uiContentList,t=null;n=="prev"?this.scroll+=r:this.scroll-=r,this._scrollReset(n);switch(u){case"y":t="translate3d( 0, "+this.scroll+"px, 0 )",i.css({transform:t,"-webkit-transform":t,"-moz-transform":t,"-ms-transform":t});break;case"x":default:t="translate3d( "+this.scroll+"px, 0, 0 )",i.css({transform:t,"-webkit-transform":t,"-moz-transform":t,"-ms-transform":t})}},_scrollReset:function(n){var t=this,i=0-(this.options.direction=="x"?this.grid.width:this.grid.height);n=="prev"?t.scroll<=0&&(t._subShift(1,"prepend"),t.scroll=i):t.scroll<=i&&(t._subShift(1,"append"),t.scroll=0)},_slideMode:function(n){if(!this.animating){var t=this,i=this.options,u=i.direction=="x"?!0:!1,r=this.struct.$uiContentList,s=this.grid[u?"width":"height"]*this.step,h=u?{left:"-"+s+"px"}:{top:"-"+s+"px"},c=u?{left:"0px"}:{top:"0px"},f=i.speed,e=i.easing,o=i.onFlip;t.animating=!0,n=="prev"?(t._subShift(t.step,"prepend"),r.css(h).stop(!0,!1).animate(c,f,e,function(){t.animating=!1,o.apply(t)})):r.stop(!0,!1).animate(h,f,e,function(){t._subShift(t.step,"append"),r.css(c),t.animating=!1,o.apply(t)})}},_subShift:function(n,t){for(var i=this.$this,r=0;r<n;r++)t=="prepend"?i.children(":last").prependTo(i):i.children(":first").appendTo(i)}},n.tpUI._gadgets("Marquee",n.tpuiMarquee,n.tpuiMarquee.prototype),n.tpuiDialog=function(i,r){return this.$ui=n.tpUI||{},this.$this=this.$ui._obj(i),this.name="dialog",this.thisClass=t+"-"+this.name,this.typeClass=this.$this.attr("data-type")||"base",this.options=r,this.$window=n(window),this.$document=n(document),this.struct={},this.size={},this.isOpen=!1,this.uiClose=!1,this.scrollLock=this.options.scrollLock,this._create(),this.resize=null,this},n.tpuiDialog.prototype={_option:{autoOpen:!1,modal:!1,removeMode:!1,escape:!0,draggable:!0,resizable:!0,mask:!0,maskClose:!0,maskClass:"base",head:!0,title:null,buttons:null,width:440,height:null,autoResize:!0,offset:20,pushTo:null,positionAt:"center,middle",positionMy:"center,middle",scrollLock:!1,onCreate:n.noop,onOpen:n.noop,onClose:n.noop,onDragStart:n.noop,onDragMove:n.noop,onDragEnd:n.noop,onResizeStart:n.noop,onResizeSet:n.noop,onResizeEnd:n.noop,version:"2.0.2"},_optionSet:function(t){return this.options=n.extend({},this.options,t),this},_init:function(){var n=this.options;n.autoOpen&&this._open()},_create:function(){var e=this,u=this.$ui,r=this.options,i=this.thisClass,t=this.struct,f=u._obj(r.pushTo);t.$uiThis=u._uiItem().addClass(i+" "+i+"-"+this.typeClass).tpuiPosition({my:r.positionMy,at:r.positionAt}).appendTo(f.get(0)?f:n("body")),t.$uiInner=u._uiSub().addClass(i+"-inner").appendTo(t.$uiThis),t.$uiContent=u._uiSub().addClass(i+"-content").append(this.$this).appendTo(t.$uiInner),this._head(),this._buttons(),t.$uiClose=u._uiHandleLink("关闭").attr("title","点击关闭窗口").addClass(i+"-close"),t.$uiHead?t.$uiClose.appendTo(t.$uiHead):(t.$uiThis.addClass(i+"-headless"),t.$uiClose.appendTo(t.$uiInner)),r.mask&&(t.$uiMask=n("."+i+"-mask").get(0)?n("."+i+"-mask").eq(0):u._uiMask().addClass(i+"-mask "+i+"-mask-"+r.maskClass).appendTo(n("body")),t.$uiMask.hide()),t.$uiThis.hide(),this._uiEvent(),r.onCreate.apply(this)},_head:function(){var f=this,t=this.$this,u=this.$ui,r=this.options,i=this.thisClass,n=this.struct;(this.title=r.title||t.attr("title")||t.attr("data-title")||null,r.head&&this.title)&&(t.removeAttr("title data-icon-before data-icon-after"),n.$uiHead=u._uiSub().addClass(i+"-head").attr("title","按住拖动可更改窗口位置").prependTo(n.$uiInner),n.$uiTitle=u._uiSub().addClass(i+"-title").append("<span>"+this.title.replace(/<[^>]+>/g,"")+"</span>").appendTo(n.$uiHead),u._icon(t,n.$uiTitle.children("span")),r.draggable&&n.$uiThis.tpuiDrag({handle:"."+i+"-head"}))},_buttons:function(){if(this.options.buttons){var r=this,e=this.$this,f=this.$ui,u=this.options,i=this.thisClass,t=this.struct;t.$uiButtons&&t.$uiButtons.remove(),t.$uiButtons=f._uiSub().addClass(i+"-buttons").appendTo(t.$uiInner),n.each(u.buttons,function(i,u){var f=n("<button>"+i.replace(/<[^>]+>/g,"")+"</button>").on({"click.dialogButtonClick touchend.dialogButtonClick":function(){u(r)}}).appendTo(t.$uiButtons).tpuiButton()}),t.$uiButtonItem=t.$uiButtons.children()}},_uiEvent:function(){var n=this,i=this.$this,r=this.options,t=this.struct;i.on({"_open.dialogOpen":function(){n._open()},"_close.dialogClose":function(){n._close()}});t.$uiClose.on({"click.dialogClose touchend.dialogClose":function(t){t.preventDefault(),n.uiClose=!0,n._close()}})},_open:function(){if(!this.isOpen){var n=this,r=this.$ui,i=this.options,t=this.struct;t.$uiThis.show(1,function(){n.uiClose=!1,n.isOpen=!0,n._winddowEventToggle(),n.$this.show().find(":text:first").focus(),n._resize();i.onOpen(n)}),this._maskToggle(!0),this.scrollLock&&r._windowLock(!0)}},_close:function(n){if(this.isOpen){var t=this,u=this.$ui,i=this.options,n=i.removeMode,r=this.struct;r.$uiThis.hide(1,function(){t.isOpen=!1;i.onClose(t);n&&r.$uiThis.empty().remove(),t.scrollLock&&u._windowLock(!1)}),this._maskToggle(!1),this._winddowEventToggle()}},_maskToggle:function(n){var r=this,u=this.options.maskClose,f=this.speed,t=this.struct.$uiMask,i="click.dialogClose touchend.dialogClose";t&&(n?t.on(i,function(n){n.preventDefault(),u&&(r.uiClose=!0,r._close())}).show():t.off(i).hide())},_winddowEventToggle:function(){var t=this,f=this.struct,u=this.thisClass,i=this.$window,r=this.$document;if(this.isOpen){r.on({"click.dialogBlank touchend.dialogBlank":function(i){n(i.target).closest("."+u).length<=0&&n(i.target).closest("."+u+"-mask").length<=0&&t._close()}});i.on({"scroll.dialogScroll resize.dialogResize orientationchange.dialogResize":function(n){t._resize(),n.preventDefault()},"keyup.dialogEsc":function(n){n.keyCode==27&&(t.uiClose=!0,t._close(),n.preventDefault())}})}else r.off("click.dialogBlank touchend.dialogBlank"),i.off("scroll.dialogScroll resize.dialogResize orientationchange.dialogResize keyup.dialogEsc")},_resize:function(){var t=this,n=this.$ui;struct=this.struct,options=this.options,scrollSize=n._scrollbarWidth(),size=this.size,size.offset=40,size.thisSize=n._dimensions(this.$this),size.windowSize=n._dimensions(this.$window),size.content=n._dimensions(struct.$uiContent),size.exclude||(size.exclude=0,size.exclude=struct.$uiHead?n._dimensions(struct.$uiHead).height:0,size.exclude+=struct.$uiButtons?n._dimensions(struct.$uiButtons).height:0),size.max={width:size.windowSize.width-size.offset,height:size.windowSize.height-size.offset-size.exclude},size.base||(size.base={width:Math.abs(parseInt(options.width))||"auto",height:Math.abs(parseInt(options.height))||"auto"},size.now={width:size.base.width,height:size.base.height}),size.now.width=size.max.width<=size.now.width?size.max.width:size.base.width=="auto"?size.max.width<=size.thisSize.width?size.max.width:"auto":size.max.width<=size.base.width?size.max.width:size.base.width,size.now.height=size.max.height<=size.now.height?size.max.height:size.base.height=="auto"?size.max.height<=size.thisSize.height?size.max.height:"auto":size.max.height<=size.base.height?size.max.height:size.base.height,struct.$uiContent.css(size.now),struct.$uiThis.tpuiPosition("update")}},n.tpUI._gadgets("Dialog",n.tpuiDialog,n.tpuiDialog.prototype),n.tpuiTab=function(i,r){return this.$ui=n.tpUI||{},this.$this=this.$ui._obj(i),this.name="tab",this.thisClass=t+"-"+this.name,this.typeClass=this.$this.attr("data-type")||"base",this.options=r,this.$this=this.$ui._obj(i),this.$sub=this.$this.children(),this.subLength=this.$sub.length,this._create(),this},n.tpuiTab.prototype={_option:{startInt:0,autoPlay:!1,timer:5e3,mode:"display",direction:"x",speed:600,easing:"swing",tabAttr:"title",tabBox:null,tabEvent:"click",refer:!1,referBox:null,referEvent:"click",option:!0,optionToggle:!0,optionPrev:"上翻",optionNext:"下翻",onCreate:n.noop,onFlip:n.noop,version:"2.0"},_init:function(){this.tabInt=parseInt(this.options.startInt),this.autoPlay=null,this._flip()},_create:function(){var n=this;this.$uiThis=this.$ui._uiItem().addClass(this.thisClass+" "+this.thisClass+"-"+this.typeClass).appendTo(this.$this),this.$uiContent=this.$ui._uiSub().addClass(this.thisClass+"-content").appendTo(this.$uiThis),this.$uiContentList=this.$ui._uiSub().addClass(this.thisClass+"-content-list").append(this.$sub).appendTo(this.$uiContent),this.$uiContentSub=this.$uiContentList.children(),this._tab(),this.options.refer&&this._refer(),this._uiEvent();this.options.onCreate(this)},_tab:function(){var t=this;this.$uiTab=this.$ui._uiSub().addClass(this.thisClass+"-nav"),this.$uiTabList=this.$ui._uiSub().addClass(this.thisClass+"-nav-list").appendTo(this.$uiTab),n.each(this.$sub,function(i,r){var e=n(r).attr(t.options.tabAttr)||i,u=null,f=null;t.options.tabAttr=="title"&&n(r).removeAttr("title"),n(r).appendTo(t.$uiContentList),u=t.$ui._uiSub().appendTo(t.$uiTabList),f=t.$ui._uiHandleLink(e).appendTo(u),t.$ui._icon(n(r),f)}),this.options.tabBox?this.$uiTab.appendTo(this.$ui._obj(this.options.tabBox)):this.$uiTab.appendTo(this.$uiThis),this.$uiTabSub=this.$uiTabList.children()},_refer:function(){var i=this,n,t;for(this.$uiRefer=this.options.referBox?this.$ui._obj(this.options.referBox):this.$ui._uiSub().addClass(this.thisClass+"-refer").appendTo(this.$uiThis),this.$uiReferList=this.$ui._uiSub().addClass(this.thisClass+"-refer-list").appendTo(this.$uiRefer),n=1;n<=this.subLength;n++)t=$ui._uiHandleLink(n).appendTo(i.$uiReferList);this.$uiReferSub=this.$uiReferList.children()},_uiEvent:function(){var t=this;switch(this.options.tabEvent){case"hover":this.$uiTabSub.on({mouseenter:function(){t.tabInt=n(this).index(),t._flip()}});break;case"click":default:this.$uiTabSub.on({click:function(){t.tabInt=n(this).index(),t._flip()}})}if(this.options.refer)switch(option.referEvent){case"hover":this.$uiReferSub.on({mouseenter:function(){t.tabInt=n(this).index(),t._flip()}});break;case"click":default:this.$uiReferSub.on({click:function(){t.tabInt=n(this).index(),t._flip()}})}},_flip:function(){this.$uiContentSub.removeClass(t+"-active").hide().eq(this.tabInt).addClass(t+"-active").show(),this.$uiTabSub.removeClass(t+"-active").eq(this.tabInt).addClass(t+"-active"),this.options.refer&&this.$uiReferSub.removeClass(t+"-active").eq(this.tabInt).addClass(t+"-active")}},n.tpUI._gadgets("Tab",n.tpuiTab,n.tpuiTab.prototype),n.tpuiAccordion=function(i,r){return this.$ui=n.tpUI||{},this.$this=this.$ui._obj(i),this.$sub=this.$this.children(),this.name="accordion",this.thisClass=t+"-"+this.name,this.typeClass=this.$this.attr("data-type")||"base",this.options=r,this.subLength=this.$sub.length,this._create(),this},n.tpuiAccordion.prototype={_option:{startInt:0,toggle:!0,autoOpen:!0,toggleOther:!0,toggleEvent:"click",speed:400,easing:"swing",onCreate:n.noop,onShow:n.noop,onHide:n.noop,version:"2.0"},_init:function(){this.playInt=parseInt(this.options.startInt),this._run("run")},_create:function(){var r=this;this.$uiThis=this.$ui._uiItem().addClass(this.thisClass+" "+this.thisClass+"-"+this.typeClass).appendTo(this.$this),n.each(this.$sub,function(t,i){var u=n(i);titleSet=u.attr("title")||u.attr("data-title")||"",u.attr("title")&&u.removeAttr("title");var e=r.$ui._uiItem().addClass(r.thisClass+"-sub").appendTo(r.$uiThis),f=r.$ui._uiSub().addClass(r.thisClass+"-head").appendTo(e),o=r.$ui._uiHandleLink(titleSet).addClass(r.thisClass+"-title").appendTo(f),h=r.$ui._uiHandleLink("&nbsp;").addClass(r.thisClass+"-arrow").appendTo(f),s=r.$ui._uiSub().addClass(r.thisClass+"-content").hide().append(u).appendTo(e);r.$ui._icon(u,o)}),this.$uiSub=this.$uiThis.children(),this._uiEvent();this.options.onCreate(this)},_run:function(n){var t=this,r=t._effect,i="_"+n;r._slide[i](t)},_uiEvent:function(){var i=this;this.$this.on({_show:function(n,t){i.playInt=t,i._run("show")},_hide:function(n,t){i.playInt=t,i._run("hide")}});this.$uiSub.find("."+this.thisClass+"-head").on({click:function(){i.playInt=n(this).parent().index(),i._run("toggle")}})},_effect:{_accorLoad:function(n){var i={};return i.activeClass=t+"-active",i.contentClass="."+n.thisClass+"-content:first",i.$sub=n.$uiSub,i.$subContent=i.$sub.children(i.contentClass),i.$subVis=n.$uiThis.children("."+i.activeClass),i.$subVisContent=i.$subVis.children(i.contentClass),i.$subThis=i.$sub.eq(n.playInt),i.$subThisContent=i.$subThis.children(i.contentClass),n.runObj=i,n},_slide:{_run:function(n){n.options.toggle?this._toggle(n):this._show(n)},_toggle:function(n){var t=n._effect._accorLoad(n),r=t.options,i=t.runObj;i.$subThisContent.is(":visible")?this._hide(t):this._show(t)},_show:function(n){var i=n._effect._accorLoad(n),t=i.options,r=i.runObj;t.toggleOther&&this._hide(i),r.$subThis.addClass(r.activeClass),r.$subThisContent.stop(!0,!1).slideDown(t.speed,t.easing,function(){t.onShow(i)})},_hide:function(n){var r=n._effect._accorLoad(n),t=r.options,i=r.runObj;t.toggleOther&&(i.$subVis.removeClass(i.activeClass),i.$subVisContent.stop(!0,!1).slideUp(t.speed,t.easing,function(){t.onHide(r)})),i.$subThis.removeClass(i.activeClass),i.$subThisContent.stop(!0,!1).slideUp(t.speed,t.easing,function(){t.onHide(r)})}}}},n.tpUI._gadgets("Accordion",n.tpuiAccordion,n.tpuiAccordion.prototype),n.tpuiPasswordStrength=function(i,r){return this.$ui=n.tpUI||{},this.$this=this.$ui._obj(i),this.$this[0].type!=="password",this.options=r,this.struct={},this.thisClass=t+"-password-strength",this.typeName=this.$this.attr("data-type")||this.options.type,this.typeClass=this.thisClass+"-"+this.typeName,this.mode=this.options.mode,this.modeLength=this.mode.length,this.activeMode=null,this.modeInterval=100/this.modeLength,this.score=0,this.active=0,this._create(),this},n.tpuiPasswordStrength.prototype={_option:{type:"progress",title:"密码强度：",score:"密码强度综合评分<em>%S%</em>",tagMode:1,proposal:!0,synch:!1,mode:[[{name:"weak",value:0,tag:"较弱",tips:"安全性较差，强烈建议使用更为复杂的组合",callback:n.noop}],[{name:"general",value:1,tag:"一般",tips:"安全性一般，建议使用数字、字母和符合组合",callback:n.noop}],[{name:"powerful",value:2,tag:"较强",tips:"太棒了，您设置的密码已经足够安全了",callback:n.noop}]],width:null,height:null,onCreate:n.noop,version:"1.0"},_init:function(){this._typeUpdate(),this._toggle(!1)},_create:function(){var f=this,r=this.$ui,t=this.struct,i=this.thisClass,u=this.typeClass;t.$uiThis=r._uiItem().addClass(i+" "+u),t.$base=r._uiItem().addClass(i+"-base").appendTo(t.$uiThis),t.$referInput=n("<input>").attr({type:"hidden",readonly:"readonly"}).prop("readonly",!0).appendTo(t.$base),this.$this.after(t.$uiThis);switch(this.typeName){case"progress":t=f._typeProgress(t)}this._uiEvent()},_typeProgress:function(n){var u=this,i=this.$ui,t=this.thisClass,r=this.options;return r.title&&(n.$main=i._uiItem().addClass(t+"-title").append("<span>"+r.title+"</span>").appendTo(n.$uiThis)),n.$main=i._uiItem().addClass(t+"-main").appendTo(n.$uiThis),n.$progressBar=i._uiItem().addClass(t+"-progress-box").appendTo(n.$main),n.$progress=i._uiItem().append("&nbsp;").addClass(t+"-progress-bar").appendTo(n.$progressBar),r.tagMode&&r.tagMode>0&&(n.$tagBox=i._uiItem().addClass(t+"-tag-box").appendTo(n.$main)),r.score&&(n.$score=i._uiItem().addClass(t+"-score").appendTo(n.$main)),n},_typeProgressUpdate:function(){var t=this,n=this.activeMode;$struct=this.struct,tagItemClass=this.thisClass+"-tag-item "+this.thisClass+"-",$struct.$tagBox.html('<span class="'+tagItemClass+n.name+'" title="'+n.tips+'">'+n.tag+"</span>"),$struct.$progress.stop(!0,!1).animate({width:t.score+"%"})},_typeUpdate:function(){var n=this;this._score(),this._modeRead(),this._scoreTips(),this.struct.$referInput.val(this.active);switch(this.typeName){case"progress":n._typeProgressUpdate();break;case"radian":n._typeRadianUpdate();break;case"default":default:n._typeDefaultUpdate()}},_uiEvent:function(){var t=this,n=!1;this.$this.on({"focus.passwordStrengthToggle":function(){n=!0,t._toggle(!0)},"blur.passwordStrengthToggle":function(){n=!1,t._toggle(!1)},"keyup.passwordStrengthCheck":function(){n&&t._typeUpdate()}})},_toggle:function(n){var t=this.struct.$uiThis,i=t.is(":visible");this.options.synch&&t.toggle(n)},_score:function(){var n=this.$this.val(),t;return(this.score=0,n=="")?this.score:(n.length>=1&&(this.score+=10),/[0-9]{1,}/g.test(n)&&(this.score+=10),/[a-z]{1,}/g.test(n)&&(this.score+=10),/[A-Z]{1,}/g.test(n)&&(this.score+=20),/[\~\@\#\$\%\&\_\-\+\.\?]+?/g.test(n)&&(this.score+=25),t=n.match(/([\~\@\#\$\%\&\_\-\+\.\?]+?)/g),t&&t.length>=2&&(this.score+=25),this.score)},_modeRead:function(){var i=null,n=0,t=this.struct;switch(this.score){case 0:n=0;break;case 100:n=this.modeLength-1;break;default:n=Math.floor(Math.abs(this.score-this.modeInterval)/this.modeInterval)}n>0&&n==this.active||(this.activeMode=this.mode[n][0],this.active=n)},_scoreTips:function(){this.options.score&&this.options.score.match(/%S%/)&&this.struct.$score.html("<span>"+this.options.score.replace(/%S%/g,this.score)+"</span>")}},n.tpUI._gadgets("PasswordStrength",n.tpuiPasswordStrength,n.tpuiPasswordStrength.prototype)}(jQuery),$(function(){var n=null,r="images/media/",i=".mp3",t=new $.tpuiMedia({type:"audio"});$uiLotteryBuzzer=new $.tpuiMedia({type:"audio"}),$.appBase=function(){var r=r||$("body"),v=$("#broadcast-marquee .broadcast-marquee-list:first"),h=$("#menu-base").children("ul:first"),f=$("#uss-fs"),c=f.find("em:first"),l=f.find("i:first"),o=!0,a="123,456,789,00",t=["已隐藏","显示","隐藏"],e=$("#sum-refresh"),s=$("#sum-parse"),u=$("#sum-parse-inner"),i=!1;r.tpuiLoading({escape:!1,title:!1,mask:!0}),$(".tpui-select").tpuiSelect(),$(".tpui-text").tpuiText(),$(".tpui-button").tpuiButton(),$(".tpui-radio").tpuiRadio(),$(".kc-calendar").cxCalendar({type:"YYYY-MM-DD"});$(".icon-kc-calendar").on("click",function(){var n=$(this).prev().find("input.kc-calendar:first"),t=n.val();n.focus().val(t).cxCalendar(function(n){n.show()})});e.on("click",function(){var t=$(this),n="loading";i||(i=!0,t.addClass(n),setTimeout(function(){t.removeClass(n),i=!1},5e3))});u.tpuiDialog({width:520});s.on("click",function(n){return n.preventDefault(),u.tpuiDialog("_open"),!1});n=new $.tpuiNotify({size:360,position:"right,bottom",doUpdate:function(n){$(".op-message em:first").text(n.itemLength)}}),$.fixderBase(),h.tpuiMenu({targetIndex:".active",toggleOther:!0,speed:0}),$("#repassword-base").tpuiPasswordStrength({title:"密码安全性：",score:null})},$.loadingPage=function(){var n=this;return $("#loading-page").get(0)||$("#footer-wrap").after('<div id="loading-page"><div class="lp-content"><div class="lpc-sub image"><span>加载中</span></div><div class="lpc-sub progress"><span>Loading···</span></div><div class="lpc-sub tips"><span>欢迎来到 K彩 在线娱乐平台</span></div></div></div>'),this.$loading=$("#loading-page"),this.$loadingCont=this.$loading.children(".lp-content:first"),this.$loadingSub=this.$loading.find(".lpc-sub"),this.$loadingProgress=this.$loadingCont.children(".progress:first"),this.isShow=this.$loading.is(":visible"),this.isAnimate=!1,this._show=function(){n.isShow||n.isAnimate||(n.isAnimate=!0,n.$loading.show(0,function(){n.isShow=!0,n.isAnimate=!1}))},this._hide=function(){n.isShow&&!n.isAnimate&&(n.isAnimate=!0,n.$loading.hide(0,function(){n.isShow=!1,n.isAnimate=!1}))},this},$.fixderBase=function(){function o(o){f.toggleClass(y,o),e.toggleClass(s,o),r.toggleClass(v,o),l(o),!o&&n&&(t.removeClass(i).children("ul").hide(),n=!1),u=o}function l(n){if(n&&n==!0)c.on(h,function(n){$(n.target).closest(".fixder-base").length<=0&&o(!1)});else c.off(h)}var f=$("#fixder"),c=$(document),h="click.blankCheck",a=f.children(".f-handle:first"),e=f.children(".f-menu:first"),r=a.children("a:first"),t=e.children("ul:first").children("li"),u=!1,n=!1,v="fh-close",y="action",s="f-menu-on",i="f-menu-action";r.removeClass(),e.removeClass(s),t.find("ul").hide();r.on({click:function(){if(u&&n)return t.removeClass(i).children("ul").hide(),n=!1,!1;o(u?0:1)}});t.on({click:function(){var t=$(this);n=!0,t.addClass(i).children("ul:first").show(),t.siblings().removeClass(i).children("ul").hide()}})},$.appModalDialog=function(n,t,i){if(n)return this.time=new Date,this.isMethod=typeof n=="string",this.isMethod||(this.message=$.isPlainObject(n)?n:this._options),this.message=this.isMethod?$.extend({},this._options,{type:i||"default",message:n,buttons:t||null}):$.extend({},this._options,n,{type:i||"default",buttons:t||null}),this._create(),this},$.appModalDialog.prototype={_options:{type:"default",icon:!0,useTitle:"K彩消息",title:null,titleSub:null,message:null,buttons:null,onClose:$.noop},_create:function(){var n=this,i="app-modal-dialog",t=this.struct||{};t.$uiThis=$("<div>").addClass(i).attr({title:n.message.useTitle,"data-icon":"message"}).append(this._inner()).tpuiDialog({pushTo:"#tmpDialogWrap",autoOpen:!0,mask:!0,maskClose:!1,removeMode:!0,buttons:n.message.buttons,width:480,onClose:function(t){n.message.onClose(),t._close(!0)}})},_inner:function(){var t=this.message,i="images/status/",r=".png",n="";if(n+='<div class="complete complete-'+t.type+'">',t.icon){n+='<div class="complete-sub image"> <span>';switch(t.type){case"danger":n+='<img src="'+i+"fail"+r+'" alt="">';break;case"success":n+='<img src="'+i+"succes"+r+'" alt="">';break;case"warning":n+='<img src="'+i+"warning"+r+'" alt="">';break;case"doubt":n+='<img src="'+i+"tips"+r+'" alt="">';break;case"message":default:n+='<img src="'+i+"message"+r+'" alt="">'}n+="</span> </div>"}return t.title&&(n+='<div class="complete-sub title">',n+="<h2>"+t.title+"</h2>",t.titleSub&&(n+="<h4>"+t.titleSub+"</h4>"),n+="</div>"),t.message&&(n+='<div class="complete-sub description">'+t.message+"</div>"),n+="</div>"}},$.appAlert=function(n,t){if(n)var i=new $.appModalDialog(n,{"确定":function(n){n._close(!0)}},t||"warning")},$.appConfirm=function(n,t,i){if(n)return t=$.isFunction(t)?t:$.noop,new $.appModalDialog(n,{"取消":function(n){n._close(!0),t(!1)},"确定":function(n){n._close(!0),t(!0)}},i||"tips")},$.singinBase=function(){var n=$("#login-inner"),o=$("#op-loginout"),u=$(".signin-form-text"),f=$(".signin-form-submit, .signin-form-button"),t=$(".signin-form-switch"),i=$(".signin-form-radio"),r=$(".signin-form-checkbox"),e;$loginEnter=$("#login-enter"),$thisPassword=$("input.signin-login-password:first"),$cachePassword=null,$togglePasswordHnadle=$("#show-password-text"),$regPasswordBase=$("#reg-password-base"),$regPasswordBase.tpuiPasswordStrength({title:"密码安全性：",score:null});$togglePasswordHnadle.on({click:function(n){n.preventDefault();var t=$thisPassword.attr("type")=="password"?!0:!1;$(this).toggleClass("spt-show",t),$cachePassword=$thisPassword.clone().attr("type",t?"text":"password"),$thisPassword.before($cachePassword).remove(),$thisPassword=$cachePassword}});u.tpuiText(),f.tpuiButton(),t.tpuiSwitch(),i.tpuiRadio(),r.tpuiCheckbox(),n.tpuiDialog();$loginEnter.on("click",function(t){return t.preventDefault(),n.tpuiDialog("_open"),!1})},$.bettingBase=function(){function s(){var i=$.tpUI._dimensions($("#betting-panel")),r=$.tpUI._dimensions(n),t=i.offset.left-r.width-10;n.css({left:t<=0?10:t}),o()}function o(){if(!t){var i=$("#voice-toggle"),r=i.length==0?300:i.offset().top;e.scrollTop()>=r?n.is(":visible")||(t=!0,n.show(0,function(){t=!1})):n.is(":visible")&&(t=!0,n.hide(0,function(){t=!1}))}}function a(){var r=$("#ticket-icon").offset(),i=$("#checker-lite").offset(),u=$("#ticket-icon span.ticket-icon").attr("ticketId"),t=null;t=$("<div>").attr("id","stickie-refer").addClass("animated rubberBand").append('<div class="image"><span class="ticket-icon t-s-96 ti-'+u+'">&nbsp;</span></div>').appendTo($("body")),t.fly({start:{left:r.left,top:r.top},end:{left:i.left+48,top:i.top},vertex_Rtop:.6,speed:1,onEnd:function(){t.fadeOut(function(){t.remove()})}}),$("#stickie-handle").toggleClass("stickie-handle-on")}var e=$(window),w=$(".random-selection"),b=$(".bcp-type input, .config > .head input.tn-radio"),k=$(".oc-checkbox, .pact-checker input, .tpui-checkbox, .bc-config .tn-checkbox"),u=$("#drawing-more-handle"),i=$("#drawing-more"),r=600,n=$("#cutdown-clock-fixed"),d=$("input.betting-multiple"),y=$(".bof-count input"),p=$("#keeper-list-base"),tt=$("input[type=radio][name=keeper-mode]"),g=$(".keeper-dialog"),nt=$("#keeper-create"),c=$("#keeper-import"),h=$("#keeper-create-handle"),l=$("#keeper-import-handle"),et=$(".bl-order-id"),rt=$("#order-submit"),ut=null,it="",v=["red","orgen","green","blue","purple"],f=$("#shortcut-base li"),ft="2015-05-21 15:15:27",t;if($.navToggle({autoToggle:!0,enable:"#ticket-base"}),$("body").hasClass("userbg-ggc")&&$.each($(".ticket-play-type li"),function(n){$(this).addClass("tpt-"+v[n%5])}),$.each($("#betting-panel .sidebar:first .cont"),function(n,t){var u=$(t),f=u.find(".cb-toggle:first a:first"),e=u.find(".cont-body:first"),o="cont-toggled",i=["收起栏目","展开栏目"],r=!1;f.on("click",function(n){(n.preventDefault(),r)||(r=!0,e.is(":visible")?e.hide(0,function(){u.addClass(o),f.attr("title",i[1]).find("i:first").text(i[1]),r=!1}):e.show(0,function(){u.removeClass(o),f.attr("title",i[0]).find("i:first").text(i[0]),r=!1}))})}),n.get(0)){t=!1,s();e.on({"resize.cutdownFixedInt":function(){s()},"scroll.cutdownFixedCheck":function(){o()}})}if(w.tpuiNumber({type:"depart"}),b.tpuiRadio(),k.tpuiCheckbox(),d.tpuiNumber({type:"depart"}),y.tpuiNumber({type:"depart"}),$.traceNumber(),g.tpuiDialog({pushTo:"#tmpDialogWrap",mask:!0}),p.hide(),i)u.on({click:function(){i.is(":visible")?(u.removeClass("active"),i.stop(!0,!0).fadeOut(r).dequeue().slideUp(r)):(u.addClass("active"),i.stop(!0,!0).slideDown(r).dequeue().fadeIn(r))}});h.click(function(){nt.tpuiDialog("_open")}),l.click(function(){c.tpuiDialog("_open")});$(":radio[name=keeper-mode]").on({change:function(){var n=$(this).val()=="new"?"slideUp":"slideDown";$("#keeper-list-base").stop(!0,!0)[n](function(){$(window).triggerHandler("resize.dialogResize")})}});f.find("a.o-betting").tipsy({gravity:"e"}),f.find("a.o-delete").tipsy({gravity:"s"}),$("body").tpuiLoading({mask:!0,title:null});$("#stickie-handle").on("click",a)},$.traceNumber=function(){var t=$('#trace-number .head input[name="order-config"]'),i=$(".config-sub"),e=$(".trace-text"),o=$(".trace-select"),s=$(".trace-checkbox"),f=$(".trace-switch"),r=$(".trace-radio"),n=0,u=["","bszh","gjzh"];e.tpuiText(),o.tpuiSelect(),r.tpuiRadio(),s.tpuiCheckbox(),f.tpuiSwitch(),i.hide();t.on({change:function(){n=t.filter(":checked").val(),i.hide(),n!==0&&$("#"+u[n]).show()}})},$.userCenter=function(){function f(n){n?(r=!0,u.text(o[1]),i.css({height:24})):(r=!1,u.text(o[0]),i.css({height:h}))}var e=$(".data-table-option"),v=$("#user-menu").children("ul:first"),y=$(".table"),l=$(".tab-base"),a=$("#tracr-viewer"),t=$(".forms-table"),c=$(".kc-calendar"),s=$("#trace-number-toggle"),u=s.children("dt:first").find("a:first"),i=s.children("dd:first"),h=i.get(0)?$.tpUI._dimensions(i).height:0,o=["展开全部","收起全部"],r=!0;v.tpuiMenu({targetIndex:".active",toggleOther:!0}),t.find(".tpui-text").tpuiText(),t.find(".tpui-radio").tpuiRadio(),t.find(".tpui-select").tpuiSelect(),t.find(".tpui-button").tpuiButton(),e.find(".tpui-text").tpuiText(),e.find(".tpui-button").tpuiButton(),a.find(".tpui-button").tpuiButton(),e.find(".tpui-select").tpuiSelect(),y.find(".tpui-checkbox").tpuiCheckbox(),$.fundsOption(),l.tpuiTab(),c.cxCalendar({type:"YYYY-MM-DD"}),f(r);u.on({click:function(n){n.preventDefault(),r?f(!1):f(!0)}});$.avatarChecker(),$("#rePasswordSubmitDemo").click(function(){$.appAlert("密码修改成功！请重新登录。","success")}),$("#rePasswordCancelDemo").click(function(){$.appAlert("密码修改失败！请稍后再试。","danger")}),$("#demoNewNotify").click(function(){n._add({image:"uploads/ticket/klpk.png",title:'快乐农场 奖励<em class="fc-red"> &yen;30.00 </em>元',notify:'您投注的<em class="fc-yellow">江西彩</em>第<em class="fc-blue">20130715-035</em>期已开奖，您共有<em class="fc-yellow">8</em>个号码中奖，奖励金额<em class="fc-red"> &yen; 30.00</em>元。请注意检查账户动态！',timeout:1e4,inAniName:"rubberBand",outAniName:"bounceOutRight",myData:{date:new Date},buttons:{"查看":function(n){alert(n.myData.date)},"关闭":function(n,t){t.$row.trigger("_remove")}}})}),$("#demoDialogViewMessage").click(function(){var t='<div class="module article-head"><h4>大乐透连开25期头奖破纪录 年末期待亿元巨奖</h4><ul><li><span>作者：</span><a href="#">K彩</a></li><li><span>类别：</span><a href="#">分类名称</a></li><li><span>日期：</span><em>2014年11月30日 17:38</em></li></ul></div>',n='<div class="module article-detial"><ul><li>活动仅限12月13日0：00--24：00内下单的当天高频彩的所有期次，购买高频彩全部17个彩种，全天总盈利率大于等于100%，可享受5折购买高频彩。<li><li>享受5折的用户将获得等额于活动投注金50%的红包（全场通用，2014年有效），红包于活动第二天12月14日18：00之前派发；</li><li>新时时彩五星直选-五星通选--四星，老时时彩五星直选-五星通选， 快乐8任选8-任选9-任选10，不参加活动，计算成绩时排除以上玩法，合买不参加活动；</li><li>必须在活动页面点击 “领取5折资格”按钮，免费领取活动资格，不领取资格，将不会返还红包。活动结束前任何时间领取均可算参加。 本次活动总派发奖金共1000万，派完为止，单人上限10000元，请合理安排投注；</li><li>手机客户端和电脑均可参加活动，数据同步。网易彩票保留此活动的最终解释权。</li></ul></div>',i=$("<div>").addClass("module").attr("title","消息详情").append(t+"  "+n).tpuiDialog({pushTo:"#tmpDialogWrap",autoOpen:!0,mask:!0,buttons:{"删除":function(n){n._close(!0)},"标记为已读":function(n){n._close(!0)},"确定":function(n){n._close(!0)}},onClose:function(n){n._close(!0)}})})},$.avatarChecker=function(){function r(){n.toggle(!n.is(":visible")),f()}function f(){var r="click.avatarChange",t="active";n.is(":visible")?$.each(i,function(n,f){$(f).on(r,function(){var r=$(this),o=r.attr("data-name"),f=r.find("img:first").attr("src");r.hasClass(t)||(i.removeClass(t).eq(n).addClass(t),e.attr("src",f).load(),u.val(o))})}):i.off(r)}var t=$("#avatar-checker"),e=t.children(".image").find("img:first"),o=t.children(".handle:first"),n=t.children(".refer:first"),s=n.find("a.close:first"),i=n.find("li"),u=t.find(".file:first input");o.add(s).on("click",function(){r()})},$.fundsOption=function(){function a(){n.orderId=v(16),n.type=u.find(".active input[type=radio]").val();var t=o[n.type];if(n.bankName=t.name||null,n.bankUrl=t.site||null,n.username=t.account||null,n.useraccount=t.code||null,n.sum=Math.abs(parseInt($("#tpui-funds-sum").val())),!n.username||!n.useraccount){$.appAlert("没有检测到您的银行账户资料，请确定您已经绑定了银行卡。","danger");return}if(!n.sum){$.appAlert("充值金额填写错误，请重新填写。","danger");return}}function s(n){var t="loading...";if(i.sum.text(n?n.sum.toFixed(2)+"元":t),i.bankname.text(n?n.bankName:t),i.username.text(n?n.username:t),i.useraccount.text(n?n.useraccount:t),i.orderid.text(n?n.orderId:t),n){l.text(n.bankName).on({"click.bankPop":function(t){t.preventDefault(),window.open(n.bankUrl)}});h.on({"click.referDemoOpen":function(t){t.preventDefault(),$("#rd-"+n.type).tpuiDialog("_open")}})}else l.text(t).off("click.bankPop"),h.off("click.referDemoOpen")}function v(n){for(var r="ABCDEFGHJKMNPQRST23456789ABCDEFGHJKMNPQRST23456789ABCDEFGHJKMNPQRST23456789",u=r.length,i="",t=0;t<n;t++)i+=r.charAt(Math.floor(Math.random()*u));return i}function e(n){var t="click.promptCopy";if(n)f.on(t,function(n){n.preventDefault(),window.prompt("复制到剪贴板: Ctrl+C",$(this).prev("span:first").text())});else f.off(t)}var y=$("#tpui-funds-sum"),p=$("#recharge-model"),c=$(".recharge-demo"),r=$("#recharge-order"),d=$("#recharge-order-submit"),t=$("#recharge-order-refer"),l=$("#recharge-order-prop"),h=$("#recharge-order-demo"),b=$("#recharge-order-back"),g=$("#recharge-order-close"),u=$("#recharge-account-checker"),f=t.find(".rc-copy"),w=$("#withdrawal-submit"),k=$(".security-task .st-item"),n={},i={},o=o||{gsyh:{name:"中国工商银行",site:"http://www.icbc.com.cn/icbc/",account:"K彩张",code:"18723981290830918209809380912"},cft:{name:"腾讯财付通",site:"https://www.tenpay.com/v2/",account:"K彩娱乐",code:"kuaicedc@qq.com"},zfb:{name:"支付宝",site:"https://www.alipay.com/",account:"K彩在线娱乐",code:"kuaicai@126.com"}};$.each(k,function(n,t){var r=$(t),u=r.find(".option:first a:first"),i=r.find(".task-inner:first");i.tpuiDialog({pushTo:"#tmpDialogWrap",width:560});u.on("click",function(n){return n.preventDefault(),i.tpuiDialog("_open"),!1})}),i={sum:$("#rc-sum"),bankname:$("#rc-bankname"),username:$("#rc-username"),useraccount:$("#rc-useraccount"),orderid:$("#rc-orderid")},y.tpuiNumber(),t.find(".button-group button").tpuiButton(),r.tpuiDialog({pushTo:"#tmpDialogWrap",scrollLock:!0,width:680,maskClose:!1}),t.tpuiDialog({pushTo:"#tmpDialogWrap",scrollLock:!0,width:520,maskClose:!1,onOpen:function(){e(!0)},onClose:function(){e(!1),s(null),r.tpuiDialog("_close"),c.tpuiDialog("_close")}}),c.tpuiDialog({pushTo:"#tmpDialogWrap",scrollLock:!0,mask:!1,width:575}),u.find("input").each(function(){$(this).is(":checked")&&$(this).parents("label:first").addClass("active");$(this).on({change:function(){u.find("label.active").removeClass("active"),$(this).is(":checked")&&$(this).parents("label:first").addClass("active")}})});p.find("a").on("click",function(n){return n.preventDefault(),r.tpuiDialog("_open"),!1});d.on({click:function(i){i.preventDefault(),a(),r.tpuiDialog("_close"),s(n),t.tpuiDialog("_open")}});b.on({click:function(n){n.preventDefault(),t.tpuiDialog("_close"),r.tpuiDialog("_open")}});g.on({click:function(n){n.preventDefault(),t.tpuiDialog("_close")}});w.on({click:function(n){n.preventDefault(),$.appAlert("提现申请提交成功","success")}})},$.navToggle=function(n){function h(){if(!i.enable)return!1;var n=i.enable.split(",");for(useItem in n)if($.tpUI._obj(n[useItem]).get(0))return!0;return!1}function c(){var t="nav-toggle-handle",n=$("#"+t);return n.get(0)?n:n=$('<div id="'+t+'"><a href="javascript:void(0);">主导航</a></div>').appendTo($("body"))}function f(){u=!0,r.toggleClass("active",!t).attr("title",l[t?1:0]),a.css({"margin-top":t?0:"-66px"}),s.animate({top:t?0:"-138px"},0,function(){t=!t,u=!1}),e.toggle(t),o.toggleClass("ub-index",!t)}var i=$.extend(!0,{},{autoToggle:!1,enable:null,runSpeed:"normal",version:"1.0"},n);if(!i.enable)return!1;var s=$("#header-wrap"),a=$("#content-wrap"),e=$("#window-option"),o=$("#user-base"),r=null,v={},y=i.runSpeed,l=["点击展开导航栏","点击收起折叠导航栏"],t=!i.autoToggle,u=!1;e.hide(),o.addClass("ub-index"),h()&&(r=c(),r.on("click",function(){u||f()}).tipsy({gravity:"sw"}),f())},$.lotteryTopic=function(){function u(){r=n.children(),$.each(r,function(n,i){var r=$(i),o=r.find(".image:first img:first"),e=r.find(".lo-topic:first"),u=r.find(".lo-replace:first");e.on("click",function(){v(r)});u.on("click",function(){f=n,t(1)})}),o()}function o(){k=r.map(function(){return parseInt($(this).attr("data-index"))})}function t(n){var r=$("body"),i=h.find("#lc-close");h.stop(!0,!0).toggle(n,function(){if(y.toggleClass("lock",n),p(),n){i.on("click.replaceClose",function(){t(0)});r.on("click.replaceBlank",function(n){$(n.target).closest(".ld-checker").length<=0&&t(0)})}else i.off(".replaceClose"),r.off(".replaceBlank")})}function p(){var n=h.find("ul:first li");n.off().on("click.itemCkecked",function(){var i=$(this),n=e(i);r.eq(f).before(c(n)).remove(),u(),f=-1,t(0),o()})}function v(t){if(!i){var o=e(s.find("li:first")),f=e(t),r=l(f);t.remove(),n.prepend(c(o)),s.empty().append(r),i=setTimeout(function(){a(),u(),i=clearTimeout(i)},2e3)}}function c(n){return $("<li>").attr({"data-title":n.title,"data-name":n.name}).append('<span class="image"><i><img src="'+n.icon+'" alt="'+n.title+'" /></i></span>').append('<a class="ldb-betting" href="'+n.bettingUrl+'">立即投注</a>').append('<a class="ldb-option lo-topic" href="javascript:void(0);"><i>&nbsp;</i><em>置顶</em></a>').append('<a class="ldb-option lo-replace" href="javascript:void(0);"><i>&nbsp;</i><em>替换</em></a>')}function l(n){return $("<li>").attr({"data-title":n.title,"data-name":n.name}).append('<div class="image"> <a href="'+n.bettingUrl+'"><img src="'+n.icon+'" alt="'+n.title+'" /></a> </div>').append('<div class="title"> <h4><a href="'+n.bettingUrl+'">'+n.title+"</a></h4> </div>").append('<div class="cutdown"><h4>距离<span>第<em>'+n.nextPeriod.period+'</em>期</span>开奖剩余：</h4> <div class="cutdown-lite"><span class="lc-loading">Loading···</span></div></div>').append('<div class="betting-btn"> <a href="'+n.bettingUrl+'">立即投注</a> </div>')}function a(){for(var i=(1520).toString(),r=i.length,t=$("<ul>"),n=0;n<r;n++)t.append("<li><span>"+i.substr(n,1)+"</span></li>"),n%2&&n<r-1&&t.append("<li><span>:</span></li>");$(".cutdown-lite").empty().append(t)}function e(n){return{name:n.attr("data-name"),title:n.attr("data-title"),bettingUrl:"betting-"+n.attr("data-name")+".html",icon:"uploads/ticket/"+n.attr("data-name")+".png",nextPeriod:{period:20150415002,drawTime:128097733e4,status:0}}}if($(".lottery-dragbel").get(0)){var y=$(".lottery-dragbel"),h=$("#ld-checker"),b=$("#ld-topic"),s=b.find("ul:first"),g=s.children(0),w=$("#ld-base"),n=w.find("ul:first"),r=n.children(),i=null,d={},k=null,f=-1;u(),n.dragsort({dragSelector:"li",dragSelectorExclude:"a,i,em,span",dragEnd:o,placeHolderTemplate:'<li class="ld-placeholder"><div></div></li>'})}},$.noticeBase=function(){function r(){var r=$("#nbi-"+n),f,u;r.get(0)&&(f=r.children(".head"),u=r.children(".body"),r.siblings($("."+i)).removeClass(i),r.addClass(i),t.parent().stop(!0,!1).animate({scrollTop:parseInt(r.position().top)+8},600))}var f=$("#notice"),u=f.find(".notice-list:first li"),o=$("#notice-more"),t=$("#notice-base"),e=t.find(".item"),i="active",n=null;if(f.get(0)){t.tpuiDialog({width:600,onOpen:function(){r()},onClose:function(){n=null,r()}});o.on("click",function(i){return i.preventDefault(),n=u.eq(0).children("a").attr("data-id"),t.tpuiDialog("_open"),!1});u.children("a").on("click",function(i){return i.preventDefault(),n=$(this).attr("data-id"),t.tpuiDialog("_open"),!1});e.children(".head").on("click",function(){var t=$(this).parent(".item");thisId=t.attr("data-id"),n==thisId?t.toggleClass(i):(n=thisId,r())})}},$.actionBase=function(){var n=$("#action-base"),t=n.find(".ab-item");n.get(0)&&$.each(t,function(n,t){var r=$(t),u=r.children(".abi-handle:first"),i=r.children(".abi-content:first");u.on("click",function(){if(i.is(":visible")){i.hide();return}$(".abi-content:visible").hide(),i.show(),$("html,body").scrollTop(parseInt(r.offset().top)-10)})})}}),function(n){n.projectionBanner=function(){function r(){i.is(":visible")?i.stop(!0,!0).slideUp(800,function(){f.off("click.bannerHide")}):i.stop(!0,!0).delay(1e3).slideDown(800,function(){f.on({"click.bannerHide":function(i){i.preventDefault(),n.cookie(t,!0),r()}})})}var u=n("#projection-topic"),i=u.find(".item:first"),f=u.find(".close:first"),t="kc-banner-toggled",e=n.cookie(t)&&n.cookie(t)=="true"?!0:!1;e||r()},n.lotteryChart=function(t){return this.$window=n(window),this.$document=n(document),this.$body=n("body"),this.$lotteryChartBox=t,this.chartDimension=this._dimension(this.$lotteryChartBox),this},n.lotteryChart.prototype={_resize:function(){},_tableItemToggle:function(n,t,i){n.toggleClass(t,i)},_omissionToggle:function(t){this._tableItemToggle(n("td.lc-omission"),"lc-omission-hide",t)},_splitToggle:function(t){this._tableItemToggle(n("tr.lc-split"),"lc-split-hide",t)},_cross:function(){var r=this,t=r.chartDimension,i=n("<div>").addClass("lc-cross lc-cross-line").appendTo(this.$lotteryChartBox),u=n("<span>").addClass("lccl-hor").css({width:t.width*3,height:"1px","margin-left":0-t.width}).appendTo(i),u=n("<span>").addClass("lccl-ver").css({width:"1px",height:t.height*3,"margin-top":0-t.height}).appendTo(i);return i},_crossToggle:function(n){var t=this,r="mouseover.crossCheck",u="mouseout.crossCheck",i=this.$lotteryChartBox;if(this.$cross||(this.$cross=this._cross()),this.$cross.fadeTo(300,n?1:0),n)i.on({"mouseover.crossCheck":function(){t._crossMoveEvent(!0)},"mouseout.crossCheck":function(){t._crossMoveEvent(!1)}});else i.off(r+" "+u),t._crossMoveEvent(!1)},_crossMoveEvent:function(n){var r=this.$document,u=this.$cross,t=this.chartDimension,i="mousemove.lcCrossCheck",n=n||!1;if(n)r.on(i,function(n){n.preventDefault(),u.stop(!0,!0).animate({left:n.pageX-t.left,top:n.pageY-t.top})});else r.off(i)},_drawLine:function(t,i,r,u,f){var tt=this,b=null,h=null,g=i.children("span:first"),nt=r.children("span:first"),w=3,l=0,d=0,a=0,k=0,e=this._dimension(g),s=this._dimension(nt),c=e,v=c.width/w,p=c.height/w,o={},y=this._dimension(t);o={left:Math.min(e.left,s.left),top:Math.min(e.top,s.top),width:parseInt(Math.abs(e.left-s.left)+c.width),height:parseInt(Math.abs(e.top-s.top)+c.height)},b=n('<canvas width="'+o.width+'" height="'+o.height+'">').css({position:"absolute","z-index":99,left:o.left-y.left,top:o.top-y.top}).prependTo(t),h=b[0].getContext("2d"),h.lineWidth=f||1,h.lineJoin="round",h.strokeStyle=u||"#0000",d=e.top-o.top+(c.height-p),l=e.left-o.left+c.width/2,k=s.top-o.top+p,a=s.left-o.left+c.width/2,e.left<s.left&&(l=l+v,a=a-v),e.left>s.left&&(l=l-v,a=a+v),h.moveTo(l,d),h.lineTo(a,k),h.stroke()},_dimension:function(n){var t=n.offset();return{width:parseInt(n.outerWidth()),height:parseInt(n.outerHeight()),left:parseInt(t.left),top:parseInt(t.top)}}},n.kcScratch=function(t,i){return this.$this=n.tpUI._obj(t),this.options=n.extend(!0,{},this._options,i),this},n.kcScratch.prototype={_options:{autoFilll:!0,width:null,height:null,fillImage:null,fillColor:"#aaaaaa",brusheSize:5,scratchPatch:null,bindFor:null,onFrom:null,onCreate:n.noop,onFill:n.noop,onScratch:n.noop,onClear:n.noop,version:"1.0"},_init:function(){var i=this,t=this.options;this.isFilled=!1,this.thisBase=n.tpUI._dimensions(this.$this),this.width=t.width?parseInt(t.width):this.thisBase.width-10,this.height=t.height?parseInt(t.height):this.thisBase.height-10,this.$canvas=this._canvas(this.width,this.height),this.context=this.$canvas.get(0).getContext("2d"),this.brusheSize=t.brusheSize?parseInt(t.brusheSize):5,this.scratchPatch=t.scratchPatch,t.autoFilll&&this._fill(),this._uiEvent();t.onCreate(this)},_uiEvent:function(){var n=this,r=this.options,t=this.$this,i=this.context;t.off(".scratch").on({"_fill.scratch":function(){n._fill()},"_scratch.scratch":function(){n._scratch()},"_clear.scratch":function(){n._clear()}})},_canvas:function(t,i){return this.$canvas?this.$canvas:n("<canvas>").attr({width:parseInt(t||_self.width),height:parseInt(i||_self.height)}).append("您的浏览器不支持HTML5 canvas 标签，请更换其他浏览器").appendTo(this.$this)},_fill:function(){var n=this,i=this.options,t=this.context,u=this.width,r=this.height;if(this.$canvas.stop(!0,!0).fadeTo(1,1),i.fillImage)this.fillImage=new Image,this.fillImage.src=i.fillImage,this.fillImage.onload=function(){t.fillStyle=t.createPattern(n.fillImage,"repeat"),t.fillRect(0,0,u,r),n.isFilled=!0;i.onFill(n)};else{this.fillColor=i.fillColor||"#aaa",t.fillStyle=n.fillColor,t.fillRect(0,0,u,r),n.isFilled=!0;i.onFill(n)}},_scratch:function(){function c(){if(f>=v-1){h.$canvas.stop(!0,!0).fadeTo(1,.5),h.isFilled=!1,a.onScratch.apply(h);return}n>=e&&(f++,i=o[f].split(","),t=parseInt(i[0]),r=parseInt(i[1]),e=(r-t)/s,n=t),u=setTimeout(function(){u=u?clearTimeout(u):null,n<=e&&(l.clearRect(n*Math.random(1,5),n*Math.random(1,5),r,s*Math.random(1,10)),n+=s),c()},3)}if(this.isFilled){if(!this.scratchPatch){this._clear();return}var h=this,a=this.options,s=this.brusheSize,l=this.context,o=this.scratchPatch.split("|"),v=o.length,f=0,i=o[f].split(","),t=parseInt(i[0]),r=parseInt(i[1]),e=r-t,n=t,u=null;c()}},_clear:function(){if(this.isFilled){this.context.clearRect(0,0,this.width,this.height),this.isFilled=!1;this.options.onClear(this)}}},n.fn.kcScratch=function(t){var u=n.kcScratch,i="kcScratch",r=typeof t=="string";return this.each(function(f,e){var h=this,o=n(e),s=n.data(o,i);s||(s=n.data(o,i,new u(o,r?{}:t)),s._init()),r?o.trigger(t):s._init()})}}(jQuery),JsEncryptHelper={des:function(n,t,i,r,u){var lt=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],ct=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],at=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],ft=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],st=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],ht=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],et=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],ot=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696],d=JsEncryptHelper.des_createKeys(n),s=0,w,h,o,vt,p,a,e,f,v,y,nt,l,g,rt,tt,ut=t.length,b=0,it=d.length==32?3:9,k,c;for(v=it==3?i?[0,32,2]:[30,-2,-2]:i?[0,32,2,62,30,-2,64,96,2]:[94,62,-2,32,64,2,30,-2,-2],t+="\x00\x00\x00\x00\x00\x00\x00\x00",k="",c="",r==1&&(y=u.charCodeAt(s++)<<24|u.charCodeAt(s++)<<16|u.charCodeAt(s++)<<8|u.charCodeAt(s++),l=u.charCodeAt(s++)<<24|u.charCodeAt(s++)<<16|u.charCodeAt(s++)<<8|u.charCodeAt(s++),s=0);s<ut;){for(i?(e=t.charCodeAt(s++)<<16|t.charCodeAt(s++),f=t.charCodeAt(s++)<<16|t.charCodeAt(s++)):(e=t.charCodeAt(s++)<<24|t.charCodeAt(s++)<<16|t.charCodeAt(s++)<<8|t.charCodeAt(s++),f=t.charCodeAt(s++)<<24|t.charCodeAt(s++)<<16|t.charCodeAt(s++)<<8|t.charCodeAt(s++)),r==1&&(i?(e^=y,f^=l):(nt=y,g=l,y=e,l=f)),o=(e>>>4^f)&252645135,f^=o,e^=o<<4,o=(e>>>16^f)&65535,f^=o,e^=o<<16,o=(f>>>2^e)&858993459,e^=o,f^=o<<2,o=(f>>>8^e)&16711935,e^=o,f^=o<<8,o=(e>>>1^f)&1431655765,f^=o,e^=o<<1,e=e<<1|e>>>31,f=f<<1|f>>>31,h=0;h<it;h+=3){for(rt=v[h+1],tt=v[h+2],w=v[h];w!=rt;w+=tt)p=f^d[w],a=(f>>>4|f<<28)^d[w+1],o=e,e=f,f=o^(ct[p>>>24&63]|ft[p>>>16&63]|ht[p>>>8&63]|ot[p&63]|lt[a>>>24&63]|at[a>>>16&63]|st[a>>>8&63]|et[a&63]);o=e,e=f,f=o}e=e>>>1|e<<31,f=f>>>1|f<<31,o=(e>>>1^f)&1431655765,f^=o,e^=o<<1,o=(f>>>8^e)&16711935,e^=o,f^=o<<8,o=(f>>>2^e)&858993459,e^=o,f^=o<<2,o=(e>>>16^f)&65535,f^=o,e^=o<<16,o=(e>>>4^f)&252645135,f^=o,e^=o<<4,r==1&&(i?(y=e,l=f):(e^=nt,f^=g)),c+=i?String.fromCharCode(e>>>24,e>>>16&255,e>>>8&255,e&255,f>>>24,f>>>16&255,f>>>8&255,f&255):String.fromCharCode(e>>>16&65535,e&65535,f>>>16&65535,f&65535),b+=i?16:8,b==512&&(k+=c,c="",b=0)}return k+c},des_createKeys:function(n){for(var tt=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],k=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],d=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],g=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],p=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],w=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],b=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],rt=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],ut=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],ft=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],nt=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],y=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],it=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],v=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],a=n.length>=24?3:1,h=new Array(32*a),c=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],e,o,f=0,l=0,u,r,t,s=0;s<a;s++)for(r=n.charCodeAt(f++)<<24|n.charCodeAt(f++)<<16|n.charCodeAt(f++)<<8|n.charCodeAt(f++),t=n.charCodeAt(f++)<<24|n.charCodeAt(f++)<<16|n.charCodeAt(f++)<<8|n.charCodeAt(f++),u=(r>>>4^t)&252645135,t^=u,r^=u<<4,u=(t>>>-16^r)&65535,r^=u,t^=u<<-16,u=(r>>>2^t)&858993459,t^=u,r^=u<<2,u=(t>>>-16^r)&65535,r^=u,t^=u<<-16,u=(r>>>1^t)&1431655765,t^=u,r^=u<<1,u=(t>>>8^r)&16711935,r^=u,t^=u<<8,u=(r>>>1^t)&1431655765,t^=u,r^=u<<1,u=r<<8|t>>>20&240,r=t<<24|t<<8&16711680|t>>>8&65280|t>>>24&240,t=u,i=0;i<c.length;i++)c[i]?(r=r<<2|r>>>26,t=t<<2|t>>>26):(r=r<<1|r>>>27,t=t<<1|t>>>27),r&=-15,t&=-15,e=tt[r>>>28]|k[r>>>24&15]|d[r>>>20&15]|g[r>>>16&15]|p[r>>>12&15]|w[r>>>8&15]|b[r>>>4&15],o=rt[t>>>28]|ut[t>>>24&15]|ft[t>>>20&15]|nt[t>>>16&15]|y[t>>>12&15]|it[t>>>8&15]|v[t>>>4&15],u=(o>>>16^e)&65535,h[l++]=e^u,h[l++]=o^u<<16;return h},stringToHex:function(n){for(var i="",r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],t=0;t<n.length;t++)i+=r[n.charCodeAt(t)>>4]+r[n.charCodeAt(t)&15];return i},hexTostring:function(n){for(var r="",i,t=0;t<n.length;t+=2)i=parseInt(n.substring(t,t+2),16),r+=String.fromCharCode(i);return r},Encrypt:function(n,t){return(t||t==0||t=="0"||t==!1||t=="false")&&n&&(t=t.toString(),n=n.toString(),(t||t==0||t=="0"||t==!1||t=="false")&&n)?JsEncryptHelper.stringToHex(JsEncryptHelper.des(n,t,1,0)):""}},String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},String.prototype.trimAll=function(){return this.replace(/\s*/g,"")},String.prototype.replaceFormat=function(n){var t=/{(\d+)}/gm;return this.replace(t,function(t,i){return n[~~i]})},String.prototype.replaceAll=function(n,t){return this.replace(new RegExp(n,"gm"),t)},String.prototype.startWith=function(n){return typeof n!="string"?!1:this.indexOf(n)==0},String.prototype.endWith=function(n){if(typeof n!="string")return!1;var t=this.length-n.length;return t>=0&&this.lastIndexOf(n)===t},String.prototype.getLastString=function(n){return this.substr(this.length-n)},String.prototype.toArray=function(){for(var t=[],n=0;n<this.length;n++)t.push(this[n]);return t},String.prototype.IsPassStrong=function(){return this.length<6?!1:this.match(/^\d+$/)?!1:this.match(/^[A-Za-z]+$/)?!1:!0},String.prototype.sortAsc=function(){return this.toArray().sort().join("")},String.prototype.sortDesc=function(){return this.toArray().sort().reverse().join("")},String.prototype.maxShow=function(n,t){if(n=n||20,t){var i=parseInt(n/2);return this.length>n?this.substr(0,i-1)+"..."+this.substr(this.length-(n-i-1)):this}return this.length>n?this.substr(0,n-2)+"...":this},String.prototype.toSingleSep=function(n){for(var u=this.split(n),r=[],i,t=0;t<u.length;t++)i=u[t],i!=""&&r.push(i);return r.join(n)},Number.prototype.toFixedNum=function(n){return parseFloat(this.toFixed(n))},String.prototype.toFixedNum=function(n){var t=parseFloat(this);return parseFloat(t.toFixed(n))},Array.prototype.each=function(n){for(var t=0;t<this.length;t++)if(n(this[t],t)==!1)break;return this},Array.prototype.where=function(n){var t=[];return this.each(function(i,r){n(i,r)==!0&&t.push(i)}),t},Array.prototype.first=function(){return this.length==0?null:this[0]},Array.prototype.last=function(){return this.length==0?null:this[this.length-1]},Array.prototype.take=function(n){for(var i=[],t=0;t<n;t++)i.push(this[t]);return i},Array.prototype.skip=function(n){for(var i=[],t=n;t<this.length;t++)i.push(this[t]);return i},Array.prototype.dive=function(n){for(var i=[],t=0;t<this.length;t++)n.indexOf(this[t])==-1&&i.push(this[t]);return i},Array.prototype.distinct=function(){for(var u={},r=[],f=this.length,t,i,n=0;n<f;n++)t=this[n],i=typeof t+t,u[i]===undefined&&(r.push(t),u[i]=1);return r},Array.prototype.select=function(n){var t=[];return this.each(function(i,r){n(i,r)&&t.push(i)}),t},Array.prototype.remove=function(n){var i=[],t;return this.each(function(t,r){n(t,r)&&i.push(r)}),t=this,i.reverse().each(function(n){t.splice(n,1)}),t},Array.prototype.removeElement=function(n){return this.remove(function(t){return t==n})},Array.prototype.removeAt=function(){return this.remove(function(n,t){return t==t})},Array.prototype.indexOf=function(n){var t=-1;return this.each(function(i,r){if(i==n)return t=r,!1}),t},Array.prototype.contain=function(n){return this.indexOf(n)>=0},DateFormatStr={dateTime1:"YYYY-MM-DD hh:mm:ss",dateTime2:"YYYY/MM/DD hh:mm:ss",dateTime3:"MM-DD hh:mm:ss",longDate:"YYYY/MM/DD",shortDate:"YY/M/D",longTime:"hh:mm:ss",shortTime:"h:m:s",isoDate:"YYYY-MM-DD",isoTime:"hh:mm:ss",isoDateTime:"YYYY-MM-DD'T'hh:mm:ss",isoUtcDateTime:"UTC:YYYY-MM-DD'T'hh:mm:ss'Z'"},Date.prototype.Format=function(n){var t=n,i=["日","一","二","三","四","五","六"];return t=t.replace(/yyyy|YYYY/,this.getFullYear()),t=t.replace(/yy|YY/,this.getYear()%100>9?(this.getYear()%100).toString():"0"+this.getYear()%100),t=t.replace(/MM/,this.getMonth()>8?(this.getMonth()+1).toString():"0"+(this.getMonth()+1).toString()),t=t.replace(/M/g,this.getMonth()+1),t=t.replace(/w|W/g,i[this.getDay()]),t=t.replace(/dd|DD/,this.getDate()>9?this.getDate().toString():"0"+this.getDate()),t=t.replace(/d|D/g,this.getDate()),t=t.replace(/hh|HH/,this.getHours()>9?this.getHours().toString():"0"+this.getHours()),t=t.replace(/h|H/g,this.getHours()),t=t.replace(/mm/,this.getMinutes()>9?this.getMinutes().toString():"0"+this.getMinutes()),t=t.replace(/m/g,this.getMinutes()),t=t.replace(/ss|SS/,this.getSeconds()>9?this.getSeconds().toString():"0"+this.getSeconds()),t=t.replace(/s|S/g,this.getSeconds())},Date.prototype.DateAdd=function(n,t){var i=this;switch(n){case"sec":return new Date(Date.parse(i)+1e3*t);case"min":return new Date(Date.parse(i)+6e4*t);case"hour":return new Date(Date.parse(i)+36e5*t);case"day":return new Date(Date.parse(i)+864e5*t);case"week":return new Date(Date.parse(i)+6048e5*t);case"qua":return new Date(i.getFullYear(),i.getMonth()+t*3,i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds());case"month":return new Date(i.getFullYear(),i.getMonth()+t,i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds());case"year":return new Date(i.getFullYear()+t,i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds())}return undefined},hash={"qq.com":"http://mail.qq.com","gmail.com":"http://mail.google.com","sina.com":"http://mail.sina.com.cn","163.com":"http://mail.163.com","126.com":"http://mail.126.com","yeah.net":"http://www.yeah.net/","sohu.com":"http://mail.sohu.com/","tom.com":"http://mail.tom.com/","sogou.com":"http://mail.sogou.com/","139.com":"http://mail.10086.cn/","hotmail.com":"http://www.hotmail.com","live.com":"http://login.live.com/","live.cn":"http://login.live.cn/","live.com.cn":"http://login.live.com.cn","189.com":"http://webmail16.189.cn/webmail/","yahoo.com.cn":"http://mail.cn.yahoo.com/","yahoo.cn":"http://mail.cn.yahoo.com/","eyou.com":"http://www.eyou.com/","21cn.com":"http://mail.21cn.com/","188.com":"http://www.188.com/","foxmail.coom":"http://www.foxmail.com","vip.163.com":"http://vip.163.com","outlook.com":"http://login.live.com"},ctx={ajaxTimeout:6e5,httpsEnabled:!1,ajaxCount:0,isDebug:function(){return gl.isDebug}},ctx.ajax=function(n){n=$.extend({timeout:ctx.ajaxTimeout,beforeSend:function(){ctx.ajaxCount+=1},complete:function(){ctx.ajaxCount-=1},error:function(t){t.responseText&&(t.responseText=="ajax_login"||t.responseText.indexOf("提供的防伪标记适用于用户“authen”，但当前用户为“”")>-1)?(_alert("您的登录已失效，请重新登录！登录失效的原因可能有： 1.在其他地方登录; 2.当前IP改变; 3.网络不稳定."),n.type.toLowerCase()=="get"||gl.isLogined?location.href="/":$("#login-enter").click()):ctx.isDebug()?alertTip("请示Url："+n.url+"......\n"+t.responseText,"","",!0):console.log("请示Url："+n.url+"......")}},n);var t=n.success;return n.success=function(i){i=="ajax_login"?(_alert("您的登录已失效，请重新登录！登录失效的原因可能有：1.在其他地方登录;2.当前IP改变;3.网络不稳定."),n.type.toLowerCase()=="get"||gl.isLogined?location.href="/":$("#login-enter").click()):t(i)},$.ajax(n)},ctx.postToken=function(n,t,i,r,u){var f,e=$("input[name=__RequestVerificationToken]:first");return f=e.length==1?$.extend(t,{__RequestVerificationToken:e.val()}):t,ctx.ajax({url:n,data:f,type:"post",dataType:"json",headers:u,success:i,error:r})},ctx.postTokenEx=function(n){var i={type:"post",dataType:"json"},r=$("input[name=__RequestVerificationToken]:first"),t;return r.length==1?(t=n.data||n.Data,t=t?$.extend(t,{__RequestVerificationToken:r.val()}):{__RequestVerificationToken:r.val()},i=$.extend(i,n,{data:t})):i=$.extend(i,n),ctx.ajax(i)},ctx.postJSON=function(n,t,i,r,u){return ctx.ajax({url:n,data:t,type:"post",dataType:"json",headers:u,success:i,error:r})},ctx.getJSON=function(n,t,i,r){return ctx.ajax({url:n,type:"get",dataType:"json",headers:r,success:t,error:i})},ctx.getHtml=function(n,t,i,r){return ctx.ajax({url:n,type:"get",dataType:"html",headers:r,success:t,error:i})},ctx.isAndroid=function(){var n=navigator.userAgent;return n.indexOf("Android")>=0?!0:!1},ctx.androidVersion=function(){var n=navigator.userAgent;return parseFloat(n.slice(n.indexOf("Android")+8))},ctx.androidLow=function(){return ctx.isAndroid()&&ctx.androidVersion()<3},ctx.isIpad=function(){return navigator.userAgent.match(/iPad/i)!=null},ctx.isIE=function(){return $.browser.msie},$.iMobile={browserInfo:function(){return navigator.userAgent},isMobile:function(){return!!$.iMobile.browserInfo().match(/Mobile|Android|U/)},isIPhone:function(){return!!$.iMobile.browserInfo().match(/iPhone OS/)},isBelowIPhone5:function(){return!!$.iMobile.browserInfo().match(/iPhone OS/)&&window.screen.height==480},isIPhone5:function(){return!!$.iMobile.browserInfo().match(/iPhone OS/)&&window.screen.height==568},isWinPhone:function(){return!!$.iMobile.browserInfo().match(/Windows Phone OS/)}},jQuery.fn.extend({everyTime:function(n,t,i,r){return this.each(function(){jQuery.timer.add(this,n,t,i,r)})},oneTime:function(n,t,i){return this.each(function(){jQuery.timer.add(this,n,t,i,1)})},stopTime:function(n,t){return this.each(function(){jQuery.timer.remove(this,n,t)})}}),jQuery.extend({timer:{global:[],guid:1,dataKey:"jQuery.timer",regex:/^([0-9]+(?:\.[0-9]*)?)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6},timeParse:function(n){var t,r,i;return n==undefined||n==null?null:(t=this.regex.exec(jQuery.trim(n.toString())),t[2]?(r=parseFloat(t[1]),i=this.powers[t[2]]||1,r*i):n)},add:function(n,t,i,r,u){var o=0,f,e;(jQuery.isFunction(i)&&(u||(u=r),r=i,i=t),t=jQuery.timer.timeParse(t),typeof t!="number"||isNaN(t)||t<0)||((typeof u!="number"||isNaN(u)||u<0)&&(u=0),u=u||0,f=jQuery.data(n,this.dataKey)||jQuery.data(n,this.dataKey,{}),f[i]||(f[i]={}),r.timerID=r.timerID||this.guid++,e=function(){(++o>u&&u!==0||r.call(n,o)===!1)&&jQuery.timer.remove(n,i,r)},e.timerID=r.timerID,f[i][r.timerID]||(f[i][r.timerID]=window.setInterval(e,t)),this.global.push(n))},remove:function(n,t,i){var r=jQuery.data(n,this.dataKey),u,i;if(r){if(t){if(r[t]){if(i)i.timerID&&(window.clearInterval(r[t][i.timerID]),delete r[t][i.timerID]);else for(i in r[t])window.clearInterval(r[t][i]),delete r[t][i];for(u in r[t])break;u||(u=null,delete r[t])}}else for(t in r)this.remove(n,t,i);for(u in r)break;u||jQuery.removeData(n,this.dataKey)}}}}),jQuery(window).bind("unload",function(){jQuery.each(jQuery.timer.global,function(n,t){jQuery.timer.remove(t)})}),function(n){function h(n){return typeof n=="string"}function s(n){var t=ht.call(arguments,1);return function(){return n.apply(this,t.concat(ht.call(arguments)))}}function at(n){return n.replace(l,"$2")}function vt(n){return n.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function g(t,u,o,s,c){var k,p,w,b,g;return s!==i?(w=o.match(t?l:/^([^#?]*)\??([^#]*)(#?.*)/),g=w[3]||"",c===2&&h(s)?p=s.replace(t?a:ct,""):(b=r(w[2]),s=h(s)?r[t?f:e](s):s,p=c===2?s:c===1?n.extend({},s,b):n.extend({},b,s),p=st(p),t&&(p=p.replace(d,v))),k=w[1]+(t?y:p||!w[1]?"?":"")+p+g):k=u(o!==i?o:location.href),k}function tt(n,t,u){return t===i||typeof t=="boolean"?(u=t,t=o[n?f:e]()):t=h(t)?t.replace(n?a:ct,""):t,r(t,u)}function nt(t,r,u,f){return h(u)||typeof u=="object"||(f=u,u=r,r=i),this.each(function(){var e=n(this),i=r||rt()[(this.nodeName||"").toLowerCase()]||"",s=i&&e.attr(i)||"";e.attr(i,o[t](s,u,f))})}var i,ht=Array.prototype.slice,v=decodeURIComponent,o=n.param,st,u,r,p,k=n.bbq=n.bbq||{},ft,et,rt,ut=n.event.special,ot="hashchange",e="querystring",f="fragment",b="elemUrlAttr",w="href",c="src",ct=/^.*\?|#.*$/g,a,l,d,it,y,lt={};o[e]=s(g,0,vt),o[f]=u=s(g,1,at),o.sorted=st=function(t,i){var u=[],r={};return n.each(o(t,i).split("&"),function(n,t){var f=t.replace(/(?:%5B|=).*$/,""),i=r[f];i||(i=r[f]=[],u.push(f)),i.push(t)}),n.map(u.sort(),function(n){return r[n]}).join("&")},u.noEscape=function(t){t=t||"";var i=n.map(t.split(""),encodeURIComponent);d=new RegExp(i.join("|"),"g")},u.noEscape(",/"),u.ajaxCrawlable=function(n){return n!==i&&(n?(a=/^.*(?:#!|#)/,l=/^([^#]*)(?:#!|#)?(.*)$/,y="#!"):(a=/^.*#/,l=/^([^#]*)#?(.*)$/,y="#"),it=!!n),it},u.ajaxCrawlable(0),n.deparam=r=function(t,r){var u={},f={"true":!0,"false":!1,"null":null};return n.each(t.replace(/\+/g," ").split("&"),function(t,e){var y=e.split("="),h=v(y[0]),o,a=u,l=0,s=h.split("]["),c=s.length-1;if(/\[/.test(s[0])&&/\]$/.test(s[c])?(s[c]=s[c].replace(/\]$/,""),s=s.shift().split("[").concat(s),c=s.length-1):c=0,y.length===2)if(o=v(y[1]),r&&(o=o&&!isNaN(o)?+o:o==="undefined"?i:f[o]!==i?f[o]:o),c)for(;l<=c;l++)h=s[l]===""?a.length:s[l],a=a[h]=l<c?a[h]||(s[l+1]&&isNaN(s[l+1])?{}:[]):o;else n.isArray(u[h])?u[h].push(o):u[h]=u[h]!==i?[u[h],o]:o;else h&&(u[h]=r?i:"")}),u},r[e]=s(tt,0),r[f]=p=s(tt,1),n[b]||(n[b]=function(t){return n.extend(lt,t)})({a:w,base:w,iframe:c,img:c,input:c,form:"action",link:w,script:c}),rt=n[b],n.fn[e]=s(nt,e),n.fn[f]=s(nt,f),k.pushState=ft=function(n,t){h(n)&&/^#/.test(n)&&t===i&&(t=2);var r=n!==i,f=u(location.href,r?n:{},r?t:2);location.href=f},k.getState=et=function(n,t){return n===i||typeof n=="boolean"?p(n):p(t)[n]},k.removeState=function(t){var r={};t!==i&&(r=et(),n.each(n.isArray(t)?t:arguments,function(n,t){delete r[t]})),ft(r,2)},ut[ot]=n.extend(ut[ot],{add:function(t){function o(n){var t=n[f]=u();n.getState=function(n,u){return n===i||typeof n=="boolean"?r(t,n):r(t,u)[n]},e.apply(this,arguments)}var e;if(n.isFunction(t))return e=t,o;e=t.handler,t.handler=o}})}(jQuery,this),function(n,t,i){function u(n){return n=n||location.href,"#"+n.replace(/^[^#]*#?(.*)$/,"$1")}var r="hashchange",f=document,o,h=n.event.special,s=f.documentMode,e="on"+r in t&&(s===i||s>7);n.fn[r]=function(n){return n?this.bind(r,n):this.trigger(r)},n.fn[r].delay=50,h[r]=n.extend(h[r],{setup:function(){if(e)return!1;n(o.start)},teardown:function(){if(e)return!1;n(o.stop)}}),o=function(){function c(){var f=u(),i=v(h);f!==h?(l(h=f,i),n(t).trigger(r)):i!==h&&(location.href=location.href.replace(/#.*/,"")+i),o=setTimeout(c,n.fn[r].delay)}var s={},o,h=u(),a=function(n){return n},l=a,v=a;return s.start=function(){o||c()},s.stop=function(){o&&clearTimeout(o),o=i},n.browser.msie&&!e&&function(){var i,t;s.start=function(){i||(t=n.fn[r].src,t=t&&t+u(),i=n('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){t||l(u()),c()}).attr("src",t||"javascript:0").insertAfter("body")[0].contentWindow,f.onpropertychange=function(){try{event.propertyName==="title"&&(i.document.title=f.title)}catch(n){}})},s.stop=a,v=function(){return u(i.location.href)},l=function(t,u){var e=i.document,o=n.fn[r].domain;t!==u&&(e.title=f.title,e.open(),o&&e.write('<script>document.domain="'+o+'"<\/script>'),e.close(),i.location.hash=t)}}(),s}()}(jQuery,this),function(n){typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)}(function(n){function r(n){return n}function f(n){return decodeURIComponent(n.replace(u," "))}function i(n){n.indexOf('"')===0&&(n=n.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t.json?JSON.parse(n):n}catch(i){}}var u=/\+/g,t=n.cookie=function(u,e,o){var p,c,s,y;if(e!==undefined)return o=n.extend({},t.defaults,o),typeof o.expires=="number"&&(p=o.expires,c=o.expires=new Date,c.setDate(c.getDate()+p)),e=t.json?JSON.stringify(e):String(e),document.cookie=[t.raw?u:encodeURIComponent(u),"=",t.raw?e:encodeURIComponent(e),o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("");var w=t.raw?r:f,b=document.cookie.split("; "),h=u?undefined:{};for(s=0,y=b.length;s<y;s++){var v=b[s].split("="),a=w(v.shift()),l=w(v.join("="));if(u&&u===a){h=i(l);break}u||(h[a]=i(l))}return h};t.defaults={},n.removeCookie=function(t,i){return n.cookie(t)!==undefined?(n.cookie(t,"",n.extend({},i,{expires:-1})),!0):!1}}),serverNotifyBase=new $.tpuiNotify({size:360,position:"right,bottom"}),gl={isLogined:!1,userInfo:{},price:2,pageSize:20,enterEvent:undefined,receiveSocketLottery:undefined,receiveSocketAward:undefined,bettingNoMediaSound:0,isShiShiCai:0,media:new $.tpuiMedia({type:"audio"}),closeVoice:0,cookie:{},hadConect:0},gl.refreshCookie=function(){var n=$.cookie("closeVoice");gl.cookie.closeVoice=n?n:0,n=$.cookie("lastLotteryBetType"),gl.cookie.lastLotteryBetType=n?JSON.parse(n):{}},gl.refreshCookie(),gl.lotteryDescription={1:"10:00-02:00(10或5分钟)，全天120期",2:"09:10-23:00每10分钟一期，全天84期",3:"08:30-21:30每10分钟一期，全天79期",4:"08:37-22:07每10分钟一期，全天82期",5:"当天20:30-第二天20:00，每天一期",6:"当天20:30-第二天20:00，每天一期",7:"09:00-22:00每10分钟一期，全天79期",8:"09:07-23:57每5分钟一期，全天179期",9:"00:05-23:59每5分钟一期，全天288期",10:"09:05-21:55每10分钟一期，全天78期",11:"即刮即开 趣味无穷",12:"00:05-23:59每5分钟一期，全天288期",13:"00:05-23:59每5分钟一期，全天288期",14:"10:10-02:00每10分钟一期，全天96期",15:"09:37-22:27每10分钟一期，全天78期",16:"08:50-22:00每10分钟一期，全天80期",17:"09:10-22:00每10分钟一期，全天78期",20:"00:00-23:58每2分钟一期，全天720期",29:"00:00-23:59每1.5分钟一期，全天880期",30:"08:30-22:00每10分钟一期，全天81期",31:"00:00-23:59每分钟一期，全天1440期",32:"00:00-23:59每分钟一期，全天1440期"},gl.cookie.set=function(n,t){typeof t=="object"?$.cookie(n,JSON.stringify(t)):$.cookie(n,t),gl.cookie[n]=t},gl.media.playCount=function(){gl.cookie.closeVoice||gl.media._play("images/media/tips_930.mp3")},gl.media.closeVoice=function(){gl.cookie.closeVoice||gl.media._play("images/media/closeVoice.mp3")},gl.addDesktopShortcut=function(){ctx.postTokenEx({url:"/Home/AddDesktopShortcut",data:{ShortcutCount:1},success:function(n){n=="1"?alertTip("添加桌面快捷方式成功","K彩"):alertTip("添加桌面快捷方式失败，请稍后重试","K彩")}})},$.loadingPageEx=function(){var n=this;return $("#loading-page").get(0)||$("#footer-wrap").after('<div id="loading-page"><div class="lp-content"><div class="lpc-sub image"><span>加载中</span></div><div class="lpc-sub progress"><span>Loading···</span></div><div class="lpc-sub tips"><span>欢迎来到 K彩 在线娱乐平台</span></div></div></div>'),this.$loading=$("#loading-page"),this.$loadingCont=this.$loading.children(".lp-content:first"),n.$loadingCont.show().css("top","50%"),this.show=function(){n.$loading.show()},this.hide=function(){n.$loading.hide()},this},_justOneKey=_tempGoStr.substr(5),EnumLotteryType={cqc:1,tjc:2,jlk3:3,jsk3:4,pl3:5,fc3d:6,klpk:7,pk10:8,wfc:9,sd11x5:10,ggc:11,kck3:12,kcjs3d:13,xjssc:14,gxk3:15,ahk3:16,hubk3:17,hebk3:18,shk3:19,yfc:20,gd11x5:21,jx11x5:22,sh11x5:23,hlj11x5:24,bjk3:27,js11x5:28,hgffc:29,heb11x5:30,yfcnew:31,yfk3:32},gl.getKeyForLotteryCode=function(n){for(var t in EnumLotteryType)if(EnumLotteryType[t]==n)return t},_alert=window.alert,window.alert=function(n,t){t=t||"message";var i={message:n,icon:!1};$.appAlert(i,t)},_confirm=window.confirm,window.confirm=function(n,t,i){i=i||"doubt",$.appConfirm(n,t,i)},gl.notify=new $.tpuiNotify({size:400,position:"center,bottom",hideMode:"remove"}),gl.doLoop=function(n){var t={loopInt:0,backFunc:""},r,i;t=$.extend({},t,n),t.loopInt!==""&&t.loopInt!==0?(r=null,i=0,r=setInterval(function(){i=i+1,gl.media.playCount(),i>=t.loopInt&&(clearInterval(r),typeof t.backFunc=="function"&&t.backFunc())},900)):typeof mediaObj.backFunc=="function"&&mediaObj.backFunc()},$(function(){gl.loadingPage=$.loadingPageEx(),gl.baseBettingBanTips=new $.bettingBanTips,$("input, textarea").placeholder(),$.appBase(),$.singinBase(),$.fixderBase(),$("body").tpuiLoading({mask:!0,title:null});$("#op-loginout").off("click").on({click:function(){$.appConfirm({useTitle:"确定退出登录",title:"确定退出？",titleSub:"退出后将无法接收到开奖通知"},function(n){n&&(window.location.href="/Login/Logout")})}});$("a[name=valcodebtn]").on("click",function(){$("#img-valcode").attr("src","/Login/ValidateCode?r="+Math.random())});$("#login-submit-button").on("click",function(){var u=$(this),r=$.trim($("#txt_username").val()),i=$.trim($("#txt_pwd").val()),t,n;if(valcode=$.trim($("#txt_valcode").val()),r==""){alertTip("请输入用户名！","KC登录");return}if(i==""){alertTip("请输入密码！","KC登录");return}if($("#row-valicode").is(":visible")&&valcode==""){alertTip("请输入验证码！","KC登录");return}t={userName:r,password:i,valicode:valcode},n=$("div.tp-ui-loading-base").parent(),n.css({"z-index":99999}).show(),ctx.postToken("/Login/PostLogin",EnCryptJsonParams(t),function(t){if(t=="suc"){var i=location.href.toLowerCase().replace("http://",""),e=(location.host+"/Login#hall").toLowerCase(),f=(location.host+"/#hall").toLowerCase(),r=(location.host+"/Login/ForgetPwd").toLowerCase();u.attr("disabled","disabled"),i.indexOf(e)==0||i.indexOf(f)==0||i.indexOf(r)==0?window.location.href="/Home":(gl.isLogined=!0,window.location.reload())}else n.hide().prev().hide();t=="noValidate"&&alertTip("该帐号未验证!","KC登录"),t=="freeze"&&alertTip("该用户已被冻结！","KC登录"),t=="fail"&&(alertTip("登录失败,用户名或密码错误！","KC登录"),$("#row-valicode").show(),$("a[name=valcodebtn]").click()),t=="valicodefail"&&(alertTip("验证码错误！","KC登录"),$("#row-valicode").show(),$("a[name=valcodebtn]").click())},function(){alertTip("网络异常，请联系管理员！","KC登录"),n.hide().prev().hide()})});$(document).on("keypress",function(n){n.keyCode==13&&$("#login-submit-button").is(":visible")&&$("#login-submit-button").click()});$("#user-menu").children("ul:first").tpuiMenu({targetIndex:".active",autoToggle:!0,toggleOther:!0}),CheckNumInput(),function(){var i=$("#uss-fs"),n=$("#userGamePointId"),t="hidegamepoint";i.on("click","i",function(){var i=$(this);i.html()=="显示"?(i.html("隐藏"),n.html(n.attr("data")),$.cookie(t,0)):(i.html("显示"),n.html("已隐藏"),$.cookie(t,1))});$.cookie(t)==1?(n.html("已隐藏"),i.find("i").html("显示")):(n.html(n.attr("data")),i.find("i").html("隐藏")),n.css({cursor:"pointer"}).dblclick(function(){refreshGamePoint()})}();$("#checker-lite").on("click","li",function(){$(this).find("a.clg-tag").click()})}),$.bettingBanTips=function(){function e(){f=setTimeout(function(){if(t<=0){i._hide();return}t--,u.text(t),e()},1e3)}var i=this,r=5,t=r,n=$(".betting-ban-tips:first"),o=n.find("a.close:first"),u=n.find("#bbt-t-time"),f=null,s="1.0";n.tpuiDialog({mask:!0,width:320,onOpen:function(){i._cutdownStart()},onClose:function(){i._cutdownStop()}}),u.text(r);o.on("click",function(n){n.preventDefault(),i._hide()});return this._show=function(){n.tpuiDialog("_open")},this._hide=function(){n.tpuiDialog("_close")},this._cutdownStart=function(){e()},this._cutdownStop=function(){t=r,u.text(r),f=clearTimeout(f)},this},hasSubmit=!1,$(function(){$("#tranform-submit").on("click",function(){if(hasSubmit)return!1;$("#tranform-submit").css("cursor","wait"),hasSubmit=!0;var n=$("#transformGamePoint").val();if(n==""||isNaN(n)||n<=0)return alertTip("请输入正确的金额！"),hasSubmit=!1,$("#tranform-submit").css("cursor","pointer"),!1;if(parseInt(n)!=n)return alertTip("金额必须为整数！"),hasSubmit=!1,$("#tranform-submit").css("cursor","pointer"),!1;ctx.postTokenEx({beforeSend:function(){$("body").css("cursor","wait"),$("body").attr("title","系统正为你奋力加载中..."),$("body").tpuiLoading("_show")},complete:function(){$("body").css("cursor","default"),$("body").attr("title",""),$("body").tpuiLoading("_hide")},url:"/ag/TranferGamePoint",data:{gamePoint:n,tranferType:$("input[name='agtranformType'][checked]").val()},success:function(n){n=="转账成功!"?(alert(n),setTimeout(function(){hasSubmit=!1,$("#tranform-submit").css("cursor","pointer"),RefreshUserAgPoint()},1e3),$("#sum-parse-inner").tpuiDialog("_close")):(n=="system maintenance, AGIN platform closed!"?alertTip("AG平台维护中！"):n=="error:60002,Account password error,"?alertTip("AG平台密码错误,请联系客服！"):alertTip(n),setTimeout(function(){hasSubmit=!1,$("#tranform-submit").css("cursor","pointer")},2e3))}})})}),BonusNumHelper={},BonusNumHelper._szArray=["A23","234","345","456","567","678","789","8910","910J","10JQ","JQK","QKA"],BonusNumHelper._k3szArray=["123","234","345","456"],BonusNumHelper.sum=function(n,t){var r=n.split(","),i=0;return _.each(r,function(n){t==EnumLotteryType.klpk&&(n=n.substring(1)),i+=parseInt(n)}),i},BonusNumHelper.daXiao=function(n,t){return t=t||5,parseInt(n)>=t?"大":"小"},BonusNumHelper.danShuang=function(n){var t=parseInt(n);return t%2==1?"单":"双"},BonusNumHelper.pattern=function(n,t){if(InitLotteryType(t),gl.isShiShiCai)return BonusNumHelper.getPatternSsc(n);if(gl.isK3)return BonusNumHelper.getPatternK3(n);switch(t){case EnumLotteryType.klpk:case"7":strPattern=BonusNumHelper.getPatternKlpk(n);break;default:strPattern="常规"}return strPattern},BonusNumHelper.getPatternSsc=function(n){var t=n.split(",");return(t=t.length==3?t:t.slice(2,5),t[0]==t[1]&&t[1]==t[2])?"豹子":t[0]==t[1]||t[1]==t[2]||t[0]==t[2]?"组三":"组六"},BonusNumHelper.getPatternKlpk=function(n){var i=BonusNumHelper.pkNumGetOnlyNum(n).replaceAll(" ",""),t=i.split(",");return n[0]==n[4]&&n[4]==n[8]?_.contains(BonusNumHelper._szArray,t[0]+t[1]+t[2])?"同花顺":"同花":t[0]==t[1]&&t[1]==t[2]?"豹子":t[0]==t[1]||t[1]==t[2]||t[0]==t[2]?"对子":_.contains(BonusNumHelper._szArray,t[0]+t[1]+t[2])?"顺子":"散牌"},BonusNumHelper.getPatternK3=function(n){var t=n.split(",");return t[0]==t[1]&&t[1]==t[2]?"三同号":t[0]==t[1]||t[1]==t[2]||t[0]==t[2]?"二同号  二同号单选  二不同号":_.contains(BonusNumHelper._k3szArray,t[0]+t[1]+t[2])?"三连号  三不同号  二不同号":"三不同号  二不同号"},BonusNumHelper.pkSuitFilter=function(n){var t=[n[0],n[4],n[8]];return t.join(",")},BonusNumHelper.pkNumFilter=function(n){var f=n.split(","),t=[],r,u,i;for(_.each(f,function(n){var i=n.substring(1);switch(i){case"01":t.push("A ");break;case"10":t.push("10");break;case"11":t.push("J ");break;case"12":t.push("Q ");break;case"13":t.push("K ");break;default:t.push(i.substring(1)+" ")}}),r=BonusNumHelper.pkSuitFilter(n),r=r.replaceAll("1","dt").replaceAll("2","rt").replaceAll("3","mh").replaceAll("4","fp"),u=r.split(","),i=0;i<t.length;i++)t[i]=u[i]+t[i];return t.join(",")},BonusNumHelper.pkNumGetOnlyNum=function(n){var i=n.split(","),t=[];return _.each(i,function(n){var i=n.substring(1);switch(i){case"01":t.push("A ");break;case"10":t.push("10");break;case"11":t.push("J ");break;case"12":t.push("Q ");break;case"13":t.push("K ");break;default:t.push(i.substring(1)+" ")}}),t.join(",")},BonusNumHelper.k3SumStyle=function(){};var BonusNumStatInfo=function(n){var t=this;t.dataLoaded=!1,t.lotteryCode=n,t.statData=[],t.statConfCookieKey="betstatconf",t.statConfChks=$("div.optimize-control").find(":checkbox"),t.optimizeControl=$("div.optimize-control"),t.init=function(){t._initTypeDict(),t.initStatConf(),t.bind()},t.initStatConf=function(){var f=$.cookie(t.statConfCookieKey),u,i,n,r;gl.betAssist.statConf=f?JSON.parse(f):{},u={hits120:0,curMiss:1,maxMiss:2,preMiss:3};for(i in gl.betAssist.statConf)n=u[i],n!=undefined&&(r=gl.betAssist.statConf[i],r&&($("div[id=statinfo-loading]").show(),t.statConfChks.eq(n).parent().next().find("a").click()))},t.bind=function(){var n={"120期冷热":"hits120","当前遗漏":"curMiss","最大遗漏":"maxMiss","上次遗漏":"preMiss"};t.statConfChks.on("change",function(){var r=$(this),i=r.prop("checked"),u=n[$.trim(r.closest("label").find("h4").html())];gl.betAssist.statConf[u]=i,console.log(i),i&&$("div[id=statinfo-loading]").show(),$.cookie(t.statConfCookieKey,JSON.stringify(gl.betAssist.statConf)),t.showStatInfo(gl.betAssist.ruleId,gl.betAssist.statConf)})},t._parseJson=function(n){for(var f=[],i,u,r=0;r<n.length;r++)i=n[r].split(";"),u={LotteryCode:t.lotteryCode,MissTimes:i[0],MaxMiss:i[1].replace("1000000","-"),Hits120:i[2],PreMiss:i[3],Target:i[4],TargetStat:i[5],ChartType:i[6]},f.push(u);return f},t.loadData=function(){gl.betAssistData.stat?(t.statData=t._parseJson(gl.betAssistData.stat),t.dataLoaded=!0,t.showStatInfo(gl.betAssist.ruleId,gl.betAssist.statConf)):t.reloadData()},t.reloadData=function(n){var i=t.lotteryCode+";"+t.packChartTypes();ctx.postTokenEx({url:"/Bet/GetNumStat/"+i,data:{},success:function(i){i&&i.Ok==0?alert(i.Tip):(t.statData=t._parseJson(i.statData),gl.isK3&&(t.k3SumStatData=i.k3SumStatData),t.dataLoaded=!0,t.showStatInfo(gl.betAssist.ruleId,gl.betAssist.statConf),n&&n())}})},t.getDataByChartType=function(n){var r=$(".betRuleClass.active");return _.filter(t.statData,function(t){var u=$.trim(r.find("a").html()),i;return u=="大小单双"||u=="自由双面"?t.ChartType==n&&_.contains(["大","小","奇","偶"],t.TargetStat):String(n).indexOf(",")!=-1?(i=n.split(","),t.ChartType==i[0]||t.ChartType==i[1]):t.ChartType==n})},t._initTypeDict=function(){t.typeDict=(new ChartTypeMapper).init()},t._tmpl='<dl>\t        <dt><span title="<%=data.tip.title%>"><%=data.tip.text%></span></dt>\t        <dd>\t\t        <ul class="b-column b-column-<%=data.list.length||10%>">                    <%_.each(data.list,function(it){%>                        <%if(data.type=="hits120"){%>                            <li><span><%=it.Hits120%></span></li>                        <%}else if(data.type=="curMiss"){%>                            <li><span><%=it.MissTimes%></span></li>                        <%}else if(data.type=="preMiss"){%>                            <li><span><%=it.PreMiss%></span></li>                        <%}else{%>                            <li><span><%=it.MaxMiss%></span></li>                        <%}%>                    <%});%>\t\t        </ul>\t        </dd>        </dl>',t.statinfoTmpl=_.template(t._tmpl),t.statTips={hits120:{title:"统计近120期号码出现次数",text:"120期冷热"},curMiss:{title:"该号码自上次开出以来至本次未出现的期数",text:"当前遗漏"},preMiss:{title:"该号码自上上次开出至上次开出之间的期数",text:"上次遗漏"},maxMiss:{title:"该号码在历史上最大的遗漏值",text:"最大遗漏"}},t.renderStatInfoByTarget=function(n,i,r){var f=[],u;for(u in r)if(r[u]){var s=_.filter(i,function(t){return n=="组选分布"||n=="号码分布"?t.Target=="组选分布"||t.Target=="号码分布":gl.isK3&&n.indexOf("和值分布-")!=-1?n.indexOf("-0")!=-1?t.Target=="和值分布"&&t.TargetStat<=10:t.Target=="和值分布"&&t.TargetStat>10:t.Target==n}),o={type:u,tip:t.statTips[u],list:s},e=t.statinfoTmpl({data:o});f.push(e)}return f.join("")},t.showStatInfo=function(n,i){var u,f;t.dataLoaded&&(u=t.typeDict[t.lotteryCode][n],u?($("div[id=statinfo-loading]").hide(),t.optimizeControl.show(),f=t.getDataByChartType(u),$("div.showStatisticsClass").each(function(){var n=$(this),u,r;n.is(":visible")&&(u=n.attr("miss-target"),r=t.renderStatInfoByTarget(u,f,i),n.html(r).slideDown(3e3))})):t.optimizeControl.hide())},t.displayStatPanel=function(n){var f=t.typeDict[t.lotteryCode][n],i=$("div.showStatisticsClass"),u,r;return f?(i.show(),u=$.trim($("li.betRuleClass.active a").html()),r="option-large",gl.isK3||gl.lotteryId==EnumLotteryType.klpk||u=="自由双面"||u=="大小单双"?i.removeClass(r).addClass("option-large-0"):i.removeClass("option-large-0").addClass(r)):i.hide(),this},t.packChartTypes=function(){var u=t.typeDict[gl.lotteryId],i=[],f,n,r;for(f in u)n=u[f],n&&(String(n).indexOf(",")!=-1?(r=n.split(","),_.each(r,function(n){i.push(parseInt(n))})):i.push(n));return _.unique(i).join(",")}},UserBetFav=function(n,t){var i=this;i.addToFavBtn=$("#shortcut-create-handle"),i.favAddSubmit=$("#fav-add-submit"),i.showFavPanelBtn=$("showFavPanelBtn"),i.keeperCreate=$("#keeper-create"),i.keeperImport=$("#shortcut-base"),i.fakeItem={CreateTime:"/Date(1432546571094)/",CreateTimeISO:"2015-05-25",FavContent:'[{"ItemTimes":1.0,"SelNums":"05,06,03,04,08","RuleId":8140101,"BetNum":5,"PriceMode":0}]',FavName:"pk10收藏1",FavTotalPrice:10,Id:69,LotteryCode:8,UserId:297,fake:1},i.lotteryCode=n,i.favList=[],i.favListObservable=ko.observableArray(i.favList),i.isCompleted=!0,i.init=function(){i.tpuiInit(),i._bind(),i.importTempFav()},i.importOkClick=function(n,r){var e=[],u=[],o=$(r.target).attr("favId"),f;e.push(o),_.each(e,function(n){var f=_.find(i.favList,function(t){return t.Id==n}),r=JSON.parse(f.FavContent),t=i._prepareBetInfo(r);u=_.union(u,t)}),f=_selectNumsTmpl({data:u}),$("#selectNumsContainerId").append(f),$("input.betting-multiple").tpuiNumber({type:"depart"}),t(1)},i.importCancelClick=function(){},i._bind=function(){i.favAddSubmit.off().on("click",function(){var r,n,e,t,f;if(i.isCompleted==!1){console.log("收藏-由于网络延迟，上一次操作还没提交完成。建议继续等待，或者刷新页面重新查看！");return}if(r=i._parseBetInfo(),n="0",$(":radio[name=keeper-mode][value=cover]").prop("checked")){if(e=$(":radio[name=keeper-item][checked=checked]"),e.length==0){alert("请选择要覆盖的收藏");return}n=$(":radio[name=keeper-item][checked=checked]").attr("favId")}if(t=$("#add-fav-name").val(),t||n!="0"){if(f=_.find(i.favList,function(n){return n.FavName==t}),f&&n=="0"){alert("该收藏名称已经存在");return}}else{alert("请输入收藏名称");return}var o=[gl.lotteryId,n,t,r.list,r.totalPrice],s=EnCryptJsonParams(o),u=$("div.tp-ui-loading-base").parent();ctx.postTokenEx({url:"/Bet/FavAdd",data:s,beforeSend:function(){i.isCompleted=!1,u.css({"z-index":99999}).show()},complete:function(){i.isCompleted=!0,u.hide().prev().hide()},success:function(t){if(t.Ok==1){if(alertTip("收藏成功，祝君中奖!"),n!="0"){var r=_.filter(i.favList,function(t){return t.Id!=n});r.push(t.Fav),i.favList=r}else i.favList.push(t.Fav);i.favList.length>0?$("#shortcut-base").show().next().hide():$("#shortcut-base").hide().next().show(),i._refleshObservableData(),i.keeperCreate.tpuiDialog("_close")}else alert(t.Tip)}})});$("#shortcut-create-handle").unbind().on("click",function(){if($("div.tp-ui-mask").css({opacity:1}),!gl.isLogined){$("#login-inner").tpuiDialog("_open");return}if($("#selectNumsContainerId").find("li").length==0){alert("请先添加投注项!");return}if(i.favList.length>19){alert("最多只能添加20个快捷投注！");return}i.keeperCreate.tpuiDialog("_open");var n=window.location.hash.replace("#","");$("#add-fav-name").val(n+"收藏"+(i.favList.length+1)),$(":radio[name=keeper-mode][value=new]").click(),$(":radio[name=keeper-item]").prop("checked",!1)});$("#fav-add-cancel").on("click",function(){i.keeperCreate.tpuiDialog("_close")})},i.tpuiInit=function(){var n=$(".forms-table");n.length==0&&n==$("body"),n.find(".tpui-text").tpuiText(),n.find(".tpui-radio").tpuiRadio(),n.find(".tpui-button").tpuiButton(),n.find(".tpui-textarea").tpuiTextarea()},i._refleshObservableData=function(){i.favListObservable([]),i.favListObservable(i.favList)},i.loadData=function(){gl.isLogined&&(gl.betAssistData.fav?(i.favList=gl.betAssistData.fav,i.favList.length>0?$("#shortcut-base").show().next().hide():$("#shortcut-base").hide().next().show(),i._refleshObservableData(),i._koDataBind()):ctx.postTokenEx({url:"/Bet/FavGet/"+i.lotteryCode,data:{},success:function(n){typeof n=="object"?(i.favList=n,i._refleshObservableData(),i._koDataBind()):console.log("加载收藏记录失败！")}}))},i._koDataBind=function(){var t=$("#keeper-list-base")[0],n;ko.cleanNode(t),ko.applyBindings(i,t),n=$("#shortcut-base")[0],ko.cleanNode(n),ko.applyBindings(i,n)},i._parseBetInfo=function(){var i=$("#selectNumsContainerId").find("li"),t=[],n=0;return _.each(i,function(i){var u={},r=$(i),e,f;u.itemTimes=r.find(".betting-multiple").val(),u.betNum=r.find(".bof-tb-count>em").text(),u.ruleId=r.attr("ruleid"),u.selNums=r.find(".bof-tb-number").attr("allnums"),e=$.trim(r.find(".bof-tb-method>i").html()),u.priceMode=GetBetPriceMode(e),f=parseFloat(r.find(".bof-tb-total-price i").html()),n+=f,t.push(u)}),{totalPrice:n,list:t}},i._prepareBetInfo=function(n){return _.each(n,function(n){var t=GetDataDetailById(n.RuleId,gl.rules,"RuleId");n.jsOdds=t.UserOdds*1+t.UserPlusOdds*1,n.price=gl.price,n.ruleId=n.RuleId,n.ruleName=t.DisplayName,n.selNums=n.SelNums,n.subSelNums=n.selNums.maxShow(12),n.betNum=n.BetNum,n.itemTimes=n.ItemTimes,n.priceMode=n.PriceMode}),n},i._prepareBetInfoForTempFav=function(n){return _.each(n.betObjList,function(n){var t=GetDataDetailById(n.ruleId,gl.rules,"RuleId");n.price=gl.price,n.ruleName=t.DisplayName,n.subSelNums=n.selNums.maxShow(12),n.itemTimes=n.itemTimes*(n.priceMode==0?1:n.priceMode==1?10:100)}),n},i.saveTempFav=function(n){window.localStorage&&(window.localStorage.TempFav=n)},i.importTempFav=function(){var u,r,n,f;window.localStorage&&(u=window.localStorage.TempFav,u&&(r=JSON.parse(u),r.lotteryId==gl.lotteryId?(n=i._prepareBetInfoForTempFav(r),f=_selectNumsTmpl({data:n.betObjList}),$("#selectNumsContainerId").append(f),$("input.betting-multiple").tpuiNumber({type:"depart"}),$("#totalTimesInput").val(n.totalTimes),t(1),window.localStorage.TempFav=""):window.localStorage.TempFav=""))},i.delFav=function(n,t){confirm("确定要删除该收藏吗？",function(n){if(n){var u=[$(t.target).attr("favId"),gl.lotteryId],f=EnCryptJsonParams(u),r=$("div.tp-ui-loading-base").parent();ctx.postTokenEx({url:"/Bet/FavDel",data:f,beforeSend:function(){i.isCompleted=!1,r.css({"z-index":99999}).show()},complete:function(){i.isCompleted=!0,r.hide().prev().hide()},success:function(n){if(n.Ok==1){alertTip("删除成功！");var t=_.filter(i.favList,function(n){return n.Id!=u[0]});i.favList=t,i._refleshObservableData()}else alert(n.Tip)}})}})}},LotteryStickie=function(){var n=this;n.stickieHandle=$("#stickie-handle"),n.lotterySelector=$("#lottery-selector"),n.init=function(){var r=n.lotterySelector.find("li[code="+gl.lotteryId+"]"),t="stickie-handle-on",i=r.attr("sticked");i==1&&n.stickieHandle.addClass(t),n.setLikeTitle(i);n.stickieHandle.off().on("click","a",function(){var i=!n.stickieHandle.hasClass(t);gl.isLogined&&(i?(n.addStickie(),n.setLikeTitle(1)):n.setLikeTitle(0),n.stickieHandle.toggleClass(t)),ctx.postToken("/Home/StickLottery/"+gl.lotteryId,{},function(t){var r,u,f;t.success?(r=n.lotterySelector,u=r.find("li[code="+gl.lotteryId+"]"),i?(f=r.find("li:first"),u.is(f)||(u.attr("sticked",1).insertBefore(f).show(),r.find("li").eq(5).hide())):(u.attr("sticked",0).hide().appendTo(r),r.find("li").eq(4).show())):alert(t.msg)})})},n.setLikeTitle=function(t){t==1?n.stickieHandle.attr("title","取消喜欢"):n.stickieHandle.attr("title","喜欢")},n.addStickie=function(){var r=$("#ticket-icon").offset(),i=$("#checker-lite").offset(),u=$("#ticket-icon span.ticket-icon").attr("ticketid"),t=null;t=$("<div>").attr("id","stickie-refer").addClass("animated rubberBand").append('<div class="image"><span class="ticket-icon t-s-96 ti-'+u+'">&nbsp;</span></div>').appendTo($("body")),t.fly({start:{left:r.left,top:r.top},end:{left:i.left+48,top:i.top,width:0,height:0},vertex_Rtop:.6,speed:1,onEnd:function(){t.fadeOut(function(){t.remove()})}})}},NewBonus=function(){var n=this;n.$lastBonusPanel=$("#ticker-drawing-last"),n.suitDict={dt:"黑桃",fp:"方块",mh:"梅花",rt:"红桃"},n._dataList=[],n.dataList=ko.observableArray([]),n.init=function(){n.loadData()},n.loadData=function(){gl.betAssistData.top5?gl.betAssistData.top5.length>0&&(n._dataList=n._prepareBonusData(gl.betAssistData.top5),n._refleshObservaleData(),n.setLastBonus(n._dataList[0]),n._koDataBind()):ctx.postToken("/Bet/GetLast5LotteryHistory/"+gl.lotteryId,{},function(t){t&&t.length>0&&(n._dataList=n._prepareBonusData(t),n._refleshObservaleData(),n.setLastBonus(n._dataList[0]),n._koDataBind())})},n.setLastBonus=function(t){var u=t.BonusNumber.split(","),r=n.$lastBonusPanel,i=r.find("ul"),v=r.find("#id-sum"),a=r.find("#id-style"),f;i.empty(),_.each(u,function(t){if(gl.lotteryId==EnumLotteryType.klpk){var u=t[0]+t[1];i.append("<li><span class='tvs-poker-"+u+"'> <em>"+t.substring(2)+"</em> <i>"+n.suitDict[u]+"</i> </span></li>")}else gl.isK3?(r.find(".tdl-vs-dice").removeClass("ks-tdl-loading"),i.append("<li><span class='tvs-dice-"+t+"'><i>"+t+"</i></span></li>")):gl.lotteryId==EnumLotteryType.pk10?(r.find(".tdl-vs-base-pks").removeClass("pks-tdl-loading"),i.append("<li><span class='p-i-"+t+"'><i>"+t+"</i></span></li>")):i.append("<li><span><i>"+t+"</i></span></li>")});var h="",e="",f=[],o=0,s=14;if(gl.lotteryId==EnumLotteryType.pk10||gl.lotteryId==EnumLotteryType.sd11x5||gl.lotteryId==EnumLotteryType.gd11x5||gl.lotteryId==EnumLotteryType.jx11x5||gl.lotteryId==EnumLotteryType.sh11x5||gl.lotteryId==EnumLotteryType.hlj11x5||gl.lotteryId==EnumLotteryType.js11x5?(f=u.slice(0,3),s=gl.lotteryId==EnumLotteryType.pk10?15:17):f=u.slice(u.length-3,u.length),gl.lotteryId==EnumLotteryType.klpk)e=t.Pattern;else{var o=BonusNumHelper.sum(f.join(",")),c=BonusNumHelper.daXiao(o,s),l=BonusNumHelper.danShuang(o);h=c+l,e=BonusNumHelper.pattern(f.join(","),gl.lotteryId)}v.html(h),a.html(e)},n._prepareBonusData=function(n){return _.each(n,function(n){var t=n.BonusNumber.split(",");n.IssueNumberBack=n.IssueNumber,gl.isShiShiCai?(n.DaXiao=BonusNumHelper.daXiao(t[t.length-1]),n.DanShuang=BonusNumHelper.danShuang(t[t.length-1]),(gl.lotteryId==EnumLotteryType.cqc||gl.lotteryId==EnumLotteryType.tjc||gl.lotteryId==EnumLotteryType.xjssc)&&(n.IssueNumber=n.IssueNumber.substr(4))):gl.lotteryId==EnumLotteryType.pk10?(n.BonusNumberX=n.BonusNumber.split(",").slice(0,6),n.BonusNumberX.push("...")):gl.lotteryId==EnumLotteryType.klpk?(n.BonusNumberBack=n.BonusNumber,n.BonusNumber=BonusNumHelper.pkNumFilter(n.BonusNumber),n.Pattern=BonusNumHelper.pattern(n.BonusNumberBack,n.LotteryCode)):(n.TotalNumber=BonusNumHelper.sum(n.BonusNumber,n.LotteryCode),n.Pattern=BonusNumHelper.pattern(n.BonusNumber,n.LotteryCode))}),n},n._prepareK3SumStatData=function(t){_.each(n._dataList,function(n){var r=_.filter(t,function(t){return t.IssueNumber==n.IssueNumber&&t.Target=="和值形态"}),i=_.find(r,function(n){return n.TargetStat=="大"});n.Da=i==undefined?"":i.MissTimes==0?"大":String(i.MissTimes).replace("1000000",""),i=_.find(r,function(n){return n.TargetStat=="小"}),n.Xiao=i==undefined?"":i.MissTimes==0?"小":String(i.MissTimes).replace("1000000",""),i=_.find(r,function(n){return n.TargetStat=="单"}),n.Dan=i==undefined?"":i.MissTimes==0?"单":String(i.MissTimes).replace("1000000",""),i=_.find(r,function(n){return n.TargetStat=="双"}),n.Shuang=i==undefined?"":i.MissTimes==0?"双":String(i.MissTimes).replace("1000000","")})},n.renderK3SumStat=function(){gl.isK3&&n._refleshObservaleData()},n._koDataBind=function(){var i=$("#drawing-lite")[0],t;ko.cleanNode(i),ko.applyBindings(n,i),t=$("#drawing-more"),t.length>0&&(ko.cleanNode(t[0]),ko.applyBindings(n,t[0]))},n._refleshObservaleData=function(){var t=n._dataList.slice(0);gl.lotteryId==EnumLotteryType.ggc&&(t.reverse(),n._dataList.length<=1&&n._koDataBind()),n.dataList([]),n.dataList(t)},n.refleshLotteryHistory=function(t){var u=_.find(n._dataList,function(n){return n.IssueNumberBack==t[1]}),i,r;u||(i={LotteryCode:t[0],IssueNumber:t[1],BonusNumber:t[2]},i.BonusDateTime=(new Date).Format(DateFormatStr.dateTime3),r=n._prepareBonusData([i]),gl.lotteryId!=EnumLotteryType.ggc&&n.setLastBonus(r[0]),n._dataList=_.union(r,n._dataList.slice(0,4)),n._refleshObservaleData())},n.waitingBonus=function(t){t.preBonusNumber&&t.preBonusNumber!="-"||t.preBonusNumber=="-"&&_.find(n._dataList,function(n){return n.IssueNumberBack==t.preIssueNumber})?n.$lastBonusPanel.find("div.tdl-viewer-sub.attach").show():$("#drawing-lite tbody").find("tr").eq(0).find("span").eq(0).html()<$("#preIssueNumberId").html()&&(n.$lastBonusPanel.find("div.tdl-viewer-sub.attach").hide(),n.$lastBonusPanel.find("ul").find("i").html("?"),gl.lotteryId==EnumLotteryType.klpk&&n.$lastBonusPanel.find("ul").find("span").attr("class","tvs-poker-loading"),gl.isK3&&n.$lastBonusPanel.find(".tdl-vs-dice").addClass("ks-tdl-loading"),gl.lotteryId==EnumLotteryType.pk10&&n.$lastBonusPanel.find(".tdl-vs-base-pks").addClass("pks-tdl-loading"))}},ChartTypeMapper=function(){var n=this;n.init=function(){var ot,l,s,h,a,y,v,r,ft,rt,ut,t,u,o,c,f,i,e,et,st,it,p,w,b,g,nt,k,d,tt;for(n.typeDict={},ot=1;ot<50;ot++)n.typeDict[ot]={};return l={},_.each([1010101,1050101,1020101,1020301,1020501,1050401,1060101],function(n){l[n]=1}),_.each([1030501,1040501,1070301],function(n){l[n]=8}),_.each([1050501],function(n){l[n]=9}),l[1080101]=2,l[11801]=2,n.typeDict[EnumLotteryType.cqc]=l,s={},_.each([2010101,2020101,2020301,2020501,2050101,2050401,2060101],function(n){s[n]=201}),_.each([2030501,2040501,2070301],function(n){s[n]=206}),_.each([2050501],function(n){s[n]=207}),s[2080101]=202,s[21801]=202,n.typeDict[EnumLotteryType.tjc]=s,h={},_.each([14010101,14020101,14020301,14020501,14050101,14050401,14060101],function(n){h[n]=1401}),_.each([14030501,14040501,14070301],function(n){h[n]=1406}),_.each([14050501],function(n){h[n]=1407}),h[14080101]=1402,h[141801]=1402,n.typeDict[EnumLotteryType.xjssc]=h,a={},_.each([9010101,9020101,9020301,9020501,9050101,9050401,9060101],function(n){a[n]=901}),_.each([9030501,9040501,9070301],function(n){a[n]=908}),_.each([9050501],function(n){a[n]=907}),a[9080101]=902,a[91801]=902,n.typeDict[EnumLotteryType.wfc]=a,y={},_.each([20010101,20020101,20020301,20020501,20050101,20050401,20060101],function(n){y[n]=2001}),_.each([20030501,20040501,20070301],function(n){y[n]=2008}),_.each([20050501],function(n){y[n]=2007}),y[20080101]=2002,y[201801]=2002,n.typeDict[EnumLotteryType.yfc]=y,v={},_.each([31010101,31020101,31020301,31020501,31050101,31050401,31060101],function(n){v[n]=3101}),_.each([31030501,31040501,31070301],function(n){v[n]=3108}),_.each([31050501],function(n){v[n]=3107}),v[31080101]=3102,v[311801]=3102,n.typeDict[EnumLotteryType.yfcnew]=v,r={},_.each([29010101,29020101,29020301,29020501,29050101,29050401,29060101],function(n){r[n]=2901}),_.each([29030501,29040501,29070301],function(n){r[n]=2908}),_.each([29050501],function(n){r[n]=2907}),r[29080101]=2902,r[291801]=2902,n.typeDict[EnumLotteryType.hgffc]=r,ft={},_.each([6010101,6040101],function(n){ft[n]=601}),_.each([6020101,6030101],function(n){ft[n]=607}),ft[61101]=603,n.typeDict[EnumLotteryType.fc3d]=ft,rt={},_.each([13010101,13040101],function(n){rt[n]=1301}),_.each([13020101,13030101],function(n){rt[n]=1307}),rt[131101]=1303,n.typeDict[EnumLotteryType.kcjs3d]=rt,ut={},_.each([5010101,5040101],function(n){ut[n]=501}),_.each([5020101,5030101],function(n){ut[n]=508}),ut[51101]=503,n.typeDict[EnumLotteryType.pl3]=ut,t={},_.each([10010101,10020101,10030101,10040101,10050101,10060101,10070101,101801,101901],function(n){t[n]=1013}),_.each([10080101,10100101,10120101],function(n){t[n]=1001}),t[10090101]=1011,t[10110101]=1012,t[102001]=1003,n.typeDict[EnumLotteryType.sd11x5]=t,u={},_.each([21010101,21020101,21030101,21040101,21050101,21060101,21070101,211801,211901],function(n){u[n]=2113}),_.each([21080101,21100101,21120101],function(n){u[n]=2101}),u[21090101]=2111,u[21110101]=2112,u[212001]=2103,n.typeDict[EnumLotteryType.gd11x5]=u,o={},_.each([22010101,22020101,22030101,22040101,22050101,22060101,22070101,221801,221901],function(n){o[n]=2213}),_.each([22080101,22100101,22120101],function(n){o[n]=2201}),o[22090101]=2211,o[22110101]=2212,o[222001]=2203,n.typeDict[EnumLotteryType.jx11x5]=o,c={},_.each([23010101,23020101,23030101,23040101,23050101,23060101,23070101,231801,231901],function(n){c[n]=2313}),_.each([23080101,23100101,23120101],function(n){c[n]=2301}),c[23090101]=2311,c[23110101]=2312,c[232001]=2303,n.typeDict[EnumLotteryType.sh11x5]=c,f={},_.each([24010101,24020101,24030101,24040101,24050101,24060101,24070101,241801,241901],function(n){f[n]=2413}),_.each([24080101,24100101,24120101],function(n){f[n]=2401}),f[24090101]=2411,f[24110101]=2412,f[242001]=2403,n.typeDict[EnumLotteryType.hlj11x5]=f,i={},_.each([28010101,28020101,28030101,28040101,28050101,28060101,28070101,281801,281901],function(n){i[n]=2813}),_.each([28080101,28100101,28120101],function(n){i[n]=2801}),i[28090101]=2811,i[28110101]=2812,i[282001]=2803,n.typeDict[EnumLotteryType.js11x5]=i,e={},_.each([30010101,30020101,30030101,30040101,30050101,30060101,30070101,301801,301901],function(n){e[n]=3013}),_.each([30080101,30100101,30120101],function(n){e[n]=3001}),e[30090101]=3011,e[30110101]=3012,e[302001]=3003,n.typeDict[EnumLotteryType.heb11x5]=e,et={},_.each([8010101,8020101,8030101,8040101,8050101,8060101,8070101,8080101,8090101,8100101,8140101,8140102],function(n){et[n]=801}),et[81201]=802,n.typeDict[EnumLotteryType.pk10]=et,st={},_.each([70601,70701,70801,70901,71001,71101],function(n){st[n]=707}),n.typeDict[EnumLotteryType.klpk]=st,it={},_.each([40401,40601,40901,41001],function(n){it[n]=401}),it[40501]="401,412",it[40502]=412,it[40101]="402,410",n.typeDict[EnumLotteryType.jsk3]=it,p={},_.each([30401,30601,30901,31001],function(n){p[n]=301}),p[30501]="301,312",p[30502]=312,p[30101]="302,310",n.typeDict[EnumLotteryType.jlk3]=p,w={},_.each([150401,150601,150901,151001],function(n){w[n]=1501}),w[150501]="1501,1512",w[150502]=1512,w[150101]="1502,1510",n.typeDict[EnumLotteryType.gxk3]=w,b={},_.each([160401,160601,160901,161001],function(n){b[n]=1601}),b[160501]="1601,1612",b[160502]=1612,b[160101]="1602,1610",n.typeDict[EnumLotteryType.ahk3]=b,g={},_.each([170401,170601,170901,171001],function(n){g[n]=1701}),g[170501]="1701,1712",g[170502]=1712,g[170101]="1702,1710",n.typeDict[EnumLotteryType.hubk3]=g,nt={},_.each([120401,120601,120901,121001],function(n){nt[n]=1201}),nt[120501]="1201,1212",nt[120502]=1212,nt[120101]="1202,1210",n.typeDict[EnumLotteryType.kck3]=nt,k={},_.each([270401,270601,270901,271001],function(n){k[n]=2701}),k[270501]="2701,2712",k[270502]=2712,k[270101]="2702,2710",n.typeDict[EnumLotteryType.bjk3]=k,d={},_.each([180401,180601,180901,181001],function(n){d[n]=1801}),d[180501]="1801,1812",d[180502]=1812,d[180101]="1802,1810",n.typeDict[EnumLotteryType.hebk3]=d,tt={},_.each([320401,320601,320901,321001],function(n){tt[n]=3201}),tt[320501]="3201,3212",tt[320502]=3212,tt[320101]="3202,3210",n.typeDict[EnumLotteryType.yfk3]=tt,n.typeDict}},HeaderToggle=function(){var n=this;n.$handler=$("#nav-toggle-handle"),n.cookieKey="nav-toggle-status",n.init=function(){var t=$.cookie(n.cookieKey);t?t==1&&setTimeout(function(){n.$handler.click()},1500):(t=0,$.cookie(n.cookieKey,t));n.$handler.on("click","a",function(){var i=$.cookie(n.cookieKey),t;t=i==0?1:0,$.cookie(n.cookieKey,t)})}};ComputeBetTotalNumber=[],ComputeBetTotalNumber.WeiSign=",",ComputeBetTotalNumber.NumSign=" ",ComputeBetTotalNumber.ComputeNumber=function(n,t){var r=parseInt(n.RuleId/1e6),i=0;return r==5||r==6||r==13?i=ComputeBetTotalNumber._computeNumber_PL3(n,t):gl.isShiShiCai?i=ComputeBetTotalNumber._computeNumber_SSC(n,t):gl.isK3?i=ComputeBetTotalNumber._computeNumber_K3(n,t):r==7?i=ComputeBetTotalNumber._computeNumber_KLPK(n,t):r==8?i=ComputeBetTotalNumber._computeNumber_PK10(n,t):gl.is11Xuan5&&(i=ComputeBetTotalNumber._computeNumber_SD11X5(n,t)),i},ComputeBetTotalNumber.ComputeNumber_SSC_RenXuanWeiBeiShu=function(n,t){var i=0;switch(n.RuleName){case"任二直选":case"任二组选":case"任二单式":t.length>=2&&(i=ComputeBetTotalNumber._computeCombinationsVariations(t.length,2));break;case"任三直选":case"任三组三":case"任三组六":case"任三单式":t.length>=3&&(i=ComputeBetTotalNumber._computeCombinationsVariations(t.length,6));break;case"任四直选":case"任四单式":t.length>=4&&(i=t.length==5?5:1);break;default:i=1}return i},ComputeBetTotalNumber._computeNumber_SSC=function(n,t){var h,k,b,w,s,nt,g,d,l,c,y,e,a,v,p;if(ComputeBetTotalNumber._computeNumber_SSC_isRenXuan(parseInt(n.SubTypeId/100)))return ComputeBetTotalNumber._computeNumber_SSC_RenXuan(n,t);var tt=n.MatchType,r=ComputeBetTotalNumber._getAllNumsItemValue(t),o=r[0]?r[0].split(ComputeBetTotalNumber.NumSign):null,u=0,i,f;switch(tt){case"不定位":case"不定胆":case"不定位胆":case"定位胆":case"自由双面":for(i=0;i<r.length;i++)u+=r[i].split(ComputeBetTotalNumber.NumSign).length;break;case"组六":for(i=0;i<r.length;i++)u+=ComputeBetTotalNumber._computeCombinationsVariations(r[i].split(ComputeBetTotalNumber.NumSign).length,6);break;case"组三":for(i=0;i<r.length;i++)u+=ComputeBetTotalNumber._computeCombinationsVariations(r[i].split(ComputeBetTotalNumber.NumSign).length,3);break;case"组二":for(i=0;i<r.length;i++)u+=ComputeBetTotalNumber._computeCombinationsVariations(r[i].split(ComputeBetTotalNumber.NumSign).length,2);break;case"组选120":if(o.length>=5)for(f=4;f<=o.length;f++)u+=ComputeBetTotalNumber._getCountRecursiveDownSum(f,4);break;case"组选60":if(r[0]&&r[1]&&r[1].length>=3)for(h=r[0].split(ComputeBetTotalNumber.NumSign),k=ComputeBetTotalNumber.NumSign+r[1]+ComputeBetTotalNumber.NumSign,i=0;i<h.length;i++)for(b=k.replace(ComputeBetTotalNumber.NumSign+h[i]+ComputeBetTotalNumber.NumSign,ComputeBetTotalNumber.NumSign),w=b.split(ComputeBetTotalNumber.NumSign).length-2,f=1;f<=w-2;f++)u+=ComputeBetTotalNumber._getCountDownSum(f);break;case"组选30":if(r[0]&&r[1]&&r[0].length>=2)for(s=r[1].split(ComputeBetTotalNumber.NumSign),nt=ComputeBetTotalNumber.NumSign+r[0]+ComputeBetTotalNumber.NumSign,i=0;i<s.length;i++)g=nt.replace(ComputeBetTotalNumber.NumSign+s[i]+ComputeBetTotalNumber.NumSign,ComputeBetTotalNumber.NumSign),d=g.split(ComputeBetTotalNumber.NumSign).length-2,u+=ComputeBetTotalNumber._getCountDownSum(d-1);break;case"组选20":if(r[0]&&r[1]&&r[1].length>=2)for(e=r[0].split(ComputeBetTotalNumber.NumSign),l=ComputeBetTotalNumber.NumSign+r[1]+ComputeBetTotalNumber.NumSign,i=0;i<e.length;i++)c=l.replace(ComputeBetTotalNumber.NumSign+e[i]+ComputeBetTotalNumber.NumSign,ComputeBetTotalNumber.NumSign),y=c.split(ComputeBetTotalNumber.NumSign).length-2,u+=ComputeBetTotalNumber._getCountDownSum(y-1);break;case"组选10":case"组选5":if(r[0]&&r[1])for(e=r[0].split(ComputeBetTotalNumber.NumSign),a=ComputeBetTotalNumber.NumSign+r[1]+ComputeBetTotalNumber.NumSign,i=0;i<e.length;i++)v=a.replace(ComputeBetTotalNumber.NumSign+e[i]+ComputeBetTotalNumber.NumSign,ComputeBetTotalNumber.NumSign),p=v.split(ComputeBetTotalNumber.NumSign).length-2,u+=p;break;case"大小单双":r[0]&&r[1]&&(u=r[0].split(ComputeBetTotalNumber.NumSign).length*r[1].split(ComputeBetTotalNumber.NumSign).length);break;default:for(u=o.length,i=1;i<r.length;i++)u=u*r[i].split(ComputeBetTotalNumber.NumSign).length}return u},ComputeBetTotalNumber._computeNumber_SSC_RenXuan=function(n,t){var o=t.substr(0,t.indexOf(")")),r,f,i,u,e,s;o=o.replace("(",""),r=0;switch(n.RuleName){case"任二直选":if(o.length>=2)for(f=t.substr(t.indexOf(")")+1),i=ComputeBetTotalNumber._getAllNumsItemValue(f),e=i[0]?i[0].split(ComputeBetTotalNumber.NumSign):null,r=e.length,u=1;u<i.length;u++)r=r*i[u].split(ComputeBetTotalNumber.NumSign).length;break;case"任二组选":o.length>=2&&(f=t.substr(t.indexOf(")")+1),i=ComputeBetTotalNumber._getAllNumsItemValue(f),r=ComputeBetTotalNumber._computeCombinationsVariations(i[0].split(ComputeBetTotalNumber.NumSign).length,2));break;case"任二单式":if(o.length>=2)for(f=t.substr(t.indexOf(")")+1),i=ComputeBetTotalNumber._getAllNumsItemValue(f),e=i[0]?i[0].split(ComputeBetTotalNumber.NumSign):null,r=e.length,u=1;u<i.length;u++)r=r*i[u].split(ComputeBetTotalNumber.NumSign).length;break;case"任三直选":if(o.length>=3)for(f=t.substr(t.indexOf(")")+1),i=ComputeBetTotalNumber._getAllNumsItemValue(f),e=i[0]?i[0].split(ComputeBetTotalNumber.NumSign):null,r=e.length,u=1;u<i.length;u++)r=r*i[u].split(ComputeBetTotalNumber.NumSign).length;break;case"任三组三":o.length>=3&&(f=t.substr(t.indexOf(")")+1),i=ComputeBetTotalNumber._getAllNumsItemValue(f),r=ComputeBetTotalNumber._computeCombinationsVariations(i[0].split(ComputeBetTotalNumber.NumSign).length,3));break;case"任三组六":o.length>=3&&(f=t.substr(t.indexOf(")")+1),i=ComputeBetTotalNumber._getAllNumsItemValue(f),r=ComputeBetTotalNumber._computeCombinationsVariations(i[0].split(ComputeBetTotalNumber.NumSign).length,6));break;case"任三单式":if(o.length>=3)for(f=t.substr(t.indexOf(")")+1),i=ComputeBetTotalNumber._getAllNumsItemValue(f),e=i[0]?i[0].split(ComputeBetTotalNumber.NumSign):null,r=e.length,u=1;u<i.length;u++)r=r*i[u].split(ComputeBetTotalNumber.NumSign).length;break;case"任四直选":if(o.length>=4)for(f=t.substr(t.indexOf(")")+1),i=ComputeBetTotalNumber._getAllNumsItemValue(f),e=i[0]?i[0].split(ComputeBetTotalNumber.NumSign):null,r=e.length,u=1;u<i.length;u++)r=r*i[u].split(ComputeBetTotalNumber.NumSign).length;break;case"任四单式":if(o.length>=4)for(f=t.substr(t.indexOf(")")+1),i=ComputeBetTotalNumber._getAllNumsItemValue(f),e=i[0]?i[0].split(ComputeBetTotalNumber.NumSign):null,r=e.length,u=1;u<i.length;u++)r=r*i[u].split(ComputeBetTotalNumber.NumSign).length}return r>0&&(s=ComputeBetTotalNumber.ComputeNumber_SSC_RenXuanWeiBeiShu(n,o),r=r*s),r},ComputeBetTotalNumber._computeNumber_SSC_isRenXuan=function(n){return n==109||n==209||n==909||n==1409||n==1109||n==2009||n==2909||n==3109},ComputeBetTotalNumber._computeNumber_K3=function(n,t){var s=n.MatchType,i=ComputeBetTotalNumber._getAllNumsItemValue(t),o=i[0]?i[0].split(ComputeBetTotalNumber.NumSign):null,r=0,u,e,f;switch(s){case"粘贴":case"单式":r=i.length;break;case"三不同号":case"三不同号单选":for(e=i[0].split(ComputeBetTotalNumber.NumSign).length,f=1;f<=e-2;f++)r+=ComputeBetTotalNumber._getCountDownSum(f);break;case"二同号单选":i[0]&&i[1]&&(r=i[0].split(ComputeBetTotalNumber.NumSign).length*i[1].split(ComputeBetTotalNumber.NumSign).length);break;case"二不同号":r=ComputeBetTotalNumber._getCountDownSum(o.length-1);break;default:for(r=o.length,u=1;u<i.length;u++)r=r*i[u].split(ComputeBetTotalNumber.NumSign).length}return r},ComputeBetTotalNumber._computeNumber_PL3=function(n,t){var f=n.MatchType,r=ComputeBetTotalNumber._getAllNumsItemValue(t),e=r[0]?r[0].split(ComputeBetTotalNumber.NumSign):null,u=0,i;switch(f){case"定位胆":case"自由双面":for(i=0;i<r.length;i++)u+=r[i].split(ComputeBetTotalNumber.NumSign).length;break;case"组六":for(i=0;i<r.length;i++)u+=ComputeBetTotalNumber._computeCombinationsVariations(r[i].split(ComputeBetTotalNumber.NumSign).length,6);break;case"组三":for(i=0;i<r.length;i++)u+=ComputeBetTotalNumber._computeCombinationsVariations(r[i].split(ComputeBetTotalNumber.NumSign).length,3);break;case"粘贴":case"单式":default:for(u=e.length,i=1;i<r.length;i++)u=u*r[i].split(ComputeBetTotalNumber.NumSign).length}return u},ComputeBetTotalNumber._computeNumber_KLPK=function(n,t){var s=n.MatchType,e=ComputeBetTotalNumber._getAllNumsItemValue(t),i=e[0]?e[0].split(ComputeBetTotalNumber.NumSign):null,r=0,f,u,o;switch(s){case"任选一":r=i.length;break;case"任选二":r=ComputeBetTotalNumber._getCountDownSum(i.length-1);break;case"任选三":if(i.length>=3)for(f=1;f<=i.length-2;f++)r+=ComputeBetTotalNumber._getCountDownSum(f);break;case"任选四":i.length>=4&&(r=ComputeBetTotalNumber._getCountRecursiveDownSum(i.length,3));break;case"任选五":if(i.length>=5)for(u=4;u<=i.length;u++)r+=ComputeBetTotalNumber._getCountRecursiveDownSum(u,4);break;case"任选六":if(i.length>=6)for(u=5;u<=i.length;u++)for(o=5;o<=u;o++)r+=ComputeBetTotalNumber._getCountRecursiveDownSum(o,5);break;case"粘贴":case"单式":r=e.length;break;default:for(r=i.length,f=1;f<e.length;f++)r=r*e[f].split(ComputeBetTotalNumber.NumSign).length}return r},ComputeBetTotalNumber._computeNumber_PK10=function(n,t){var d=n.MatchType,i=ComputeBetTotalNumber._getAllNumsItemValue(t),s=i[0]?i[0].split(ComputeBetTotalNumber.NumSign):null,a=0,u,f,o,h,v,p,k,b,l,w,y,c,e,r;switch(d){case"猜前五名":case"猜前五名单式":case"趣味猜前五名":if(i.length>=5&&i[0]&&i[1]&&i[2]&&i[3]&&i[4])for(u="",f="",o="",l="",p="",s=i[0].split(ComputeBetTotalNumber.NumSign),h=i[1].split(ComputeBetTotalNumber.NumSign),v=i[2].split(ComputeBetTotalNumber.NumSign),w=i[3].split(ComputeBetTotalNumber.NumSign),k=i[4].split(ComputeBetTotalNumber.NumSign),e=0;e<s.length;e++)for(u=s[e],r=0;r<h.length;r++)if(f=h[r],f!=u)for(c=0;c<v.length;c++)if(o=v[c],o!=f&&o!=u)for(y=0;y<w.length;y++)if(l=w[y],l!=u&&l!=f&&l!=o)for(b=0;b<k.length;b++)(p=k[b],p!=u&&p!=f&&p!=o&&p!=l)&&a++;break;case"猜前四名":case"猜前四名单式":case"趣味猜前四名":if(i.length>=4&&i[0]&&i[1]&&i[2]&&i[3])for(u="",f="",o="",l="",s=i[0].split(ComputeBetTotalNumber.NumSign),h=i[1].split(ComputeBetTotalNumber.NumSign),v=i[2].split(ComputeBetTotalNumber.NumSign),w=i[3].split(ComputeBetTotalNumber.NumSign),e=0;e<s.length;e++)for(u=s[e],r=0;r<h.length;r++)if(f=h[r],f!=u)for(c=0;c<v.length;c++)if(o=v[c],o!=f&&o!=u)for(y=0;y<w.length;y++)(l=w[y],l!=u&&l!=f&&l!=o)&&a++;break;case"猜前三名":case"猜前三名单式":if(i.length>=3&&i[0]&&i[1]&&i[2])for(u="",f="",o="",s=i[0].split(ComputeBetTotalNumber.NumSign),h=i[1].split(ComputeBetTotalNumber.NumSign),v=i[2].split(ComputeBetTotalNumber.NumSign),e=0;e<s.length;e++)for(u=s[e],r=0;r<h.length;r++)if(f=h[r],f!=u)for(c=0;c<v.length;c++)(o=v[c],o!=f&&o!=u)&&a++;break;case"猜冠亚军":case"猜冠亚军单式":if(i.length>=2&&i[0]&&i[1])for(u="",f="",s=i[0].split(ComputeBetTotalNumber.NumSign),h=i[1].split(ComputeBetTotalNumber.NumSign),e=0;e<s.length;e++)for(u=s[e],r=0;r<h.length;r++)(f=h[r],f!=u)&&a++;break;case"自由双面":case"定位胆":for(r=0;r<i.length;r++)a+=i[r].split(ComputeBetTotalNumber.NumSign).length;break;default:for(a=s.length,r=1;r<i.length;r++)a=a*i[r].split(ComputeBetTotalNumber.NumSign).length}return a},ComputeBetTotalNumber._computeNumber_SD11X5=function(n,t){var y=n.MatchType,i=ComputeBetTotalNumber._getAllNumsItemValue(t),u=i[0]?i[0].split(ComputeBetTotalNumber.NumSign):null,f=0,l,h,s,a,c,v,o,r,e;switch(y){case"前三组选复式":for(r=0;r<i.length;r++)f+=ComputeBetTotalNumber._computeCombinationsVariations(i[r].split(ComputeBetTotalNumber.NumSign).length,6);break;case"前二组选复式":for(r=0;r<i.length;r++)f+=ComputeBetTotalNumber._computeCombinationsVariations(i[r].split(ComputeBetTotalNumber.NumSign).length,2);break;case"任二复式":i&&i[0]&&(f=ComputeBetTotalNumber._computeCombinationsVariations(i[0].split(ComputeBetTotalNumber.NumSign).length,2));break;case"任三复式":if(u.length>=3)for(r=1;r<=u.length-2;r++)f+=ComputeBetTotalNumber._getCountDownSum(r);break;case"任四复式":u.length>=4&&(f=ComputeBetTotalNumber._getCountRecursiveDownSum(u.length,3));break;case"任五复式":if(u.length>=5)for(e=4;e<=u.length;e++)f+=ComputeBetTotalNumber._getCountRecursiveDownSum(e,4);break;case"任六复式":if(u.length>=6)for(e=5;e<=u.length;e++)for(l=5;l<=e;l++)f+=ComputeBetTotalNumber._getCountRecursiveDownSum(l,5);break;case"任七复式":u.length>=7&&(f=ComputeBetTotalNumber._getCountPermutationAndCombination(u.length,7));break;case"任八复式":u.length>=8&&(f=ComputeBetTotalNumber._getCountPermutationAndCombination(u.length,8));break;case"前二直选复式":if(i.length>=2&&i[0]&&i[1])for(h="",s="",u=i[0].split(ComputeBetTotalNumber.NumSign),c=i[1].split(ComputeBetTotalNumber.NumSign),o=0;o<u.length;o++)for(h=u[o],r=0;r<c.length;r++)(s=c[r],s!=h)&&f++;break;case"前三直选复式":if(i.length>=3&&i[0]&&i[1]&&i[2])for(h="",s="",a="",u=i[0].split(ComputeBetTotalNumber.NumSign),c=i[1].split(ComputeBetTotalNumber.NumSign),v=i[2].split(ComputeBetTotalNumber.NumSign),o=0;o<u.length;o++)for(h=u[o],r=0;r<c.length;r++)if(s=c[r],s!=h)for(e=0;e<v.length;e++)(a=v[e],a!=s&&a!=h)&&f++;break;case"大小单双":i[0]&&i[1]&&(f=i[0].split(ComputeBetTotalNumber.NumSign).length*i[1].split(ComputeBetTotalNumber.NumSign).length);break;case"自由双面":for(r=0;r<i.length;r++)f+=i[r].split(ComputeBetTotalNumber.NumSign).length;break;default:for(f=u.length,r=1;r<i.length;r++)f=f*i[r].split(ComputeBetTotalNumber.NumSign).length}return f},ComputeBetTotalNumber._getAllNumsItemValue=function(n){var r=[],i,t;if(n)for(i=n.split(ComputeBetTotalNumber.WeiSign),t=0;t<i.length;t++)i[t]&&r.push(i[t]);return r},ComputeBetTotalNumber._computeCombinationsVariations=function(n,t){var i=0,r;if(t==6){if(n<3)return 0;for(r=1;r<=n-2;r++)i+=ComputeBetTotalNumber._getCountDownSum(r);return i}return t==3?n<2?0:(i=ComputeBetTotalNumber._getCountDownSum(n-1),i*2):t==2?n<2?0:i=ComputeBetTotalNumber._getCountDownSum(n-1):0},ComputeBetTotalNumber._getCountDownSum=function(n){var i=0,t;if(n>0)for(t=1;t<=n;t++)i+=t;return i},ComputeBetTotalNumber._getCountRecursiveDownSum=function(n,t){for(var u=0,r,i=t;i<n;i++)for(r=1;r<=n-i;r++)u+=ComputeBetTotalNumber._getCountDownSum(r);return u},ComputeBetTotalNumber._getCountPermutationAndCombination=function(n,t){var u=ComputeBetTotalNumber._getCountRecursiveDownMultiply(n),r=ComputeBetTotalNumber._getCountRecursiveDownMultiply(t),i=ComputeBetTotalNumber._getCountRecursiveDownMultiply(n-t);return parseInt(u/r/i)},ComputeBetTotalNumber._getCountRecursiveDownMultiply=function(n){for(var i=1,t=1;t<=n;t++)i=i*t;return i},ComputeBetTotalNumber.CalC=function(n,t){for(var r=1,u=1,i=0;i<t;i++)r*=n-i,u*=t-i;return r/u};var _tplSelectNums='<%_.each(data,function(item){%>        <li ruleId="<%=item.ruleId%>"  jsOdds="<%=item.jsOdds%>"><div class="item">            <span class="bof-tb-mode"><em><%=item.ruleName%></em></span>            <span class="bof-tb-number" allnums="<%=item.selNums%>" title="<%=item.selNums.maxShow(600)%>"><em><i><%=item.subSelNums%></i></em></span>            <span class="bof-tb-count"><em><%=item.betNum%></em></span>            <span class="bof-th-multiple"><input type="text" value="<%=item.itemTimes%>" data-type="depart" fixed="1" class="betting-multiple" /></span>            <span class="bof-tb-method"> <%=GetBetPriceModeHtml(item)%> </span>            <span class="bof-tb-total-price"><em><i><%=(1.0*item.betNum*item.price*item.itemTimes*GetBetPriceValue(item)).toFixedNum(3)%></i></em></span>            <span class="bof-tb-option"><a href="javascript:void(0);">删除</a></span>        </div></li><%});%>',_selectNumsTmpl=_.template(_tplSelectNums),_tplTraceOrder='<%_.each(data,function(item){%>        <tr IssueNumber="<%=item.IssueNumber%>">            <td>                <input type="checkbox" class="trace-checkbox" /></td>            <td><span><%=item.IssueNumber%></span></td>            <td>                <input type="text" class="trace-text traceTimes" value="1" disabled="disabled"/>                倍</td>            <td>&yen;<span class="traceUnitPrice">0.00</span></td>            <td class="timesTraceClass" class="timesTraceClass"><span><%=item.StopTimeEx%></span></td>            <td class="advanceTraceClass"><span class="jiLeiAmount">--</span></td>            <td class="advanceTraceClass"><span class="jiLeiProfit">--</span></td>            <td class="advanceTraceClass"><span class="jiLeiProfitPercent">--</span></td>        </tr>        <%});%>',_traceOrderTmpl=_.template(_tplTraceOrder),_tplTop10='<%_.each(data,function(item,index){ %>        <li>            <div class="item <%=item[20]%>">                <div class="kc-tag rank-tag"><i><%=index%></i></div>                <div class="name"><span><a class="fc-red top10OrderDetail" href="javascript:void(0);" EnOrderID="<%=item[0]%>" title="查看订单详情"><%=item[2]%></a></span></div>                <div class="score"><span>¥<em><%=item[7]%></em></span></div>            </div>        </li>    <%});%>',_tplRecent='<%_.each(data,function(item){%>            <tr IssueNumber="<%=item[4]%>" totalBonus="<%=item[10]%>" class="<%=item[15]?"ggc_scratched":""%>">            <%if(gl.lotteryId==EnumLotteryType.ggc){%>                <td class="td-center"><span class="ggc-bt-number">                <em><%if(item[15]){_.each(item[15].split(","),function(num){%>                            <i><%=(gl.lotteryName==item[1]?num:"")%></i>                        <%});}else{%>                            <i>0</i><i>0</i><i>0</i><i>0</i><i>0</i>                        <%}%>                </em></span></td>            <%}%>            <td class="td-center" title="查看订单详情"><a class="bl-order-id fc-red" href="javascript:void(0);"><%=item[0]%></a></td>                        <%if(gl.lotteryId!=EnumLotteryType.ggc){%>                                <td class="td-center"><span><%=item[1]%></span></td>                        <%}%>                                <td class="td-center" title="<%=item[4]%>"><span><%=item[4].maxShow(12,1)%></span></td>                                <td class="td-center"><span class="fc-yellow"><%=item[2]%></span></td>                                <td class="td-center"><span class="fc-orgen"><%=item[3]%></span></td>                                <td class="td-center" title="<%=item[5]%>"><span><%=item[5].maxShow(12)%></span></td>                                <td class="td-center"><span class="fc-blue betAmount"><%=item[6]%></span></td>                                <td class="td-center"><span class="fc-blue totalMoney"><%=item[23]%></span></td>                                <%if(gl.lotteryId!=EnumLotteryType.ggc){%>                                    <td class="td-center"><span class="fc-green"><%=item[8]%></span></td>                                <%}%>                                <td class="td-center"><span><%=item[9]%></span></td>                                <%if(gl.lotteryId==EnumLotteryType.ggc){%>                                     <td class="td-center">                                      <%if(item[15]){%>                                            <span class="fc-gry">已刮奖</span>                                      <%}else if(item[18]==10){%>                                            <span class="fc-gry">已撤单</span>                                      <%}else{%>                                            <a class="ggc-ta-betting" t="1" href="javascript:void(0);">刮奖</a>                                            <a class="ggc-ta-betting" t="0" href="javascript:void(0);">撤单</a></td>                                      <%}%>                                <%}%>        </tr><%});%>',_top10Tmpl=_.template(_tplTop10),_recentTmpl=_.template(_tplRecent),_tplTraceList='<%_.each(data,function(item,index){ %>        <li  title="点击期号进入追号详情页面">            <span class="title"><%=item.LotteryName%></span>            <a href="#membertraceorderdetail/<%=item.EncodeId%>"  target="_blank"><span class="period">第一期:<em><%=item.IssueNumber%></em></span></a>            <span class="count"><em><%=item.TotalIssue%></em>期</span>            <span class="mode"><em><%=item.RuleName%></em></span>            <span class="status fc-green"><%=item.TStatus%></span>        </li>    <%});%>',_traceListTmpl=_.template(_tplTraceList);_recentData=[],_top10Data=[],_betOrderDetailHtml='<div class="table ta-center table-line-hor">',_betOrderDetailHtml+="<table><tbody>",_betOrderDetailHtml+='<tr class="needMultsInfo" style="display:none;">',_betOrderDetailHtml+='<td colspan="6"><span class="fc-red">此次追号有多笔投注项，当前只显示第一笔订单详情!</span></td>',_betOrderDetailHtml+="</tr>",_betOrderDetailHtml+="<tr>",_betOrderDetailHtml+='<td class="ta-right"><span>订单编号：</span></td>',_betOrderDetailHtml+='<td colspan="2"><span class="fc-red">{0}</span></td>',_betOrderDetailHtml+='<td class="ta-right"><span>发单人：</span></td>',_betOrderDetailHtml+='<td colspan="2"><span class="fc-red">{14}</span></td>',_betOrderDetailHtml+="</tr>",_betOrderDetailHtml+="<tr>",_betOrderDetailHtml+='<td class="ta-right"><span>彩种：</span></td>',_betOrderDetailHtml+='<td colspan="2"><span class="fc-blue">{1}</span></td>',_betOrderDetailHtml+='<td class="ta-right"><span>期号：</span></td>',_betOrderDetailHtml+='<td colspan="2"><span class="fc-blue">{4}</span></td>',_betOrderDetailHtml+="</tr>",_betOrderDetailHtml+="<tr>",_betOrderDetailHtml+='<td class="ta-right"><span>玩法：</span></td>',_betOrderDetailHtml+='<td colspan="2"><span class="fc-green">{2}</span></td>',_betOrderDetailHtml+='<td class="ta-right"><span>奖金/赔率：</span></td>',_betOrderDetailHtml+='<td colspan="2"><span class="fc-green">{3}</span></td>',_betOrderDetailHtml+="</tr>",_betOrderDetailHtml+="<tr>",_betOrderDetailHtml+='<td class="ta-right"><span>订单时间：</span></td>',_betOrderDetailHtml+='<td colspan="2"><span>{9}</span></td>',_betOrderDetailHtml+='<td class="ta-right"><span>开奖号码：</span></td>',_betOrderDetailHtml+='<td colspan="2" title="{15}"><span>{22}</span></td>',_betOrderDetailHtml+="</tr>",_betOrderDetailHtml+="<tr>",_betOrderDetailHtml+='<td class="ta-right"><span>选号：</span></td>',_betOrderDetailHtml+='<td colspan="5" class="logs-order-number" title="{5}"><span class="fc-red"><em>{16}</em></span></td>',_betOrderDetailHtml+="</tr>",_betOrderDetailHtml+="<tr>",_betOrderDetailHtml+='<td class="ta-right"><span>注数：</span></td>',_betOrderDetailHtml+='<td colspan="2"><span class="fc-blue">{12}</span></td>',_betOrderDetailHtml+='<td class="ta-right"><span>倍数：</span></td>',_betOrderDetailHtml+='<td colspan="2"><span class="fc-blue">{11}</span></td>',_betOrderDetailHtml+="</tr>",_betOrderDetailHtml+="<tr>",_betOrderDetailHtml+='<td class="ta-right"><span>投注总额：</span></td>',_betOrderDetailHtml+='<td colspan="2"><span class="fc-green">{6} 元</span></td>',_betOrderDetailHtml+='<td class="ta-right"><span>中奖金额：</span></td>',_betOrderDetailHtml+='<td colspan="2"><span class="fc-green">{7} 元</span></td>',_betOrderDetailHtml+="</tr>",_betOrderDetailHtml+="<tr>",_betOrderDetailHtml+='<td class="ta-right"><span>说明：</span></td>',_betOrderDetailHtml+='<td colspan="2"><span>{8}</span></td>',_betOrderDetailHtml+='<td class="ta-right"><span>盈亏：</span></td>',_betOrderDetailHtml+='<td colspan="2"><span>{13}</span></td>',_betOrderDetailHtml+="</tr>",_betOrderDetailHtml+="</tbody></table>",_betOrderDetailHtml+="</div>",initOrderDetailClick(),renderRecentBetOrderList=function(n){_recentData=BetOrderDataToArray(n);var t=_recentTmpl({data:_recentData});$("#recentContainerId").html(t),initOrderDetailClick(),gl.lotteryId==EnumLotteryType.ggc&&gl.ggc.initHistoryScratch()},gl.renderRecentBetOrderList=renderRecentBetOrderList,GgcClient=function(n){function c(n){for(var i=$("<ul>"),r=null,t=0;t<5;t++)r=$("<li>").append("<span>"+(n?n[t]:0)+"</span>").appendTo(i);return i}function d(){var t=o.find("ul"),n,r;t.empty(),n=$('<li><a href="javascript:void(0);">继续游戏</a></li>').on("click",function(){v(),_.delay(function(){gl.ggc.reFillTopScratch()},1e3)}),r=$('<li><a href="javascript:void(0);">重新刮奖</a></li>').on("click",function(){h(0),setTimeout(function(){i.removeClass("fixed"),p.stop(!0,!1).animate({scrollTop:nt.offset().top})},1e3)}),t.append(n)}function k(n,i,f,e){if(l={number:n,mode:["大","双"],time:"2015-04-14 18:18:55"},a=i,i==0)u="";else{u="中奖注数：<span>"+i+"</span>注，";var o=f-e;u+=t.profitTip(o)}r.children("ul").remove(),r.append(c(l.number)).trigger("_fill"),i!=-1&&r.trigger("_scratch"),$(".ggc-waiting").hide()}function b(n,t){s.empty();var i=$('<div class="s-mode animated">');switch(parseInt(n)){case 0:i.addClass("sm-fail flipInX").attr("title","很遗憾，没有中奖，祝您下次好运！");break;case-1:i.addClass("sm-net fadeInUp").attr("title","哦~网络请求出错了");break;default:i.addClass("sm-success zoomInDown"),e.html(t).show()}s.show().append(i)}function v(){h(0),i.removeClass("fixed"),e.is(":visible")&&e.hide(),$(".ggc-waiting").hide()}function h(n){n?(f.show(),w.show(),b(a,u),d(),o.show()):(f.hide(),o.hide(),s.hide(),w.hide(),tt.hide())}var p=$("html,body"),nt=$("#betting-panel"),i=$("#ggc-card"),g=i.find(".card:first"),w=i.find(".board:first"),s=i.find(".status:first"),o=i.find(".operate-bar:first"),tt=i.find(".adorn:first"),y=g.find(".gcc-item:first"),r=$('<div class="number">'),e=i.find(".order:first"),it=$("#betting-history tbody tr"),f=$('<div class="tp-ui-mask ggc-mask">'),l=null,rt=null,a=0,u="",t;y.append(' <div style="display:none" class="ggc-waiting">数据交互中...</div>'),r.append(c()).appendTo(y).kcScratch({brusheSize:2,fillImage:"images/ggc/ggc-betting-base-mask.png",scratchPatch:"5,220|15,150|45,120|60,300|50,150",onScratch:function(){h(1)}}),f.appendTo($("body")).hide(),t=this,t.$submitBtn=$("#bettingBtn"),t.$addBettingNumber=$("#addBettingNumberId"),t.$ggcDrawingBase=$("#ggc-betting-base"),t.isScratchAll=!1,t.$recentContainerId=$("#recentContainerId"),t.init=function(){var i=["red","orgen","green","blue","purple"];$.each($(".ticket-play-type li"),function(n){$(this).addClass("tpt-"+i[n%5])}),init_betComm(n),t.bind()},t.bind=function(){$("#bonusBtnContainer").on("click","a",function(){gl.isLogined?(gl.bet.ggcBonusMode=$(this).hasClass("cob-h-rightaway")?"now":"later",$("#selectNumsContainerId").empty(),t.$addBettingNumber.click()):$("#login-enter").click()});$("#scratchAll").on("click",function(){t.isScratchAll=!0;var n=t.$recentContainerId.find(".ggc-ta-betting[t=1]:visible");n.length>0?n.eq(0).trigger("click.ggcScratch"):alert("没有未刮奖的订单！")});$("#totalTimesInput").bind("changekc",function(){var i=parseFloat($("#emBetAmount").html().replaceAll(",","")),t=parseInt($(this).val()),n=i*t;$("#totalAmountId").html(n.toFixedNum(3))});var n=$(".ggc-waiting");setInterval(function(){n.length>0&&(n.html().length>="数据交互中 . . .".length?n.html("数据交互中"):n.html(n.html()+" ."))},1e3)},t.waitingBouns=function(){var n=$("#drawing-lite").find("li:last");n.find("i").html("?"),n.find("em").html("-"),t.showScratchPanel()},t.reFillTopScratch=function(){r.trigger("_fill")},t.showScratchPanel=function(){p.stop(!0,!1).animate({scrollTop:0},function(){i.addClass("fixed")}),$(".ggc-waiting").show()},t.topOpenBonus=function(n,i,r,u){var e,f,o;n!=""?(e=n.split(","),k(e,i,r,u),f=t.$ggcDrawingBase.find("ul"),f.html(""),_.each(e,function(n){f.append("<li><span>"+n+"</span></li>")}),o=[gl.LotteryId,String(Date.parse(new Date)),n],gl.betAssist.newBonus.refleshLotteryHistory(o)):v()},t.profitTip=function(n){return msg="",msg+=n>0?"盈利":"亏",msg+="<span>&yen;"+Math.abs(n.toFixedNum(3))+"</span>元"},t.initHistoryScratch=function(){var n=$("#betting-history tbody tr");$.each(n,function(n,i){var r=$(i),e="ggc_scratched",o=r.hasClass(e)?!0:!1,f=r.find(".ggc-bt-number:first"),u=r.find(".ggc-ta-betting");f.kcScratch({brusheSize:2,fillImage:"./images/ggc/ggc-hostory-mask.png",scratchPatch:"1,90|5,95|14,95|16,100|24,95",onFill:function(){o&&f.triggerHandler("_scratch")},onScratch:function(){r.addClass("ggc_scratched"),u.eq(0).before($('<span class="fc-gry">已刮奖</span>')),u.hide()}});u.off(".ggcScratch").on("click.ggcScratch",function(){var r=$(this);if(r.attr("t")==1){var u=r.closest("tr"),n=t.isScratchAll?"a":u.attr("IssueNumber"),i=$("body");i.tpuiLoading("_show"),ctx.postTokenEx({url:"/Bet/ScratchBonus/"+n,data:{},success:function(i){var r,f,e,o;if(i.Ok==1){var h=i.TotalMoney-i.BetAmount,u="很遗憾，未中奖！",s="第{}期刮奖结果".replace("{}",n);if(t.isScratchAll&&(s="全部刮奖结果"),i.BonusTotalNumber>0&&(u=h>0?"恭喜您，":"",u+="刮中"+i.BonusTotalNumber+"注，",u+=t.profitTip(h)),$.appAlert({useTitle:s,title:u,message:""},"success"),r=[],t.isScratchAll)for(f=0;f<i.BoNums.length;f++)r=[gl.lotteryId,String(Date.parse(new Date)),i.BoNums[f]],gl.betAssist.newBonus.refleshLotteryHistory(r);else r=[gl.lotteryId,String(Date.parse(new Date)),i.BoNums],gl.betAssist.newBonus.refleshLotteryHistory(r)}else e=i.Tip,o="warning",e=="没有可派奖的订单数据"&&(e="该订单已刮奖，正在刷新数据，请稍候。若网络不佳请偿试刷新页面",o="info"),$.appAlert({useTitle:"刮奖结果",title:"刮奖通知",message:e},o);gl.renderRecentBetOrderList(i.Orders)},complete:function(){t.isScratchAll=!1,i.tpuiLoading("_hide")},error:function(){alert("网络异常，请检查您的网络或偿试刷新页面。"),gl.refreshHistoryData(1)}})}})})}},BetPauseHelper=[],BetPauseHelper.MaxPauseNum=999,BetPauseHelper.doPause=function(n){var f=$(".betRuleClass.active"),t=f.attr("isfun")=="1",u,i,r;u=t?f.attr("betsubtype")+"01":f.attr("betrule"),i=GetDataDetailById(u,gl.rules,"RuleId");try{n=n?parseInt(n):1}catch(e){n=1}n>BetPauseHelper.MaxPauseNum&&(n=BetPauseHelper.MaxPauseNum),r=parseInt(u/1e6),r==5||r==6||r==13?BetPauseHelper._doPause_PL3(i,t,n):gl.isShiShiCai?BetPauseHelper._doPause_SSC(i,t,n):gl.isK3?BetPauseHelper._doPause_K3(i,t,n):r==7?BetPauseHelper._doPause_KLPK(i,t,n):r==8?BetPauseHelper._doPause_PK10(i,t,n):gl.is11Xuan5&&BetPauseHelper._doPause_Sd11X5(i,t,n)},BetPauseHelper._doPause_SSC=function(n,t,i){var f=$(".betting-checker-panel"),b=$("#selectNumsContainerId"),o=[],y,v,u,r="",a=i,e=[],w,h,c,l,s,p;if(!t||t&&($(".betRuleClass:visible").length==1||n.MatchType=="自由双面"))if(n.MatchType=="单式"&&n.RuleName!="任二单式"&&n.RuleName!="任三单式"&&n.RuleName!="任四单式")for(w=[0,1,2,3,4,5,6,7,8,9],h=1,n.RuleName=="五星单式"?h=5:n.RuleName=="前三单式"||n.RuleName=="中三单式"||n.RuleName=="后三单式"?h=3:(n.RuleName=="前二单式"||n.RuleName=="后二单式")&&(h=2),c=0;c<a;c++){if(o.length==i)break;if(c>BetPauseHelper.MaxPauseNum*11)break;u=BetPauseHelper._getSingleRandomNumBall(w,h),e.length==0||!e.contain(u)||c>BetPauseHelper.MaxPauseNum*10?(e[e.length]=u,y=ComputeBetTotalNumber.ComputeNumber(n,u),u=u.replaceAll(" ",""),v={ruleId:n.RuleId,ruleName:n.DisplayName,selNums:u,subSelNums:u.maxShow(12),price:gl.price,betNum:y,jsOdds:n.UserOdds*1+n.UserPlusOdds*1,itemTimes:1},o.push(v)):o.length<i&&a++}else for(l=0;l<a;l++){if(o.length==i)break;if(l>BetPauseHelper.MaxPauseNum*11)break;r="",u="",n.RuleName=="前三组三"||n.RuleName=="中三组三"||n.RuleName=="后三组三"?u=BetPauseHelper._getRandomNumBall(f,[2]):n.RuleName=="前三组六"||n.RuleName=="中三组六"||n.RuleName=="后三组六"?u=BetPauseHelper._getRandomNumBall(f,[3]):n.RuleName=="前二组选"||n.RuleName=="后二组选"?u=BetPauseHelper._getRandomNumBall(f,[2]):n.RuleName=="组选120"?u=BetPauseHelper._getRandomNumBall(f,[5]):n.RuleName=="组选60"?u=BetPauseHelper._getRandomNumBall(f,[1,3],!0):n.RuleName=="组选30"?u=BetPauseHelper._getRandomNumBall(f,[2,1],!0):n.RuleName=="组选20"?u=BetPauseHelper._getRandomNumBall(f,[1,2],!0):n.RuleName=="组选10"?u=BetPauseHelper._getRandomNumBall(f,[1,1],!0):n.RuleName=="组选5"||n.RuleName=="大小单双"?u=BetPauseHelper._getRandomNumBall(f,[1,1],!0):n.RuleName=="任二直选"?(r=BetPauseHelper._getSingleRandomNumBall(["1万","2千","3百","4十","5个"],2),r=r.replaceAll(",","").replaceAll("1","").replaceAll("2","").replaceAll("3","").replaceAll("4","").replaceAll("5",""),r="("+r+")",u=BetPauseHelper._getRandomNumBall(f,[1,1],!0)):n.RuleName=="任三直选"?(r=BetPauseHelper._getSingleRandomNumBall(["1万","2千","3百","4十","5个"],3),r=r.replaceAll(",","").replaceAll("1","").replaceAll("2","").replaceAll("3","").replaceAll("4","").replaceAll("5",""),r="("+r+")",u=BetPauseHelper._getRandomNumBall(f,[1,1,1],!0)):n.RuleName=="任二单式"||n.RuleName=="任三单式"||n.RuleName=="任四单式"?(s=2,n.RuleName=="任三单式"?s=3:n.RuleName=="任四单式"&&(s=4),r=BetPauseHelper._getSingleRandomNumBall(["1万","2千","3百","4十","5个"],s),r=r.replaceAll(",","").replaceAll("1","").replaceAll("2","").replaceAll("3","").replaceAll("4","").replaceAll("5",""),r="("+r+")",u=BetPauseHelper._getSingleRandomNumBall([0,1,2,3,4,5,6,7,8,9],s)):n.RuleName=="任四直选"?(r=BetPauseHelper._getSingleRandomNumBall(["1万","2千","3百","4十","5个"],4),r=r.replaceAll(",","").replaceAll("1","").replaceAll("2","").replaceAll("3","").replaceAll("4","").replaceAll("5",""),r="("+r+")",u=BetPauseHelper._getRandomNumBall(f,[1,1,1,1],!0)):n.RuleName=="任二组选"?(r=BetPauseHelper._getSingleRandomNumBall(["1万","2千","3百","4十","5个"],2),r=r.replaceAll(",","").replaceAll("1","").replaceAll("2","").replaceAll("3","").replaceAll("4","").replaceAll("5",""),r="("+r+")",u=BetPauseHelper._getRandomNumBall(f,[2])):n.RuleName=="任三组三"?(r=BetPauseHelper._getSingleRandomNumBall(["1万","2千","3百","4十","5个"],3),r=r.replaceAll(",","").replaceAll("1","").replaceAll("2","").replaceAll("3","").replaceAll("4","").replaceAll("5",""),r="("+r+")",u=BetPauseHelper._getRandomNumBall(f,[2])):n.RuleName=="任三组六"?(r=BetPauseHelper._getSingleRandomNumBall(["1万","2千","3百","4十","5个"],3),r=r.replaceAll(",","").replaceAll("1","").replaceAll("2","").replaceAll("3","").replaceAll("4","").replaceAll("5",""),r="("+r+")",u=BetPauseHelper._getRandomNumBall(f,[3])):u=BetPauseHelper._getRandomNumBall(f,[1]),e.length==0||!e.contain(u)||l>BetPauseHelper.MaxPauseNum*10?(e[e.length]=u,r&&(u=r+u),y=ComputeBetTotalNumber.ComputeNumber(n,u),u=u.replaceAll(" ",""),v={ruleId:n.RuleId,ruleName:n.DisplayName,selNums:u,subSelNums:u.maxShow(12),price:gl.price,betNum:y,jsOdds:n.UserOdds*1+n.UserPlusOdds*1,itemTimes:1},o.push(v)):o.length<i&&a++}else o=BetPauseHelper._getRandomNumBallOfQuWei(f,n,a);p=_selectNumsTmpl({data:o}),b.append(p),$("input.betting-multiple").tpuiNumber({type:"depart"})},BetPauseHelper._doPause_K3=function(n,t,i){var d=$(".betting-checker-panel"),tt=$("#selectNumsContainerId"),s=[],p,w,h,v=i,r=[],b,c,e,l,a,k,f,y,u,g,o,nt;if(n.RuleName=="二不同号")for(b=0;b<v;b++){if(s.length==i)break;if(b>BetPauseHelper.MaxPauseNum*11)break;h=BetPauseHelper._getRandomNumBall(d,[2]),r.length==0||r.length>=6||!r.contain(h)?(r.contain(h)||(r[r.length]=h),p=ComputeBetTotalNumber.ComputeNumber(n,h),w={ruleId:n.RuleId,ruleName:n.DisplayName,selNums:h,subSelNums:h.maxShow(12),price:gl.price,betNum:p,jsOdds:n.UserOdds*1+n.UserPlusOdds*1,itemTimes:1},s.push(w)):s.length<i&&v++}else if(n.RuleName=="二同号复选")for(b=0;b<v;b++){if(s.length==i)break;if(b>BetPauseHelper.MaxPauseNum*11)break;h=BetPauseHelper._getRandomNumBall(d,[1]),r.length==0||r.length>=6||!r.contain(h)?(r.contain(h)||(r[r.length]=h),p=ComputeBetTotalNumber.ComputeNumber(n,h),w={ruleId:n.RuleId,ruleName:n.DisplayName,selNums:h,subSelNums:h.maxShow(12),price:gl.price,betNum:p,jsOdds:n.UserOdds*1+n.UserPlusOdds*1,itemTimes:1},s.push(w)):s.length<i&&v++}else if(n.RuleName.indexOf("三不同号")>=0)for(f=["1","2","3","4","5","6"],y=0;y<v;y++){if(s.length==i)break;if(y>BetPauseHelper.MaxPauseNum*11)break;if(u=Math.floor(Math.random()*31),u==0)e="三不同号通选",l=parseInt(n.RuleId/100)+"01";else{for(c=[],u=Math.floor(Math.random()*f.length),o=f[u],c[c.length]=o,u=Math.floor(Math.random()*f.length),o=f[u];c.contain(o);)u=Math.floor(Math.random()*f.length),o=f[u];for(c[c.length]=o,u=Math.floor(Math.random()*f.length),o=f[u];c.contain(o);)u=Math.floor(Math.random()*f.length),o=f[u];c[c.length]=o,c.sort(),e=c[0]+" "+c[1]+" "+c[2],l=parseInt(n.RuleId/100)+"02"}l?(a=l+"_"+e,n=GetDataDetailById(l,gl.rules,"RuleId")):a=e,r.length==0||r.length>=20||!r.contain(a)?(r.contain(a)||(r[r.length]=a),p=ComputeBetTotalNumber.ComputeNumber(n,e),w={ruleId:n.RuleId,ruleName:n.DisplayName,selNums:e,subSelNums:e.maxShow(12),price:gl.price,betNum:p,jsOdds:n.UserOdds*1+n.UserPlusOdds*1,itemTimes:1},s.push(w)):s.length<i&&v++}else if(n.RuleName=="二同号通选")for(k=["11","22","33","44","55","66"],f=["1","2","3","4","5","6"],y=0;y<v;y++){if(s.length==i)break;if(y>BetPauseHelper.MaxPauseNum*11)break;if(u=Math.floor(Math.random()*21),u==0)e="二同号通选",l=parseInt(n.RuleId/100)+"01";else{for(u=Math.floor(Math.random()*k.length),g=k[u],u=Math.floor(Math.random()*f.length),o=f[u];g.indexOf(o)>=0;)u=Math.floor(Math.random()*f.length),o=f[u];e=g+","+o,l=parseInt(n.RuleId/100)+"02"}l?(a=l+"_"+e,n=GetDataDetailById(l,gl.rules,"RuleId")):a=e,r.length==0||r.length>=31||!r.contain(a)?(r.contain(a)||(r[r.length]=a),p=ComputeBetTotalNumber.ComputeNumber(n,e),w={ruleId:n.RuleId,ruleName:n.DisplayName,selNums:e,subSelNums:e.maxShow(12),price:gl.price,betNum:p,jsOdds:n.UserOdds*1+n.UserPlusOdds*1,itemTimes:1},s.push(w)):s.length<i&&v++}else s=BetPauseHelper._getRandomNumBallOfQuWei(d,n,v,!0);nt=_selectNumsTmpl({data:s}),tt.append(nt),$("input.betting-multiple").tpuiNumber({type:"depart"})},BetPauseHelper._doPause_PL3=function(n,t,i){var o=$(".betting-checker-panel"),a=$("#selectNumsContainerId"),u=[],c,l,r,s=i,e=[],f,h;if(t&&n.RuleName!="自由双面")u=BetPauseHelper._getRandomNumBallOfQuWei(o,n,s);else for(f=0;f<s;f++){if(u.length==i)break;if(f>BetPauseHelper.MaxPauseNum*11)break;r=n.RuleName=="单式"?BetPauseHelper._getSingleRandomNumBall([0,1,2,3,4,5,6,7,8,9],3):n.RuleName=="组三"?BetPauseHelper._getRandomNumBall(o,[2]):n.RuleName=="组六"?BetPauseHelper._getRandomNumBall(o,[3]):BetPauseHelper._getRandomNumBall(o,[1]),e.length==0||!e.contain(r)||f>BetPauseHelper.MaxPauseNum*10?(e[e.length]=r,c=ComputeBetTotalNumber.ComputeNumber(n,r),r=r.replaceAll(" ",""),l={ruleId:n.RuleId,ruleName:n.DisplayName,selNums:r,subSelNums:r.maxShow(12),price:gl.price,betNum:c,jsOdds:n.UserOdds*1+n.UserPlusOdds*1,itemTimes:1},u.push(l)):u.length<i&&s++}h=_selectNumsTmpl({data:u}),a.append(h),$("input.betting-multiple").tpuiNumber({type:"depart"})},BetPauseHelper._doPause_KLPK=function(n,t,i){var v=$(".betting-checker-panel"),k=$("#selectNumsContainerId"),c=[],p,w,u,a=i,h=[],s,l,f,e,o,r,y;if(n.RuleName=="任选一"||n.RuleName=="任选二"||n.RuleName=="任选三"||n.RuleName=="任选四"||n.RuleName=="任选五"||n.RuleName=="任选六")for(s=0,n.RuleName=="任选一"?s=1:n.RuleName=="任选二"?s=2:n.RuleName=="任选三"?s=3:n.RuleName=="任选四"?s=4:n.RuleName=="任选五"?s=5:n.RuleName=="任选六"&&(s=6),l=0;l<a;l++){if(c.length==i)break;if(l>BetPauseHelper.MaxPauseNum*11)break;if(u=BetPauseHelper._getRandomNumBall(v,[s]),h.length==0||h.length>=6||!h.contain(u)){if(u.indexOf("A")>=0||u.indexOf("J")>=0||u.indexOf("Q")>=0||u.indexOf("K")>=0){function b(n,t){return n>t?1:n<t?-1:void 0}for(f=u.split(" "),r=0;r<f.length;r++)f[r]=="A"?f[r]="1":f[r]=="J"?f[r]="11":f[r]=="Q"?f[r]="12":f[r]=="K"&&(f[r]="13");for(e=[],r=0;r<f.length;r++)e[r]=parseInt(f[r]);for(e.sort(b),u="",o="",r=0;r<e.length;r++)o=e[r]=="1"?"A":e[r]=="11"?"J":e[r]=="12"?"Q":e[r]=="13"?"K":e[r].toString(),u?u+=" "+o:u=o}h.contain(u)||(h[h.length]=u),p=ComputeBetTotalNumber.ComputeNumber(n,u),w={ruleId:n.RuleId,ruleName:n.DisplayName,selNums:u,subSelNums:u.maxShow(12),price:gl.price,betNum:p,jsOdds:n.UserOdds*1+n.UserPlusOdds*1,itemTimes:1},c.push(w)}else c.length<i&&a++}else c=BetPauseHelper._getRandomNumBallOfQuWei(v,n,a,!0);y=_selectNumsTmpl({data:c}),k.append(y),$("input.betting-multiple").tpuiNumber({type:"depart"})},BetPauseHelper._doPause_PK10=function(n,t,i){var h=$(".betting-checker-panel"),y=$("#selectNumsContainerId"),e=[],a,v,r,s=i,o=[],f,l,u,c;if(t&&n.MatchType!="自由双面"&&n.MatchType!="趣味猜前四名"&&n.MatchType!="趣味猜前五名")e=BetPauseHelper._getRandomNumBallOfQuWei(h,n,s);else for(f=0;f<s;f++){if(e.length==i)break;if(f>BetPauseHelper.MaxPauseNum*11)break;n.MatchType=="猜冠亚军单式"||n.MatchType=="猜前三名单式"||n.MatchType=="猜前四名单式"||n.MatchType=="猜前五名单式"?(l=["01","02","03","04","05","06","07","08","09","10"],u=1,n.MatchType=="猜冠亚军单式"?u=2:n.MatchType=="猜前三名单式"?u=3:n.MatchType=="猜前四名单式"?u=4:n.MatchType=="猜前五名单式"&&(u=5),r=BetPauseHelper._getSingleRandomNumBall(l,u,!1,!0)):r=n.MatchType=="猜冠亚军"||n.MatchType=="猜前三名"||n.MatchType=="猜前四名"||n.MatchType=="猜前五名"||n.MatchType=="猜前六名"||n.MatchType=="猜前七名"||n.MatchType=="猜前八名"||n.MatchType=="猜前九名"||n.MatchType=="猜前十名"||n.MatchType=="趣味猜前四名"||n.MatchType=="趣味猜前五名"||n.MatchType=="定位胆"?BetPauseHelper._getRandomNumBall(h,[1],!0):BetPauseHelper._getRandomNumBall(h,[1]),o.length==0||!o.contain(r)||f>BetPauseHelper.MaxPauseNum*10?(o[o.length]=r,a=ComputeBetTotalNumber.ComputeNumber(n,r),v={ruleId:n.RuleId,ruleName:n.DisplayName,selNums:r,subSelNums:r.maxShow(12),price:gl.price,betNum:a,jsOdds:n.UserOdds*1+n.UserPlusOdds*1,itemTimes:1},e.push(v)):e.length<i&&s++}c=_selectNumsTmpl({data:e}),y.append(c),$("input.betting-multiple").tpuiNumber({type:"depart"})},BetPauseHelper._doPause_Sd11X5=function(n,t,i){var a=$(".betting-checker-panel"),w=$("#selectNumsContainerId"),o=[],h,c,u,s=i,e=[],r=1,f,v;if(t&&n.MatchType!="自由双面")o=BetPauseHelper._getRandomNumBallOfQuWei(a,n,s);else if(n.MatchType=="任二单式"||n.MatchType=="任三单式"||n.MatchType=="任四单式"||n.MatchType=="任五单式"||n.MatchType=="任六单式"||n.MatchType=="任七单式"||n.MatchType=="任八单式"||n.MatchType=="前一单式"||n.MatchType=="前二直选单式"||n.MatchType=="前二直选复式"||n.MatchType=="前二组选单式"||n.MatchType=="前三直选单式"||n.MatchType=="前三直选复式"||n.MatchType=="前三组选单式"){var l=!0,y=!1,p=["01","02","03","04","05","06","07","08","09","10","11"];for(n.MatchType=="前三直选单式"?(r=3,l=!1):n.MatchType=="前三直选复式"||n.MatchType=="前二直选复式"?y=!0:n.MatchType=="前三组选单式"?r=3:n.MatchType=="前二直选单式"?(r=2,l=!1):n.MatchType=="前二组选单式"?r=2:n.MatchType=="任二单式"?r=2:n.MatchType=="任三单式"?r=3:n.MatchType=="任四单式"?r=4:n.MatchType=="任五单式"?r=5:n.MatchType=="任六单式"?r=6:n.MatchType=="任七单式"?r=7:n.MatchType=="任八单式"&&(r=8),f=0;f<s;f++){if(o.length==i)break;if(f>BetPauseHelper.MaxPauseNum*11)break;u=y?BetPauseHelper._getRandomNumBall(a,[1],!0):BetPauseHelper._getSingleRandomNumBall(p,r,l),e.length==0||!e.contain(u)||f>BetPauseHelper.MaxPauseNum*10?(e[e.length]=u,h=ComputeBetTotalNumber.ComputeNumber(n,u),c={ruleId:n.RuleId,ruleName:n.DisplayName,selNums:u,subSelNums:u.maxShow(12),price:gl.price,betNum:h,jsOdds:n.UserOdds*1+n.UserPlusOdds*1,itemTimes:1},o.push(c)):o.length<i&&s++}}else for(n.MatchType=="任二复式"||n.MatchType=="前二组选复式"?r=2:n.MatchType=="任三复式"||n.MatchType=="前三组选复式"?r=3:n.MatchType=="任四复式"?r=4:n.MatchType=="任五复式"?r=5:n.MatchType=="任六复式"?r=6:n.MatchType=="任七复式"?r=7:n.MatchType=="任八复式"&&(r=8),f=0;f<s;f++){if(o.length==i)break;if(f>BetPauseHelper.MaxPauseNum*11)break;u=BetPauseHelper._getRandomNumBall(a,[r]),e.length==0||!e.contain(u)||f>BetPauseHelper.MaxPauseNum*10?(e[e.length]=u,h=ComputeBetTotalNumber.ComputeNumber(n,u),c={ruleId:n.RuleId,ruleName:n.DisplayName,selNums:u,subSelNums:u.maxShow(12),price:gl.price,betNum:h,jsOdds:n.UserOdds*1+n.UserPlusOdds*1,itemTimes:1},o.push(c)):o.length<i&&s++}v=_selectNumsTmpl({data:o}),w.append(v),$("input.betting-multiple").tpuiNumber({type:"depart"})},BetPauseHelper._getRandomNumBallOfQuWei=function(n,t,i,r){for(var c=[],a,l,f,o=[],v=n.find(".bc-sub:visible").find(".numBallClass:visible").length,e="",u="",s="",h=0;h<i;h++)u="",f=BetPauseHelper._getRandomNumBall(n,[1],!1,!0,r),t&&t.MatchType=="猜名次"?(u+=f[0][0],e=f[1][0][1]):Object.prototype.toString.call(f[0][0])=="[object Array]"?(u=f[0][0][0],e=f[0][0][1]):u=f[0][0],s=e?e+"_"+u:u,o.length==0||o.length>=v||!o.contain(s)?(o.contain(s)||(o[o.length]=s),e&&(t=GetDataDetailById(e,gl.rules,"RuleId")),a=ComputeBetTotalNumber.ComputeNumber(t,u),l={ruleId:t.RuleId,ruleName:t.DisplayName,selNums:u,subSelNums:u.maxShow(12),price:gl.price,betNum:a,jsOdds:t.UserOdds*1+t.UserPlusOdds*1,itemTimes:1},c.push(l)):i++;return c},BetPauseHelper._getRandomNumBall=function(n,t,i,r,u){var h=[],o="",f,l=0,s="",a=[],e=[],v=function(n){if(n&&n.length!=0)if(i?(f=BetPauseHelper._getRandomWeiNum(n,t[l++],h),h[h.length]=f):f=BetPauseHelper._getRandomWeiNum(n,t[l++]),r)a[l-1]=f;else{o="";for(var u=0;u<f.length;u++)o?o+=" "+f[u]:o=f[u];s&&(s+=","),s+=o}},c;if(u)for(n.find(".bc-sub:visible").each(function(){for(var t=BetPauseHelper._getBCSubNumBallList($(this),r),n=0;n<t.length;n++)e[e.length]=t[n]}),c=0;c<t.length;c++)v(e);else n.find(".bc-sub:visible").each(function(){e=BetPauseHelper._getBCSubNumBallList($(this),r),v(e)});return r?a:s},BetPauseHelper._getBCSubNumBallList=function(n,t){var r=[],u=0,i,e=".numBallClass:visible",f=function(){n.find(e).each(function(){try{i=$($(this).find("span")[0]).text(),i||(i=$($(this)[0].firstChild.firstChild).text(),i||(i=$($(this)[0].firstChild.firstElementChild).text()))}catch(n){i=""}i&&(i=i.replace(/[\r\n]/g,""),u=r.length,r[u]=t&&$(this).attr("ruleid")?[i,$(this).attr("ruleid")]:i)})};return f(),r.length==0&&(e=".numBallClassNotSelNum:visible",f()),r},BetPauseHelper._getSingleRandomNumBall=function(n,t,i,r){for(var e=BetPauseHelper._getRandomWeiNum(n,t,!1,r),u="",f=0;f<e.length;f++)u?(u+=i?" ":",",u+=e[f]):u=e[f];return u},BetPauseHelper._getRandomWeiNum=function(n,t,i,r){var s=n.length,u,e,f,o;for((!t||t<1)&&(t=1),e=0,f=[],o=0;o<t;o++)u=Math.floor(Math.random()*s),n[u]&&!f.contains(n[u])&&(!i||i.length>=n.length||!i.contains(n[u]))?(f[e]=n[u],e=e+1):t=t+1;return r||f.sort(),f},Array.prototype.contains=function(n){return RegExp(n).test(this)},BetNumberAndProfitLossHelper=[],BetNumberAndProfitLossHelper.Compute=function(){var t=$(".betRuleClass.active").attr("betrule");t||(t=$(".betRuleClass.active").attr("betsubtype")+"01");var r=parseInt(t/1e6),u=$(".betRuleClass.active"),i=u.attr("isfun")=="1",n;gl.isShiShiCai?n=BetNumberAndProfitLossHelper._compute_SSC(t,i):gl.isK3?n=BetNumberAndProfitLossHelper._compute_K3(t,i):r==7?n=BetNumberAndProfitLossHelper._compute_KLPK(t,i):r==8?n=BetNumberAndProfitLossHelper._compute_PK10(t,i):gl.is11Xuan5&&(n=BetNumberAndProfitLossHelper._compute_SD11X5(t,i)),n&&($("#emBetNumber").html(n[0]),$("#emBetAmount").html(n[1]),$("#emBetBonus").html(n[2]),$("#emBetProfit").html(n[3])),r==11&&$("#totalTimesInput").trigger("changekc")},BetNumberAndProfitLossHelper.Clear=function(){$("#emBetNumber").html("0"),$("#emBetAmount").html("0"),$("#emBetBonus").html("0"),$("#emBetProfit").html("0")},BetNumberAndProfitLossHelper._compute_SSC=function(n,t){var lt=$(".bc-config"),o=0,rt="0",y="0",p="0",l=GetBetPriceValue(),i=GetDataDetailById(n,gl.rules,"RuleId"),e,r,c,v,w,nt,it,tt,ct,ft,h,s,f,u,ut,a;if(t)ft=$(".betting-checker-panel").find(".numBallClass.active"),o=ft.length,n=$(".betRuleClass.active").attr("betsubtype")+"01",i=GetDataDetailById(n,gl.rules,"RuleId"),h=0,s=0,i.MatchType=="自由双面"?(f=0,u=0,$(".betting-checker-panel").find(".bc-sub:visible").each(function(){var i=!1,r=!1,n=!1,t=!1;$(this).find(".numBallClass.active").each(function(){var u=$(this).find("span").text();u=="大"?i=!0:u=="小"?r=!0:u=="单"?n=!0:u=="双"&&(t=!0)}),(i||r||n||t)&&(i&&r&&u++,n&&t&&u++,(i||r)&&f++,(n||t)&&f++)}),u==0&&(u=1),a=i.UserOdds*1+i.UserPlusOdds*1,h=f*a,s=u*a):i.RuleName=="猜必出号码"||i.RuleName=="猜不出号码"?(f=0,u=0,i.RuleName=="猜必出号码"?f=o>i.Length?i.Length:o:(ut=$(".betting-checker-panel").find(".bc-sub:visible").find(".numBallClass").length,f=o>ut-i.Length?ut-i.Length:o),u=1,a=i.UserOdds*1+i.UserPlusOdds*1,h=f*a,s=u*a):ft.each(function(){if(n=$(this).attr("ruleid"),n||(n=$(".betRuleClass.active").attr("betsubtype")+"01"),i=GetDataDetailById(n,gl.rules,"RuleId"),i){var t=i.UserOdds*1+i.UserPlusOdds*1;h<t&&(h=t),(s==0||s>t)&&(s=t)}}),e=o*gl.price*l,rt=e.toFixedNum(3),h==s||s<=0?(r=h*gl.price*l,c=r-e,y=r.toFixedNum(3),p=c.toFixedNum(3)):(r=s*gl.price*l,c=r-e,v=h*gl.price*l,w=v-e,y=r.toFixedNum(3)+" ~ "+v.toFixedNum(3),p=c.toFixedNum(3)+" ~ "+w.toFixedNum(3));else if(nt=BetNumberAndProfitLossHelper._getAllSelNums(i),it="",nt&&(ComputeBetTotalNumber._computeNumber_SSC_isRenXuan(parseInt(n/1e4))&&(lt.find(".tp-ui-active").each(function(){it+=$(this).parent().find("h4").text().substr(0,1)}),nt="("+it+")"+nt),o=ComputeBetTotalNumber.ComputeNumber(i,nt)),o>0)if(tt=0,e=o*gl.price*l,r=(i.UserOdds*1+i.UserPlusOdds*1)*gl.price*l,ComputeBetTotalNumber._computeNumber_SSC_isRenXuan(parseInt(n/1e4))&&(ct=ComputeBetTotalNumber.ComputeNumber_SSC_RenXuanWeiBeiShu(i,it),r=r*ct),c=r-e,i.MatchType=="大小单双"){var f=0,u=0,st=!1,ht=!1,ot=!1,et=!1,b=!1,g=!1,d=!1,k=!1;$($(".betting-checker-panel").find(".bc-sub:visible")[0]).each(function(){$(this).find(".numBallClass.active").each(function(){var n=$(this).find("span").text();n=="大"?st=!0:n=="小"?ht=!0:n=="单"?ot=!0:n=="双"&&(et=!0)})}),$($(".betting-checker-panel").find(".bc-sub:visible")[1]).each(function(){$(this).find(".numBallClass.active").each(function(){var n=$(this).find("span").text();n=="大"?b=!0:n=="小"?g=!0:n=="单"?d=!0:n=="双"&&(k=!0)})}),st&&ht&&(b&&g&&u++,d&&k&&u++),ot&&et&&(b&&g&&u++,d&&k&&u++),(st||ht)&&((b||g)&&f++,(d||k)&&f++),(ot||et)&&((b||g)&&f++,(d||k)&&f++),u==0&&(u=1),a=i.UserOdds*1+i.UserPlusOdds*1,h=f*a,s=u*a,e=o*gl.price*l,rt=e.toFixedNum(3),h==s||s<=0?(r=h*gl.price*l,c=r-e,y=r.toFixedNum(3),p=c.toFixedNum(3)):(r=s*gl.price*l,c=r-e,v=h*gl.price*l,w=v-e,y=r.toFixedNum(3)+" ~ "+v.toFixedNum(3),p=c.toFixedNum(3)+" ~ "+w.toFixedNum(3))}else i.MatchType=="定位胆"?tt=BetNumberAndProfitLossHelper._getAllSelWeiNums():(i.MatchType=="不定位胆"||i.MatchType=="不定胆")&&(tt=o>3?3:o),tt>1?(v=r*tt,w=v-e,y=r.toFixedNum(3)+" ~ "+v.toFixedNum(3),p=c.toFixedNum(3)+" ~ "+w.toFixedNum(3)):(y=r.toFixedNum(3),p=c.toFixedNum(3)),rt=e.toFixedNum(3);return[o,rt,y,p]},BetNumberAndProfitLossHelper._compute_K3=function(n,t){var e=0,it="0",b="0",d="0",p=GetBetPriceValue(),i=GetDataDetailById(n,gl.rules,"RuleId"),h,u,l,a,k,r,st,lt,s,f,v,y,at,nt,o,g,w,tt,c;if(t&&i.MatchType!="二不同号")lt=$(".betting-checker-panel").find(".numBallClass.active"),e=lt.length,n=$(".betRuleClass.active").attr("betsubtype")+"01",i=GetDataDetailById(n,gl.rules,"RuleId"),s=0,f=0,i.RuleName=="猜必出号码"||i.RuleName=="猜不出号码"?(v=0,y=0,i.RuleName=="猜必出号码"?v=e>i.Length?i.Length:e:(at=$(".betting-checker-panel").find(".bc-sub:visible").find(".numBallClass").length,v=e>at-i.Length?at-i.Length:e),y=1,c=i.UserOdds*1+i.UserPlusOdds*1,s=v*c,f=y*c):i.RuleName=="二同号通选"?(e=0,nt=$($(".betting-checker-panel").find(".bc-sub:visible")[0]).find(".numBallClass.active"),nt.length>0&&(n=$(nt[0]).attr("ruleid"),i=GetDataDetailById(n,gl.rules,"RuleId"),s+=i.UserOdds*1+i.UserPlusOdds*1,f=s,e=1),r="",o="",g=!1,$($(".betting-checker-panel").find(".bc-sub:visible")[1]).each(function(){if(w=$(this).find(".numBallClass.active"),w.length<=0)return g=!0,!1;o="",w.each(function(){o+=" "+$(this).find("span:eq(0)").text()}),o=o.substr(1),r+=","+o}),$($(".betting-checker-panel").find(".bc-sub:visible")[2]).each(function(){if(w=$(this).find(".numBallClass.active"),w.length<=0)return g=!0,!1;o="",w.each(function(){o+=" "+$(this).find("span:eq(0)").text()}),o=o.substr(1),r+=","+o}),r=r.substr(1),(g||!checkDistinct(r,$(".betTypeClass")))&&(r=""),r&&(n=$($($(".betting-checker-panel").find(".bc-sub:visible")[1]).find(".numBallClass.active")[0]).attr("ruleid"),i=GetDataDetailById(n,gl.rules,"RuleId"),i&&(tt=ComputeBetTotalNumber.ComputeNumber(i,r),tt>0&&(e+=tt,c=i.UserOdds*1+i.UserPlusOdds*1,c<f&&(f=c),s+=c)))):i.RuleName=="三不同号通选"||i.RuleName=="三连号通选"||i.RuleName=="三同号通选"?(e=0,nt=$($(".betting-checker-panel").find(".bc-sub:visible").find(".button")[0]).find(".numBallClass.active"),nt.length>0&&(n=$(nt[0]).attr("ruleid"),i=GetDataDetailById(n,gl.rules,"RuleId"),s+=i.UserOdds*1+i.UserPlusOdds*1,f=s,e=1),r="",o="",g=!1,$($(".betting-checker-panel").find(".bc-sub:visible").find(".button")[1]).each(function(){if(w=$(this).find(".numBallClass.active"),w.length<=0)return g=!0,!1;o="",w.each(function(){o+=" "+$(this).find("span:eq(0)").text()}),o=o.substr(1),r+=","+o}),r=r.substr(1),(g||!checkDistinct(r,$(".betTypeClass")))&&(r=""),r&&(n=$($($(".betting-checker-panel").find(".bc-sub:visible").find(".button")[1]).find(".numBallClass.active")[0]).attr("ruleid"),i=GetDataDetailById(n,gl.rules,"RuleId"),i&&(tt=ComputeBetTotalNumber.ComputeNumber(i,r),tt>0&&(e+=tt,c=i.UserOdds*1+i.UserPlusOdds*1,c<f&&(f=c),s+=c)))):lt.each(function(){if(n=$(this).attr("ruleid"),n||(n=$(".betRuleClass.active").attr("betsubtype")+"01"),i=GetDataDetailById(n,gl.rules,"RuleId"),i){var t=i.UserOdds*1+i.UserPlusOdds*1;s<t&&(s=t),(f==0||f>t)&&(f=t)}}),h=e*gl.price*p,it=h.toFixedNum(3),s==f||f<=0?(u=s*gl.price*p,l=u-h,b=u.toFixedNum(3),d=l.toFixedNum(3)):(u=f*gl.price*p,l=u-h,a=s*gl.price*p,k=a-h,b=u.toFixedNum(3)+" ~ "+a.toFixedNum(3),d=l.toFixedNum(3)+" ~ "+k.toFixedNum(3));else if(r=BetNumberAndProfitLossHelper._getAllSelNums(i),r&&(e=ComputeBetTotalNumber.ComputeNumber(i,r)),e>0)if(st=0,h=e*gl.price*p,u=(i.UserOdds*1+i.UserPlusOdds*1)*gl.price*p,l=u-h,i.MatchType=="大小单双"){var v=0,y=0,ot=!1,ht=!1,vt=!1,ct=!1,ut=!1,rt=!1,ft=!1,et=!1;$($(".betting-checker-panel").find(".bc-sub:visible")[0]).each(function(){$(this).find(".numBallClass.active").each(function(){var n=$(this).find("span").text();n=="大"?ot=!0:n=="小"?ht=!0:n=="单"?vt=!0:n=="双"&&(ct=!0)})}),$($(".betting-checker-panel").find(".bc-sub:visible")[1]).each(function(){$(this).find(".numBallClass.active").each(function(){var n=$(this).find("span").text();n=="大"?ut=!0:n=="小"?rt=!0:n=="单"?ft=!0:n=="双"&&(et=!0)})}),ot&&ht&&(ut&&rt&&y++,ft&&et&&y++),vt&&ct&&(ut&&rt&&y++,ft&&et&&y++),(ot||ht)&&((ut||rt)&&v++,(ft||et)&&v++),(vt||ct)&&((ut||rt)&&v++,(ft||et)&&v++),y==0&&(y=1),c=i.UserOdds*1+i.UserPlusOdds*1,s=v*c,f=y*c,h=e*gl.price*p,it=h.toFixedNum(3),s==f||f<=0?(u=s*gl.price*p,l=u-h,b=u.toFixedNum(3),d=l.toFixedNum(3)):(u=f*gl.price*p,l=u-h,a=s*gl.price*p,k=a-h,b=u.toFixedNum(3)+" ~ "+a.toFixedNum(3),d=l.toFixedNum(3)+" ~ "+k.toFixedNum(3))}else i.MatchType=="二不同号"&&e>=3?(a=u*3,k=a-h,b=u.toFixedNum(3)+" ~ "+a.toFixedNum(3),d=l.toFixedNum(3)+" ~ "+k.toFixedNum(3),it=h.toFixedNum(3)):(st>1?(a=u*st,k=a-h,b=u.toFixedNum(3)+" ~ "+a.toFixedNum(3),d=l.toFixedNum(3)+" ~ "+k.toFixedNum(3)):(b=u.toFixedNum(3),d=l.toFixedNum(3)),it=h.toFixedNum(3));return[e,it,b,d]},BetNumberAndProfitLossHelper._compute_KLPK=function(n,t){var r=0,g="0",v="0",a="0",l=GetBetPriceValue(),i=GetDataDetailById(n,gl.rules,"RuleId"),o,e,h,c,w,p,y,d,u,f,s,k,b,nt;if(t){if(d=$(".betting-checker-panel").find(".numBallClass.active"),r=d.length,n=$(".betRuleClass.active").attr("betsubtype")+"01",i=GetDataDetailById(n,gl.rules,"RuleId"),u=0,f=0,d.each(function(){if(n=$(this).attr("ruleid"),n||(n=$(".betRuleClass.active").attr("betsubtype")+"01"),i=GetDataDetailById(n,gl.rules,"RuleId"),i){var t=i.UserOdds*1+i.UserPlusOdds*1;u<t&&(u=t),(f==0||f>t)&&(f=t)}}),s=!1,i.RuleName=="任选一"||i.RuleName=="任选二")r>=3&&(u=u*3),s=!0;else if(i.RuleName=="任选三")r>=3?(u=u*ComputeBetTotalNumber._getCountDownSum(r-2),s=!0):(r=0,u=0,f=0);else if(i.RuleName=="任选四")r>=4?(u=u*ComputeBetTotalNumber._computeCombinationsVariations(r-1,6),f=f*(r-3),s=!0):(r=0,u=0,f=0);else if(i.RuleName=="任选五")r>=5?(u=u*ComputeBetTotalNumber._getCountRecursiveDownSum(r-1,3),f=f*ComputeBetTotalNumber._getCountDownSum(r-4),s=!0):(r=0,u=0,f=0);else if(i.RuleName=="任选六")if(r>=6){for(k=0,b=4;b<=r-1;b++)k+=ComputeBetTotalNumber._getCountRecursiveDownSum(b,4);u=u*k,f=f*ComputeBetTotalNumber._computeCombinationsVariations(r-3,6),s=!0}else r=0,u=0,f=0;else r>0&&f!=u&&(i.RuleName=="同花包选"||i.RuleName=="顺子包选"||i.RuleName=="同花顺包选"||i.RuleName=="豹子包选"||i.RuleName=="对子包选"||i.RuleName=="三不同花包选"||i.RuleName=="花式对子包选")&&(u=f+u);s&&(p=BetNumberAndProfitLossHelper._getAllSelNums(i),nt=ComputeBetTotalNumber.ComputeNumber(i,p),r=nt),o=r*gl.price*l,g=o.toFixedNum(3),u==f||f<=0?(e=u*gl.price*l,h=e-o,v=e.toFixedNum(3),a=h.toFixedNum(3)):(e=f*gl.price*l,h=e-o,c=u*gl.price*l,w=c-o,v=e.toFixedNum(3)+" ~ "+c.toFixedNum(3),a=h.toFixedNum(3)+" ~ "+w.toFixedNum(3))}else p=BetNumberAndProfitLossHelper._getAllSelNums(i),p&&(r=ComputeBetTotalNumber.ComputeNumber(i,p)),r>0&&(y=0,o=r*gl.price*l,e=(i.UserOdds*1+i.UserPlusOdds*1)*gl.price*l,h=e-o,i.MatchType=="定位胆"?y=BetNumberAndProfitLossHelper._getAllSelWeiNums():(i.MatchType=="不定位胆"||i.MatchType=="不定胆")&&(y=r>3?3:r),y>1?(c=e*y,w=c-o,v=e.toFixedNum(3)+" ~ "+c.toFixedNum(3),a=h.toFixedNum(3)+" ~ "+w.toFixedNum(3)):(v=e.toFixedNum(3),a=h.toFixedNum(3)),g=o.toFixedNum(3));return[r,g,v,a]},BetNumberAndProfitLossHelper._compute_PK10=function(n,t){var d=0,ct="0",et="0",ut="0",tt=GetBetPriceValue(),i=GetDataDetailById(n,gl.rules,"RuleId"),l,o,w,it,ht,fi,y,vt,yt,gt,ei,ft,a,at,bt,ui,b,ii,k,kt,h,ti,g,p,s,u,r,ni,dt,v,e,wt,ot,rt,oi,si;if(t&&i.MatchType!="趣味猜前四名"&&i.MatchType!="趣味猜前五名")dt=$(".betting-checker-panel").find(".numBallClass.active"),d=dt.length,n=$(".betRuleClass.active").attr("betsubtype")+"01",i=GetDataDetailById(n,gl.rules,"RuleId"),v=0,e=0,i.MatchType=="自由双面"?(wt=0,ot=0,$(".betting-checker-panel").find(".bc-sub:visible").each(function(){var i=!1,r=!1,n=!1,t=!1;$(this).find(".numBallClass.active").each(function(){var u=$(this).find("span").text();u=="大"?i=!0:u=="小"?r=!0:u=="单"?n=!0:u=="双"&&(t=!0)}),(i||r||n||t)&&(i&&r&&ot++,n&&t&&ot++,(i||r)&&wt++,(n||t)&&wt++)}),ot==0&&(ot=1),rt=i.UserOdds*1+i.UserPlusOdds*1,v=wt*rt,e=ot*rt):i.MatchType=="猜名次"?(oi=$($($(".betting-checker-panel").find(".bc-sub:visible")[0]).find(".numBallClass.active")).length,si=$($($(".betting-checker-panel").find(".bc-sub:visible")[1]).find(".numBallClass.active")).length,d=si*oi,d>0?$($($(".betting-checker-panel").find(".bc-sub:visible")[1]).find(".numBallClass.active")).each(function(){if(n=$(this).attr("ruleid"),i=GetDataDetailById(n,gl.rules,"RuleId"),i){var t=i.UserOdds*1+i.UserPlusOdds*1;v<t&&(v=t),(e==0||e>t)&&(e=t)}}):v=e=0):dt.each(function(){if(n=$(this).attr("ruleid"),n||(n=$(".betRuleClass.active").attr("betsubtype")+"01"),i=GetDataDetailById(n,gl.rules,"RuleId"),i){var t=i.UserOdds*1+i.UserPlusOdds*1;v<t&&(v=t),(e==0||e>t)&&(e=t)}}),l=d*gl.price*tt,ct=l.toFixedNum(3),v==e||e<=0?(o=v*gl.price*tt,w=o-l,et=o.toFixedNum(3),ut=w.toFixedNum(3)):(o=e*gl.price*tt,w=o-l,it=v*gl.price*tt,ht=it-l,et=o.toFixedNum(3)+" ~ "+it.toFixedNum(3),ut=w.toFixedNum(3)+" ~ "+ht.toFixedNum(3));else if(fi=BetNumberAndProfitLossHelper._getAllSelNums(i),fi&&(d=ComputeBetTotalNumber.ComputeNumber(i,fi)),d>0)if(y=0,l=d*gl.price*tt,o=(i.UserOdds*1+i.UserPlusOdds*1)*gl.price*tt,w=o-l,i.MatchType=="猜冠亚军"||i.MatchType=="猜前三名"||i.MatchType=="猜前四名"||i.MatchType=="猜前五名"||i.MatchType=="猜前六名"||i.MatchType=="猜前七名"||i.MatchType=="猜前八名"||i.MatchType=="猜前九名"||i.MatchType=="趣味猜前四名"||i.MatchType=="趣味猜前五名"){var rt=0,e=0,v=0,ci=parseInt(n/100),lt=BetNumberAndProfitLossHelper._getDataDetailListById(ci,gl.rules,"SubTypeId");if(lt&&lt.length>0&&(rt=lt[0].UserOdds*1+lt[0].UserPlusOdds*1,v=rt,e=rt,vt=BetNumberAndProfitLossHelper._getDataDetailListById(lt[0].RuleId,gl.PK10RuleDetail,"RuleId"),vt&&vt.length>0))for(yt=0;yt<vt.length;yt++)gt=rt/vt[yt].Modulus,gt<e&&(e=gt);e!=v?(o=e*gl.price*tt,w=o-l,it=v*gl.price*tt,ht=it-l,ct=l.toFixedNum(3),et=o.toFixedNum(3)+" ~ "+it.toFixedNum(3),ut=w.toFixedNum(3)+" ~ "+ht.toFixedNum(3)):(o=e*gl.price*tt,w=o-l,ct=l.toFixedNum(3),et=o.toFixedNum(3),ut=w.toFixedNum(3))}else{if(i.MatchType=="定位胆"){if(y=0,ei=BetNumberAndProfitLossHelper._getAllSelNums(i),ei){for(ft=ei.split(","),a=[],b=0;b<5;b++)ft[b]&&(a[a.length]=b);if(a.length>0){var f=0,c=!1,pt=ft[a[0]];if(a.length>1)if(at=ft[a[1]],a.length>2)if(bt=ft[a[2]],a.length>3)if(ui=ft[a[3]],a.length>4){var hi=ft[a[4]],g=pt.split(" "),p=at.split(" "),nt=bt.split(" "),st=ui.split(" "),ri=hi.split(" ");for(s=0;s<g.length;s++){for(u=0;u<p.length;u++){for(h=0;h<nt.length;h++){for(k=0;k<st.length;k++){for(b=0;b<ri.length;b++)if(r=g[s],r.indexOf(p[u])==-1&&(r+=","+p[u]),r.indexOf(nt[h])==-1&&(r+=","+nt[h]),r.indexOf(st[k])==-1&&(r+=","+st[k]),r.indexOf(ri[b])==-1&&(r+=","+ri[b]),ii=r.split(",").length,ii>f&&(f=ii),f==5){c=!0;break}if(c)break}if(c)break}if(c)break}if(c)break}y=f<=0?1:f}else{var g=pt.split(" "),p=at.split(" "),nt=bt.split(" "),st=ui.split(" ");for(s=0;s<g.length;s++){for(u=0;u<p.length;u++){for(h=0;h<nt.length;h++){for(k=0;k<st.length;k++)if(r=g[s],r.indexOf(p[u])==-1&&(r+=","+p[u]),r.indexOf(nt[h])==-1&&(r+=","+nt[h]),r.indexOf(st[k])==-1&&(r+=","+st[k]),kt=r.split(",").length,kt>f&&(f=kt),f==4){c=!0;break}if(c)break}if(c)break}if(c)break}y=f<=0?1:f}else{var g=pt.split(" "),p=at.split(" "),nt=bt.split(" ");for(s=0;s<g.length;s++){for(u=0;u<p.length;u++){for(h=0;h<nt.length;h++)if(r=g[s],r.indexOf(p[u])==-1&&(r+=","+p[u]),r.indexOf(nt[h])==-1&&(r+=","+nt[h]),ti=r.split(",").length,ti>f&&(f=ti),f==3){c=!0;break}if(c)break}if(c)break}y=f<=0?1:f}else{for(g=pt.split(" "),p=at.split(" "),s=0;s<g.length;s++){for(u=0;u<p.length;u++)if(r=g[s],r.indexOf(p[u])==-1&&(r+=","+p[u]),ni=r.split(",").length,ni>f&&(f=ni),f==3){c=!0;break}if(c)break}y=f<=0?1:f}else y=1}y=y>5?5:y}}else(i.MatchType=="不定位胆"||i.MatchType=="不定胆")&&(y=d>3?3:d);y>1?(it=o*y,ht=it-l,et=o.toFixedNum(3)+" ~ "+it.toFixedNum(3),ut=w.toFixedNum(3)+" ~ "+ht.toFixedNum(3)):(et=o.toFixedNum(3),ut=w.toFixedNum(3)),ct=l.toFixedNum(3)}return[d,ct,et,ut]},BetNumberAndProfitLossHelper._compute_SD11X5=function(n,t){var h=0,tt="0",y="0",p="0",b=GetBetPriceValue(),i=GetDataDetailById(n,gl.rules,"RuleId"),o,f,w,c,k,g,e,u,et,nt,ot,s,r,a,ft,v,l,d,rt,ut,it;if(t)ft=$(".betting-checker-panel").find(".numBallClass.active"),h=ft.length,n=$(".betRuleClass.active").attr("betsubtype")+"01",i=GetDataDetailById(n,gl.rules,"RuleId"),v=0,l=0,i.RuleName=="猜必出号码"||i.RuleName=="猜不出号码"?(d=0,rt=0,i.RuleName=="猜必出号码"?d=h>i.Length?i.Length:h:(ut=$(".betting-checker-panel").find(".bc-sub:visible").find(".numBallClass").length,d=h>ut-i.Length?ut-i.Length:h),rt=1,it=i.UserOdds*1+i.UserPlusOdds*1,v=d*it,l=rt*it):ft.each(function(){if(n=$(this).attr("ruleid"),n||(n=$(".betRuleClass.active").attr("betsubtype")+"01"),i=GetDataDetailById(n,gl.rules,"RuleId"),i){var t=i.UserOdds*1+i.UserPlusOdds*1;v<t&&(v=t),(l==0||l>t)&&(l=t)}}),o=h*gl.price*b,tt=o.toFixedNum(3),v==l||l<=0?(f=v*gl.price*b,w=f-o,y=f.toFixedNum(3),p=w.toFixedNum(3)):(f=l*gl.price*b,w=f-o,c=v*gl.price*b,k=c-o,y=f.toFixedNum(3)+" ~ "+c.toFixedNum(3),p=w.toFixedNum(3)+" ~ "+k.toFixedNum(3));else if(g=BetNumberAndProfitLossHelper._getAllSelNums(i),g&&(h=ComputeBetTotalNumber.ComputeNumber(i,g)),h>0)if(e=0,o=h*gl.price*b,f=(i.UserOdds*1+i.UserPlusOdds*1)*gl.price*b,w=f-o,i.MatchType=="任二复式"||i.MatchType=="任三复式"||i.MatchType=="任四复式"||i.MatchType=="任五复式"||i.MatchType=="任六复式"||i.MatchType=="任七复式"||i.MatchType=="任八复式"){if(u=g.split(" ").length,et=u,u>5&&(et=5),i.MatchType=="任六复式")e=u>6?r=ComputeBetTotalNumber.CalC(u-5,u-6):r=1;else if(i.MatchType=="任七复式")e=u>7?r=ComputeBetTotalNumber.CalC(u-5,u-7):r=1;else if(i.MatchType=="任八复式")e=u>8?r=ComputeBetTotalNumber.CalC(u-5,u-8):r=1;else{for(s="",a=1;a<=et;a++)s+="0"+a+" ";if(s=s.substring(0,s.length-1),e=ComputeBetTotalNumber.ComputeNumber(i,s),r=u-6,r<=2)r=1;else{for(s="",a=1;a<=r;a++)s+="0"+a+" ";s=s.substring(0,s.length-1),r=ComputeBetTotalNumber.ComputeNumber(i,s),r<1&&(r=1)}}nt=f*r,ot=nt-o,e>1&&r!=e?(c=f*e,k=c-o,y=nt.toFixedNum(3)+" ~ "+c.toFixedNum(3),p=ot.toFixedNum(3)+" ~ "+k.toFixedNum(3)):(y=nt.toFixedNum(3),p=ot.toFixedNum(3)),tt=o.toFixedNum(3)}else e>1?(c=f*e,k=c-o,y=f.toFixedNum(3)+" ~ "+c.toFixedNum(3),p=w.toFixedNum(3)+" ~ "+k.toFixedNum(3)):(y=f.toFixedNum(3),p=w.toFixedNum(3)),tt=o.toFixedNum(3);return[h,tt,y,p]},BetNumberAndProfitLossHelper._getAllSelNums=function(n){var i="",u=!1,t="",r;return($(".betting-checker-panel").find(".bc-sub:visible").each(function(){if(r=$(this).find(".numBallClass.active"),r.length<=0&&n.MatchType!="定位胆"&&n.RuleName!="自由双面")return u=!0,!1;t="",r.each(function(){t+=" "+$(this).find("span:eq(0)").text()}),t=t.substr(1),i+=","+t}),i=i.substr(1),u||!checkDistinct(i,$(".betTypeClass")))?"":i},BetNumberAndProfitLossHelper._getAllSelWeiNums=function(){var n=0;return $(".betting-checker-panel").find(".bc-sub:visible").each(function(){var t=$(this).find(".numBallClass.active");t.length>0&&n++}),n},BetNumberAndProfitLossHelper._getDataDetailListById=function(n,t,i,r){var e=t.length,f=[],u;if(i)for(u=0;u<e;u++)n==t[u][i]&&(f[f.length]=t[u]);else for(r==undefined&&(r=0),u=0;u<e;u++)n==t[u][r]&&(f[f.length]=t[u]);return f.length==0&&(f=null),f},_justOneKey=_tempGoStr.substr(5),$.lotteryTopic_Dev=function(n){function e(){f=t.children(),$.each(f,function(t,i){var u=$(i),f=u.find(".image:first img:first"),o=u.find(".lo-topic:first"),e=u.find(".lo-replace:first");o.off().on("click",function(){gl.isLogined?(y(u),n.addToTop(u)):$("#login-enter").click()});e.off().on("click",function(){s=t,r(1)});f.hide(),setTimeout(function(){var n="animated bounceIn";f.addClass(n).fadeIn(1e3,function(){f.removeClass(n)})},100*t)}),o(1)}function o(r){k=f.map(function(){return parseInt($(this).attr("data-index"))}),r!=1&&n.saveLotterySort(i,t)}function r(n){var i=$("body"),t=c.find("#lc-close");c.stop(!0,!0).toggle(n,function(){if(d.toggleClass("lock",n),v(),n){t.on("click.replaceClose",function(){r(0)});i.on("click.replaceBlank",function(n){$(n.target).closest(".ld-checker").length<=0&&r(0)})}else t.off(".replaceClose"),i.off(".replaceBlank")})}function v(){var n=c.find("ul:first li");n.off().on("click.itemCkecked",function(){var c=$(this),u=h(c),a=t.find("li").slice(0,8),n=_.find(a,function(n){return $(n).attr("data-name")==u.name});n=n||i.find("ul:first").find("li:first").attr("code")==u.name,n?alertTip("列表中已存在该采种，可通过拖动排序！"):(f.eq(s).before(l(u)).remove(),e(),s=-1,o()),r(0)})}function y(n){if(!u){var f=h(i.find("li:first")),o=h(n),r=p(o);n.remove(),t.prepend(l(f)),i.empty().append(r),r.hide().addClass(a).fadeIn(1e3,function(){r.removeClass(a)}),u=setTimeout(function(){w(),e(),u=clearTimeout(u)},500)}}function l(n){return $("<li>").attr({"data-title":n.title,"data-name":n.name,title:n.title,code:n.code}).append(' <span class="image"> <i class="ticket-icon t-s-96 ti-'+n.name+'"> </i></span>').append('<span class="opeart"><a class="ldb-betting" href="'+n.bettingUrl+'">立即投注</a>        <a class="ldb-option lo-topic" href="javascript:void(0);"><i>&nbsp;</i><em>置顶</em></a>        <a class="ldb-option lo-replace" href="javascript:void(0);"><i>&nbsp;</i><em>替换</em></a></span>')}function p(n){return $("<li>").attr({"data-title":n.title,"data-name":n.name,title:n.title,code:n.code}).append('<div class="image"> <a href="'+n.bettingUrl+'"><span class="ticket-icon t-s-96 ti-'+n.name+'"></span></a> </div>').append('<div class="title"> <h4><a href="'+n.bettingUrl+'">'+n.title+"</a></h4> </div>").append('<div class="cutdown"><h4><span id="hallIssueId">第 加载中... 期</span>开奖时间：</h4> <div class="cutdown-lite" id="hallIssueTimeId"><span class="lc-loading">Loading···</span></div></div>').append('<div class="betting-btn"> <a href="'+n.bettingUrl+'">立即投注</a> </div>')}function w(){dealHallLotteryIssue(0)}function h(n){return{name:n.attr("data-name"),title:n.attr("data-title"),bettingUrl:"#"+n.attr("data-name"),code:n.attr("code")}}if($(".lottery-dragbel").get(0)){var d=$(".lottery-dragbel"),c=$("#ld-checker"),g=$("#ld-topic"),i=g.find("ul:first"),tt=i.children(0),a="animated rotateInDownRight",b=$("#ld-base"),t=b.find("ul:first"),f=t.children(),u=null,nt={},k=null,s=-1;e(),t.dragsort({dragSelector:"li",dragSelectorExclude:"a,i,em,span",dragEnd:o,placeHolderTemplate:'<li class="ld-placeholder"><div></div></li>'})}},TrendClient=function(n,t){var i=this;i._one=0,i._needDrawLine=!0,i.lotteryCode=n,i.chartName=location.hash.toLowerCase().replace("#trend-",""),i._dataSource=[],i._targets=[],i._dataList=[],i.issueLength=50,i.targetAndStats=[],i.targetSplitIndex=[0],i.rowHighlightCls="lc-hightlight",i.$canvasContainer=$("div.lc-canvas"),i.$chartBase=$("#chart-table-base"),i.$chartExtend=$("div.chart-table-extend"),i.$chart=new $.lotteryChart(i.$chartBase),i.$chartFixHead=$("#chart-table-head-fixd"),i.$lineToggle=$("#line-toggle"),i.$layerToggle=$("#layer-toggle"),i.$omissionToggler=$("#omission-toggle"),i.$crossToggler=$("#cross-toggle"),i.$processing=$(".trend-processing"),i.issueWidth=ko.observable(80),i.bonusWidth=ko.observable(60),i.showDatagrid=ko.observable(!1),i.isHistory=ko.observable(!0),i.pageStat=ko.observable({}),i.observableFlag=ko.observableArray([1]),i.drawLine=function(){var o,n,t;if(i._needDrawLine){var h=$(".lc-canvas:first"),s=i.$chartBase.find(".line-point"),f=i.$chartBase.find("tbody tr").eq(1).find(".line-point").length;for(index=[],n=0;n<f;n++)index[n]=n;for(o=i._dataList.length,n=0;n<o;n++){if(n>=o-1)break;for(t=0;t<index.length;t++){var c=index[t],l=index[t]+f,r=s.eq(c),u=r,e="";r.hasClass("lc-rectangle")?(u=r.find("span"),e=u.hasClass("lc-cyanogen")?"#8dbcbd":"#d6bd9a"):e=u.hasClass("lc-red")?"#e74c3c":"#d6bd9a";try{i.$chart._drawLine(h,r,s.eq(l),e,2)}catch(a){}index[t]+=f}}}},i.bindEvent=function(){var t=i.$chartBase,r=i.$chartBase.find("tbody tr"),n;pageScrollTop=0;r.on({mouseup:function(n){n.preventDefault(),$(this).toggleClass(i.rowHighlightCls,!$(this).hasClass(i.rowHighlightCls))}});if(i._one==0){i._setCurrentMenu(),n=i.$chartBase.find("table").attr("style"),i.$chartFixHead.append('<table style="'+n+'"><thead>'+t.find("thead").html()+"</thead></table>");$(window).on({scroll:function(){pageScrollTop=$(this).scrollTop(),pageScrollTop>=t.offset().top?i.$chartFixHead.show():i.$chartFixHead.hide()}});i.$crossToggler.on({change:function(n){n.preventDefault(),$("div.lc-cross-line").remove(),i.$chart=new $.lotteryChart(i.$chartBase),i.$chart._crossToggle($(this).is(":checked"))}});i.$omissionToggler.on({change:function(n){n.preventDefault(),i.$chart._omissionToggle($(this).is(":checked"))}});i.$lineToggle.on({change:function(n){n.preventDefault(),i.$canvasContainer[$(this).is(":checked")?"show":"hide"]()}});i.$layerToggle.on({change:function(n){n.preventDefault(),i.toggleMissLayer()}});$("div.chart-tool-right").on("click","a",function(){var n=$(this),r="issue-selector-active",t;n.hasClass("issue-selector-active")||(n.closest("ul").find("a").removeClass(r),n.addClass(r),t=parseInt(n.attr("count")),i.rebindData(t))});$("#refreshPage").on("click",function(){var n=window.location.hash.replace("#","");home_hash_changed(n)});i._one=1}$("#tip-show-all").on("click",function(){$(this).closest("ul").hide().next().show()});$("#tip-fold-up").on("click",function(){$(this).closest("ul").hide().prev().show()});return this},i._tpuiInit=function(){$(".tpui-checkbox").tpuiCheckbox(),$(".tpui-radio").tpuiRadio()},i._setCurrentMenu=function(){var n=$("div.content");n.find("a.active").removeClass("active"),n.find("a[href$="+i.chartName+"]").addClass("active")},i._setTableWidth=function(){var n=["cqc-jiben","cqc-zhenfu","cqc-xingtai","tjc-jiben","tjc-zhenfu","tjc-xingtai","sd11x5-xingtai","klpk-jiben","klpk-zhenfu","xjssc-jiben","xjssc-zhenfu","xjssc-xingtai","wfc-jiben","wfc-zhenfu","wfc-xingtai","yfc-jiben","yfc-zhenfu","yfc-xingtai","gd11x5-xingtai","sh11x5-xingtai","jx11x5-xingtai","hlj11x5-xingtai","hgffc-jiben","hgffc-zhenfu","hgffc-xingtai","yfcnew-jiben","yfcnew-zhenfu","yfcnew-xingtai"];_.contains(n,i.chartName)?($("#content").css({width:1240}),i.$chartFixHead.css({width:1225}),i.chartName.indexOf("xingtai")==-1&&i.chartName!="klpk-jiben"&&i.chartName!="klpk-zhenfu"&&(i.$chartBase.find("table").css({"table-layout":"fixed"}),i.$chartExtend.find("table").css({"table-layout":"fixed"}))):_.contains(["cqc-hezhi3","tjc-hezhi3","klpk-hezhi","xjssc-hezhi3","wfc-hezhi3","yfc-hezhi3","yfcnew-hezhi3","hgffc-hezhi3"],i.chartName)?($("#content").css({width:1050}),i.$chartFixHead.css({width:1035})):($("#content").css({width:980}),i.$chartFixHead.css({width:965})),gl.is11Xuan5?(i.issueWidth(60),i.bonusWidth(90)):i.lotteryCode==EnumLotteryType.pk10?(i.issueWidth(55),i.bonusWidth(175)):i.lotteryCode==EnumLotteryType.klpk&&(i.issueWidth(60),i.bonusWidth(70))},i._setLotteryTip=function(){InitLotteryType(i.lotteryCode);var n="";gl.isShiShiCai?n="大小号：5～9属大号，0～4属小号。":gl.is11Xuan5?n="大小号：6～11属大号，1～5属小号。":i.lotteryCode==EnumLotteryType.pk10&&(n="大小号：6～10属大号，1～5属小号。"),i._trend_chart_desc=i._trend_chart_desc.replace("{大小号}",n),$(i._trend_chart_desc).hide().appendTo($("#tip-show-all").closest("dd"))},i.init=function(){InitLotteryType(i.lotteryCode),t.length>0&&(i._dataSource=t.slice(1),i._targets=t[0].split(","),t=null),i._tpuiInit(),i._dataSource=i._parseJson(i._dataSource),i.parseTargetAndStats(),i._prepareDatasource(),i._setTableWidth(),i._setLotteryTip(),i.render(),i.bindEvent(),ctx.trendReadyNotice=i._trendReadyNotice},i._parseJson=function(n){var s=[],o=n.length,f,e,u,t,r;if(o>0)for(f="",e="",u=0;u<o;u++)t=n[u].split(";"),t[0]&&(f=t[0],e=t[1]),r={IssueNumber:i.formatIssueNum(t[0]==""?f:t[0]),BonusNumber:i.formatBonusNum(t[1]==""?e:t[1]),Target:i._targets[t[2]],TargetStat:t[3],MissTimes:parseInt(t[4]),MaxMiss:i.formatHistoryMiss(t[5]),MaxConti:i.formatHistoryMiss(t[6]),ContiTimes:parseInt(t[7]),LotteryCode:i.lotteryCode},r.TargetColumnClass=i.getTargetColumnClass(r),r.PointClass=i.getPointClass(r),s.push(r);return s},i.parseTargetAndStats=function(){var r,n,t;i._dataSource.length!=0&&(r=i._dataSource[0].IssueNumber,n=_.filter(i._dataSource,function(n){return n.IssueNumber==r}),i.issueLength=n.length,t=_.groupBy(n,function(n){return n.Target}),_.each(t,function(n){var r=n[0].Target,t;i.targetAndStats.push({target:r,stats:n}),t=i.targetSplitIndex.slice(-1)[0],i.targetSplitIndex.push(t+n.length)}))},i.loadNewData=function(){ctx.postToken("/Trend/Detail/"+i.chartName,{last:"yes"},function(n){if(n.ok==0)console.log(n.tip);else{n=i._parseJson(n),i._dataSource=_.union(i._dataSource,[n]).slice(1);var t=$("div.chart-tool-right").find(".issue-selector-active").attr("count");t=parseInt(t),i.rebindData(t)}})},i._refleshObservableData=function(){i.dataList([]),i.dataList(i._dataList)},i.render=function(){i._prepareDatalist(30),i._koDataBind(),i.drawLine()},i._displayProcessing=function(n){n?i.$processing.show():i.$processing.hide()},i.rebindData=function(n){var t=$("body");t.tpuiLoading("_show"),i._prepareDatalist(n),i._reinitToggle(),i.drawLine(),i.bindEvent(),t.tpuiLoading("_hide"),$("#radio-history").click()},i._reinitToggle=function(){i.$lineToggle.prop("checked",!0),i._activeCheckbox(i.$lineToggle),i.$canvasContainer.show().html(""),i.$chartBase.find("tbody").find("td.lc-omission,td.lc-circle").removeClass("lc-omission-highlight"),i.$layerToggle.prop("checked",!1),i._activeCheckbox(i.$layerToggle,!1),i.$omissionToggler.prop("checked",!1),i._activeCheckbox(i.$omissionToggler,!1)},i._activeCheckbox=function(n,t){var i=n.closest("div.tp-ui-item");t==!1?i.removeClass("tp-ui-active"):i.hasClass("tp-ui-active")||i.addClass("tp-ui-active")},i._prepareDatasource=function(){var t=_.groupBy(i._dataSource,function(n){return"1"+n.IssueNumber}),n=[];_.each(t,function(t){n.push(t)}),i._dataSource=n},i._prepareDatalist=function(n){var u=[],t=i._dataSource.length-n,r;t=t<0?0:t,r=i._dataSource.slice(t),i._dataList=r,i.observableFlag([]),i.observableFlag([1])},i._koDataBind=function(){var t=i.$chartBase[0],n;ko.cleanNode(t),ko.applyBindings(i,t),n=i.$chartExtend[0],ko.cleanNode(n),ko.applyBindings(i,n),i.showDatagrid(!0)},i._tmpl='<%_.each(data,function(issue,i){%>                    <%if(i%5==0){%>                        <tr class="lc-split-hide" name="split-tr"><th colspan="58">&nbsp;</th></tr>                    <%}%>                    <tr>                        <td><span><%=issue[0].IssueNumber%></span></td>                        <td class="lc-split">&nbsp;</td>                        <td class="lc-opencode"><span><%=issue[0].BonusNumber%></span></td>                        <%_.each(issue,function(bo,j){%>                            <%if(isTargetSplit(j)){%>                                <td class="lc-split">&nbsp;</td>                            <%}%>                            <%if(bo.MissTimes==0){%>                                <td class="<%=bo.TargetColumnClass%>"><span class="lc-open <%=bo.PointClass%>"><%=bo.TargetStat%></span></td>                            <%}else{%>                                <td class="lc-omission <%=bo.TargetColumnClass%>"><span><%=bo.MissTimes%></span></td>                            <%}%>                        <%});%>                    </tr>               <%});%>    ',i.statinfoTmpl=_.template(i._tmpl),i.buildTable=function(){return i.statinfoTmpl({data:i._dataList,isTargetSplit:i.isTargetSplit})},i.toggleMissLayer=function(){for(var s=i.$chartBase.find("tbody"),f=[],e=s.find("tr"),o,r,n,u,t=e.length;t>0;t--)for(o=e.eq(t),r=o.find("td.lc-omission,td.lc-circle,td.lc-rectangle"),n=0;n<r.length;n++)u=r.eq(n),f[n]==undefined&&(u.hasClass("lc-omission")?u.toggleClass("lc-omission-highlight"):f[n]=!0)},i._columnNeedLine=function(n){return n.Target.indexOf("组选")!=-1||n.Target=="号码分布"||n.Target.indexOf("三不同")!=-1||n.Target.indexOf("二不同")!=-1||n.Target.indexOf("二同号")!=-1||gl.isK3&&n.Target=="号码形态"?!1:!0},i.isTargetSplit=function(n){return _.contains(i.targetSplitIndex,n)},i._isBall=function(n){var t=n.TargetStat;return t=="0-13"||t=="35-45"||"AJQK".indexOf(t)!=-1?!0:n.Target.indexOf("三不同")!=-1||n.Target.indexOf("二不同")!=-1||n.Target.indexOf("二同号")!=-1?!1:$.isNumeric(n.TargetStat)},i._getTargetIndex=function(n){for(var r=0,t=0;t<i._targets.length;t++)if(n.Target==i._targets[t]){r=t;break}return r},i.getTargetColumnClass=function(n){var u=i._getTargetIndex(n),r=i._isBall(n),t=r?"lc-circle":"lc-rectangle";return r&&(t+=u%2==0?" lc-red":" lc-brown"),n.MissTimes==0&&i._columnNeedLine(n)&&(t+=" line-point"),t},i.getPointClass=function(n){var t=i._getTargetIndex(n);return i._isBall(n)?"":t%2==0?" lc-cyanogen":" lc-yellow"},i.formatIssueNum=function(n){switch(i.lotteryCode){case EnumLotteryType.tjc:case EnumLotteryType.cqc:case EnumLotteryType.xjssc:n=n.substr(4)}return n},i.formatBonusNum=function(n){var t;if(i.lotteryCode==EnumLotteryType.klpk){var f=BonusNumHelper.pkSuitFilter(n).split(","),u=BonusNumHelper.pkNumGetOnlyNum(n).split(","),r="";for(t=0;t<f.length;t++)switch(f[t]){case"1":r+="<span  style='color:black;'>♠"+u[t]+"</span>";break;case"2":r+="<span  style='color:red;'>♥"+u[t]+"</span>";break;case"3":r+="<span  style='color:black;'>♣"+u[t]+"</span>";break;case"4":r+="<span  style='color:red;'>♦"+u[t]+"</span>"}return r}return n},i.formatHistoryMiss=function(n){return String(n).replace("1000000","-").replace("10000","-")},i._getStatInfoOfThisPage=function(){var f=0,o=0,e=0,w=0,u=0,l=[],c=[],a=[],v=[],s=i._dataList.length,p,r,t,n,h,y;if(s>0){for(p=i._dataList[0].length,r=0;r<p;r++){for(f=0,e=0,u=0,o=0,t=0;t<s;t++)n=i._dataList[t][r],n.MissTimes>f&&(f=n.MissTimes),n.ContiTimes>o&&(o=n.ContiTimes),n.MissTimes==0&&(u+=1),t<s-1?i._dataList[t+1][r].MissTimes==0&&(e+=n.MissTimes):e+=n.MissTimes;i.isTargetSplit(r)&&(l.push(-1),c.push(-1),v.push(-1),a.push(-1)),l.push(f),h=parseInt(e/(u+1)),c.push(h==0?1:h),v.push(u),a.push(o)}y={maxMiss:l,avg:c,hit:v,maxConti:a},i.pageStat(y)}},i.switchTab=function(n,t){var u=$(t.target),r=u.attr("id");i.isHistory(r=="radio-history"),r!="radio-history"&&i._getStatInfoOfThisPage()},i._trendReadyNotice=function(n){i.lotteryCode==n},i._trend_chart_desc='<ul>    <li>遗漏：自上期开出到本期间隔的期数。</li>    <li>分隔线：每五期使用分隔线，使横向导航更加清晰。</li>    <li>遗漏分层：将当前遗漏以柱状图标示出。</li>    <li>出现总次数：统计周期内，某个号码的累计出现次数。</li>    <li>平均遗漏值：统计期数内遗漏的平均值（计算公式：平均遗漏＝统计期内的总遗漏数/(出现次数+1)）。</li>    <li>最大遗漏值：是指统计周期内所有遗漏值的最大值。</li>    <li>最大连出值：是指统计周期内所有连出值的最大值。</li>        <li>{大小号}</li>    <li>奇偶号：1、3 、5、7、9属奇数，0、2、4、6、8属偶数。</li>    <li>质合号：1、2、3、5、7属质数，0、4、6、8、9属合数。</li>    <li>        和值：开奖号码相加之和。示例：号码01 02 03 05 10和值为21。    </li>    <li>        和尾：开奖号码和值的个位数，范围为0-9。示例：号码01 02 03 05 10和尾为1。    </li>    <li>        012路：奖号除3得到的余数分布。1、4、7属1路，2、5、8属2路，0、3、6、9属0路。    </li>    <li>升平降：相同统计指标中，本期值大于上期值叫升，本期值等于上期值叫平，本期值小于上期值叫降。 <a href="javascript:void(0)" id="tip-fold-up">－收起</a></li></ul>'},!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.JSZip=n()}}(function(){return function n(t,i,r){function f(u,o){var h,s;if(!i[u]){if(!t[u]){if(h="function"==typeof require&&require,!o&&h)return h(u,!0);if(e)return e(u,!0);throw new Error("Cannot find module '"+u+"'");}s=i[u]={exports:{}},t[u][0].call(s.exports,function(n){var i=t[u][1][n];return f(i?i:n)},s,s.exports,n,t,i,r)}return i[u].exports}for(var e="function"==typeof require&&require,u=0;u<r.length;u++)f(r[u]);return f}({1:[function(n,t,i){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(n){for(var e,f,u,h,c,s,i,o="",t=0;t<n.length;)e=n.charCodeAt(t++),f=n.charCodeAt(t++),u=n.charCodeAt(t++),h=e>>2,c=(3&e)<<4|f>>4,s=(15&f)<<2|u>>6,i=63&u,isNaN(f)?s=i=64:isNaN(u)&&(i=64),o=o+r.charAt(h)+r.charAt(c)+r.charAt(s)+r.charAt(i);return o},i.decode=function(n){var h,c,s,o,e,i,f,u="",t=0;for(n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");t<n.length;)o=r.indexOf(n.charAt(t++)),e=r.indexOf(n.charAt(t++)),i=r.indexOf(n.charAt(t++)),f=r.indexOf(n.charAt(t++)),h=o<<2|e>>4,c=(15&e)<<4|i>>2,s=(3&i)<<6|f,u+=String.fromCharCode(h),64!=i&&(u+=String.fromCharCode(c)),64!=f&&(u+=String.fromCharCode(s));return u}},{}],2:[function(n,t){"use strict";function i(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}i.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},t.exports=i},{}],3:[function(n,t,i){"use strict";i.STORE={magic:"\x00\x00",compress:function(n){return n},uncompress:function(n){return n},compressInputType:null,uncompressInputType:null},i.DEFLATE=n("./flate")},{"./flate":8}],4:[function(n,t){"use strict";var r=n("./utils"),i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];t.exports=function(n,t){var o,u,e;if("undefined"==typeof n||!n.length)return 0;o="string"!==r.getTypeOf(n),"undefined"==typeof t&&(t=0);var s=0,h=0,f=0;for(t=-1^t,u=0,e=n.length;e>u;u++)f=o?n[u]:n.charCodeAt(u),h=255&(t^f),s=i[h],t=t>>>8^s;return-1^t}},{"./utils":21}],5:[function(n,t){"use strict";function i(){this.data=null,this.length=0,this.index=0}var r=n("./utils");i.prototype={checkOffset:function(n){this.checkIndex(this.index+n)},checkIndex:function(n){if(this.length<n||0>n)throw new Error("End of data reached (data length = "+this.length+", asked index = "+n+"). Corrupted zip ?");},setIndex:function(n){this.checkIndex(n),this.index=n},skip:function(n){this.setIndex(this.index+n)},byteAt:function(){},readInt:function(n){var t,i=0;for(this.checkOffset(n),t=this.index+n-1;t>=this.index;t--)i=(i<<8)+this.byteAt(t);return this.index+=n,i},readString:function(n){return r.transformTo("string",this.readData(n))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var n=this.readInt(4);return new Date((n>>25&127)+1980,(n>>21&15)-1,n>>16&31,n>>11&31,n>>5&63,(31&n)<<1)}},t.exports=i},{"./utils":21}],6:[function(n,t,i){"use strict";i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!1,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],7:[function(n,t,i){"use strict";var r=n("./utils");i.string2binary=function(n){return r.string2binary(n)},i.string2Uint8Array=function(n){return r.transformTo("uint8array",n)},i.uint8Array2String=function(n){return r.transformTo("string",n)},i.string2Blob=function(n){var t=r.transformTo("arraybuffer",n);return r.arrayBuffer2Blob(t)},i.arrayBuffer2Blob=function(n){return r.arrayBuffer2Blob(n)},i.transformTo=function(n,t){return r.transformTo(n,t)},i.getTypeOf=function(n){return r.getTypeOf(n)},i.checkSupport=function(n){return r.checkSupport(n)},i.MAX_VALUE_16BITS=r.MAX_VALUE_16BITS,i.MAX_VALUE_32BITS=r.MAX_VALUE_32BITS,i.pretty=function(n){return r.pretty(n)},i.findCompression=function(n){return r.findCompression(n)},i.isRegExp=function(n){return r.isRegExp(n)}},{"./utils":21}],8:[function(n,t,i){"use strict";var u="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=n("pako");i.uncompressInputType=u?"uint8array":"array",i.compressInputType=u?"uint8array":"array",i.magic="\b\x00",i.compress=function(n,t){return r.deflateRaw(n,{level:t.level||-1})},i.uncompress=function(n){return r.inflateRaw(n)}},{pako:24}],9:[function(n,t){"use strict";function i(n,t){return this instanceof i?(this.files={},this.comment=null,this.root="",n&&this.load(n,t),void(this.clone=function(){var t=new i,n;for(n in this)"function"!=typeof this[n]&&(t[n]=this[n]);return t})):new i(n,t)}var r=n("./base64");i.prototype=n("./object"),i.prototype.load=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.utils=n("./deprecatedPublicUtils"),i.base64={encode:function(n){return r.encode(n)},decode:function(n){return r.decode(n)}},i.compressions=n("./compressions"),t.exports=i},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(n,t){"use strict";var r=n("./base64"),i=n("./zipEntries");t.exports=function(n,t){var o,e,f,u;for(t=t||{},t.base64&&(n=r.decode(n)),e=new i(n,t),o=e.files,f=0;f<o.length;f++)u=o[f],this.file(u.fileName,u.decompressed,{binary:!0,optimizedBinaryString:!0,date:u.date,dir:u.dir,comment:u.fileComment.length?u.fileComment:null,unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions,createFolders:t.createFolders});return e.zipComment.length&&(this.comment=e.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(n,t){(function(n){"use strict";t.exports=function(t,i){return new n(t,i)},t.exports.test=function(t){return n.isBuffer(t)}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],12:[function(n,t){"use strict";function i(n){this.data=n,this.length=this.data.length,this.index=0}var r=n("./uint8ArrayReader");i.prototype=new r,i.prototype.readData=function(n){this.checkOffset(n);var t=this.data.slice(this.index,this.index+n);return this.index+=n,t},t.exports=i},{"./uint8ArrayReader":18}],13:[function(n,t){"use strict";var st=n("./support"),r=n("./utils"),c=n("./crc32"),a=n("./signature"),rt=n("./defaults"),b=n("./base64"),l=n("./compressions"),u=n("./compressedObject"),d=n("./nodeBuffer"),f=n("./utf8"),ft=n("./stringWriter"),ut=n("./uint8ArrayWriter"),k=function(n){if(n._data instanceof u&&(n._data=n._data.getContent(),n.options.binary=!0,n.options.base64=!1,"uint8array"===r.getTypeOf(n._data))){var t=n._data;n._data=new Uint8Array(t.length),0!==t.length&&n._data.set(t,0)}return n._data},o=function(n){var t=k(n),i=r.getTypeOf(t);return"string"===i?!n.options.binary&&st.nodebuffer?d(t,"utf-8"):n.asBinary():t},w=function(n){var t=k(this);return null===t||"undefined"==typeof t?"":(this.options.base64&&(t=b.decode(t)),t=n&&this.options.binary?h.utf8decode(t):r.transformTo("string",t),n||this.options.binary||(t=r.transformTo("string",h.utf8encode(t))),t)},s=function(n,t,i){this.name=n,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=t,this.options=i,this._initialMetadata={dir:i.dir,date:i.date}};s.prototype={asText:function(){return w.call(this,!0)},asBinary:function(){return w.call(this,!1)},asNodeBuffer:function(){var n=o(this);return r.transformTo("nodebuffer",n)},asUint8Array:function(){var n=o(this);return r.transformTo("uint8array",n)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var i=function(n,t){for(var r="",i=0;t>i;i++)r+=String.fromCharCode(255&n),n>>>=8;return r},e=function(){for(var t,i={},n=0;n<arguments.length;n++)for(t in arguments[n])arguments[n].hasOwnProperty(t)&&"undefined"==typeof i[t]&&(i[t]=arguments[n][t]);return i},ot=function(n){return n=n||{},n.base64!==!0||null!==n.binary&&void 0!==n.binary||(n.binary=!0),n=e(n,rt),n.date=n.date||new Date,null!==n.compression&&(n.compression=n.compression.toUpperCase()),n},p=function(n,t,i){var o,f=r.getTypeOf(t),e;if(i=ot(i),"string"==typeof i.unixPermissions&&(i.unixPermissions=parseInt(i.unixPermissions,8)),i.unixPermissions&&16384&i.unixPermissions&&(i.dir=!0),i.dosPermissions&&16&i.dosPermissions&&(i.dir=!0),i.dir&&(n=v(n)),i.createFolders&&(o=et(n))&&y.call(this,o,!0),i.dir||null===t||"undefined"==typeof t)i.base64=!1,i.binary=!1,t=null,f=null;else if("string"===f)i.binary&&!i.base64&&i.optimizedBinaryString!==!0&&(t=r.string2binary(t));else{if(i.base64=!1,i.binary=!0,!(f||t instanceof u))throw new Error("The data of '"+n+"' is in an unsupported format !");"arraybuffer"===f&&(t=r.transformTo("uint8array",t))}return e=new s(n,t,i),this.files[n]=e,e},et=function(n){"/"==n.slice(-1)&&(n=n.substring(0,n.length-1));var t=n.lastIndexOf("/");return t>0?n.substring(0,t):""},v=function(n){return"/"!=n.slice(-1)&&(n+="/"),n},y=function(n,t){return t="undefined"!=typeof t?t:!1,n=v(n),this.files[n]||p.call(this,n,null,{dir:!0,createFolders:t}),this.files[n]},it=function(n,t,i){var e,f=new u;return n._data instanceof u?(f.uncompressedSize=n._data.uncompressedSize,f.crc32=n._data.crc32,0===f.uncompressedSize||n.dir?(t=l.STORE,f.compressedContent="",f.crc32=0):n._data.compressionMethod===t.magic?f.compressedContent=n._data.getCompressedContent():(e=n._data.getContent(),f.compressedContent=t.compress(r.transformTo(t.compressInputType,e),i))):(e=o(n),(!e||0===e.length||n.dir)&&(t=l.STORE,e=""),f.uncompressedSize=e.length,f.crc32=c(e),f.compressedContent=t.compress(r.transformTo(t.compressInputType,e),i)),f.compressedSize=f.compressedContent.length,f.compressionMethod=t.magic,f},tt=function(n,t){var i=n;return n||(i=t?16893:33204),(65535&i)<<16},g=function(n){return 63&(n||0)},nt=function(n,t,u,e,o){var v,y,d,h,l=(u.compressedContent,r.transformTo("string",f.utf8encode(t.name))),ot=t.comment||"",b=r.transformTo("string",f.utf8encode(ot)),st=l.length!==t.name.length,et=b.length!==ot.length,ft=t.options,p="",it="",nt="",w,k,s,rt,ut;return d=t._initialMetadata.dir!==t.dir?t.dir:ft.dir,h=t._initialMetadata.date!==t.date?t.date:ft.date,w=0,k=0,d&&(w|=16),"UNIX"===o?(k=798,w|=tt(t.unixPermissions,d)):(k=20,w|=g(t.dosPermissions,d)),v=h.getHours(),v<<=6,v|=h.getMinutes(),v<<=5,v|=h.getSeconds()/2,y=h.getFullYear()-1980,y<<=4,y|=h.getMonth()+1,y<<=5,y|=h.getDate(),st&&(it=i(1,1)+i(c(l),4)+l,p+="up"+i(it.length,2)+it),et&&(nt=i(1,1)+i(this.crc32(b),4)+b,p+="uc"+i(nt.length,2)+nt),s="",s+="\n\x00",s+=st||et?"\x00\b":"\x00\x00",s+=u.compressionMethod,s+=i(v,2),s+=i(y,2),s+=i(u.crc32,4),s+=i(u.compressedSize,4),s+=i(u.uncompressedSize,4),s+=i(l.length,2),s+=i(p.length,2),rt=a.LOCAL_FILE_HEADER+s+l+p,ut=a.CENTRAL_FILE_HEADER+i(k,2)+s+i(b.length,2)+"\x00\x00\x00\x00"+i(w,4)+i(e,4)+l+p+b,{fileRecord:rt,dirRecord:ut,compressedObject:u}},h={load:function(){throw new Error("Load method is not defined. Is the file jszip-load.js included ?");},filter:function(n){var t,f,i,r,u=[];for(t in this.files)this.files.hasOwnProperty(t)&&(i=this.files[t],r=new s(i.name,i._data,e(i.options)),f=t.slice(this.root.length,t.length),t.slice(0,this.root.length)===this.root&&n(f,r)&&u.push(r));return u},file:function(n,t,i){if(1===arguments.length){if(r.isRegExp(n)){var u=n;return this.filter(function(n,t){return!t.dir&&u.test(n)})}return this.filter(function(t,i){return!i.dir&&t===n})[0]||null}return n=this.root+n,p.call(this,n,t,i),this},folder:function(n){if(!n)return this;if(r.isRegExp(n))return this.filter(function(t,i){return i.dir&&n.test(t)});var i=this.root+n,u=y.call(this,i),t=this.clone();return t.root=u.name,t},remove:function(n){var t,r,i;if(n=this.root+n,t=this.files[n],t||("/"!=n.slice(-1)&&(n+="/"),t=this.files[n]),t&&!t.dir)delete this.files[n];else for(r=this.filter(function(t,i){return i.name.slice(0,n.length)===n}),i=0;i<r.length;i++)delete this.files[r[i].name];return this},generate:function(n){var y,h,c,f;n=e(n||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip"}),r.checkSupport(n.type),("darwin"===n.platform||"freebsd"===n.platform||"linux"===n.platform||"sunos"===n.platform)&&(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var o,t,u=[],s=0,p=0,d=r.transformTo("string",this.utf8encode(n.comment||this.comment||""));for(y in this.files)if(this.files.hasOwnProperty(y)){var v=this.files[y],g=v.options.compression||n.compression.toUpperCase(),k=l[g];if(!k)throw new Error(g+" is not a valid compression method !");var rt=v.options.compressionOptions||n.compressionOptions||{},tt=it.call(this,v,k,rt),w=nt.call(this,y,v,tt,s,n.platform);s+=w.fileRecord.length+tt.compressedSize,p+=w.dirRecord.length,u.push(w)}for(h="",h=a.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+i(u.length,2)+i(u.length,2)+i(p,4)+i(s,4)+i(d.length,2)+d,c=n.type.toLowerCase(),o="uint8array"===c||"arraybuffer"===c||"blob"===c||"nodebuffer"===c?new ut(s+p+h.length):new ft(s+p+h.length),t=0;t<u.length;t++)o.append(u[t].fileRecord),o.append(u[t].compressedObject.compressedContent);for(t=0;t<u.length;t++)o.append(u[t].dirRecord);o.append(h),f=o.finalize();switch(n.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return r.transformTo(n.type.toLowerCase(),f);case"blob":return r.arrayBuffer2Blob(r.transformTo("arraybuffer",f),n.mimeType);case"base64":return n.base64?b.encode(f):f;default:return f}},crc32:function(n,t){return c(n,t)},utf8encode:function(n){return r.transformTo("string",f.utf8encode(n))},utf8decode:function(n){return f.utf8decode(n)}};t.exports=h},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(n,t,i){"use strict";i.LOCAL_FILE_HEADER="PK\x03\x04",i.CENTRAL_FILE_HEADER="PK\x01\x02",i.CENTRAL_DIRECTORY_END="PK\x05\x06",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",i.DATA_DESCRIPTOR="PK\x07\b"},{}],15:[function(n,t){"use strict";function i(n,t){this.data=n,t||(this.data=r.string2binary(this.data)),this.length=this.data.length,this.index=0}var u=n("./dataReader"),r=n("./utils");i.prototype=new u,i.prototype.byteAt=function(n){return this.data.charCodeAt(n)},i.prototype.lastIndexOfSignature=function(n){return this.data.lastIndexOf(n)},i.prototype.readData=function(n){this.checkOffset(n);var t=this.data.slice(this.index,this.index+n);return this.index+=n,t},t.exports=i},{"./dataReader":5,"./utils":21}],16:[function(n,t){"use strict";var r=n("./utils"),i=function(){this.data=[]};i.prototype={append:function(n){n=r.transformTo("string",n),this.data.push(n)},finalize:function(){return this.data.join("")}},t.exports=i},{"./utils":21}],17:[function(n,t,i){(function(n){"use strict";var r,u,t;if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer="undefined"!=typeof n,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{r=new ArrayBuffer(0);try{i.blob=0===new Blob([r],{type:"application/zip"}).size}catch(f){try{u=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,t=new u,t.append(r),i.blob=0===t.getBlob("application/zip").size}catch(f){i.blob=!1}}}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],18:[function(n,t){"use strict";function i(n){n&&(this.data=n,this.length=this.data.length,this.index=0)}var r=n("./dataReader");i.prototype=new r,i.prototype.byteAt=function(n){return this.data[n]},i.prototype.lastIndexOfSignature=function(n){for(var u=n.charCodeAt(0),r=n.charCodeAt(1),f=n.charCodeAt(2),i=n.charCodeAt(3),t=this.length-4;t>=0;--t)if(this.data[t]===u&&this.data[t+1]===r&&this.data[t+2]===f&&this.data[t+3]===i)return t;return-1},i.prototype.readData=function(n){if(this.checkOffset(n),0===n)return new Uint8Array(0);var t=this.data.subarray(this.index,this.index+n);return this.index+=n,t},t.exports=i},{"./dataReader":5}],19:[function(n,t){"use strict";var r=n("./utils"),i=function(n){this.data=new Uint8Array(n),this.index=0};i.prototype={append:function(n){0!==n.length&&(n=r.transformTo("uint8array",n),this.data.set(n,this.index),this.index+=n.length)},finalize:function(){return this.data}},t.exports=i},{"./utils":21}],20:[function(n,t,i){"use strict";for(var e=n("./utils"),u=n("./support"),s=n("./nodeBuffer"),f=new Array(256),r=0;256>r;r++)f[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;f[254]=f[254]=1;var c=function(n){for(var r,t,e,f,s=n.length,o=0,i=0;s>i;i++)t=n.charCodeAt(i),55296==(64512&t)&&s>i+1&&(e=n.charCodeAt(i+1),56320==(64512&e)&&(t=65536+(t-55296<<10)+(e-56320),i++)),o+=128>t?1:2048>t?2:65536>t?3:4;for(r=u.uint8array?new Uint8Array(o):new Array(o),f=0,i=0;o>f;i++)t=n.charCodeAt(i),55296==(64512&t)&&s>i+1&&(e=n.charCodeAt(i+1),56320==(64512&e)&&(t=65536+(t-55296<<10)+(e-56320),i++)),128>t?r[f++]=t:2048>t?(r[f++]=192|t>>>6,r[f++]=128|63&t):65536>t?(r[f++]=224|t>>>12,r[f++]=128|t>>>6&63,r[f++]=128|63&t):(r[f++]=240|t>>>18,r[f++]=128|t>>>12&63,r[f++]=128|t>>>6&63,r[f++]=128|63&t);return r},h=function(n,t){var i;for(t=t||n.length,t>n.length&&(t=n.length),i=t-1;i>=0&&128==(192&n[i]);)i--;return 0>i?t:0===i?t:i+f[n[i]]>t?i:t},o=function(n){for(var t,u,s=n.length,i=new Array(2*s),r=0,o=0;s>o;)if(t=n[o++],128>t)i[r++]=t;else if(u=f[t],u>4)i[r++]=65533,o+=u-1;else{for(t&=2===u?31:3===u?15:7;u>1&&s>o;)t=t<<6|63&n[o++],u--;u>1?i[r++]=65533:65536>t?i[r++]=t:(t-=65536,i[r++]=55296|t>>10&1023,i[r++]=56320|1023&t)}return i.length!==r&&(i.subarray?i=i.subarray(0,r):i.length=r),e.applyFromCharCode(i)};i.utf8encode=function(n){return u.nodebuffer?s(n,"utf-8"):c(n)},i.utf8decode=function(n){var i;if(u.nodebuffer)return e.transformTo("nodebuffer",n).toString("utf-8");n=e.transformTo(u.uint8array?"uint8array":"array",n);for(var r=[],t=0,f=n.length,s=65536;f>t;)i=h(n,Math.min(t+s,f)),r.push(u.uint8array?o(n.subarray(t,i)):o(n.slice(t,i))),t=i;return r.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(n,t,i){"use strict";function f(n){return n}function c(n,t){for(var i=0;i<n.length;++i)t[i]=255&n.charCodeAt(i);return t}function e(n){var r=65536,h=[],o=n.length,s=i.getTypeOf(n),t=0,c=!0,e,f;try{switch(s){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,u(0))}}catch(l){c=!1}if(!c){for(e="",f=0;f<n.length;f++)e+=String.fromCharCode(n[f]);return e}for(;o>t&&r>1;)try{h.push("array"===s||"nodebuffer"===s?String.fromCharCode.apply(null,n.slice(t,Math.min(t+r,o))):String.fromCharCode.apply(null,n.subarray(t,Math.min(t+r,o)))),t+=r}catch(l){r=Math.floor(r/2)}return h.join("")}function s(n,t){for(var i=0;i<n.length;i++)t[i]=n[i];return t}var h=n("./support"),o=n("./compressions"),u=n("./nodeBuffer"),r;i.string2binary=function(n){for(var i="",t=0;t<n.length;t++)i+=String.fromCharCode(255&n.charCodeAt(t));return i},i.arrayBuffer2Blob=function(n,t){i.checkSupport("blob"),t=t||"application/zip";try{return new Blob([n],{type:t})}catch(f){try{var u=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,r=new u;return r.append(n),r.getBlob(t)}catch(f){throw new Error("Bug : can't construct the Blob.");}}},i.applyFromCharCode=e,r={},r.string={string:f,array:function(n){return c(n,new Array(n.length))},arraybuffer:function(n){return r.string.uint8array(n).buffer},uint8array:function(n){return c(n,new Uint8Array(n.length))},nodebuffer:function(n){return c(n,u(n.length))}},r.array={string:e,array:f,arraybuffer:function(n){return new Uint8Array(n).buffer},uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return u(n)}},r.arraybuffer={string:function(n){return e(new Uint8Array(n))},array:function(n){return s(new Uint8Array(n),new Array(n.byteLength))},arraybuffer:f,uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return u(new Uint8Array(n))}},r.uint8array={string:e,array:function(n){return s(n,new Array(n.length))},arraybuffer:function(n){return n.buffer},uint8array:f,nodebuffer:function(n){return u(n)}},r.nodebuffer={string:e,array:function(n){return s(n,new Array(n.length))},arraybuffer:function(n){return r.nodebuffer.uint8array(n).buffer},uint8array:function(n){return s(n,new Uint8Array(n.length))},nodebuffer:f},i.transformTo=function(n,t){if(t||(t=""),!n)return t;i.checkSupport(n);var f=i.getTypeOf(t);return r[f][n](t)},i.getTypeOf=function(n){return"string"==typeof n?"string":"[object Array]"===Object.prototype.toString.call(n)?"array":h.nodebuffer&&u.test(n)?"nodebuffer":h.uint8array&&n instanceof Uint8Array?"uint8array":h.arraybuffer&&n instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(n){var t=h[n.toLowerCase()];if(!t)throw new Error(n+" is not supported by this browser");},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(n){for(var i,r="",t=0;t<(n||"").length;t++)i=n.charCodeAt(t),r+="\\x"+(16>i?"0":"")+i.toString(16).toUpperCase();return r},i.findCompression=function(n){for(var t in o)if(o.hasOwnProperty(t)&&o[t].magic===n)return o[t];return null},i.isRegExp=function(n){return"[object RegExp]"===Object.prototype.toString.call(n)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(n,t){"use strict";function u(n,t){this.files=[],this.loadOptions=t,n&&this.load(n)}var s=n("./stringReader"),h=n("./nodeBufferReader"),c=n("./uint8ArrayReader"),i=n("./utils"),r=n("./signature"),o=n("./zipEntry"),e=n("./support"),f=n("./object");u.prototype={checkSignature:function(n){var t=this.reader.readString(4);if(t!==n)throw new Error("Corrupted zip or bug : unexpected signature ("+i.pretty(t)+", expected "+i.pretty(n)+")");},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=f.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,n,i,u=this.zip64EndOfCentralSize-44,r=0;u>r;)t=this.reader.readInt(2),n=this.reader.readInt(4),i=this.reader.readString(n),this.zip64ExtensibleData[t]={id:t,length:n,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported");},readLocalFiles:function(){for(var n,t=0;t<this.files.length;t++)n=this.files[t],this.reader.setIndex(n.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),n.readLocalPart(this.reader),n.handleUTF8(),n.processAttributes()},readCentralDir:function(){var n;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===r.CENTRAL_FILE_HEADER;)n=new o({zip64:this.zip64},this.loadOptions),n.readCentralPart(this.reader),this.files.push(n)},readEndOfCentral:function(){var n=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END),t;if(-1===n){t=!0;try{this.reader.setIndex(0),this.checkSignature(r.LOCAL_FILE_HEADER),t=!1}catch(u){}throw new Error(t?"Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html":"Corrupted zip : can't find end of central directory");}if(this.reader.setIndex(n),this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,n=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),-1===n)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(n),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(n){var t=i.getTypeOf(n);this.reader="string"!==t||e.uint8array?"nodebuffer"===t?new h(n):new c(i.transformTo("uint8array",n)):new s(n,this.loadOptions.optimizedBinaryString)},load:function(n){this.prepareReader(n),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=u},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(n,t){"use strict";function f(n,t){this.options=n,this.loadOptions=t}var u=n("./stringReader"),i=n("./utils"),s=n("./compressedObject"),r=n("./object"),o=0,e=3;f.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},prepareCompressedContent:function(n,t,i){return function(){var u=n.index,r;return n.setIndex(t),r=n.readData(i),n.setIndex(u),r}},prepareContent:function(n,t,r,u,f){return function(){var t=i.transformTo(u.uncompressInputType,this.getCompressedContent()),n=u.uncompress(t);if(n.length!==f)throw new Error("Bug : uncompressed data size mismatch");return n}},readLocalPart:function(n){var t,u;if(n.skip(22),this.fileNameLength=n.readInt(2),u=n.readInt(2),this.fileName=n.readString(this.fileNameLength),n.skip(u),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(t=i.findCompression(this.compressionMethod),null===t)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new s,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(n,n.index,this.compressedSize,t),this.decompressed.getContent=this.prepareContent(n,n.index,this.compressedSize,t,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=i.transformTo("string",this.decompressed.getContent()),r.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch");},readCentralPart:function(n){if(this.versionMadeBy=n.readInt(2),this.versionNeeded=n.readInt(2),this.bitFlag=n.readInt(2),this.compressionMethod=n.readString(2),this.date=n.readDate(),this.crc32=n.readInt(4),this.compressedSize=n.readInt(4),this.uncompressedSize=n.readInt(4),this.fileNameLength=n.readInt(2),this.extraFieldsLength=n.readInt(2),this.fileCommentLength=n.readInt(2),this.diskNumberStart=n.readInt(2),this.internalFileAttributes=n.readInt(2),this.externalFileAttributes=n.readInt(4),this.localHeaderOffset=n.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=n.readString(this.fileNameLength),this.readExtraFields(n),this.parseZIP64ExtraField(n),this.fileComment=n.readString(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var n=this.versionMadeBy>>8;this.dir=16&this.externalFileAttributes?!0:!1,n===o&&(this.dosPermissions=63&this.externalFileAttributes),n===e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileName.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var n=new u(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=n.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=n.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=n.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=n.readInt(4))}},readExtraFields:function(n){var i,t,r,u=n.index;for(this.extraFields=this.extraFields||{};n.index<u+this.extraFieldsLength;)i=n.readInt(2),t=n.readInt(2),r=n.readString(t),this.extraFields[i]={id:i,length:t,value:r}},handleUTF8:function(){var t,n;this.useUTF8()?(this.fileName=r.utf8decode(this.fileName),this.fileComment=r.utf8decode(this.fileComment)):(t=this.findExtraFieldUnicodePath(),null!==t&&(this.fileName=t),n=this.findExtraFieldUnicodeComment(),null!==n&&(this.fileComment=n))},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789],n;return t?(n=new u(t.value),1!==n.readInt(1)?null:r.crc32(this.fileName)!==n.readInt(4)?null:r.utf8decode(n.readString(t.length-5))):null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461],n;return t?(n=new u(t.value),1!==n.readInt(1)?null:r.crc32(this.fileComment)!==n.readInt(4)?null:r.utf8decode(n.readString(t.length-5))):null}},t.exports=f},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(n,t){"use strict";var f=n("./lib/utils/common").assign,u=n("./lib/deflate"),e=n("./lib/inflate"),r=n("./lib/zlib/constants"),i={};f(i,u,e,r),t.exports=i},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(n,t,i){"use strict";function s(n,t){var i=new u(t);if(i.push(n,!0),i.err)throw i.msg;return i.result}function p(n,t){return t=t||{},t.raw=!0,s(n,t)}function w(n,t){return t=t||{},t.gzip=!0,s(n,t)}var e=n("./zlib/deflate.js"),r=n("./utils/common"),c=n("./utils/strings"),a=n("./zlib/messages"),k=n("./zlib/zstream"),b=0,o=4,f=0,h=1,v=-1,y=0,l=8,u=function(n){var t,i;if(this.options=r.assign({level:v,method:l,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},n||{}),t=this.options,t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0,i=e.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy),i!==f)throw new Error(a[i]);t.header&&e.deflateSetHeader(this.strm,t.header)};u.prototype.push=function(n,t){var u,s,i=this.strm,l=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:t===!0?o:b,i.input="string"==typeof n?c.string2buf(n):n,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new r.Buf8(l),i.next_out=0,i.avail_out=l),u=e.deflate(i,s),u!==h&&u!==f)return this.onEnd(u),this.ended=!0,!1;(0===i.avail_out||0===i.avail_in&&s===o)&&this.onData("string"===this.options.to?c.buf2binstring(r.shrinkBuf(i.output,i.next_out)):r.shrinkBuf(i.output,i.next_out))}while((i.avail_in>0||0===i.avail_out)&&u!==h);return s===o?(u=e.deflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===f):!0},u.prototype.onData=function(n){this.chunks.push(n)},u.prototype.onEnd=function(n){n===f&&(this.result="string"===this.options.to?this.chunks.join(""):r.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg},i.Deflate=u,i.deflate=s,i.deflateRaw=p,i.gzip=w},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(n,t,i){"use strict";function o(n,t){var i=new f(t);if(i.push(n,!0),i.err)throw i.msg;return i.result}function l(n,t){return t=t||{},t.raw=!0,o(n,t)}var e=n("./zlib/inflate.js"),u=n("./utils/common"),s=n("./utils/strings"),r=n("./zlib/constants"),c=n("./zlib/messages"),a=n("./zlib/zstream"),h=n("./zlib/gzheader"),f=function(n){var t,i;if(this.options=u.assign({chunkSize:16384,windowBits:0,to:""},n||{}),t=this.options,t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||n&&n.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0,i=e.inflateInit2(this.strm,t.windowBits),i!==r.Z_OK)throw new Error(c[i]);this.header=new h,e.inflateGetHeader(this.strm,this.header)};f.prototype.push=function(n,t){var f,h,c,o,a,i=this.strm,l=this.options.chunkSize;if(this.ended)return!1;h=t===~~t?t:t===!0?r.Z_FINISH:r.Z_NO_FLUSH,i.input="string"==typeof n?s.binstring2buf(n):n,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new u.Buf8(l),i.next_out=0,i.avail_out=l),f=e.inflate(i,r.Z_NO_FLUSH),f!==r.Z_STREAM_END&&f!==r.Z_OK)return this.onEnd(f),this.ended=!0,!1;i.next_out&&(0===i.avail_out||f===r.Z_STREAM_END||0===i.avail_in&&h===r.Z_FINISH)&&("string"===this.options.to?(c=s.utf8border(i.output,i.next_out),o=i.next_out-c,a=s.buf2string(i.output,c),i.next_out=o,i.avail_out=l-o,o&&u.arraySet(i.output,i.output,c,o,0),this.onData(a)):this.onData(u.shrinkBuf(i.output,i.next_out)))}while(i.avail_in>0&&f!==r.Z_STREAM_END);return f===r.Z_STREAM_END&&(h=r.Z_FINISH),h===r.Z_FINISH?(f=e.inflateEnd(this.strm),this.onEnd(f),this.ended=!0,f===r.Z_OK):!0},f.prototype.onData=function(n){this.chunks.push(n)},f.prototype.onEnd=function(n){n===r.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):u.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg},i.Inflate=f,i.inflate=o,i.inflateRaw=l,i.ungzip=o},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(n,t,i){"use strict";var f="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array,u,r;i.assign=function(n){for(var t,i,r=Array.prototype.slice.call(arguments,1);r.length;)if(t=r.shift(),t){if("object"!=typeof t)throw new TypeError(t+"must be non-object");for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i])}return n},i.shrinkBuf=function(n,t){return n.length===t?n:n.subarray?n.subarray(0,t):(n.length=t,n)},u={arraySet:function(n,t,i,r,u){if(t.subarray&&n.subarray)return void n.set(t.subarray(i,i+r),u);for(var f=0;r>f;f++)n[u+f]=t[i+f]},flattenChunks:function(n){for(var e,r,u,f=0,t=0,i=n.length;i>t;t++)f+=n[t].length;for(u=new Uint8Array(f),e=0,t=0,i=n.length;i>t;t++)r=n[t],u.set(r,e),e+=r.length;return u}},r={arraySet:function(n,t,i,r,u){for(var f=0;r>f;f++)n[u+f]=t[i+f]},flattenChunks:function(n){return[].concat.apply([],n)}},i.setTyped=function(n){n?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,u)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,r))},i.setTyped(f)},{}],28:[function(n,t,i){"use strict";function e(n,t){if(65537>t&&(n.subarray&&s||!n.subarray&&o))return String.fromCharCode.apply(null,f.shrinkBuf(n,t));for(var r="",i=0;t>i;i++)r+=String.fromCharCode(n[i]);return r}var f=n("./common"),o=!0,s=!0,u,r;try{String.fromCharCode.apply(null,[0])}catch(h){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(h){s=!1}for(u=new f.Buf8(256),r=0;256>r;r++)u[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;u[254]=u[254]=1,i.string2buf=function(n){for(var r,t,e,u,s=n.length,o=0,i=0;s>i;i++)t=n.charCodeAt(i),55296==(64512&t)&&s>i+1&&(e=n.charCodeAt(i+1),56320==(64512&e)&&(t=65536+(t-55296<<10)+(e-56320),i++)),o+=128>t?1:2048>t?2:65536>t?3:4;for(r=new f.Buf8(o),u=0,i=0;o>u;i++)t=n.charCodeAt(i),55296==(64512&t)&&s>i+1&&(e=n.charCodeAt(i+1),56320==(64512&e)&&(t=65536+(t-55296<<10)+(e-56320),i++)),128>t?r[u++]=t:2048>t?(r[u++]=192|t>>>6,r[u++]=128|63&t):65536>t?(r[u++]=224|t>>>12,r[u++]=128|t>>>6&63,r[u++]=128|63&t):(r[u++]=240|t>>>18,r[u++]=128|t>>>12&63,r[u++]=128|t>>>6&63,r[u++]=128|63&t);return r},i.buf2binstring=function(n){return e(n,n.length)},i.binstring2buf=function(n){for(var i=new f.Buf8(n.length),t=0,r=i.length;r>t;t++)i[t]=n.charCodeAt(t);return i},i.buf2string=function(n,t){for(var i,r,h=t||n.length,o=new Array(2*h),f=0,s=0;h>s;)if(i=n[s++],128>i)o[f++]=i;else if(r=u[i],r>4)o[f++]=65533,s+=r-1;else{for(i&=2===r?31:3===r?15:7;r>1&&h>s;)i=i<<6|63&n[s++],r--;r>1?o[f++]=65533:65536>i?o[f++]=i:(i-=65536,o[f++]=55296|i>>10&1023,o[f++]=56320|1023&i)}return e(o,f)},i.utf8border=function(n,t){var i;for(t=t||n.length,t>n.length&&(t=n.length),i=t-1;i>=0&&128==(192&n[i]);)i--;return 0>i?t:0===i?t:i+u[n[i]]>t?i:t}},{"./common":27}],29:[function(n,t){"use strict";function i(n,t,i,r){for(var u=65535&n|0,f=n>>>16&65535|0,e=0;0!==i;){e=i>2e3?2e3:i,i-=e;do u=u+t[r++]|0,f=f+u|0;while(--e);u%=65521,f%=65521}return u|f<<16|0}t.exports=i},{}],30:[function(n,t){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(n,t){"use strict";function u(){for(var n,i,r=[],t=0;256>t;t++){for(n=t,i=0;8>i;i++)n=1&n?3988292384^n>>>1:n>>>1;r[t]=n}return r}function r(n,t,r,u){var e=i,o=u+r,f;for(n=-1^n,f=u;o>f;f++)n=n>>>8^e[255&(n^t[f])];return-1^n}var i=u();t.exports=r},{}],32:[function(n,t,i){"use strict";function b(n,t){return n.msg=ir[t],t}function ni(n){return(n<<1)-(n>4?9:0)}function d(n){for(var t=n.length;--t>=0;)n[t]=0}function v(n){var i=n.state,t=i.pending;t>n.avail_out&&(t=n.avail_out),0!==t&&(o.arraySet(n.output,i.pending_buf,i.pending_out,t,n.next_out),n.next_out+=t,i.pending_out+=t,n.total_out+=t,n.avail_out-=t,i.pending-=t,0===i.pending&&(i.pending_out=0))}function e(n,t){s._tr_flush_block(n,n.block_start>=0?n.block_start:-1,n.strstart-n.block_start,t),n.block_start=n.strstart,v(n.strm)}function r(n,t){n.pending_buf[n.pending++]=t}function et(n,t){n.pending_buf[n.pending++]=t>>>8&255,n.pending_buf[n.pending++]=255&t}function tr(n,t,i,r){var u=n.avail_in;return u>r&&(u=r),0===u?0:(n.avail_in-=u,o.arraySet(t,n.input,n.next_in,u,i),1===n.state.wrap?n.adler=nr(n.adler,t,u,i):2===n.state.wrap&&(n.adler=p(n.adler,t,u,i)),n.next_in+=u,n.total_in+=u,u)}function kt(n,t){var u,e,l=n.max_chain_length,r=n.strstart,f=n.prev_length,s=n.nice_match,v=n.strstart>n.w_size-h?n.strstart-(n.w_size-h):0,i=n.window,p=n.w_mask,w=n.prev,o=n.strstart+y,c=i[r+f-1],a=i[r+f];n.prev_length>=n.good_match&&(l>>=2),s>n.lookahead&&(s=n.lookahead);do if(u=t,i[u+f]===a&&i[u+f-1]===c&&i[u]===i[r]&&i[++u]===i[r+1]){r+=2,u++;do;while(i[++r]===i[++u]&&i[++r]===i[++u]&&i[++r]===i[++u]&&i[++r]===i[++u]&&i[++r]===i[++u]&&i[++r]===i[++u]&&i[++r]===i[++u]&&i[++r]===i[++u]&&o>r);if(e=y-(o-r),r=o-y,e>f){if(n.match_start=t,f=e,e>=s)break;c=i[r+f-1],a=i[r+f]}}while((t=w[t&p])>v&&0!=--l);return f<=n.lookahead?f:n.lookahead}function ot(n){var e,i,f,s,r,t=n.w_size;do{if(s=n.window_size-n.lookahead-n.strstart,n.strstart>=t+(t-h)){o.arraySet(n.window,n.window,t,t,0),n.match_start-=t,n.strstart-=t,n.block_start-=t,i=n.hash_size,e=i;do f=n.head[--e],n.head[e]=f>=t?f-t:0;while(--i);i=t,e=i;do f=n.prev[--e],n.prev[e]=f>=t?f-t:0;while(--i);s+=t}if(0===n.strm.avail_in)break;if(i=tr(n.strm,n.window,n.strstart+n.lookahead,s),n.lookahead+=i,n.lookahead+n.insert>=u)for(r=n.strstart-n.insert,n.ins_h=n.window[r],n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+1])&n.hash_mask;n.insert&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+u-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,n.insert--,!(n.lookahead+n.insert<u)););}while(n.lookahead<h&&0!==n.strm.avail_in)}function ci(n,t){var r=65535,i;for(r>n.pending_buf_size-5&&(r=n.pending_buf_size-5);;){if(n.lookahead<=1){if(ot(n),0===n.lookahead&&t===g)return f;if(0===n.lookahead)break}if((n.strstart+=n.lookahead,n.lookahead=0,i=n.block_start+r,(0===n.strstart||n.strstart>=i)&&(n.lookahead=n.strstart-i,n.strstart=i,e(n,!1),0===n.strm.avail_out))||n.strstart-n.block_start>=n.w_size-h&&(e(n,!1),0===n.strm.avail_out))return f}return n.insert=0,t===w?(e(n,!0),0===n.strm.avail_out?k:it):n.strstart>n.block_start&&(e(n,!1),0===n.strm.avail_out)?f:f}function wt(n,t){for(var i,r;;){if(n.lookahead<h){if(ot(n),n.lookahead<h&&t===g)return f;if(0===n.lookahead)break}if(i=0,n.lookahead>=u&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+u-1])&n.hash_mask,i=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),0!==i&&n.strstart-i<=n.w_size-h&&(n.match_length=kt(n,i)),n.match_length>=u)if(r=s._tr_tally(n,n.strstart-n.match_start,n.match_length-u),n.lookahead-=n.match_length,n.match_length<=n.max_lazy_match&&n.lookahead>=u){n.match_length--;do n.strstart++,n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+u-1])&n.hash_mask,i=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart;while(0!=--n.match_length);n.strstart++}else n.strstart+=n.match_length,n.match_length=0,n.ins_h=n.window[n.strstart],n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+1])&n.hash_mask;else r=s._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++;if(r&&(e(n,!1),0===n.strm.avail_out))return f}return n.insert=n.strstart<u-1?n.strstart:u-1,t===w?(e(n,!0),0===n.strm.avail_out?k:it):n.last_lit&&(e(n,!1),0===n.strm.avail_out)?f:ft}function rt(n,t){for(var i,r,o;;){if(n.lookahead<h){if(ot(n),n.lookahead<h&&t===g)return f;if(0===n.lookahead)break}if(i=0,n.lookahead>=u&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+u-1])&n.hash_mask,i=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart),n.prev_length=n.match_length,n.prev_match=n.match_start,n.match_length=u-1,0!==i&&n.prev_length<n.max_lazy_match&&n.strstart-i<=n.w_size-h&&(n.match_length=kt(n,i),n.match_length<=5&&(n.strategy===oi||n.match_length===u&&n.strstart-n.match_start>4096)&&(n.match_length=u-1)),n.prev_length>=u&&n.match_length<=n.prev_length){o=n.strstart+n.lookahead-u,r=s._tr_tally(n,n.strstart-1-n.prev_match,n.prev_length-u),n.lookahead-=n.prev_length-1,n.prev_length-=2;do++n.strstart<=o&&(n.ins_h=(n.ins_h<<n.hash_shift^n.window[n.strstart+u-1])&n.hash_mask,i=n.prev[n.strstart&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=n.strstart);while(0!=--n.prev_length);if(n.match_available=0,n.match_length=u-1,n.strstart++,r&&(e(n,!1),0===n.strm.avail_out))return f}else if(n.match_available){if(r=s._tr_tally(n,0,n.window[n.strstart-1]),r&&e(n,!1),n.strstart++,n.lookahead--,0===n.strm.avail_out)return f}else n.match_available=1,n.strstart++,n.lookahead--}return n.match_available&&(r=s._tr_tally(n,0,n.window[n.strstart-1]),n.match_available=0),n.insert=n.strstart<u-1?n.strstart:u-1,t===w?(e(n,!0),0===n.strm.avail_out?k:it):n.last_lit&&(e(n,!1),0===n.strm.avail_out)?f:ft}function ai(n,t){for(var h,o,i,c,r=n.window;;){if(n.lookahead<=y){if(ot(n),n.lookahead<=y&&t===g)return f;if(0===n.lookahead)break}if(n.match_length=0,n.lookahead>=u&&n.strstart>0&&(i=n.strstart-1,o=r[i],o===r[++i]&&o===r[++i]&&o===r[++i])){c=n.strstart+y;do;while(o===r[++i]&&o===r[++i]&&o===r[++i]&&o===r[++i]&&o===r[++i]&&o===r[++i]&&o===r[++i]&&o===r[++i]&&c>i);n.match_length=y-(c-i),n.match_length>n.lookahead&&(n.match_length=n.lookahead)}if(n.match_length>=u?(h=s._tr_tally(n,1,n.match_length-u),n.lookahead-=n.match_length,n.strstart+=n.match_length,n.match_length=0):(h=s._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++),h&&(e(n,!1),0===n.strm.avail_out))return f}return n.insert=0,t===w?(e(n,!0),0===n.strm.avail_out?k:it):n.last_lit&&(e(n,!1),0===n.strm.avail_out)?f:ft}function li(n,t){for(var i;;){if(0===n.lookahead&&(ot(n),0===n.lookahead)){if(t===g)return f;break}if(n.match_length=0,i=s._tr_tally(n,0,n.window[n.strstart]),n.lookahead--,n.strstart++,i&&(e(n,!1),0===n.strm.avail_out))return f}return n.insert=0,t===w?(e(n,!0),0===n.strm.avail_out?k:it):n.last_lit&&(e(n,!1),0===n.strm.avail_out)?f:ft}function hi(n){n.window_size=2*n.w_size,d(n.head),n.max_lazy_match=tt[n.level].max_lazy,n.good_match=tt[n.level].good_length,n.nice_match=tt[n.level].nice_length,n.max_chain_length=tt[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=u-1,n.match_available=0,n.ins_h=0}function fi(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=at,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*ui),this.dyn_dtree=new o.Buf16(2*(2*pi+1)),this.bl_tree=new o.Buf16(2*(2*ei+1)),d(this.dyn_ltree),d(this.dyn_dtree),d(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(si+1),this.heap=new o.Buf16(2*yt+1),d(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*yt+1),d(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function gt(n){var t;return n&&n.state?(n.total_in=n.total_out=0,n.data_type=vr,t=n.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?pt:nt,n.adler=2===t.wrap?0:1,t.last_flush=g,s._tr_init(t),a):b(n,c)}function dt(n){var t=gt(n);return t===a&&hi(n.state),t}function lr(n,t){return n&&n.state?2!==n.state.wrap?c:(n.state.gzhead=t,a):c}function ri(n,t,i,r,f,e){var h,s;return n?(h=1,t===di&&(t=6),0>r?(h=0,r=-r):r>15&&(h=2,r-=16),1>f||f>er||i!==at||8>r||r>15||0>t||t>9||0>e||e>ar)?b(n,c):(8===r&&(r=9),s=new fi,n.state=s,s.strm=n,s.wrap=h,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=f+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+u-1)/u),s.window=new o.Buf8(2*s.w_size),s.head=new o.Buf16(s.hash_size),s.prev=new o.Buf16(s.w_size),s.lit_bufsize=1<<f+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new o.Buf8(s.pending_buf_size),s.d_buf=s.lit_bufsize>>1,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=e,s.method=i,dt(n)):c}function ki(n,t){return ri(n,t,at,fr,or,yr)}function wi(n,t){var y,i,u,e,h,l,o;if(!n||!n.state||t>ii||0>t)return n?b(n,c):c;if(i=n.state,!n.output||!n.input&&0!==n.avail_in||i.status===ut&&t!==w)return b(n,0===n.avail_out?bt:c);if((i.strm=n,y=i.last_flush,i.last_flush=t,i.status===pt)&&(2===i.wrap?(n.adler=0,r(i,31),r(i,139),r(i,8),i.gzhead?(r(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),r(i,255&i.gzhead.time),r(i,i.gzhead.time>>8&255),r(i,i.gzhead.time>>16&255),r(i,i.gzhead.time>>24&255),r(i,9===i.level?2:i.strategy>=lt||i.level<2?4:0),r(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(r(i,255&i.gzhead.extra.length),r(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(n.adler=p(n.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=vt):(r(i,0),r(i,0),r(i,0),r(i,0),r(i,0),r(i,9===i.level?2:i.strategy>=lt||i.level<2?4:0),r(i,yi),i.status=nt)):(h=at+(i.w_bits-8<<4)<<8,l=-1,l=i.strategy>=lt||i.level<2?0:i.level<6?1:6===i.level?2:3,h|=l<<6,0!==i.strstart&&(h|=vi),h+=31-h%31,i.status=nt,et(i,h),0!==i.strstart&&(et(i,n.adler>>>16),et(i,65535&n.adler)),n.adler=1)),i.status===vt)if(i.gzhead.extra){for(u=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>u&&(n.adler=p(n.adler,i.pending_buf,i.pending-u,u)),v(n),u=i.pending,i.pending!==i.pending_buf_size));)r(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>u&&(n.adler=p(n.adler,i.pending_buf,i.pending-u,u)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=st)}else i.status=st;if(i.status===st)if(i.gzhead.name){u=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>u&&(n.adler=p(n.adler,i.pending_buf,i.pending-u,u)),v(n),u=i.pending,i.pending===i.pending_buf_size)){e=1;break}e=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,r(i,e)}while(0!==e);i.gzhead.hcrc&&i.pending>u&&(n.adler=p(n.adler,i.pending_buf,i.pending-u,u)),0===e&&(i.gzindex=0,i.status=ht)}else i.status=ht;if(i.status===ht)if(i.gzhead.comment){u=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>u&&(n.adler=p(n.adler,i.pending_buf,i.pending-u,u)),v(n),u=i.pending,i.pending===i.pending_buf_size)){e=1;break}e=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,r(i,e)}while(0!==e);i.gzhead.hcrc&&i.pending>u&&(n.adler=p(n.adler,i.pending_buf,i.pending-u,u)),0===e&&(i.status=ct)}else i.status=ct;if(i.status===ct&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&v(n),i.pending+2<=i.pending_buf_size&&(r(i,255&n.adler),r(i,n.adler>>8&255),n.adler=0,i.status=nt)):i.status=nt),0!==i.pending){if(v(n),0===n.avail_out)return i.last_flush=-1,a}else if(0===n.avail_in&&ni(t)<=ni(y)&&t!==w)return b(n,bt);if(i.status===ut&&0!==n.avail_in)return b(n,bt);if(0!==n.avail_in||0!==i.lookahead||t!==g&&i.status!==ut){if(o=i.strategy===lt?li(i,t):i.strategy===cr?ai(i,t):tt[i.level].func(i,t),(o===k||o===it)&&(i.status=ut),o===f||o===k)return 0===n.avail_out&&(i.last_flush=-1),a;if(o===ft&&(t===rr?s._tr_align(i):t!==ii&&(s._tr_stored_block(i,0,0,!1),t===bi&&(d(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),v(n),0===n.avail_out))return i.last_flush=-1,a}return t!==w?a:i.wrap<=0?ti:(2===i.wrap?(r(i,255&n.adler),r(i,n.adler>>8&255),r(i,n.adler>>16&255),r(i,n.adler>>24&255),r(i,255&n.total_in),r(i,n.total_in>>8&255),r(i,n.total_in>>16&255),r(i,n.total_in>>24&255)):(et(i,n.adler>>>16),et(i,65535&n.adler)),v(n),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?a:ti)}function ur(n){var t;return n&&n.state?(t=n.state.status,t!==pt&&t!==vt&&t!==st&&t!==ht&&t!==ct&&t!==nt&&t!==ut?b(n,c):(n.state=null,t===nt?b(n,gi):a)):c}var tt,o=n("../utils/common"),s=n("./trees"),nr=n("./adler32"),p=n("./crc32"),ir=n("./messages"),g=0,rr=1,bi=3,w=4,ii=5,a=0,ti=1,c=-2,gi=-3,bt=-5,di=-1,oi=1,lt=2,cr=3,ar=4,yr=0,vr=2,at=8,er=9,fr=15,or=8,hr=29,sr=256,yt=sr+1+hr,pi=30,ei=19,ui=2*yt+1,si=15,u=3,y=258,h=y+u+1,vi=32,pt=42,vt=69,st=73,ht=91,ct=103,nt=113,ut=666,f=1,ft=2,k=3,it=4,yi=3,l=function(n,t,i,r,u){this.good_length=n,this.max_lazy=t,this.nice_length=i,this.max_chain=r,this.func=u};tt=[new l(0,0,0,0,ci),new l(4,4,8,4,wt),new l(4,5,16,8,wt),new l(4,6,32,32,wt),new l(4,4,16,16,rt),new l(8,16,32,32,rt),new l(8,16,128,128,rt),new l(8,32,128,256,rt),new l(32,128,258,1024,rt),new l(32,258,258,4096,rt)],i.deflateInit=ki,i.deflateInit2=ri,i.deflateReset=dt,i.deflateResetKeep=gt,i.deflateSetHeader=lr,i.deflate=wi,i.deflateEnd=ur,i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(n,t){"use strict";function i(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=i},{}],34:[function(n,t){"use strict";var i=30,r=12;t.exports=function(n,t){var l,a,d,f,rt,g,ut,tt,ot,b,k,c,e,it,nt,ft,et,v,u,h,p,s,y,w,o;l=n.state,a=n.next_in,w=n.input,d=a+(n.avail_in-5),f=n.next_out,o=n.output,rt=f-(t-n.avail_out),g=f+(n.avail_out-257),ut=l.dmax,tt=l.wsize,ot=l.whave,b=l.wnext,k=l.window,c=l.hold,e=l.bits,it=l.lencode,nt=l.distcode,ft=(1<<l.lenbits)-1,et=(1<<l.distbits)-1;n:do{15>e&&(c+=w[a++]<<e,e+=8,c+=w[a++]<<e,e+=8),v=it[c&ft];t:for(;;){if(u=v>>>24,c>>>=u,e-=u,u=v>>>16&255,0===u)o[f++]=65535&v;else{if(!(16&u)){if(0==(64&u)){v=it[(65535&v)+(c&(1<<u)-1)];continue t}if(32&u){l.mode=r;break n}n.msg="invalid literal/length code",l.mode=i;break n}h=65535&v,u&=15,u&&(u>e&&(c+=w[a++]<<e,e+=8),h+=c&(1<<u)-1,c>>>=u,e-=u),15>e&&(c+=w[a++]<<e,e+=8,c+=w[a++]<<e,e+=8),v=nt[c&et];i:for(;;){if(u=v>>>24,c>>>=u,e-=u,u=v>>>16&255,!(16&u)){if(0==(64&u)){v=nt[(65535&v)+(c&(1<<u)-1)];continue i}n.msg="invalid distance code",l.mode=i;break n}if(p=65535&v,u&=15,u>e&&(c+=w[a++]<<e,e+=8,u>e&&(c+=w[a++]<<e,e+=8)),p+=c&(1<<u)-1,p>ut){n.msg="invalid distance too far back",l.mode=i;break n}if(c>>>=u,e-=u,u=f-rt,p>u){if(u=p-u,u>ot&&l.sane){n.msg="invalid distance too far back",l.mode=i;break n}if(s=0,y=k,0===b){if(s+=tt-u,h>u){h-=u;do o[f++]=k[s++];while(--u);s=f-p,y=o}}else if(u>b){if(s+=tt+b-u,u-=b,h>u){h-=u;do o[f++]=k[s++];while(--u);if(s=0,h>b){u=b,h-=u;do o[f++]=k[s++];while(--u);s=f-p,y=o}}}else if(s+=b-u,h>u){h-=u;do o[f++]=k[s++];while(--u);s=f-p,y=o}for(;h>2;)o[f++]=y[s++],o[f++]=y[s++],o[f++]=y[s++],h-=3;h&&(o[f++]=y[s++],h>1&&(o[f++]=y[s++]))}else{s=f-p;do o[f++]=o[s++],o[f++]=o[s++],o[f++]=o[s++],h-=3;while(h>2);h&&(o[f++]=o[s++],h>1&&(o[f++]=o[s++]))}break}}break}}while(d>a&&g>f);h=e>>3,a-=h,e-=h<<3,c&=(1<<e)-1,n.next_in=a,n.next_out=f,n.avail_in=d>a?5+(d-a):5-(a-d),n.avail_out=g>f?257+(g-f):257-(f-g),l.hold=c,l.bits=e}},{}],35:[function(n,t,i){"use strict";function ii(n){return(n>>>24&255)+(n>>>8&65280)+((65280&n)<<8)+((255&n)<<24)}function vi(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new u.Buf16(320),this.work=new u.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ui(n){var t;return n&&n.state?(t=n.state,n.total_in=n.total_out=t.total=0,n.msg="",t.wrap&&(n.adler=1&t.wrap),t.mode=li,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new u.Buf32(ki),t.distcode=t.distdyn=new u.Buf32(wi),t.sane=1,t.back=-1,s):f}function ri(n){var t;return n&&n.state?(t=n.state,t.wsize=0,t.whave=0,t.wnext=0,ui(n)):f}function ei(n,t){var r,i;return n&&n.state?(i=n.state,0>t?(r=0,t=-t):(r=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||t>15)?f:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=r,i.wbits=t,ri(n))):f}function fi(n,t){var r,i;return n?(i=new vi,n.state=i,i.window=null,r=ei(n,t),r!==s&&(n.state=null),r):f}function di(n){return fi(n,pi)}function er(n){if(ut){var t;for(p=new u.Buf32(512),w=new u.Buf32(32),t=0;144>t;)n.lens[t++]=8;for(;256>t;)n.lens[t++]=9;for(;280>t;)n.lens[t++]=7;for(;288>t;)n.lens[t++]=8;for(h(dt,n.lens,0,288,p,0,n.work,{bits:9}),t=0;32>t;)n.lens[t++]=5;h(ti,n.lens,0,32,w,0,n.work,{bits:5}),ut=!1}n.lencode=p,n.lenbits=9,n.distcode=w,n.distbits=5}function fr(n,t,i,r){var e,f=n.state;return null===f.window&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new u.Buf8(f.wsize)),r>=f.wsize?(u.arraySet(f.window,t,i-f.wsize,f.wsize,0),f.wnext=0,f.whave=f.wsize):(e=f.wsize-f.wnext,e>r&&(e=r),u.arraySet(f.window,t,i-r,e,f.wnext),r-=e,r?(u.arraySet(f.window,t,i-r,r,0),f.wnext=r,f.whave=f.wsize):(f.wnext+=e,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=e))),0}function or(n,t){var i,fi,ar,ui,cr,ut,pi,w,p,yr,ai,ri,pr,kr,ei,ki,or,di,br,wr,yi,hr,vr,lr,vi=0,wi=new u.Buf8(4),dr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!n||!n.state||!n.output||!n.input&&0!==n.avail_in)return f;i=n.state,i.mode===o&&(i.mode=v),cr=n.next_out,ar=n.output,pi=n.avail_out,ui=n.next_in,fi=n.input,ut=n.avail_in,w=i.hold,p=i.bits,yr=ut,ai=pi,hr=s;n:for(;;)switch(i.mode){case li:if(0===i.wrap){i.mode=v;break}for(;16>p;){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}if(2&i.wrap&&35615===w){i.check=0,wi[0]=255&w,wi[1]=w>>>8&255,i.check=e(i.check,wi,2,0),w=0,p=0,i.mode=oi;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&w)<<8)+(w>>8))%31){n.msg="incorrect header check",i.mode=r;break}if((15&w)!==ci){n.msg="unknown compression method",i.mode=r;break}if(w>>>=4,p-=4,yi=(15&w)+8,0===i.wbits)i.wbits=yi;else if(yi>i.wbits){n.msg="invalid window size",i.mode=r;break}i.dmax=1<<yi,n.adler=i.check=1,i.mode=512&w?tt:o,w=0,p=0;break;case oi:for(;16>p;){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}if(i.flags=w,(255&i.flags)!==ci){n.msg="unknown compression method",i.mode=r;break}if(57344&i.flags){n.msg="unknown header flags set",i.mode=r;break}i.head&&(i.head.text=w>>8&1),512&i.flags&&(wi[0]=255&w,wi[1]=w>>>8&255,i.check=e(i.check,wi,2,0)),w=0,p=0,i.mode=si;case si:for(;32>p;){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}i.head&&(i.head.time=w),512&i.flags&&(wi[0]=255&w,wi[1]=w>>>8&255,wi[2]=w>>>16&255,wi[3]=w>>>24&255,i.check=e(i.check,wi,4,0)),w=0,p=0,i.mode=kt;case kt:for(;16>p;){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}i.head&&(i.head.xflags=255&w,i.head.os=w>>8),512&i.flags&&(wi[0]=255&w,wi[1]=w>>>8&255,i.check=e(i.check,wi,2,0)),w=0,p=0,i.mode=g;case g:if(1024&i.flags){for(;16>p;){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}i.length=w,i.head&&(i.head.extra_len=w),512&i.flags&&(wi[0]=255&w,wi[1]=w>>>8&255,i.check=e(i.check,wi,2,0)),w=0,p=0}else i.head&&(i.head.extra=null);i.mode=d;case d:if(1024&i.flags&&(ri=i.length,ri>ut&&(ri=ut),ri&&(i.head&&(yi=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),u.arraySet(i.head.extra,fi,ui,ri,yi)),512&i.flags&&(i.check=e(i.check,fi,ri,ui)),ut-=ri,ui+=ri,i.length-=ri),i.length))break n;i.length=0,i.mode=k;case k:if(2048&i.flags){if(0===ut)break n;ri=0;do yi=fi[ui+ri++],i.head&&yi&&i.length<65536&&(i.head.name+=String.fromCharCode(yi));while(yi&&ut>ri);if(512&i.flags&&(i.check=e(i.check,fi,ri,ui)),ut-=ri,ui+=ri,yi)break n}else i.head&&(i.head.name=null);i.length=0,i.mode=rt;case rt:if(4096&i.flags){if(0===ut)break n;ri=0;do yi=fi[ui+ri++],i.head&&yi&&i.length<65536&&(i.head.comment+=String.fromCharCode(yi));while(yi&&ut>ri);if(512&i.flags&&(i.check=e(i.check,fi,ri,ui)),ut-=ri,ui+=ri,yi)break n}else i.head&&(i.head.comment=null);i.mode=it;case it:if(512&i.flags){for(;16>p;){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}if(w!==(65535&i.check)){n.msg="header crc mismatch",i.mode=r;break}w=0,p=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),n.adler=i.check=0,i.mode=o;break;case tt:for(;32>p;){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}n.adler=i.check=ii(w),w=0,p=0,i.mode=nt;case nt:if(0===i.havedict)return n.next_out=cr,n.avail_out=pi,n.next_in=ui,n.avail_in=ut,i.hold=w,i.bits=p,tr;n.adler=i.check=1,i.mode=o;case o:if(t===ir||t===a)break n;case v:if(i.last){w>>>=7&p,p-=7&p,i.mode=b;break}for(;3>p;){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}switch(i.last=1&w,w>>>=1,p-=1,3&w){case 0:i.mode=ft;break;case 1:if(er(i),i.mode=l,t===a){w>>>=2,p-=2;break n}break;case 2:i.mode=vt;break;case 3:n.msg="invalid block type",i.mode=r}w>>>=2,p-=2;break;case ft:for(w>>>=7&p,p-=7&p;32>p;){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}if((65535&w)!=(w>>>16^65535)){n.msg="invalid stored block lengths",i.mode=r;break}if(i.length=65535&w,w=0,p=0,i.mode=y,t===a)break n;case y:i.mode=yt;case yt:if(ri=i.length){if(ri>ut&&(ri=ut),ri>pi&&(ri=pi),0===ri)break n;u.arraySet(ar,fi,ui,ri,cr),ut-=ri,ui+=ri,pi-=ri,cr+=ri,i.length-=ri;break}i.mode=o;break;case vt:for(;14>p;){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}if(i.nlen=(31&w)+257,w>>>=5,p-=5,i.ndist=(31&w)+1,w>>>=5,p-=5,i.ncode=(15&w)+4,w>>>=4,p-=4,i.nlen>286||i.ndist>30){n.msg="too many length or distance symbols",i.mode=r;break}i.have=0,i.mode=at;case at:for(;i.have<i.ncode;){for(;3>p;){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}i.lens[dr[i.have++]]=7&w,w>>>=3,p-=3}for(;i.have<19;)i.lens[dr[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,vr={bits:i.lenbits},hr=h(nr,i.lens,0,19,i.lencode,0,i.work,vr),i.lenbits=vr.bits,hr){n.msg="invalid code lengths set",i.mode=r;break}i.have=0,i.mode=bt;case bt:for(;i.have<i.nlen+i.ndist;){for(;vi=i.lencode[w&(1<<i.lenbits)-1],ei=vi>>>24,ki=vi>>>16&255,or=65535&vi,!(p>=ei);){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}if(16>or)w>>>=ei,p-=ei,i.lens[i.have++]=or;else{if(16===or){for(lr=ei+2;lr>p;){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}if(w>>>=ei,p-=ei,0===i.have){n.msg="invalid bit length repeat",i.mode=r;break}yi=i.lens[i.have-1],ri=3+(3&w),w>>>=2,p-=2}else if(17===or){for(lr=ei+3;lr>p;){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}w>>>=ei,p-=ei,yi=0,ri=3+(7&w),w>>>=3,p-=3}else{for(lr=ei+7;lr>p;){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}w>>>=ei,p-=ei,yi=0,ri=11+(127&w),w>>>=7,p-=7}if(i.have+ri>i.nlen+i.ndist){n.msg="invalid bit length repeat",i.mode=r;break}for(;ri--;)i.lens[i.have++]=yi}}if(i.mode===r)break;if(0===i.lens[256]){n.msg="invalid code -- missing end-of-block",i.mode=r;break}if(i.lenbits=9,vr={bits:i.lenbits},hr=h(dt,i.lens,0,i.nlen,i.lencode,0,i.work,vr),i.lenbits=vr.bits,hr){n.msg="invalid literal/lengths set",i.mode=r;break}if(i.distbits=6,i.distcode=i.distdyn,vr={bits:i.distbits},hr=h(ti,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,vr),i.distbits=vr.bits,hr){n.msg="invalid distances set",i.mode=r;break}if(i.mode=l,t===a)break n;case l:i.mode=c;case c:if(ut>=6&&pi>=258){n.next_out=cr,n.avail_out=pi,n.next_in=ui,n.avail_in=ut,i.hold=w,i.bits=p,ur(n,ai),cr=n.next_out,ar=n.output,pi=n.avail_out,ui=n.next_in,fi=n.input,ut=n.avail_in,w=i.hold,p=i.bits,i.mode===o&&(i.back=-1);break}for(i.back=0;vi=i.lencode[w&(1<<i.lenbits)-1],ei=vi>>>24,ki=vi>>>16&255,or=65535&vi,!(p>=ei);){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}if(ki&&0==(240&ki)){for(di=ei,br=ki,wr=or;vi=i.lencode[wr+((w&(1<<di+br)-1)>>di)],ei=vi>>>24,ki=vi>>>16&255,or=65535&vi,!(p>=di+ei);){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}w>>>=di,p-=di,i.back+=di}if(w>>>=ei,p-=ei,i.back+=ei,i.length=or,0===ki){i.mode=ct;break}if(32&ki){i.back=-1,i.mode=o;break}if(64&ki){n.msg="invalid literal/length code",i.mode=r;break}i.extra=15&ki,i.mode=st;case st:if(i.extra){for(lr=i.extra;lr>p;){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}i.length+=w&(1<<i.extra)-1,w>>>=i.extra,p-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=ot;case ot:for(;vi=i.distcode[w&(1<<i.distbits)-1],ei=vi>>>24,ki=vi>>>16&255,or=65535&vi,!(p>=ei);){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}if(0==(240&ki)){for(di=ei,br=ki,wr=or;vi=i.distcode[wr+((w&(1<<di+br)-1)>>di)],ei=vi>>>24,ki=vi>>>16&255,or=65535&vi,!(p>=di+ei);){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}w>>>=di,p-=di,i.back+=di}if(w>>>=ei,p-=ei,i.back+=ei,64&ki){n.msg="invalid distance code",i.mode=r;break}i.offset=or,i.extra=15&ki,i.mode=et;case et:if(i.extra){for(lr=i.extra;lr>p;){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}i.offset+=w&(1<<i.extra)-1,w>>>=i.extra,p-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){n.msg="invalid distance too far back",i.mode=r;break}i.mode=lt;case lt:if(0===pi)break n;if(ri=ai-pi,i.offset>ri){if(ri=i.offset-ri,ri>i.whave&&i.sane){n.msg="invalid distance too far back",i.mode=r;break}ri>i.wnext?(ri-=i.wnext,pr=i.wsize-ri):pr=i.wnext-ri,ri>i.length&&(ri=i.length),kr=i.window}else kr=ar,pr=cr-i.offset,ri=i.length;ri>pi&&(ri=pi),pi-=ri,i.length-=ri;do ar[cr++]=kr[pr++];while(--ri);0===i.length&&(i.mode=c);break;case ct:if(0===pi)break n;ar[cr++]=i.length,pi--,i.mode=c;break;case b:if(i.wrap){for(;32>p;){if(0===ut)break n;ut--,w|=fi[ui++]<<p,p+=8}if(ai-=pi,n.total_out+=ai,i.total+=ai,ai&&(n.adler=i.check=i.flags?e(i.check,ar,ai,cr-ai):gt(i.check,ar,ai,cr-ai)),ai=pi,(i.flags?w:ii(w))!==i.check){n.msg="incorrect data check",i.mode=r;break}w=0,p=0}i.mode=ht;case ht:if(i.wrap&&i.flags){for(;32>p;){if(0===ut)break n;ut--,w+=fi[ui++]<<p,p+=8}if(w!==(4294967295&i.total)){n.msg="incorrect length check",i.mode=r;break}w=0,p=0}i.mode=pt;case pt:hr=rr;break n;case r:hr=gi;break n;case wt:return hi;case bi:default:return f}return n.next_out=cr,n.avail_out=pi,n.next_in=ui,n.avail_in=ut,i.hold=w,i.bits=p,(i.wsize||ai!==n.avail_out&&i.mode<r&&(i.mode<b||t!==ni))&&fr(n,n.output,n.next_out,ai-n.avail_out)?(i.mode=wt,hi):(yr-=n.avail_in,ai-=n.avail_out,n.total_in+=yr,n.total_out+=ai,i.total+=ai,i.wrap&&ai&&(n.adler=i.check=i.flags?e(i.check,ar,ai,n.next_out-ai):gt(i.check,ar,ai,n.next_out-ai)),n.data_type=i.bits+(i.last?64:0)+(i.mode===o?128:0)+(i.mode===l||i.mode===y?256:0),(0===yr&&0===ai||t===ni)&&hr===s&&(hr=sr),hr)}function hr(n){if(!n||!n.state)return f;var t=n.state;return t.window&&(t.window=null),n.state=null,s}function ai(n,t){var i;return n&&n.state?(i=n.state,0==(2&i.wrap)?f:(i.head=t,t.done=!1,s)):f}var p,w,u=n("../utils/common"),gt=n("./adler32"),e=n("./crc32"),ur=n("./inffast"),h=n("./inftrees"),nr=0,dt=1,ti=2,ni=4,ir=5,a=6,s=0,rr=1,tr=2,f=-2,gi=-3,hi=-4,sr=-5,ci=8,li=1,oi=2,si=3,kt=4,g=5,d=6,k=7,rt=8,it=9,tt=10,nt=11,o=12,v=13,ft=14,y=15,yt=16,vt=17,at=18,bt=19,l=20,c=21,st=22,ot=23,et=24,lt=25,ct=26,b=27,ht=28,pt=29,r=30,wt=31,bi=32,ki=852,wi=592,yi=15,pi=yi,ut=!0;i.inflateReset=ri,i.inflateReset2=ei,i.inflateResetKeep=ui,i.inflateInit=di,i.inflateInit2=fi,i.inflate=or,i.inflateEnd=hr,i.inflateGetHeader=ai,i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(n,t){"use strict";var e=n("../utils/common"),i=15,o=852,s=592,u=0,r=1,f=2,l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(n,t,v,y,p,w,b,k){for(var st,at,bt,dt,ct,lt,ni,kt,wt,ri=k.bits,d=0,g=0,et=0,nt=0,tt=0,ft=0,rt=0,ut=0,ht=0,it=0,yt=null,ii=0,ot=new e.Buf16(i+1),vt=new e.Buf16(i+1),pt=null,gt=0,ti,d=0;i>=d;d++)ot[d]=0;for(g=0;y>g;g++)ot[t[v+g]]++;for(tt=ri,nt=i;nt>=1&&0===ot[nt];nt--);if(tt>nt&&(tt=nt),0===nt)return p[w++]=20971520,p[w++]=20971520,k.bits=1,0;for(et=1;nt>et&&0===ot[et];et++);for(et>tt&&(tt=et),ut=1,d=1;i>=d;d++)if(ut<<=1,ut-=ot[d],0>ut)return-1;if(ut>0&&(n===u||1!==nt))return-1;for(vt[1]=0,d=1;i>d;d++)vt[d+1]=vt[d]+ot[d];for(g=0;y>g;g++)0!==t[v+g]&&(b[vt[t[v+g]]++]=g);if(n===u?(yt=pt=b,lt=19):n===r?(yt=l,ii-=257,pt=a,gt-=257,lt=256):(yt=h,pt=c,lt=-1),it=0,g=0,d=et,ct=w,ft=tt,rt=0,bt=-1,ht=1<<tt,dt=ht-1,n===r&&ht>o||n===f&&ht>s)return 1;for(ti=0;;){ti++,ni=d-rt,b[g]<lt?(kt=0,wt=b[g]):b[g]>lt?(kt=pt[gt+b[g]],wt=yt[ii+b[g]]):(kt=96,wt=0),st=1<<d-rt,at=1<<ft,et=at;do at-=st,p[ct+(it>>rt)+at]=ni<<24|kt<<16|wt|0;while(0!==at);for(st=1<<d-1;it&st;)st>>=1;if(0!==st?(it&=st-1,it+=st):it=0,g++,0==--ot[d]){if(d===nt)break;d=t[v+b[g]]}if(d>tt&&(it&dt)!==bt){for(0===rt&&(rt=tt),ct+=et,ft=d-rt,ut=1<<ft;nt>ft+rt&&(ut-=ot[ft+rt],!(0>=ut));)ft++,ut<<=1;if(ht+=1<<ft,n===r&&ht>o||n===f&&ht>s)return 1;bt=it&dt,p[bt]=tt<<24|ft<<16|ct-w|0}}return 0!==it&&(p[ct+it]=d-rt<<24|4194304),k.bits=tt,0}},{"../utils/common":27}],37:[function(n,t){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(n,t,i){"use strict";function l(n){for(var t=n.length;--t>=0;)n[t]=0}function ii(n){return 256>n?s[n]:s[256+(n>>>7)]}function p(n,t){n.pending_buf[n.pending++]=255&t,n.pending_buf[n.pending++]=t>>>8&255}function r(n,t,i){n.bi_valid>nt-i?(n.bi_buf|=t<<n.bi_valid&65535,p(n,n.bi_buf),n.bi_buf=t>>nt-n.bi_valid,n.bi_valid+=i-nt):(n.bi_buf|=t<<n.bi_valid&65535,n.bi_valid+=i)}function u(n,t,i){r(n,i[2*t],i[2*t+1])}function ti(n,t){var i=0;do i|=1&n,n>>>=1,i<<=1;while(--t>0);return i>>>1}function ci(n){16===n.bi_valid?(p(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=255&n.bi_buf,n.bi_buf>>=8,n.bi_valid-=8)}function hi(n,t){for(var o,r,f,h,l,u=t.dyn_tree,a=t.max_code,w=t.stat_desc.static_tree,y=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,v=t.stat_desc.extra_base,s=t.stat_desc.max_length,c=0,i=0;e>=i;i++)n.bl_count[i]=0;for(u[2*n.heap[n.heap_max]+1]=0,o=n.heap_max+1;vt>o;o++)r=n.heap[o],i=u[2*u[2*r+1]+1]+1,i>s&&(i=s,c++),u[2*r+1]=i,r>a||(n.bl_count[i]++,h=0,r>=v&&(h=p[r-v]),l=u[2*r],n.opt_len+=l*(i+h),y&&(n.static_len+=l*(w[2*r+1]+h)));if(0!==c){do{for(i=s-1;0===n.bl_count[i];)i--;n.bl_count[i]--,n.bl_count[i+1]+=2,n.bl_count[s]--,c-=2}while(c>0);for(i=s;0!==i;i--)for(r=n.bl_count[i];0!==r;)f=n.heap[--o],f>a||(u[2*f+1]!==i&&(n.opt_len+=(i-u[2*f+1])*u[2*f],u[2*f+1]=i),r--)}}function wt(n,t,i){for(var r,o=new Array(e+1),s=0,f,u=1;e>=u;u++)o[u]=s=s+i[u-1]<<1;for(r=0;t>=r;r++)f=n[2*r+1],0!==f&&(n[2*r]=ti(o[f]++,f))}function ai(){for(var n,l,i,r=new Array(e+1),u=0,t=0;g-1>t;t++)for(b[t]=u,n=0;n<1<<tt[t];n++)o[u++]=t;for(o[u-1]=t,i=0,t=0;16>t;t++)for(y[t]=i,n=0;n<1<<w[t];n++)s[i++]=t;for(i>>=7;c>t;t++)for(y[t]=i<<7,n=0;n<1<<w[t]-7;n++)s[256+i++]=t;for(l=0;e>=l;l++)r[l]=0;for(n=0;143>=n;)f[2*n+1]=8,n++,r[8]++;for(;255>=n;)f[2*n+1]=9,n++,r[9]++;for(;279>=n;)f[2*n+1]=7,n++,r[7]++;for(;287>=n;)f[2*n+1]=8,n++,r[8]++;for(wt(f,a+1,r),n=0;c>n;n++)h[2*n+1]=5,h[2*n]=ti(n,5);ht=new ut(f,tt,v+1,a,e),et=new ut(h,w,0,c,e),st=new ut(new Array(0),vi,0,d,er)}function pt(n){for(var t=0;a>t;t++)n.dyn_ltree[2*t]=0;for(t=0;c>t;t++)n.dyn_dtree[2*t]=0;for(t=0;d>t;t++)n.bl_tree[2*t]=0;n.dyn_ltree[2*k]=1,n.opt_len=n.static_len=0,n.last_lit=n.matches=0}function kt(n){n.bi_valid>8?p(n,n.bi_buf):n.bi_valid>0&&(n.pending_buf[n.pending++]=n.bi_buf),n.bi_buf=0,n.bi_valid=0}function li(n,t,i,r){kt(n),r&&(p(n,i),p(n,~i)),pi.arraySet(n.pending_buf,n.window,t,i,n.pending),n.pending+=i}function dt(n,t,i,r){var f=2*t,u=2*i;return n[f]<n[u]||n[f]===n[u]&&r[t]<=r[i]}function rt(n,t,i){for(var u=n.heap[i],r=i<<1;r<=n.heap_len&&(r<n.heap_len&&dt(t,n.heap[r+1],n.heap[r],n.depth)&&r++,!dt(t,u,n.heap[r],n.depth));)n.heap[i]=n.heap[r],i=r,r<<=1;n.heap[i]=u}function ni(n,t,i){var s,c,f,e,h=0;if(0!==n.last_lit)do s=n.pending_buf[n.d_buf+2*h]<<8|n.pending_buf[n.d_buf+2*h+1],c=n.pending_buf[n.l_buf+h],h++,0===s?u(n,c,t):(f=o[c],u(n,f+v+1,t),e=tt[f],0!==e&&(c-=b[f],r(n,c,e)),s--,f=ii(s),u(n,f,i),e=w[f],0!==e&&(s-=y[f],r(n,s,e)));while(h<n.last_lit);u(n,k,t)}function it(n,t){var i,f,u,r=t.dyn_tree,h=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.elems,e=-1;for(n.heap_len=0,n.heap_max=vt,i=0;o>i;i++)0!==r[2*i]?(n.heap[++n.heap_len]=e=i,n.depth[i]=0):r[2*i+1]=0;for(;n.heap_len<2;)u=n.heap[++n.heap_len]=2>e?++e:0,r[2*u]=1,n.depth[u]=0,n.opt_len--,s&&(n.static_len-=h[2*u+1]);for(t.max_code=e,i=n.heap_len>>1;i>=1;i--)rt(n,r,i);u=o;do i=n.heap[1],n.heap[1]=n.heap[n.heap_len--],rt(n,r,1),f=n.heap[1],n.heap[--n.heap_max]=i,n.heap[--n.heap_max]=f,r[2*u]=r[2*i]+r[2*f],n.depth[u]=(n.depth[i]>=n.depth[f]?n.depth[i]:n.depth[f])+1,r[2*i+1]=r[2*f+1]=u,n.heap[1]=u++,rt(n,r,1);while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],hi(n,t),wt(r,e,n.bl_count)}function bt(n,t,i){var s,r,h=-1,u=t[1],f=0,e=7,o=4;for(0===u&&(e=138,o=3),t[2*(i+1)+1]=65535,s=0;i>=s;s++)r=u,u=t[2*(s+1)+1],++f<e&&r===u||(o>f?n.bl_tree[2*r]+=f:0!==r?(r!==h&&n.bl_tree[2*r]++,n.bl_tree[2*at]++):10>=f?n.bl_tree[2*ct]++:n.bl_tree[2*lt]++,f=0,h=r,0===u?(e=138,o=3):r===u?(e=6,o=3):(e=7,o=4))}function ri(n,t,i){var c,e,l=-1,o=t[1],f=0,s=7,h=4;for(0===o&&(s=138,h=3),c=0;i>=c;c++)if(e=o,o=t[2*(c+1)+1],!(++f<s&&e===o)){if(h>f){do u(n,e,n.bl_tree);while(0!=--f)}else 0!==e?(e!==l&&(u(n,e,n.bl_tree),f--),u(n,at,n.bl_tree),r(n,f-3,2)):10>=f?(u(n,ct,n.bl_tree),r(n,f-3,3)):(u(n,lt,n.bl_tree),r(n,f-11,7));f=0,l=e,0===o?(s=138,h=3):e===o?(s=6,h=3):(s=7,h=4)}}function ir(n){var t;for(bt(n,n.dyn_ltree,n.l_desc.max_code),bt(n,n.dyn_dtree,n.d_desc.max_code),it(n,n.bl_desc),t=d-1;t>=3&&0===n.bl_tree[2*yt[t]+1];t--);return n.opt_len+=3*(t+1)+5+5+4,t}function tr(n,t,i,u){var f;for(r(n,t-257,5),r(n,i-1,5),r(n,u-4,4),f=0;u>f;f++)r(n,n.bl_tree[2*yt[f]+1],3);ri(n,n.dyn_ltree,t-1),ri(n,n.dyn_dtree,i-1)}function nr(n){for(var i=4093624447,t=0;31>=t;t++,i>>>=1)if(1&i&&0!==n.dyn_ltree[2*t])return ei;if(0!==n.dyn_ltree[18]||0!==n.dyn_ltree[20]||0!==n.dyn_ltree[26])return fi;for(t=32;v>t;t++)if(0!==n.dyn_ltree[2*t])return fi;return ei}function rr(n){ui||(ai(),ui=!0),n.l_desc=new ft(n.dyn_ltree,ht),n.d_desc=new ft(n.dyn_dtree,et),n.bl_desc=new ft(n.bl_tree,st),n.bi_buf=0,n.bi_valid=0,pt(n)}function gt(n,t,i,u){r(n,(ki<<1)+(u?1:0),3),li(n,t,i,!0)}function fr(n){r(n,ot<<1,3),u(n,k,f),ci(n)}function ur(n,t,i,u){var e,o,s=0;n.level>0?(n.strm.data_type===oi&&(n.strm.data_type=nr(n)),it(n,n.l_desc),it(n,n.d_desc),s=ir(n),e=n.opt_len+3+7>>>3,o=n.static_len+3+7>>>3,e>=o&&(e=o)):e=o=i+5,e>=i+4&&-1!==t?gt(n,t,i,u):n.strategy===yi||o===e?(r(n,(ot<<1)+(u?1:0),3),ni(n,f,h)):(r(n,(di<<1)+(u?1:0),3),tr(n,n.l_desc.max_code+1,n.d_desc.max_code+1,s+1),ni(n,n.dyn_ltree,n.dyn_dtree)),pt(n),u&&kt(n)}function wi(n,t,i){return n.pending_buf[n.d_buf+2*n.last_lit]=t>>>8&255,n.pending_buf[n.d_buf+2*n.last_lit+1]=255&t,n.pending_buf[n.l_buf+n.last_lit]=255&i,n.last_lit++,0===t?n.dyn_ltree[2*i]++:(n.matches++,t--,n.dyn_ltree[2*(o[i]+v+1)]++,n.dyn_dtree[2*ii(t)]++),n.last_lit===n.lit_bufsize-1}var pi=n("../utils/common"),yi=4,ei=0,fi=1,oi=2,ki=0,ot=1,di=2,gi=3,bi=258,g=29,v=256,a=v+1+g,c=30,d=19,vt=2*a+1,e=15,nt=16,er=7,k=256,at=16,ct=17,lt=18,tt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],w=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],vi=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],yt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],si=512,f=new Array(2*(a+2)),h,s,o,b,y;l(f),h=new Array(2*c),l(h),s=new Array(si),l(s),o=new Array(bi-gi+1),l(o),b=new Array(g),l(b),y=new Array(c),l(y);var ht,et,st,ut=function(n,t,i,r,u){this.static_tree=n,this.extra_bits=t,this.extra_base=i,this.elems=r,this.max_length=u,this.has_stree=n&&n.length},ft=function(n,t){this.dyn_tree=n,this.max_code=0,this.stat_desc=t},ui=!1;i._tr_init=rr,i._tr_stored_block=gt,i._tr_flush_block=ur,i._tr_tally=wi,i._tr_align=fr},{"../utils/common":27}],39:[function(n,t){"use strict";function i(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=i},{}]},{},[9])(9)}),MemberUserNews=[],MemberUserNews.TotalPages=0,MemberUserNews.PageIndex=1,MemberUserNews.ShowDialogNewsId=0,MemberUserNews.ShowDialogNewsState=0,MemberUserNews.IsSearch=!1,MemberUserNews.UnReadMsgCount=0,MemberUserNews.IsDeling=!1,MemberUserNews.init_memberUserNews=function(){initMemberBaseControl(),MemberUserNews.UnReadMsgCount>-1&&MemberUserNews.init_UnReadMsgCount(MemberUserNews.UnReadMsgCount),MemberUserNews.TotalPages>0?($("#divUserNewsList").show(),$("#divUserNewsPageInfo").show(),$("#divNotUserNews").hide()):($("#divUserNewsList").hide(),$("#divUserNewsPageInfo").hide(),$("#divNotUserNews").show()),$($("#trHead").find(".tp-ui-checkbox")).bind("click",function(){MemberUserNews.changeCheckNews()}),$(".GetDataByPageIndex").bind("click",function(){var t=parseInt($(this).attr("page_index")),n=parseInt($(this).attr("page_change"));MemberUserNews.getUserNewsData(t,n)}),$(".UserNewsTitle").click(function(){var i=$(this).attr("newsTitle"),r=$(this).attr("newsContent"),n,t;MemberUserNews.ShowDialogNewsId=$(this).attr("newsId"),MemberUserNews.ShowDialogNewsState=$(this).attr("newState"),n={useTitle:"消息详情--"+i,message:r,icon:!1},t=new $.appModalDialog(n,{"确定":function(n){n._close(!0),MemberUserNews.ShowDialogNewsState!="1"&&MemberUserNews.subimtReadUserNewsData(MemberUserNews.ShowDialogNewsId)}},"message")})},MemberUserNews.init_UnReadMsgCount=function(n){$("#emMemberUnReadNews1,#emMemberUnReadNews2").html(n),$("#emMemberUnReadNews1,#emMemberUnReadNews2").attr("UnReadMsgCount",n)},MemberUserNews.AddUnReadMsgNum=function(){var n=$("#emMemberUnReadNews1").attr("UnReadMsgCount");n=n?parseInt(n):0,MemberUserNews.init_UnReadMsgCount(n+1)},MemberUserNews.DecUnReadMsgNum=function(){var n=$("#emMemberUnReadNews1").attr("UnReadMsgCount");n=n?parseInt(n):1,MemberUserNews.init_UnReadMsgCount(n-1)},MemberUserNews.getUserNewsData=function(n,t){var u=parseInt(MemberUserNews.TotalPages);if(t!=0&&n+t<1)alertTip("已经是第一页");else if(t!=0&&n+t>u)alertTip("已经是最后一页");else{MemberUserNews.PageIndex=n+t;var f=$("#selUserNewsType").val(),i=$("#selUserNewsState").val(),r=[f,i,MemberUserNews.PageIndex];GetPartHtml("/Member/MemberUserNews",r)}},MemberUserNews.delUserNewsData=function(n){return n>0&&_confirm("确认删除该消息吗？")?(MemberUserNews.submitDelUserNewsData(n),!0):!1},MemberUserNews.doDelCheckUserNewsData=function(){var n="";if($(".trCheckbox").each(function(){$(this).attr("checked")&&(n&&(n+=","),n+=$(this).attr("usernewsid"))}),n)MemberUserNews.submitDelUserNewsData(n);else return alertTip("请先选择需要删除的消息"),!1},MemberUserNews.submitDelUserNewsData=function(n){if(MemberUserNews.IsDeling)return alertTip("正在删除消息，请稍等..."),!1;MemberUserNews.IsDeling=!0,ctx.postTokenEx({url:"/Member/SubmitDelMemberUserNews",data:EnCryptJsonParams([n]),success:function(n){n.Success?(MemberUserNews.getUserNewsData(MemberUserNews.PageIndex,0),alertTip("删除成功")):alert(n.Message)},complete:function(){MemberUserNews.IsDeling=!1}})},MemberUserNews.changeCheckNews=function(){var n=$("#cbCheckAll").attr("checked");n?($(".trCheckbox").attr("checked",!0),$(".tp-ui-checkbox").addClass("tp-ui-active")):($(".trCheckbox").attr("checked",!1),$(".tp-ui-checkbox").removeClass("tp-ui-active"))},MemberUserNews.doReadCheckUserNewsData=function(){var n="";if($(".trCheckbox").each(function(){$(this).attr("checked")&&(n&&(n+=","),n+=$(this).attr("usernewsid"))}),n)MemberUserNews.subimtReadUserNewsData(n);else return alert("请先选择需要标记为已读的消息"),!1},MemberUserNews.subimtReadUserNewsData=function(n){ctx.postTokenEx({url:"/Member/SubimtReadUserNewsData",data:EnCryptJsonParams([n]),success:function(n){n.Success?MemberUserNews.getUserNewsData(MemberUserNews.PageIndex,0):alert(n.Message)}})},MemberUserNews.subimtReadAllUserNewsData=function(){ctx.postTokenEx({url:"/Member/SubimtReadAllUserNewsData",success:function(n){n.Success?MemberUserNews.getUserNewsData(MemberUserNews.PageIndex,0):alert(n.Message)}})},FeedBack=[],FeedBack.InitFeedBack=function(){$formTable=$(".forms-table"),$formTable.find(".tpui-text").tpuiText(),$formTable.find(".tpui-radio").tpuiRadio(),$formTable.find(".tpui-button").tpuiButton(),$formTable.find(".tpui-textarea").tpuiTextarea()},FeedBack._isSubmit=!1,FeedBack.submitFeedBack=function(){if(FeedBack._isSubmit)return!1;if($("#Name").val().trim().length==0)return alertTip("姓名不能为空"),$("#Name").focus(),!1;if($("#content").val().trim().length==0)return alertTip("内容不能为空"),$("#content").focus(),!1;FeedBack._isSubmit=!0,ctx.postTokenEx({url:"/Home/SubmitFeedBack",data:{Name:$("#Name").val(),TeleNo:$("#TeleNo").val(),QQ:$("#QQ").val(),Content:$("#content").val()},success:function(n){alert(n.Message),n.Success&&$("#content").val("")}})},hasSubmit=!1,ForgetPwdHelper=[],ForgetPwdHelper.token="",ForgetPwdHelper.changeWayValue=0,ForgetPwdHelper.hasSecurityQuestion=!1,ForgetPwdHelper.SecurityQuestionUserId=0,ForgetPwdHelper.IsSubmit=!1,ForgetPwdHelper.init=function(n){var i=$("#repassword-panel"),t;if(i.find(".tpui-text").tpuiText(),i.find(".tpui-button").tpuiButton(),n&&n!=1){if(n==2){$("#imgStep2VerCode").attr("src","/Login/ValidateCode?r="+Math.random());$("#imgStep2VerCode,#aChangeStep2VerCode").on("click",function(){$("#imgStep2VerCode").attr("src","/Login/ValidateCode?r="+Math.random())});$("#btnChangePwd").on("click",function(){var i;ForgetPwdHelper.IsSubmit&&alertTip("正在提交数据，请稍等","KC找回密码"),ForgetPwdHelper.IsSubmit=!0;var t=$("#txtNewPassword").val(),n=$("#txtNewPassword2").val(),r=$("#txtVerCode2").val();if(!t||!n){alertTip("请先填写新密码");return}if(t!=n){alertTip("两次密码输入不一致，请重新输入");return}if(!r){alertTip("请先填写验证码");return}alertTip("正在提交数据，请稍等","KC找回密码"),i={Password:t,ConfirmPassword:n,VerCode:r,UserToken:ForgetPwdHelper.token},ctx.postToken("/Login/ForgetPwdToChangePassword",EnCryptJsonParams(i),function(n){n=="timeout"?alertTip("重置密码失败，链接已超时，请重新操作"):n=="valicodefail"?alertTip("重置密码失败，验证码输入错误，请稍后重试"):n=="密码不能为空"?alertTip("重置密码失败，密码不能为空"):n=="密码输入不一致"?alertTip("重置密码失败，两次密码不一致，请稍后重试"):n=="登录密码不能和资金密码一样"?alertTip("重置密码失败，登录密码不能和资金密码一样，请稍后重试"):n=="fail"?($("#divStep1,#divStep2").hide(),$("#divStep3").show(),$("#divStep3_suc").hide(),$("#divStep3_fail").show()):($("#divStep1,#divStep2").hide(),$("#divStep3").show()),$("#imgStep2VerCode").attr("src","/Login/ValidateCode?r="+Math.random()),ForgetPwdHelper.IsSubmit=!1},function(){ForgetPwdHelper.IsSubmit=!1,alertTip("网络异常，请联系管理员！","KC登录")})});$("#divStep1,#divStep3").hide(),$("#divStep2").show()}}else{t="/Login/ValidateCode?r="+Math.random(),$("#imgStep1VerCode").attr("src",t),$("#imgStep1VerCode2").attr("src",t);$("#imgStep1VerCode,#aChangeStep1VerCode,#imgStep1VerCode2,#aChangeStep1VerCode2").on("click",function(){var n="/Login/ValidateCode?r="+Math.random();$("#imgStep1VerCode").attr("src",n),$("#imgStep1VerCode2").attr("src",n)});$("#btnForgetPwd").on("click",function(){var n=$("input[name='changeWay']:checked").val();n==0?ForgetPwdHelper.doForgetPwdByEmail():n==2?ForgetPwdHelper.doForgetPwdBySerialNumber():ForgetPwdHelper.doForgetPwdBySecurityQuestion()});$("#divStep2,#divStep3").hide()}},ForgetPwdHelper.doForgetPwdByEmail=function(){var t=$("#txtUserName").val(),r=$("#txtEmail").val(),i=$("#txtVerCode").val(),n;if(!t&&!r)return alertTip("请先填写用户名或安全邮箱"),!1;if(!i)return alertTip("请先填写验证码"),!1;n=$("div.tp-ui-loading-base").parent(),n.css({"z-index":99999}).show(),ctx.postToken("/Login/ForgetPwdSendEmail",EnCryptJsonParams({UserName:t,Email:r,VerCode:i}),function(t){t=="valicodefail"?alertTip("验证码错误，请重新输入"):t=="paramIsEmpty"?alertTip("请先输入用户名或安全邮箱"):t=="paramError"?$("#txtUserName").val()?alertTip("您输入的用户名有误或该账户未绑定安全邮箱，请联系您的上级"):alertTip("未找到绑定该安全邮箱的账户，请重新输入"):t=="fail"?alertTip("找回密码失败，请稍后再试"):($("#aBrowerEmail").attr("href",t[1]),$("#spanEmail").html(t[2]),$("#divStep1_Confirm").hide(),$("#divStep1_Result").show());var i="/Login/ValidateCode?r="+Math.random();$("#imgStep1VerCode").attr("src",i),$("#imgStep1VerCode2").attr("src",i),n.hide().prev().hide()},function(){alertTip("网络异常，请联系管理员！","KC登录"),n.hide().prev().hide()})},ForgetPwdHelper.doForgetPwdBySerialNumber=function(){var i=$("#txtUserName_SN").val(),t=$("#txtSNVerCode").val(),u=$("#txtSNNewPassword").val(),r=$("#txtVerCode_SN").val(),n;if(!i&&!t)return alert("请先填写用户名"),!1;if(!t)return alert("请先填写安全码"),!1;if(!u)return alert("请先填写新密码"),!1;if(!r)return alert("请先填写验证码"),!1;n=$("div.tp-ui-loading-base").parent(),n.css({"z-index":99999}).show(),ctx.postToken("/Login/ForgetPwdBySerialNumber",EnCryptJsonParams({UserName:i,SNVerCode:t,SNNewPassword:u,VerCode:r}),function(t){t=="valicodefail"?alertTip("验证码错误，请重新输入"):t=="paramIsEmpty"?alertTip("请先输入用户名或安全邮箱"):t=="PasswordParamIsEmpty"?alertTip("请先输入新密码"):t=="paramError"?$("#txtUserName").val()?alertTip("您输入的用户名有误或该账户未绑定安全邮箱，请联系您的上级"):alertTip("未找到绑定该安全邮箱的账户，请重新输入"):t=="noUnbindSNfail"?alertTip("您的账号未绑定手机令牌，请通过其他方式找回密码"):t=="SNVerCodeErrorCountFail"?alertTip("您今天的手机验证中心验证码输错次数太多，请稍后再试"):t=="SNVerCodeError"?alertTip("安全码错误，请重新输入"):t=="fundFail"?alertTip("登陆密码不能与资金密码相同，请重新输入"):t=="fail"?($("#divStep1,#divStep2").hide(),$("#divStep3").show(),$("#divStep3_suc").hide(),$("#divStep3_fail").show()):($("#divStep1,#divStep2").hide(),$("#divStep3").show());var i="/Login/ValidateCode?r="+Math.random();$("#imgStep1VerCode").attr("src",i),$("#imgStep1VerCode2").attr("src",i),n.hide().prev().hide()},function(){alertTip("网络异常，请联系管理员！","KC登录"),n.hide().prev().hide()})},ForgetPwdHelper.doForgetPwdBySecurityQuestion=function(){var i;if(!ForgetPwdHelper.hasSecurityQuestion)return alertTip("请先获取您设置的安全问题","KC找回密码"),!1;var u=$("#txtAnswer1").attr("QuestionId"),f=$("#txtAnswer2").attr("QuestionId"),e=$("#txtAnswer3").attr("QuestionId"),r=$("#txtAnswer1").val(),n=$("#txtAnswer2").val(),t=$("#txtAnswer3").val();if(!u||!f||!e)return alertTip("请先获取您设置的安全问题","KC找回密码"),!1;if(!r||!n||!t)return alertTip("请先回答安全问题","KC找回密码"),!1;i={UserId:ForgetPwdHelper.SecurityQuestionUserId,QuestionId1:u,QuestionId2:f,QuestionId3:e,Answer1:r,Answer2:n,Answer3:t},ctx.postToken("/Login/ForgetPwdCheckSecurityQuestion",EnCryptJsonParams(i),function(n){n=="UserIdEmpty"||n=="QuestionEmpty"?alertTip("请先输入用户名获取安全问题","KC找回密码"):n=="AnswerEmpty"?alertTip("请先输入问题答案","KC找回密码"):n=="Answer1Error"?alertTip("问题1回答错误，请重新输入","KC找回密码"):n=="Answer2Error"?alertTip("问题2回答错误，请重新输入","KC找回密码"):n=="Answer3Error"?alertTip("问题3回答错误，请重新输入","KC找回密码"):n=="paramError"?alertTip("参数有误，请重新输入","KC找回密码"):location.replace("ForgetPwdToChange?id="+n)},function(){alertTip("网络异常，请联系管理员！","KC登录")})},ForgetPwdHelper.changeWay=function(n){n==1?($("#divSerialNumberInfo").hide(),$("#divEmailInfo").hide(),$("#divSecurityQuestionInfo").show(),$("#divSubmitButton").hide(),$("#divQuestionList").hide(),ForgetPwdHelper.changeWayValue=1):n==2?($("#divSerialNumberInfo").show(),$("#divEmailInfo").hide(),$("#divSecurityQuestionInfo").hide(),$("#divSubmitButton").show(),$("#divQuestionList").hide(),ForgetPwdHelper.changeWayValue=2):($("#divSerialNumberInfo").hide(),$("#divEmailInfo").show(),$("#divSecurityQuestionInfo").hide(),$("#divSubmitButton").show(),ForgetPwdHelper.changeWayValue=0)},ForgetPwdHelper.getSecurityQuestion=function(){var n=$("#txtUserName3").val();n?(alertTip("正在获取您设置的安全问题，请稍候..."),ctx.postToken("/Login/ForgetPwdGetSecurityQuestion",EnCryptJsonParams({UserName:n}),function(n){n=="UserNameEmpty"?alertTip("请先输入用户名","KC找回密码"):n=="UserNameError"?alertTip("用户名输入有误，请重新输入","KC找回密码"):n&&n.length>0?($("#lblQuestion1").text(n[0].Title),$("#txtAnswer1").attr("QuestionId",n[0].Id),$("#lblQuestion2").text(n[1].Title),$("#txtAnswer2").attr("QuestionId",n[1].Id),$("#lblQuestion3").text(n[2].Title),$("#txtAnswer3").attr("QuestionId",n[2].Id),$("#divQuestionList").show(),$("#divSubmitButton").show(),ForgetPwdHelper.hasSecurityQuestion=!0,ForgetPwdHelper.SecurityQuestionUserId=n[0].Uid):($("#lblQuestion1").text(""),$("#txtAnswer1").removeAttr("Id"),$("#lblQuestion2").text(""),$("#txtAnswer2").removeAttr("Id"),$("#lblQuestion3").text(""),$("#txtAnswer3").removeAttr("Id"),$("#divQuestionList").hide(),$("#divSubmitButton").hide(),ForgetPwdHelper.hasSecurityQuestion=!1,ForgetPwdHelper.SecurityQuestionUserId=0,alertTip("对不起，您未设置安全问题，请通过安全邮箱找回密码！","KC找回密码"))},function(){alertTip("网络异常，请联系管理员！","KC找回密码")})):alertTip("请先填写用户名","KC找回密码")},MemberSecurity=[],MemberSecurity.hasSerialNumber="",MemberSecurity.IsSendEmailCode=!1,MemberSecurity.IsSubmitLoginPassword=!1,MemberSecurity.IsMemberModifyFundPassword=!1,MemberSecurity.IsSubmitSecurityQuestion=!1,MemberSecurity.IsSubmitSecurityEmail=!1,MemberSecurity.IsSubmitBindSerialNumber=!1,MemberSecurity.init_TPUI=function(){var n=$("#divSecurityTask");n.find(".tpui-button").tpuiButton(),n.find(".tpui-text").tpuiText(),n.find(".tpui-select").tpuiSelect()},MemberSecurity.clear_tpuiDialog=function(){$("#divChangePasswordInner").parents(".tp-ui-dialog").remove(),$("#divChangeFundPasswordInner").parents(".tp-ui-dialog").remove(),$("#setQuestionInner").parents(".tp-ui-dialog").remove(),$("#divChangeEmail").parents(".tp-ui-dialog").remove()},MemberSecurity.init_SecurityInfo=function(){MemberSecurity.init_TPUI(),$("#sendEmailCode").unbind("click").bind("click",function(){var n=$("#securityEmail").val();if(!n){alertTip("请先输入邮箱地址","发送邮箱验证码");return}MemberSecurity.IsSendEmailCode||(MemberSecurity.IsSendEmailCode=!0,alertTip("正在给您的邮箱发送确认码，请稍候..."),ctx.postTokenEx({url:"/Member/MemberSendEmailCode",data:{email:n},success:function(n){alertTip(n.Message,"发送邮箱验证码")},complete:function(){MemberSecurity.IsSendEmailCode=!1}}))}),ctx.postTokenEx({url:"/Member/MemberLastLoginIp",success:function(n){$("#lastLoginIp").html(n)}});var n=$("#divSecurityTask .st-item");$.each(n,function(n,t){var u=$(t),f=u.find(".option:first a:first"),i=u.find(".task-inner:first"),e=i.find(".tpui-button:first"),r=i.find(".tpui-button:eq(1)");i.tpuiDialog({width:480,pushTo:"#tmpDialogWrap",onClose:function(){$("#oldLoginPassword").val(null),$("#loginPassword").val(null),$("#reLoginPassword").val(null),$("#oldFundPassword").val(null),$("#fundPassword").val(null),$("#reFundPassword").val(null),$("#securityEmail").val(null),$("#emailVercode").val(null)}}),f.unbind("click").bind("click",function(){i.tpuiDialog("_open")}),e.unbind("click").bind("click",function(){i.tpuiDialog("_close")}),r.unbind("click").bind("click",function(){var f,d,s,h;if(r.attr("id")!="submitQuestionAnswer")if(r.attr("id")=="submitLoginPassword"){if(MemberSecurity.IsSubmitLoginPassword){alertTip("正在处理中，请稍等...");return}var l=$("#oldLoginPassword").val(),e=$("#loginPassword").val(),a=$("#reLoginPassword").val(),b=$("#txtSNVerCode_LoginPass").val();if(!l){alertTip("旧密码不能为空","修改登录密码");return}if(!e||!a){alertTip("新密码不能为空","修改登录密码");return}if(e.length<6||e.length>12){alertTip("新密码应为6-12位","修改登录密码");return}if(e!=a){alertTip("两次新密码输入不一致","修改登录密码");return}if(l==e){alertTip("新密码不能与旧密码相同","修改登录密码");return}if(MemberSecurity.hasSerialNumber=="True"&&!b){alertTip("请先输入安全中心验证码","修改资金密码");return}ctx.postTokenEx({url:"/Member/MemberModifyLoginPassword",data:EnCryptJsonParams([l,e,a,b]),beforeSend:function(){MemberSecurity.IsSubmitLoginPassword=!0,alertTip("正在处理中，请稍等...")},success:function(n){n.Success==!1?$.appAlert(n.Message,"danger"):(i.tpuiDialog("_close"),alertTip("修改成功","修改登录密码"),MemberSecurity.clear_tpuiDialog(),home_hash_changed("membersecurity"))},complete:function(){MemberSecurity.IsSubmitLoginPassword=!1}})}else if(r.attr("id")=="submitFundPassword"){if(MemberSecurity.IsMemberModifyFundPassword){alertTip("正在处理中，请稍等...");return}var y=$("#oldFundPassword").val(),u=$("#fundPassword").val(),v=$("#reFundPassword").val(),w=$("#txtSNVerCode_FunPass").val();if($("#oldFundPassword").length>0&&!y){alertTip("请先输入旧密码","修改资金密码");return}if(!u||!v){alertTip("请先输入新密码","修改资金密码");return}if(!u||u.length<6||u.length>12){alertTip("密码应为6-12位","修改资金密码");return}if(u!=v){alertTip("新密码不一致","修改资金密码");return}if(y==u){alertTip("新密码不能跟旧密码相同","修改资金密码");return}if(MemberSecurity.hasSerialNumber=="True"&&!w){alertTip("请先输入安全中心验证码","修改资金密码");return}ctx.postTokenEx({url:"/Member/MemberModifyFundPassword",data:EnCryptJsonParams([y,u,v,w]),beforeSend:function(){MemberSecurity.IsMemberModifyFundPassword=!0,alertTip("正在处理中，请稍等...")},success:function(n){n.Success==!1?$.appAlert(n.Message,"danger"):(i.tpuiDialog("_close"),alertTip("修改成功","修改资金密码"),MemberSecurity.clear_tpuiDialog(),home_hash_changed("membersecurity"))},complete:function(){MemberSecurity.IsMemberModifyFundPassword=!1}})}else if(r.attr("id")=="submitSecurityQuestion"){if(MemberSecurity.IsSubmitSecurityQuestion)return;var c=document.getElementsByName("questionId"),nt=document.getElementsByName("answer"),g=!1,n=[];for(f=0;f<c.length;f++)if(c[f].value!="0"){if(g=!0,nt[f].value==""){alertTip("请先填写问题答案","设置安全问题");return}n.push(c[f].value)}if(!g){alertTip("请先选择问题并填写答案","设置安全问题");return}if(n.length==2&&n[0]==n[1]){alertTip("不能选择相同问题","设置安全问题");return}if(n.length==3&&(n[0]==n[1]||n[0]==n[2]||n[1]==n[2])){alertTip("不能选择相同问题","设置安全问题");return}d={type:"post",beforeSend:function(){MemberSecurity.IsSubmitSecurityQuestion=!0,alertTip("正在处理中，请稍等...")},success:function(n){n.Success==!1?$.appAlert(n.Message,"danger"):($.appAlert(n.Message,"success"),i.tpuiDialog("_close"),MemberSecurity.clear_tpuiDialog(),home_hash_changed("membersecurity"))},complete:function(){MemberSecurity.IsSubmitSecurityQuestion=!1}},$("#securityQuestionForm").ajaxSubmit(d)}else if(r.attr("id")=="submitSecurityEmail"){if(MemberSecurity.IsSubmitSecurityEmail){alertTip("正在处理中，请稍等...");return}if(s=$("#securityEmail").val(),h=$("#emailVercode").val(),!s){alertTip("请输入邮箱地址","设置安全邮箱");return}if(!h){alertTip("请输入邮箱确认码","设置安全邮箱");return}ctx.postTokenEx({url:"/Member/MemberBindSecurityEmail",data:{bindEmailValidateCode:h,email:s},beforeSend:function(){MemberSecurity.IsSubmitSecurityEmail=!0,alertTip("正在处理中，请稍等...")},success:function(n){n.Success==!1?$.appAlert(n.Message,"danger"):($.appAlert(n.Message,"success"),i.tpuiDialog("_close"),MemberSecurity.clear_tpuiDialog(),home_hash_changed("membersecurity"))},complete:function(){MemberSecurity.IsSubmitSecurityEmail=!1}})}else if(r.attr("id")=="submitBindSerialNumber"){if(MemberSecurity.IsSubmitBindSerialNumber){alertTip("正在处理中，请稍等...");return}var o=$("#txtSNFundPass").val().trim(),t=$("#txtSerialNumber").val().trim().replaceAll("-",""),p=$("input:radio[name=SNMobileType]:checked").val();if(!o){alertTip("请先输入资金密码","绑定手机令牌");return}if(!t){alertTip("请先输入手机安全中心序列号","绑定手机令牌");return}if(t.length!=16||isNaN(t)){alertTip("您输入的序列号有误，请重新输入","绑定手机令牌");return}ctx.postTokenEx({url:"/Member/MemberBindSerialNumber",data:EnCryptJsonParams([o,t,p]),beforeSend:function(){MemberSecurity.IsSubmitBindSerialNumber=!0,alertTip("正在处理中，请稍等...")},success:function(n){n.Success==!1?alertTip(n.Message,"绑定手机令牌失败"):(alertTip(n.Message,"绑定手机令牌成功"),i.tpuiDialog("_close"),MemberSecurity.clear_tpuiDialog(),home_hash_changed("membersecurity"))},complete:function(){MemberSecurity.IsSubmitBindSerialNumber=!1}})}else if(r.attr("id")=="submitChangeBindSerialNumber"){if(MemberSecurity.IsSubmitBindSerialNumber){alertTip("正在处理中，请稍等...");return}var o=$("#txtSNFundPass2").val().trim(),k=$("#txtSNVerCode2").val().trim(),t=$("#txtSerialNumber2").val().trim().replaceAll("-",""),p=$("input:radio[name=SNMobileType2]:checked").val();if(!o){alertTip("请先输入资金密码","更改绑定手机令牌");return}if(!k){alertTip("请先输入原手机安全中心验证码","更改绑定手机令牌");return}if(!t){alertTip("请先输入新的手机安全中心序列号","更改绑定手机令牌");return}if(t.length!=16||isNaN(t)){alertTip("您输入的序列号有误，请重新输入","更改绑定手机令牌");return}ctx.postTokenEx({url:"/Member/MemberChangeBindSerialNumber",data:EnCryptJsonParams([o,t,p,k]),beforeSend:function(){MemberSecurity.IsSubmitBindSerialNumber=!0,alertTip("正在处理中，请稍等...")},success:function(n){n.Success==!1?alertTip(n.Message,"手机令牌绑定更改失败"):(alertTip(n.Message,"手机令牌绑定更改成功"),i.tpuiDialog("_close"),MemberSecurity.clear_tpuiDialog(),home_hash_changed("membersecurity"))},complete:function(){MemberSecurity.IsSubmitBindSerialNumber=!1}})}else r.attr("id")=="bindBankInfo"&&(i.tpuiDialog("_close"),alertTip("正在跳转..."),MemberSecurity.clear_tpuiDialog(),home_hash_changed("membershowcarddetail"))})}),$("#divUnBindSNTaskInner").tpuiDialog({pushTo:"#tmpDialogWrap",width:480,onClose:function(){$("#oldLoginPassword").val(null),$("#loginPassword").val(null),$("#reLoginPassword").val(null),$("#oldFundPassword").val(null),$("#fundPassword").val(null),$("#reFundPassword").val(null),$("#securityEmail").val(null),$("#emailVercode").val(null)}}),$("#aUnbindSerialNumber").unbind("click").bind("click",function(){$("#divUnBindSNTaskInner").tpuiDialog("_open")}),$("#submitUnBindSerialNumber").unbind("click").bind("click",function(){if(MemberSecurity.IsSubmitBindSerialNumber){alertTip("正在处理中，请稍等...");return}var t=$("#txtSNFundPass3").val().trim(),n=$("#txtSNVerCode3").val().trim(),i=$("input:radio[name=SNUnBindResult]:checked").val();if(!t){alertTip("请先输入资金密码","解绑手机令牌");return}if(!n){alertTip("请先输入手机安全中心序列号","解绑手机令牌");return}ctx.postTokenEx({url:"/Member/MemberUnBindSerialNumber",data:EnCryptJsonParams([t,n,i]),beforeSend:function(){MemberSecurity.IsSubmitBindSerialNumber=!0,alertTip("正在处理中，请稍等...")},success:function(n){n.Success==!1?alertTip(n.Message,"解绑手机令牌失败"):(alertTip(n.Message,"解绑手机令牌成功"),$("#divUnBindSNTaskInner").tpuiDialog("_close"),MemberSecurity.clear_tpuiDialog(),home_hash_changed("membersecurity"))},complete:function(){MemberSecurity.IsSubmitBindSerialNumber=!1}})}),$("#cancelUnBindSerialNumber").unbind("click").bind("click",function(){$("#divUnBindSNTaskInner").tpuiDialog("_close")})},function(n){n.appModalDialog=function(t,i,r){if(t)return this.time=new Date,this.isMethod=typeof t=="string",this.isMethod||(this.message=n.isPlainObject(t)?t:this._options),this.message=this.isMethod?n.extend({},this._options,{type:r||"default",message:t,buttons:i||null}):n.extend({},this._options,t,{type:r||"default",buttons:i||null}),this._create(),this},n.appModalDialog.prototype={_options:{type:"default",icon:!0,useTitle:"快彩消息",title:null,titleSub:null,message:null,buttons:null,onClose:n.noop},_create:function(){var t=this,r="app-modal-dialog",i=this.struct||{};i.$uiThis=n("<div>").addClass(r).attr({title:t.message.useTitle,"data-icon":"message"}).append(this._inner()).tpuiDialog({autoOpen:!0,mask:!0,maskClose:!1,buttons:t.message.buttons,inAniName:"zoomInUp",outAniName:"zoomOutDown",onClose:function(n){t.message.onClose(),n._close(!0)}})},_inner:function(){var t=this.message,i="images/status/",r=".png",n="";if(n+='<div class="complete complete-'+t.type+'">',t.icon){n+='<div class="complete-sub image"> <span>';switch(t.type){case"danger":n+='<img src="'+i+"fail"+r+'" alt="">';break;case"success":n+='<img src="'+i+"succes"+r+'" alt="">';break;case"warning":n+='<img src="'+i+"warning"+r+'" alt="">';break;case"doubt":n+='<img src="'+i+"message"+r+'" alt="">';break;case"message":default:n+='<img src="'+i+"message"+r+'" alt="">'}n+="</span> </div>"}return t.title&&(n+='<div class="complete-sub title">',n+="<h2>"+t.title+"</h2>",t.titleSub&&(n+="<h4>"+t.titleSub+"</h4>"),n+="</div>"),t.message&&(n+='<div class="complete-sub description">'+t.message+"</div>"),n+="</div>"}},n.appAlert=function(t,i){if(t)var r=new n.appModalDialog(t,{"确定":function(n){n._close(!0)}},i||"warning")},n.appConfirm=function(t,i,r){if(t)return i=n.isFunction(i)?i:n.noop,new n.appModalDialog(t,{"取消":function(n){n._close(!0),i(!1)},"确定":function(n){n._close(!0),i(!0)}},r||"tips")},n.animateRun={},n.animateRun.options={animate:"animated flash",delay:0,callBack:n.noop},n.fn.animateRun=function(t,i){var e=typeof t=="string",f=n.animateRun.options,u="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",r=e?n.extend(!0,{},f,{animate:t}):n.extend(!0,{},f,t);return i&&n.isFunction(i)&&(r=n.extend(!0,r,{callBack:i})),this.each(function(){var i=this,t=n(this);if(r.delay)setTimeout(function(){t.addClass(r.animate).one(u,function(){t.removeClass(r.animate),r.callBack.apply(i)})},r.delay);else t.addClass(r.animate).one(u,function(){t.removeClass(r.animate),r.callBack.apply(i)})})},n.agentLogin=function(){if(n("#login-agent").get(0)){var e=n(window),i=n("body"),o=n("#login-base"),h=n("#la-form"),f=n("#la-slideshow"),c=o.find(".operate-bar:first li"),r=n("#version-handle"),t=n("#version-inner"),u=n("#version-slideshow"),s=n("#repassword-pop");f.slideshowLite(),u.slideshowLite(),t.tpuiDialog({width:500,height:340,mask:!0});r.on({click:function(n){return n.preventDefault(),t.tpuiDialog("_open"),!1}});n("html").css({overflow:"hidden"}),i.tpuiLoading({autoOpen:!0,escape:!1,mask:!0,title:null});e.one("load.loginPanel",function(){i.tpuiLoading("_hide")});n("#agent-login-submit").click(function(){window.location.href="user-agent.html"})}}}(jQuery),hasSubmit=!1,Agent=[],Agent.CheckNumInput=function(){$("input[type=text]").live("change",function(){var t=$(this),i=t.val(),n;t.hasClass("myNumClass0")&&(n=i.replace("-",""),isNumber(i)?t.hasClass("betting-multiple")?n=isInt(i)?parseInt(n*1):(n*1).toFixedNum(3):isInt(i)||(n=parseInt(n*1)):t.val(1),n*1==0&&(n=1),i!=n&&t.val(n),t.trigger("changekc"))})},Agent.init_control=function(){initMemberBaseControl()},Agent.GetAgentPartHtml=function(n,t,i){GetPartHtml(n,t,i)},Agent.agent_home_hash_changed=function(n){n||(n="agenthall"),n=n.toLowerCase();var r="Agent",u={partial:1},t=$("body"),i="/{0}/{1}".replaceFormat([r,n]);n=n.split("?")[0],ctx.ajax({type:"GET",url:i,async:!1,data:u,beforeSend:function(){t.css("cursor","wait").attr("title","系统正为你奋力加载中..."),t.tpuiLoading("_show"),gl.loadingPage.show()},complete:function(){t.css("cursor","default").attr("title",""),t.tpuiLoading("_hide"),gl.loadingPage.hide()},success:function(t){var r,i;t=="ajax_login"?(_alert("您的登录已失效，请重新登录！登录失效的原因可能有：1.在其他地方登录;2.当前IP改变;3.网络不稳定."),location.href="/"):($("#main-body").html(t),r=$(".tp-ui-menu-base"),r.removeClass("tp-ui-active"),i=$("."+n+">div"),i.addClass("tp-ui-active")),gl.title&&$("title").html(gl.title)},error:function(n){n.status==500||n.status==403,$("#main-body").html(n.responseText)}})},Agent.init_Agent=function(){function n(radio){var chart=$("#container").highcharts();chart.series[0].setData(eval("["+radio.data("chartData")+"]")),chart.series[0].update({name:radio.parent().parent().html()},!1),chart.redraw()}Agent.init_control(),$(function(){$("#queryData").click()}),$("#queryData").die("click").live("click",function(){var t=$("body");ctx.postTokenEx({url:"/agent/GetAgentSumDetail",data:{begin:$(".startDateClass").val(),end:$(".endDateClass").val()},beforeSend:function(){t.css("cursor","wait").attr("title","系统正为你奋力加载中..."),t.tpuiLoading("_show")},complete:function(){t.css("cursor","default").attr("title",""),t.tpuiLoading("_hide")},success:function(data){var i,dt;if(data.Count>0){$("#betSum").html(data.DataSum.BetAmount),$("#agBetSum").html(data.DataSum.AgBetAmount),$("#netSum").html((data.DataSum.NetAmount+data.DataSum.ActivityAmount+data.DataSum.ActivityAmountHB+data.DataSum.ReturnPointAmount).toFixedNum(3)),$("#agNetSum").html((data.DataSum.AgNetAmount+data.DataSum.AGReturnPointAmount).toFixedNum(3)),$("#bounsSum").html((data.DataSum.NetAmount+data.DataSum.BetAmount).toFixedNum(3)),$("#agBounsSum").html((data.DataSum.AgNetAmount+data.DataSum.AgBetAmount).toFixedNum(3)),$("#ActivitySum").html(data.DataSum.ActivityAmount),$("#ActivityHBSum").html(data.DataSum.ActivityAmountHB),$("#RechargeSum").html(data.DataSum.RechargeAmount),$("#WithDrawSum").html(data.DataSum.WithdrawAmount),$("#IncreaseSum").html(data.DataSum.ValidUserCount+"/"+data.DataSum.IncreaseNum),$("#BetReturnSum").html(data.DataSum.ReturnPointAmount.toFixedNum(3)),$("#ProfitReturnSum").html(data.DataSum.FhAmount.toFixedNum(3)),$("#AGBetReturnSum").html(data.DataSum.AGReturnPointAmount.toFixedNum(3)),$("#AGProfitReturnSum").html(data.DataSum.AGFhAmount.toFixedNum(3)),$("#TotalProfitReturnSum").html(data.DataSum.TotalFhAmount.toFixedNum(3));var html="",betAmountData="",inCreaseNumData="",withDrawNumData="",rechargeData="",agentBetReturnData="",agentProfitReturnData="";for(agentBetReturnDataAG="",agentProfitReturnDataAG="",i=0;i<data.DataDetails.length;i++)dt=eval("new "+eval(data.DataDetails[i].CreateTime).source),html+="<tr>",html+="<td><span>"+NetToJsDateTime(data.DataDetails[i].CreateTime,"yyyy-MM-dd")+"</span></td>",html+="<td><span>"+data.DataDetails[i].IncreaseNum+"</span></td>",html+="<td><span>"+data.DataDetails[i].WithdrawAmount+"</span></td>",html+="<td><span>"+data.DataDetails[i].RechargeAmount+"</span></td>",html+="<td><span>"+data.DataDetails[i].ActivityAmount+"</span></td>",html+="<td><span>"+data.DataDetails[i].ActivityAmountHB+"</span></td>",html+="<td><span>"+data.DataDetails[i].BetAmount+"</span></td>",html+="<td><span>"+data.DataDetails[i].AgBetAmount+"</span></td>",html+="<td><span>"+(data.DataDetails[i].NetAmount+data.DataDetails[i].ActivityAmount+data.DataDetails[i].ReturnPointAmount).toFixedNum(3)+"</span></td>",html+="<td><span>"+(data.DataDetails[i].AgNetAmount+data.DataDetails[i].AGReturnPointAmount).toFixedNum(3)+"</span></td>",html+="<td><span>"+data.DataDetails[i].ReturnPointAmount.toFixedNum(3)+"</span></td>",html+="<td><span>"+data.DataDetails[i].AGReturnPointAmount.toFixedNum(3)+"</span></td>",html+="</tr>",betAmountData+="[Date.UTC("+dt.getFullYear()+","+dt.getMonth()+","+dt.getDate()+"),"+data.DataDetails[i].BetAmount+"]",inCreaseNumData+="[Date.UTC("+dt.getFullYear()+","+dt.getMonth()+","+dt.getDate()+"),"+data.DataDetails[i].IncreaseNum+"]",withDrawNumData+="[Date.UTC("+dt.getFullYear()+","+dt.getMonth()+","+dt.getDate()+"),"+data.DataDetails[i].WithdrawAmount+"]",rechargeData+="[Date.UTC("+dt.getFullYear()+","+dt.getMonth()+","+dt.getDate()+"),"+data.DataDetails[i].RechargeAmount+"]",agentBetReturnData+="[Date.UTC("+dt.getFullYear()+","+dt.getMonth()+","+dt.getDate()+"),"+data.DataDetails[i].ReturnPointAmount+"]",agentBetReturnDataAG+="[Date.UTC("+dt.getFullYear()+","+dt.getMonth()+","+dt.getDate()+"),"+data.DataDetails[i].AGReturnPointAmount+"]",i<data.DataDetails.length-1&&(betAmountData+=",",inCreaseNumData+=",",withDrawNumData+=",",rechargeData+=",",agentBetReturnData+=",",agentBetReturnDataAG+=",");$("#rBet").data("chartData",betAmountData),$("#rWithDraw").data("chartData",withDrawNumData),$("#rRecharge").data("chartData",rechargeData),$("#rIncrease").data("chartData",inCreaseNumData),$("#rBetReturn").data("chartData",agentBetReturnData),$("#rAGBetReturn").data("chartData",agentBetReturnDataAG),n($("input[name='radio-a'][checked]")),$("#dataDetail").html(html)}else $("#rBet").data("chartData",""),$("#rWithDraw").data("chartData",""),$("#rRecharge").data("chartData",""),$("#rIncrease").data("chartData",""),$("#rBetReturn").data("chartData",""),$("#rAGBetReturn").data("chartData",""),$(".dataSum").html("0.00"),$("#dataDetail").html(""),n($("input[name='radio-a'][checked]"))}})}),$(".tpui-radio").change(function(){var t=$(this);n(t)})},Agent.init_AgentGenLink=function(){Agent.init_control(),$("#aAgent").click(function(){$(this).addClass("active"),$("#aMember").removeClass("active")}),$("#aMember").click(function(){$(this).addClass("active"),$("#aAgent").removeClass("active")}),$(function(){Agent.CreateLinkZeroClipboard("agentLinkUrl","agentCopyLink","linkarea1"),Agent.CreateLinkZeroClipboard("memberLinkUrl","memberCopyLink","linkarea2")}),$("#genLink").click(function(){if(hasSubmit)return!1;$("#genLink").css("cursor","wait"),hasSubmit=!0;var t={},n=$("#aAgent").hasClass("active")==!0?1:0;t.linkType=n,ctx.postToken("/agent/GenLink",t,function(t){var i="http://api.weibo.com/2/short_url/shorten.json?source=5786724301&url_long="+encodeURIComponent(t)+"";return ctx.ajax({url:i,type:"GET",dataType:"jsonp",cache:!1,success:function(t){hasSubmit=!1,$("#genLink").css("cursor","pointer"),n==0?$("#memberLinkUrl").val(t.data.urls[0].url_short):$("#agentLinkUrl").val(t.data.urls[0].url_short),alertTip("获取链接成功！")},error:function(){hasSubmit=!1,$("#genLink").css("cursor","pointer"),alert("链接生成失败,请重试!")}}),!1})})},Agent.CreateLinkZeroClipboard=function(n,t,i){var r=new ZeroClipboard.Client;r.setHandCursor(!0),r.addEventListener("load",function(){}),r.addEventListener("mouseOver",function(){r.setText($("#"+n).val())}),r.addEventListener("complete",function(){alertTip("复制成功！")}),r.glue(t,i)},Agent.init_ManageUrl=function(n){function t(n,t){var i=new ZeroClipboard.Client;i.setHandCursor(!0),i.addEventListener("load",function(){}),i.addEventListener("mouseOver",function(){i.setText($("#"+n).attr("data-url"))}),i.addEventListener("complete",function(){alert("复制成功！")}),i.glue(t,"linkarea")}Agent.init_control(),$(function(){$(".copyBtn").each(function(){var n=$(this);t(n.attr("data-id"),n.attr("Id"))}),$(".delBtn").click(function(){if(hasSubmit)return!1;$(".delBtn").css("cursor","wait"),hasSubmit=!0;var t=$(this),n=$("body");ctx.postTokenEx({beforeSend:function(){$("body").css("cursor","wait"),$("body").attr("title","系统正为你奋力加载中..."),n.tpuiLoading("_show")},complete:function(){$("body").css("cursor","default"),$("body").attr("title",""),n.tpuiLoading("_hide")},url:"/agent/DelLink",data:{linkId:t.attr("data-id")},success:function(n){$(".delBtn").css("cursor","pointer"),hasSubmit=!1,alert(n),$("#refreshData").click()}})})}),$(".GetDataByPageIndex").bind("click",function(){var i=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change"))+1,r=$("#aAgent").hasClass("active")?1:0,t;if(i<=0)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;t={page:i,linkType:r,userName:$("#userName").val()},Agent.GetAgentPartHtml("/agent/manageLink",t)})},Agent.init_ManageCustomer=function(n,t,i){Agent.init_control(),$(".GetDataByPageIndex").bind("click",function(){var i=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change"))+1,r=$("#aAgent").hasClass("active")?1:0,t;if(i<=0)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;t={page:i,userType:r,userName:$("#userName").val(),startPoint:$("#startPoint").val(),endPoint:$("#endPoint").val()},Agent.GetAgentPartHtml("/member/memberagentusermanager",t)}),$("div[id=dlg-AgentProfit]").closest("div.tp-ui-dialog").remove(),$("#dlg-AgentProfit").tpuiDialog({pushTo:"#tmpDialogWrap",width:480,onClose:function(){}});$("input[name=dlgCloseBtn]").on("click",function(){var n=$(this).attr("dlg");$("#"+n).tpuiDialog("_close")});$("a.agent-user-opt").live("click",function(){var r,e,n,u;if($(this).attr("_type")=="agprofit")n=$(this).closest("tr"),$("#dlg-AgentProfit").tpuiDialog("_open"),u=n.attr("uid"),$("#updateAgentProfitRpoint").attr("uid",u),r=$.trim(n.find("#agreturnPoint").html()),e="("+r+"-"+t+")",$("#pfRadioValue").val(r).attr("min",r).attr("max",t).closest("label").find("h4").html(e);else{$("#dlg-returnPoint").tpuiDialog("_open"),n=$(this).closest("tr"),u=n.attr("uid"),$("#updateReturnPpoint").attr("uid",u);var f=$.trim(n.find("#curReturnPointVal").html()),o=f<1900?1900:f,e="("+o+"-"+i+")";$("#ReturnPointVal").val(f).attr("min",o).attr("max",i).closest("label").find("h4").html(e)}$("span[id=spanCurUserName]").html(n.find("td[name=uname]").find("a").html()),$("input.random-selection").tpuiNumber({type:"depart"})});$("#updateAgentProfitRpoint").on("click",function(){var n=parseFloat($("#pfRadioValue").val()),h=$(this).attr("dlg"),e=$("#updateAgentProfitRpoint").attr("uid"),i=0,u=t,s=$("#data-list").find("tr[uid="+e+"]");if(i=parseInt($.trim(s.find("#agreturnPoint").html())),n>=i&&n<=u){var f={rp:n,uid:e},o=EnCryptJsonParams(f),r=$("div.tp-ui-item.tp-ui-loading.tp-ui-loading-base");ctx.postTokenEx({url:"/Member/UpdateAgProfitReturnPoint",data:o,beforeSend:function(){r.show().parent().css({"z-index":99999}).show()},success:function(t){if(t=="ok"){alertTip("设置成功");var i=$("#data-list").find("tr[uid="+f.uid+"]");i.find("#agreturnPoint").html(n),$("div.tp-ui-mask").click()}else alertTip(t);r.parent().hide().prev().hide()},error:function(){alertTip("网络异常，请刷新页面再操作"),r.parent().hide()},complete:function(){}})}else{alertTip("分红比例值必须是介于"+i+"与"+u+"之间的数字");return}});$("div[id=dlg-returnPoint]").closest("div.tp-ui-dialog").remove(),$("#dlg-returnPoint").tpuiDialog({pushTo:"#tmpDialogWrap",width:480,onClose:function(){}});$("#updateReturnPpoint").on("click",function(){var r=$(this).attr("uid"),i=parseFloat($.trim($("#ReturnPointVal").val())),t={rp:i,uid:r},u=EnCryptJsonParams(t),n=$("div.tp-ui-item.tp-ui-loading.tp-ui-loading-base");ctx.postTokenEx({url:"/Member/UpdateReturnPoint",data:u,beforeSend:function(){n.show().parent().css({"z-index":99999}).show()},success:function(r){if(r=="ok"){alertTip("设置成功");var u=$("#data-list").find("tr[uid="+t.uid+"]");u.find("#curReturnPointVal").html(i),$("div.tp-ui-mask").click()}else alertTip(r);n.parent().hide().prev().hide()},error:function(){alertTip("网络异常，请刷新页面再操作"),n.parent().hide()},complete:function(){}})})},Agent.init_AgentCheck=function(n,t){Agent.init_control(),$(".GetDataByPageIndex").bind("click",function(){var i=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change"))+1,t;if(i<=0)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;t={page:i,userType:1,userName:$("#userName").val()},Agent.GetAgentPartHtml("/member/memberagentcheck",t)}),$("div[id=dlg-AgentProfit]").closest("div.tp-ui-dialog").remove(),$("#dlg-AgentProfit").tpuiDialog({pushTo:"#tmpDialogWrap",width:480,onClose:function(){}});$("input[name=dlgCloseBtn]").on("click",function(){var n=$(this).attr("dlg");$("#"+n).tpuiDialog("_close")});$("a[name='agent-user-opt']").on("click",function(){var f=$(this).attr("_type"),i,n,s,o;if(f=="HasUpdated")alertTip("本考核周期内只能修改一次，请等下一周期再修改");else if(i=(new Date).getDate(),i<=3||i>=16&&i<=18){n=$(this).closest("tr"),s=n.attr("uid"),$("#updateAgentProfitRpoint").attr("uid",s).attr("_type",f),$("#dlg-AgentProfit").tpuiDialog("_open"),$("#spanCurUserName").html(n.find("td[name=uname]").find("a").html()),$("#returnAmountVal").val($.trim(n.find("#abreturnAmount").html()));var r=$.trim(n.find("#apreturnPoint").html()),u=0,e=t;f=="AgentProfitUp"?u=r:e=r,o="("+u+"-"+e+")",$("#pfRadioValue").val(r).attr("min",u).attr("max",e).closest("label").find("h4").html(o),$("input.random-selection").tpuiNumber({type:"depart"})}else alertTip("已经过了审核时间，请等待下一周期再调整")});$("#updateAgentProfitRpoint").on("click",function(){var i=parseInt($.trim($("#pfRadioValue").val())),v=$(this).attr("dlg"),h=$("#updateAgentProfitRpoint").attr("uid"),l=$("#updateAgentProfitRpoint").attr("_type"),f=0,r=t>20?20:t,a=$("#data-list").find("tr[uid="+h+"]"),s=parseInt($.trim(a.find("#apreturnPoint").html())),n;if(l=="AgentProfitUp"?f=s:r=s,i>=f&&i<=r)if(n=$.trim($("#returnAmountVal").val()),$.isNumeric(n)&&n.indexOf(".")==-1){var e=parseInt(n),o={type:0,rp:i,uid:h,amount:e},c=EnCryptJsonParams(o),u=$("div.tp-ui-item.tp-ui-loading.tp-ui-loading-base");ctx.postTokenEx({url:"/Member/UpdateProfitReturnPoint",data:c,beforeSend:function(){u.show().parent().css({"z-index":99999}).show()},success:function(n){if(n=="ok"){alertTip("设置成功");var t=$("#data-list").find("tr[uid="+o.uid+"]");t.find("#abreturnAmount").html(e),t.find("#apreturnPoint").html(i),t.find("#spanBigAgent").html('<label class="agent-user-opt digg-tag dt-hold" title="分红比例及目标日量已修改，请等待下一周期再查看是否达标">-</label>'),t.find("a.agent-user-opt").parent().html('<a name="agent-user-opt" _type="HasUpdated" class="digg-tag dt-hold" title="已修改，本周期内只能修改一次">已修改</a>'),t.find("span[name=spanStatus]").html("已审核"),$("div.tp-ui-mask").click()}else alertTip(n);u.parent().hide().prev().hide()},error:function(){alertTip("网络异常，请刷新页面再操作"),u.parent().hide()},complete:function(){}})}else{alertTip("目标日量的值必须是整数");return}else{alertTip("分红比例值必须是介于"+f+"与"+r+"之间的数字");return}})},Agent.init_ReturnSum=function(n){Agent.init_control(),$(".GetDataByPageIndex").bind("click",function(){var i=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change"))+1,t;if(n=="0"&&$(this).text().trim().indexOf("最后页")>=0)return alertTip("当前已经是最后一页!"),!1;if(i<=0)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;t={page:i,begin:$("#begin").val(),end:$("#end").val()},Agent.GetAgentPartHtml("/agent/ReturnSum",t)})},Agent.init_BetReturn=function(n){Agent.init_control(),$(".GetDataByPageIndex").bind("click",function(){var i=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change"))+1,t;if(n=="0"&&$(this).text().trim().indexOf("最后页")>=0)return alertTip("当前已经是最后一页!"),!1;if(i<=0)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;t={page:i,begin:$("#begin").val(),end:$("#end").val(),userName:$("#userName").val(),returnType:$("#returnType").val()},Agent.GetAgentPartHtml("/agent/BetReturn",t)})},Agent.init_ProfitReturn=function(n){Agent.init_control(),$(".GetDataByPageIndex").bind("click",function(){var i=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change"))+1,t;if(n=="0"&&$(this).text().trim().indexOf("最后页")>=0)return alertTip("当前已经是最后一页!"),!1;if(i<=0)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;t={page:i,begin:$("#begin").val(),end:$("#end").val()},Agent.GetAgentPartHtml("/agent/ProfitReturn",t)})},Agent.init_AgentWithdraw=function(n){Agent.init_control(),$(".GetDataByPageIndex").bind("click",function(){var i=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change"))+1,t;if(n=="0"&&$(this).text().trim().indexOf("最后页")>=0)return alertTip("当前已经是最后一页!"),!1;if(i<=0)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;t={page:i,begin:$("#begin").val(),end:$("#end").val()},Agent.GetAgentPartHtml("/agent/AgentWithdraw",t)})},Agent.init_BetReturnDetail=function(n){Agent.init_control(),$(".GetDataByPageIndex").bind("click",function(){var i=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change"))+1,t;if(n=="0"&&$(this).text().trim().indexOf("最后页")>=0)return alertTip("当前已经是最后一页!"),!1;if(i<=0)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;t={page:i,begin:$("#begin").val(),end:$("#end").val(),userName:$("#userName").val(),lotteryCode:$("#lotteryCode").val()},Agent.GetAgentPartHtml("/agent/BetReturnDetail",t)})},Agent.init_ProfitReturnDetail=function(n){Agent.init_control(),$(".GetDataByPageIndex").bind("click",function(){var r=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change"))+1,i,t;if(n=="0"&&$(this).text().trim().indexOf("最后页")>=0)return alertTip("当前已经是最后一页!"),!1;if(r<=0)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;i=$("#queryForm").get(0),t=document.createElement("input"),t.setAttribute("type","hidden"),t.setAttribute("value",r),t.setAttribute("name","page"),i.appendChild(t),i.submit()})},Agent.init_BetRecord=function(n){Agent.init_control(),$(".GetDataByPageIndex").bind("click",function(){var r=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change")),i,t;if(n=="0"&&$(this).text().trim().indexOf("最后页")>=0||n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;if(r<=0)return alertTip("当前已经是第一页!"),!1;i={page:r,begin:$("#begin").val(),end:$("#end").val(),userName:$("#userName").val(),lotteryCode:$("#lotteryCode").val(),hasRunLottery:$("#hasRunLottery").val(),hasWin:$("#hasWin").val()},t=window.location.hash.toLowerCase().indexOf("memberagentbetrecordex")!=-1?"memberagentbetrecordex":"memberagentbetrecord",Agent.GetAgentPartHtml("/member/"+t,i)})},Agent.init_AgBetRecord=function(n){Agent.init_control(),$(".GetDataByPageIndex").bind("click",function(){var r=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change"))+1,i,t;if(n=="0"&&$(this).text().trim().indexOf("最后页")>=0)return alertTip("当前已经是最后一页!"),!1;if(r<=0&&$(this).text().trim().indexOf("查询")==-1)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;i={page:r,billNo:$("#billNo").val(),userName:$("#userName").val(),gameType:$("#gameType").val(),begin:$("#begin").val(),end:$("#end").val()},t=window.location.hash.toLowerCase().indexOf("memberagentagbetrecordex")!=-1?"memberagentagbetrecordex":"memberagentagbetrecord",Agent.GetAgentPartHtml("/member/"+t,i)})},Agent.init_RechargeRecord=function(n){Agent.init_control(),$(".GetDataByPageIndex").bind("click",function(){var r=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change")),i,t;if(n=="0"&&$(this).text().trim().indexOf("最后页")>=0)return alertTip("当前已经是最后一页!"),!1;if(r<=0)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;i={page:r,begin:$("#begin").val(),end:$("#end").val(),userName:$("#userName").val()},t=window.location.hash.toLowerCase().indexOf("memberagentrechargerecordex")!=-1?"memberagentrechargerecordex":"memberagentrechargerecord",Agent.GetAgentPartHtml("/member/"+t,i)})},Agent.init_WithDrawRecord=function(n){Agent.init_control(),$(".GetDataByPageIndex").bind("click",function(){var r=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change")),i,t;if(n=="0"&&$(this).text().trim().indexOf("最后页")>=0)return alertTip("当前已经是最后一页!"),!1;if(r<=0)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;i={page:r,begin:$("#begin").val(),end:$("#end").val(),userName:$("#userName").val()},t=window.location.hash.toLowerCase().indexOf("memberagentwithdrawrecordex")!=-1?"memberagentwithdrawrecordex":"memberagentwithdrawrecord",Agent.GetAgentPartHtml("/member/"+t,i)})},Agent.init_AgentProfitPointTransform=function(){Agent.init_control(),$("#transform").click(function(){var n,t;if(hasSubmit)return!1;if($("#transform").css("cursor","wait"),hasSubmit=!0,n=$("#transformPoint").val(),n==""||isNaN(n))return $("#transform").css("cursor","pointer"),hasSubmit=!1,alertTip("提现金额必须为数字！"),!1;t=$("body"),ctx.postTokenEx({url:"/agent/TransformPoint",data:{transformPoint:n},beforeSend:function(){$("body").css("cursor","wait"),$("body").attr("title","系统正为你奋力加载中..."),t.tpuiLoading("_show")},complete:function(){$("body").css("cursor","default"),$("body").attr("title",""),t.tpuiLoading("_hide")},success:function(n){$("#transform").css("cursor","pointer"),hasSubmit=!1,alertTip(n),window.location.href="/agent#agentprofitpointtransform"}})})},Agent.init_UserProfit=function(n){Agent.init_control(),$(".GetDataByPageIndex").bind("click",function(){var i=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change"))+1,t;if(n=="0"&&$(this).text().trim().indexOf("最后页")>=0)return alertTip("当前已经是最后一页!"),!1;if(i<=0&&$(this).text().trim().indexOf("查询")==-1)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;t={page:i,userName:$("#userName").val(),begin:$("#begin").val(),end:$("#end").val()},Agent.GetAgentPartHtml("/agent/userprofit",t)})},Agent.init_SummaryProfit=function(n,t){Agent.init_control();var r=1,i=$("#reportType>a"),u=$("input.GetDataByPageIndex");i.bind("click",function(){i.removeClass("active"),$(this).addClass("active"),AgentIsFather=1,u.trigger("click")}),i.removeClass("active"),i.filter("[reportType="+t+"]").addClass("active"),$(".GetDataByPageIndex").bind("click",function(){var e=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change")),t,f,u;if(n=="0"&&$(this).text().trim().indexOf("最后页")>=0)return alertTip("当前已经是最后一页!"),!1;if(e<=0&&$(this).text().trim().indexOf("查询")==-1)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;r=AgentIsFather,$(this).attr("username")==AgentServerUserName&&(r=0),typeof $(this).attr("Pid")!="undefined"&&(AgentAgPid=$(this).attr("Pid"),r=0),t=$("#userName").val().trim(),t!==""&&(r=0),f=i.filter(".active").attr("reportType"),u={page:e+1,rows:15,userName:t,begin:$("#begin").val(),end:$("#end").val(),isFather:r,reportType:f,Pid:AgentAgPid},Agent.GetAgentPartHtml("/member/MemberAgentSummaryReport",u,$("#memberSideBarId .mainbody"))})},Agent.init_LotteryDividend=function(n){Agent.init_control();var t=1;$(".GetDataByPageIndex").bind("click",function(){var r=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change")),i;if(n=="0"&&$(this).text().trim().indexOf("最后页")>=0)return alertTip("当前已经是最后一页!"),!1;if(r<=0&&$(this).text().trim().indexOf("查询")==-1)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;if(t=AgentIsFather,$(this).attr("username")==AgentLdServerUserName&&(t=0),$(this).attr("username")!=AgentLdServerUserName&&$(this).attr("GetChild")==1)return alertTip("无法查看下级!"),!1;i={page:r+1,rows:15,isFather:t},Agent.GetAgentPartHtml("/member/memberagentlotterydividendreport",i,$("#memberSideBarId .mainbody"))})},Agent.init_AgDividend=function(n){Agent.init_control();var t=1;$(".GetDataByPageIndex").bind("click",function(){var r=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change")),i;if(n=="0"&&$(this).text().trim().indexOf("最后页")>=0)return alertTip("当前已经是最后一页!"),!1;if(r<=0&&$(this).text().trim().indexOf("查询")==-1)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;t=AgentIsFather,$(this).attr("username")==AgentAgServerUserName&&(t=0),typeof $(this).attr("Pid")!="undefined"&&(AgentAgPid=$(this).attr("Pid"),t=0),i={page:r+1,rows:15,isFather:t,Pid:AgentAgPid},Agent.GetAgentPartHtml("/member/MemberAgentAGDividendReport",i,$("#memberSideBarId .mainbody"))})},AgentApply=[],AgentApply.AgentMode=0,AgentApply.AgentProfitReturnPoint=0,AgentApply.LinkType=1,AgentApply.IsSubmitApplying=!1,AgentApply.IsSubmitDeleting=!1,AgentApply.init_OpenAccount=function(){AgentApply.initMemberBaseControl(),$("#selUserType").die("change").bind("change",function(){var n=$("#selUserType").val();n==0?($("#divProfitReturnPointRow").show(),$("#divTargetQuantityRow").show(),$("#divAGProfitReturnPointRow").show()):n==1?($("#divProfitReturnPointRow").hide(),$("#divTargetQuantityRow").hide(),$("#divAGProfitReturnPointRow").show()):($("#divProfitReturnPointRow").hide(),$("#divTargetQuantityRow").hide(),$("#divAGProfitReturnPointRow").hide())}),$("#newUserName").blur(function(){var n=$("#newUserName").val();if(!n)return!1;ctx.postTokenEx({url:"/Member/CheckNewLoginName",data:EnCryptJsonParams([n]),success:function(n){n.Success==!1&&alertTip("用户名已被使用，请重新输入")}})}),$("#submitApplyButton").die("click").bind("click",function(){var n,i,r,t;if(AgentApply.IsSubmitApplying)return alertTip("正在处理中，请稍等..."),!1;if(n=[$("#selUserType").val(),$.trim($("#newUserName").val()),$.trim($("#newUserPassword").val()),$("#ReturnPoint").val(),$("#AGProfitReturnPoint").val(),$("#ProfitReturnPoint").val(),$("#TargetQuantity").val()],n[1]){if(i=/^[A-Za-z][A-Za-z0-9_]{3,15}$/,r=n[1].match(i),r==null)return alertTip("用户名长度应为4-16位数字，字母，下划线且必须为字母开头"),!1}else return alertTip("请先填写用户名"),!1;if(n[2]){if(n[2].length<6||n[2].length>12)return alertTip("密码长度应为6-12位小写字母数字符号组合"),!1}else return alertTip("请先填写密码"),!1;if(!n[3])return alertTip("请先填写返点"),!1;if(t=parseInt(n[3]),t==0||t%2!=0)return alertTip("返点填写有误，必须为偶数，如1900,1902,1904"),!1;n[0]==="0"?(n[4]="0",n[5]="0",n[6]="0"):n[0]==="1"?(n[4]="0",n[5]="",n[6]=""):(n[4]="",n[5]="",n[6]=""),ctx.postTokenEx({url:"/Member/SubmitAgentApplyOpenAccount",data:EnCryptJsonParams(n),beforeSend:function(){AgentApply.IsSubmitApplying=!0,$("#submitApplyButton").css("cursor","wait"),alertTip("正在处理中，请稍等...")},success:function(n){if(n.Success)var t=new $.appModalDialog("手工开户成功:"+n.Message,{"确定":function(n){n._close(!0),home_hash_changed("MemberAgentApplyOpenAccount")}},"success");else alertTip(n.Message?n.Message:"手工开户失败，请稍后再试")},error:function(){alertTip("手工开户失败，请稍后再试")},complete:function(){AgentApply.IsSubmitApplying=!1,$("#submitApplyButton").css("cursor","pointer")}})})},AgentApply.init_LinkOpenAccount=function(){AgentApply.initMemberBaseControl(),$("#submitLinkButton").die("click").bind("click",function(){if(AgentApply.IsSubmitApplying)return alertTip("正在处理中，请稍等..."),!1;var t=[$("#selUserType").val(),$("#selLinkExp").val(),$("#ReturnPoint").val(),$("#Remark").val()],n=parseInt(t[2]);if(n==0||n%2!=0)return alertTip("返点填写有误，必须为偶数，如1900,1902,1904"),!1;ctx.postTokenEx({url:"/Member/SubmitAgentApplyLink",data:EnCryptJsonParams(t),beforeSend:function(){AgentApply.IsSubmitApplying=!0,$("#submitLinkButton").css("cursor","wait"),alertTip("正在处理中，请稍等...")},success:function(n){n.Success?(alertTip("链接开户成功"),home_hash_changed("MemberAgentApplyLink")):alertTip(n.Message?n.Message:"链接开户失败，请稍后再试")},error:function(){alertTip("链接开户失败，请稍后再试")},complete:function(){AgentApply.IsSubmitApplying=!1,$("#submitLinkButton").css("cursor","pointer")}})})},AgentApply.init_ManageUrl=function(n){AgentApply.initMemberBaseControl(),$(".GetDataByPageIndex").bind("click",function(){var i=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change")),r=AgentApply.LinkType,t;if(i<0)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;t=[i,r],GetPartHtml("/Member/MemberAgentApplyLinkManage",t)}),$(".copyBtn").each(function(){var n=$(this);AgentApply.createLinkZeroClipboard(n.attr("data-id"),n.attr("Id"))}),$(".delBtn").click(function(){if(AgentApply.IsSubmitDeleting)return alertTip("正在处理中，请稍等..."),!1;var n={linkId:$(this).attr("data-id")};window.confirm("确认删除吗？",function(t){if(t){var i=$("body");ctx.postTokenEx({url:"/Member/SubmitDelLink",data:n,beforeSend:function(){AgentApply.IsSubmitDeleting=!0,$(".delBtn").css("cursor","wait"),$("body").attr("title","系统正为你奋力加载中..."),i.tpuiLoading("_show")},success:function(n){alert(n),$("#refreshData").click()},complete:function(){$(".delBtn").css("cursor","pointer"),$("body").attr("title",""),i.tpuiLoading("_hide"),AgentApply.IsSubmitDeleting=!1}})}})})},AgentApply.initMemberBaseControl=function(){var t=$(".data-table-option"),i=$(".table"),u=$(".tab-base"),n=$(".forms-table"),r=$(".kc-calendar");n.find(".tpui-text").tpuiText(),n.find(".tpui-radio").tpuiRadio(),n.find(".tpui-select").tpuiSelect(),n.find(".tpui-button").tpuiButton(),t.find(".tpui-text").tpuiText(),t.find(".tpui-button").tpuiButton(),t.find(".tpui-select").tpuiSelect(),i.find(".tpui-checkbox").tpuiCheckbox(),$("input.random-selection").tpuiNumber({type:"depart"})},AgentApply.createLinkZeroClipboard=function(n,t){var i=new ZeroClipboard.Client;i.setHandCursor(!0),i.addEventListener("load",function(){}),i.addEventListener("mouseOver",function(){i.setText($("#"+n).attr("data-url"))}),i.addEventListener("complete",function(){alertTip("复制成功！")}),i.glue(t,"linkarea")},function(k){for(var d,f,l=document.getElementsByTagName("head")[0].style,h=["transformProperty","WebkitTransform","OTransform","msTransform","MozTransform"],g=0;g<h.length;g++)void 0!==l[h[g]]&&(d=h[g]);d&&(f=d.replace(/[tT]ransform/,"TransformOrigin"),"T"==f[0]&&(f[0]="t")),eval('IE = "v"=="\v"'),jQuery.fn.extend({rotate:function(n){var r,t;if(0!==this.length&&"undefined"!=typeof n){"number"==typeof n&&(n={angle:n});for(var u=[],i=0,f=this.length;i<f;i++)t=this.get(i),t.Wilq32&&t.Wilq32.PhotoEffect?t.Wilq32.PhotoEffect._handleRotation(n):(r=k.extend(!0,{},n),t=new Wilq32.PhotoEffect(t,r)._rootObj,u.push(k(t)));return u}},getRotateAngle:function(){for(var n,i=[],t=0,r=this.length;t<r;t++)n=this.get(t),n.Wilq32&&n.Wilq32.PhotoEffect&&(i[t]=n.Wilq32.PhotoEffect._angle);return i},stopRotate:function(){for(var n,t=0,i=this.length;t<i;t++)n=this.get(t),n.Wilq32&&n.Wilq32.PhotoEffect&&clearTimeout(n.Wilq32.PhotoEffect._timer)}}),Wilq32=window.Wilq32||{},Wilq32.PhotoEffect=function(){return d?function(n,t){n.Wilq32={PhotoEffect:this},this._img=this._rootObj=this._eventObj=n,this._handleRotation(t)}:function(n,t){if(this._img=n,this._onLoadDelegate=[t],this._rootObj=document.createElement("span"),this._rootObj.style.display="inline-block",this._rootObj.Wilq32={PhotoEffect:this},n.parentNode.insertBefore(this._rootObj,n),n.complete)this._Loader();else{var i=this;jQuery(this._img).bind("load",function(){i._Loader()})}}}(),Wilq32.PhotoEffect.prototype={_setupParameters:function(n){this._parameters=this._parameters||{},"number"!=typeof this._angle&&(this._angle=0),"number"==typeof n.angle&&(this._angle=n.angle),this._parameters.animateTo="number"==typeof n.animateTo?n.animateTo:this._angle,this._parameters.step=n.step||this._parameters.step||null,this._parameters.easing=n.easing||this._parameters.easing||this._defaultEasing,this._parameters.duration=n.duration||this._parameters.duration||1e3,this._parameters.callback=n.callback||this._parameters.callback||this._emptyFunction,this._parameters.center=n.center||this._parameters.center||["50%","50%"],this._rotationCenterX="string"==typeof this._parameters.center[0]?parseInt(this._parameters.center[0],10)/100*this._imgWidth*this._aspectW:this._parameters.center[0],this._rotationCenterY="string"==typeof this._parameters.center[1]?parseInt(this._parameters.center[1],10)/100*this._imgHeight*this._aspectH:this._parameters.center[1],n.bind&&n.bind!=this._parameters.bind&&this._BindEvents(n.bind)},_emptyFunction:function(){},_defaultEasing:function(n,t,i,r,u){return-r*((t=t/u-1)*t*t*t-1)+i},_handleRotation:function(n,t){d||this._img.complete||t?(this._setupParameters(n),this._angle==this._parameters.animateTo?this._rotate(this._angle):this._animateStart()):this._onLoadDelegate.push(n)},_BindEvents:function(n){if(n&&this._eventObj){if(this._parameters.bind){var i=this._parameters.bind,t;for(t in i)i.hasOwnProperty(t)&&jQuery(this._eventObj).unbind(t,i[t])}this._parameters.bind=n;for(t in n)n.hasOwnProperty(t)&&jQuery(this._eventObj).bind(t,n[t])}},_Loader:function(){return IE?function(){var n=this._img.width,t=this._img.height;for(this._imgWidth=n,this._imgHeight=t,this._img.parentNode.removeChild(this._img),this._vimage=this.createVMLNode("image"),this._vimage.src=this._img.src,this._vimage.style.height=t+"px",this._vimage.style.width=n+"px",this._vimage.style.position="absolute",this._vimage.style.top="0px",this._vimage.style.left="0px",this._aspectW=this._aspectH=1,this._container=this.createVMLNode("group"),this._container.style.width=n,this._container.style.height=t,this._container.style.position="absolute",this._container.style.top="0px",this._container.style.left="0px",this._container.setAttribute("coordsize",n-1+","+(t-1)),this._container.appendChild(this._vimage),this._rootObj.appendChild(this._container),this._rootObj.style.position="relative",this._rootObj.style.width=n+"px",this._rootObj.style.height=t+"px",this._rootObj.setAttribute("id",this._img.getAttribute("id")),this._rootObj.className=this._img.className,this._eventObj=this._rootObj;n=this._onLoadDelegate.shift();)this._handleRotation(n,!0)}:function(){this._rootObj.setAttribute("id",this._img.getAttribute("id")),this._rootObj.className=this._img.className,this._imgWidth=this._img.naturalWidth,this._imgHeight=this._img.naturalHeight;var n=Math.sqrt(this._imgHeight*this._imgHeight+this._imgWidth*this._imgWidth);for(this._width=3*n,this._height=3*n,this._aspectW=this._img.offsetWidth/this._img.naturalWidth,this._aspectH=this._img.offsetHeight/this._img.naturalHeight,this._img.parentNode.removeChild(this._img),this._canvas=document.createElement("canvas"),this._canvas.setAttribute("width",this._width),this._canvas.style.position="relative",this._canvas.style.left=-this._img.height*this._aspectW+"px",this._canvas.style.top=-this._img.width*this._aspectH+"px",this._canvas.Wilq32=this._rootObj.Wilq32,this._rootObj.appendChild(this._canvas),this._rootObj.style.width=this._img.width*this._aspectW+"px",this._rootObj.style.height=this._img.height*this._aspectH+"px",this._eventObj=this._canvas,this._cnv=this._canvas.getContext("2d");n=this._onLoadDelegate.shift();)this._handleRotation(n,!0)}}(),_animateStart:function(){this._timer&&clearTimeout(this._timer),this._animateStartTime=+new Date,this._animateStartAngle=this._angle,this._animate()},_animate:function(){var n=+new Date,i=n-this._animateStartTime>this._parameters.duration,t;i&&!this._parameters.animatedGif?clearTimeout(this._timer):((this._canvas||this._vimage||this._img)&&(n=this._parameters.easing(0,n-this._animateStartTime,this._animateStartAngle,this._parameters.animateTo-this._animateStartAngle,this._parameters.duration),this._rotate(~~(10*n)/10)),this._parameters.step&&this._parameters.step(this._angle),t=this,this._timer=setTimeout(function(){t._animate.call(t)},10)),this._parameters.callback&&i&&(this._angle=this._parameters.animateTo,this._rotate(this._angle),this._parameters.callback.call(this._rootObj))},_rotate:function(){var n=Math.PI/180;return IE?function(n){this._angle=n,this._container.style.rotation=n%360+"deg",this._vimage.style.top=-(this._rotationCenterY-this._imgHeight/2)+"px",this._vimage.style.left=-(this._rotationCenterX-this._imgWidth/2)+"px",this._container.style.top=this._rotationCenterY-this._imgHeight/2+"px",this._container.style.left=this._rotationCenterX-this._imgWidth/2+"px"}:d?function(n){this._angle=n,this._img.style[d]="rotate("+n%360+"deg)",this._img.style[f]=this._parameters.center.join(" ")}:function(t){this._angle=t,t=t%360*n,this._canvas.width=this._width,this._canvas.height=this._height,this._cnv.translate(this._imgWidth*this._aspectW,this._imgHeight*this._aspectH),this._cnv.translate(this._rotationCenterX,this._rotationCenterY),this._cnv.rotate(t),this._cnv.translate(-this._rotationCenterX,-this._rotationCenterY),this._cnv.scale(this._aspectW,this._aspectH),this._cnv.drawImage(this._img,0,0)}}()},IE&&(Wilq32.PhotoEffect.prototype.createVMLNode=function(){document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{return!document.namespaces.rvml&&document.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<rvml:"+n+' class="rvml">')}}catch(n){return function(n){return document.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}}())}(jQuery),function(n){"use strict";var t=function(i){return this.options=n.extend(!0,{},t.DEFAULTS,i),this.$handler=n("#action-wheel-handler"),this.$main=n("#action-wheel-main"),this.$award=this.$main.find(".award:first"),this.$pointer=this.$main.find(".pointer:first"),this.$pointerHandler=this.$main.find(".handler:first"),this.$draw=n("#action-wheel-draw"),this.$drawHeader=this.$draw.children(".title:first"),this.$drawContent=this.$draw.children(".content:first"),this.$drawButton=this.$draw.children(".buttons:first").children(),this.$drawType=this.$drawContent.find("h2:first > .image:first"),this.$drawSum=this.$drawContent.find("h2:first > i:first"),this.$drawSumSub=this.$drawContent.find("h4:first > i:first"),this.$buttonOfReplay=this.$drawButton.siblings(".replay:first"),this.$buttonOfConfirm=this.$drawButton.siblings(".confirm:first"),this.$mask=n("#action-wheel-mask"),this.$mainClose=this.$main.children("a.close:first"),this.$drawStartWrap=this.$main.find(".start:first"),this.$drawStart=this.$drawStartWrap.children("button:first"),this.isOpen=!1,this.animating=!1,this.inDrawing=!1,this.lightBlinks=null,this.lengths=this.options.awards.length,this.angle=360/this.lengths,this.angleInt=360*this.options.cycles,this.rotateDuration=this.options.rotateTime,this.animate={duration:980,mainIn:"wheel-animated wheelPuffIn",mainOut:"wheel-animated wheelPuffOut",mainHold:"wheelHold",hanlderIn:"wheel-animated wheelHandlerIn",hanlderOut:"wheel-animated wheelHandlerOut",drawContentIn:"wheel-animated wheelDrawContentIn",placeholder:null},this.init(),this};t.prototype={init:function(){this.$handler.on("click.actionWheel touchdown.actionWheel",n.proxy(this,"mainPanelOpen"))},draw:function(){this.$pointerHandler.trigger("click.actionWheel")},lightBlink:function(){if(!this.isOpen){clearTimeout(this.lightBlinks);return}this.lightBlinks=setTimeout(n.proxy(function(){clearTimeout(this.lightBlinks),n.each(this.$main.find(".light"),function(t,i){n(i).toggle(!n(i).is(":visible"))}),this.lightBlink()},this),600)},mainPanelOpen:function(){this.isOpen||this.animating||(this.animating=!0,this.$handler.addClass(this.animate.hanlderOut).fadeOut(this.animate.duration,n.proxy(function(){this.$handler.removeClass(this.animate.hanlderOut),this.isOpen=!0,this.$main.addClass(this.animate.mainIn).fadeIn(this.animate.duration,n.proxy(function(){this.$main.removeClass(this.animate.mainIn)},this)),this.$mask.fadeIn();this.$mainClose.one("click.actionWheel touchdown.actionWheel",n.proxy(this,"mainPanelClose"));this.drawHandler(),this.lightBlink(),this.animating=!1},this)))},mainPanelClose:function(){this.isOpen&&!this.animating&&(this.animating=!0,this.$mask.fadeOut(),this.$main.addClass(this.animate.mainOut).fadeOut(this.animate.duration,n.proxy(function(){this.$main.removeClass(this.animate.mainOut),this.isOpen=!1,this.$handler.addClass(this.animate.hanlderIn).fadeIn(this.animate.duration,n.proxy(function(){this.$handler.removeClass(this.animate.hanlderIn)},this)),this.drawHandler(),this.lightBlink(),this.animating=!1},this)))},mainPanelLock:function(n){this.$main.toggleClass(this.animate.mainHold,n)},drawPanelOpen:function(){this.mainPanelLock(!0),this.$draw.show(),this.$drawContent.hide().addClass(this.animate.drawContentIn).fadeIn(this.animate.duration,n.proxy(function(){this.$drawContent.removeClass(this.animate.drawContentIn)},this));this.$buttonOfReplay.one("click.actionWheel",n.proxy(this,"onReplayClick"));this.$buttonOfConfirm.one("click.actionWheel",n.proxy(this,"onConfirmClick"))},drawPanelClose:function(){this.mainPanelLock(!1),this.$draw.hide()},drawPanelFill:function(n,t){this.$drawType.attr("data-type",n),this.$drawSum.empty().text(t),this.$drawSumSub.empty().text(t)},drawHandler:function(){var t="click.actionWheel touchdown.actionWheel";if(!this.isOpen){this.$drawStart.off(t);return}this.$pointerHandler.on(t,n.proxy(this,"onDrawing"))},drawAnimate:function(t,i){this.inDrawing||(this.inDrawing=!0,this.$award.rotate({angle:this.angle,duration:this.rotateDuration,animateTo:0-this.angleInt,easing:this.options.rotateEasing}),this.$pointer.rotate({angle:this.angle,duration:this.rotateDuration,animateTo:this.angleInt+t*this.angle,easing:this.options.rotateEasing}),setTimeout(n.proxy(function(){this.inDrawing=!1,this.drawPanelFill(t,i),this.drawPanelOpen()},this),this.rotateDuration))},onDrawing:n.noop,onReplayClick:n.noop,onConfirmClick:n.noop},t.VERSION="1.0.0",t.DEFAULTS={awards:[],awardRotate:!0,pointerRotate:!0,rotateEasing:n.easing.easeOutCubic,cycles:4,rotateTime:4e3,placeholder:null},n.actionWheel=function(n){return new t(n)}}(jQuery),$(function(){var n=null,r=null,o="http://p.3.cn/prices/mgets?skuIds=J_954086&type=1",f=null,i=!1,u=!0,e="Test Block",t=!1;r=[{title:"钻石",sum:200},{title:"铂金",sum:100},{title:"金",sum:50},{title:"银",sum:20},{title:"铜",sum:10},{title:"惊喜大礼金",sum:300},{title:"钻石",sum:150},{title:"铂金",sum:55},{title:"金",sum:25},{title:"银",sum:15},{title:"铜",sum:5},{title:"惊喜大礼银",sum:.1}],n=$.actionWheel({awards:r,cycles:5,rotateTime:6e3}),n.onDrawing=function(t){if(t.preventDefault(),!i){if(!u){alertTip("您今天已经参与游戏次数超过限定次数了，请明天再来！");return}i=!0,ctx.postTokenEx({url:"/Activity/GetZhuanPanAmount",data:{},beforeSend:function(){},complete:function(){i=!1},success:function(t){if(t.Ok==0)n.mainPanelClose(),alertTip("失败:"+t.Tip);else{if(t.Ok==2&&(alertTip('当天只能重摇一次，请点击"和气带走"按钮领取您上一次摇出的奖金!'),$("#action-wheel-draw").is(":visible")))return!1;var i=t.Tip.split("|"),u=i[0],r=i[1];n.drawAnimate(r,u)}},error:function(){alertTip("您请求的地址错误或不可用，请稍后再试！")}})}},n.onReplayClick=function(t){t.preventDefault(),n.drawPanelClose(),n.draw()},n.onConfirmClick=function(i){if(i.preventDefault(),t)return!1;n.drawPanelClose(),t=!0,ctx.postTokenEx({url:"/Activity/CheckZhuanPanAmount",data:{},beforeSend:function(){},complete:function(){t=!1},success:function(t){t.Ok==0?(n.mainPanelClose(),alertTip("领取失败:"+t.Tip)):(alertTip("恭喜您，奖金已经收入囊中!"),n.mainPanelClose())},error:function(){alertTip("您请求的地址错误或不可用，请稍后再试！")}})}}),MemberTransfer=[],MemberTransfer.PreLoginName="",MemberTransfer.GamePoint=0,MemberTransfer.IsTransferSubmiting=!1,MemberTransfer.init_MemberTransfer=function(){MemberTransfer.initMemberBaseControl();var n=MemberTransfer.GamePoint.toFixedNum(3);$("#spanGamePoint").html("&yen; "+n+" 元"),$("#spanGamePoint2").html(n),$(".tpui-radio").change(function(){var n=$("input:radio[name=TransferType]:checked").val();n==0?$("#divReceiverUserNameRow,#divTransferModeRow").hide():$("#divReceiverUserNameRow,#divTransferModeRow").show()}),$("#btnTransferConfirm").unbind("click").bind("click",function(){var r=$("input:radio[name=TransferType]:checked").val(),u=$("input:radio[name=TransferMode]:checked").val(),n="",i,t;if(r==0){if(n=MemberTransfer.PreLoginName,!n)return alertTip("您没有直接上级无法转账","转账"),!1}else if(n=$("#txtReceiverUserName").val(),!n)return alertTip("请先填写收账用户名","转账"),!1;if($("#spanReceiverUserName").html(n),$("#spanReceiverUserName").attr("TransferType",r),$("#spanReceiverUserName").attr("TransferMode",u),$("#spanReceiverUserName").attr("ReceiverUserName",n),$("#spanReceiverUserName2").html(n),$("#txtTransferAmount").val()<=0)return alertTip("请先填写转账金额","转账"),!1;i=parseFloat($("#txtTransferAmount").val()).toFixedNum(3),$("#spanTransferAmount").html(i+"元"),$("#spanTransferAmount").attr("TransferAmount",i),t=$("#txtTransferMark").val(),t&&t.length>26?$("#spanTransferMark").html(t.substring(0,25)+"..."):$("#spanTransferMark").html(t),$("#spanTransferMark").attr("Mark",t),$("#txtFundPassword").val(""),$("#txtVerCode").val(""),$("#transfer-confirm").tpuiDialog("_open")}),$("#btnTransferSubmit").unbind("click").bind("click",function(){var i;if(MemberTransfer.IsTransferSubmiting)return alert("正在处理中，请稍等..."),!1;var u=$("#spanReceiverUserName").attr("TransferType"),f=$("#spanReceiverUserName").attr("TransferMode"),e=$("#spanReceiverUserName").attr("ReceiverUserName"),o=$("#spanTransferAmount").attr("TransferAmount"),n=$("#txtFundPassword").val(),t=$("#txtVerCode").val(),r=$("#spanTransferMark").attr("Mark");if(!n)return alertTip("请先输入资金密码","确认转账"),!1;if(!t)return alertTip("请先输入手机安全中心验证码","确认转账"),!1;i=[u,e,o,n,t,r,f],ctx.postTokenEx({url:"/Member/SubmitTransferAccount",data:EnCryptJsonParams(i),beforeSend:function(){MemberTransfer.IsTransferSubmiting=!0,$("#btnTransferSubmit").css("cursor","wait"),alertTip("正在处理中，请稍等...")},success:function(n){n.Success?(alertTip(n.Message),$("#transfer-confirm").tpuiDialog("_close"),home_hash_changed("MemberTransfer"),RefreshUserAgPoint()):alertTip(n.Message?n.Message:"转账失败，请稍后再试"),MemberTransfer.IsTransferSubmiting=!1},error:function(){MemberTransfer.IsTransferSubmiting=!1,alertTip("转帐失败，请稍后再试")},complete:function(){MemberTransfer.IsTransferSubmiting=!1,$("#btnTransferSubmit").css("cursor","pointer")}})})},MemberTransfer.init_MemberTransferDetail=function(n){MemberTransfer.initMemberBaseControl(),$(".GetDataByPageIndex").bind("click",function(){var i=parseInt($(this).attr("page_index"))+parseInt($(this).attr("page_change")),t;if(n=="0"&&$(this).text().trim().indexOf("最后页")>=0)return alertTip("当前已经是最后一页!"),!1;if(i<1&&$(this).text().trim().indexOf("查询")==-1)return alertTip("当前已经是第一页!"),!1;if(n=="0"&&$(this).text().trim().indexOf("下一页")>=0)return alertTip("当前已经是最后一页!"),!1;t=[i,$("#BeginDate").val(),$("#EndDate").val(),$("#transferType").val(),$("#transferMode").val(),$("#userNameId").val().trim()],GetPartHtml("/Member/MemberTransferDetail",t)})},MemberTransfer.initMemberBaseControl=function(){var t=$(".data-table-option"),r=$(".table"),u=$(".tab-base"),n=$(".forms-table"),i=$(".kc-calendar");n.find(".tpui-text").tpuiText(),n.find(".tpui-radio").tpuiRadio(),n.find(".tpui-select").tpuiSelect(),n.find(".tpui-button").tpuiButton(),t.find(".tpui-text").tpuiText(),t.find(".tpui-button").tpuiButton(),t.find(".tpui-select").tpuiSelect(),r.find(".tpui-checkbox").tpuiCheckbox(),i.cxCalendar({type:"YYYY-MM-DD"}),$("#txtTransferAmount").tpuiNumber(),$("#transfer-confirm").tpuiDialog({pushTo:"#tmpDialogWrap",width:520,scrollLock:!0,onClose:function(){$("#spanReceiverUserName").html(""),$("#spanReceiverUserName2").html(""),$("#spanTransferAmount").html("0元"),$("#txtPassword").val(""),$("#txtVerCode").val("")}})}